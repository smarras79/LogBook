/*! For license information please see main.b9d6f1ba.js.LICENSE.txt */
(()=>{var e={43(e,t,n){"use strict";e.exports=n(202)},153(e,t,n){"use strict";var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},202(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,g(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,k={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,i)&&!C.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:k.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+_(l,0):o,w(a)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),I(a,t,i,"",function(e){return e})):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var u=o+_(s=e[c],c);l+=I(s,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=I(s=s.value,t,i,u=o+_(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function O(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},P={transition:null},L={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:P,ReactCurrentOwner:k};function j(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:O,forEach:function(e,t,n){O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=j,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=k.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=j,t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.3.1"},234(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(m=!1,x(e),!g)if(null!==r(c))g=!0,P(S);else{var t=r(u);null!==t&&L(w,t.startTime-e)}}function S(e,n){g=!1,m&&(m=!1,v(T),T=-1),p=!0;var o=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),x(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&L(w,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,C=!1,E=null,T=-1,A=5,_=-1;function I(){return!(t.unstable_now()-_<A)}function O(){if(null!==E){var e=t.unstable_now();_=e;var n=!0;try{n=E(!0,e)}finally{n?k():(C=!1,E=null)}}else C=!1}if("function"===typeof b)k=function(){b(O)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,N=R.port2;R.port1.onmessage=O,k=function(){N.postMessage(null)}}else k=function(){y(O,0)};function P(e){E=e,C||(C=!0,k())}function L(e,n){T=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,P(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(m?(v(T),T=-1):m=!0,L(w,o-a))):(e.sortIndex=s,n(c,e),g||p||(g=!0,P(S))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391(e,t,n){"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579(e,t,n){"use strict";e.exports=n(153)},730(e,t,n){"use strict";var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),A=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var D,M=Object.assign;function F(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case S:return"Portal";case E:return"Profiler";case C:return"StrictMode";case I:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,ke=null,Ce=null;function Ee(e){if(e=bi(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=wi(t),Se(e.stateNode,e.type,t))}}function Te(e){ke?Ce?Ce.push(e):Ce=[e]:ke=e}function Ae(){if(ke){var e=ke,t=Ce;if(Ce=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function _e(e,t){return e(t)}function Ie(){}var Oe=!1;function Re(e,t,n){if(Oe)return e(t,n);Oe=!0;try{return _e(e,t,n)}finally{Oe=!1,(null!==ke||null!==Ce)&&(Ie(),Ae())}}function Ne(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Pe=!1;if(u)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ue){Pe=!1}function je(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var De=!1,Me=null,Fe=!1,ze=null,Ue={onError:function(e){De=!0,Me=e}};function Be(e,t,n,r,i,o,a,s,l){De=!1,Me=null,je.apply(Ue,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(o(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=dt(s):0!==(o&=a)&&(r=dt(o))}else 0!==(a=n&~i)?r=dt(a):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,kt,Ct,Et,Tt=!1,At=[],_t=null,It=null,Ot=null,Rt=new Map,Nt=new Map,Pt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Dt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Et(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Tt=!1,null!==_t&&Ft(_t)&&(_t=null),null!==It&&Ft(It)&&(It=null),null!==Ot&&Ft(Ot)&&(Ot=null),Rt.forEach(zt),Nt.forEach(zt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Vt(e){function t(t){return Bt(t,e)}if(0<At.length){Bt(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&Bt(_t,e),null!==It&&Bt(It,e),null!==Ot&&Bt(Ot,e),Rt.forEach(t),Nt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var Wt=x.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function Kt(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function Gt(e,t,n,r){if(Ht){var i=Jt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),jt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return _t=Dt(_t,e,t,n,r,i),!0;case"dragenter":return It=Dt(It,e,t,n,r,i),!0;case"mouseover":return Ot=Dt(Ot,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Rt.set(o,Dt(Rt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Nt.set(o,Dt(Nt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(jt(e,r),4&t&&-1<Lt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&wt(o),null===(o=Jt(e,t,n,r))&&Hr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Jt(e,t,n,r){if(Qt=null,null!==(e=vi(e=we(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=M({},cn,{view:0,detail:0}),hn=on(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),gn=on(M({},fn,{dataTransfer:0})),mn=on(M({},dn,{relatedTarget:0})),yn=on(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),xn=on(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Cn}var Tn=M({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=on(Tn),_n=on(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=on(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),On=on(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=on(Rn),Pn=[9,13,27,32],Ln=u&&"CompositionEvent"in window,jn=null;u&&"documentMode"in document&&(jn=document.documentMode);var Dn=u&&"TextEvent"in window&&!jn,Mn=u&&(!Ln||jn&&8<jn&&11>=jn),Fn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function qn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Fr(e,0)}function Jn(e){if(G(xi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Xn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Jn(Gn)){var t=[];qn(t,Gn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Gn)}function or(e,t){if("click"===e)return Jn(t)}function ar(e,t){if("input"===e||"change"===e)return Jn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Cr={};function Er(e){if(kr[e])return kr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return kr[e]=n[t];return e}u&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Tr=Er("animationend"),Ar=Er("animationiteration"),_r=Er("animationstart"),Ir=Er("transitionend"),Or=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Or.set(e,t),l(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Lr=Rr[Pr];Nr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Nr(Tr,"onAnimationEnd"),Nr(Ar,"onAnimationIteration"),Nr(_r,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,c){if(Be.apply(this,arguments),De){if(!De)throw Error(o(198));var u=Me;De=!1,Me=null,Fe||(Fe=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,s,c),o=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Br]){e[Br]=!0,a.forEach(function(t){"selectionchange"!==t&&(Dr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Ur("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Yt(t)){case 1:var i=qt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=vi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Re(function(){var r=o,i=we(n),a=[];e:{var s=Or.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Tr:case Ar:case _r:l=yn;break;case Ir:l=On;break;case"scroll":l=hn;break;case"wheel":l=Nn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=_n}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Ne(p,h))&&u.push(qr(p,g,f)))),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=_n,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:xi(l),f=null==c?s:xi(c),(s=new u(g,p+"leave",l,n,i)).target=d,s.relatedTarget=f,g=null,vi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,g=h;g;g=Gr(g))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Qr(a,s,l,u,!1),null!==c&&null!==d&&Qr(a,d,c,u,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Yn;else if(Hn(s))if(Xn)m=ar;else{m=ir;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=or);switch(m&&(m=m(e,r))?qn(a,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?xi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(a,n,i)}var v;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(v=en()):($t="value"in(Xt=i)?Xt.value:Xt.textContent,Vn=!0)),0<(y=Kr(r,b)).length&&(b=new xn(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Bn(n))&&(b.data=v))),(v=Dn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Ln&&Un(e,t)?(e=en(),Zt=$t=Xt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Fr(a,t)})}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ne(e,n))&&r.unshift(qr(e,o,i)),null!=(o=Ne(e,t))&&r.push(qr(e,o,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Ne(n,o))&&a.unshift(qr(n,l,s)):i||null!=(l=Ne(n,o))&&a.push(qr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Jr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Yr,"")}function $r(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,gi="__reactEvents$"+di,mi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wi(e){return e[fi]||null}var Si=[],ki=-1;function Ci(e){return{current:e}}function Ei(e){0>ki||(e.current=Si[ki],Si[ki]=null,ki--)}function Ti(e,t){ki++,Si[ki]=e.current,e.current=t}var Ai={},_i=Ci(Ai),Ii=Ci(!1),Oi=Ai;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ai;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ni(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ei(Ii),Ei(_i)}function Li(e,t,n){if(_i.current!==Ai)throw Error(o(168));Ti(_i,t),Ti(Ii,n)}function ji(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,W(e)||"Unknown",i));return M({},n,r)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ai,Oi=_i.current,Ti(_i,e),Ti(Ii,Ii.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=ji(e,t,Oi),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ii),Ei(_i),Ti(_i,e)):Ei(Ii),Ti(Ii,n)}var Fi=null,zi=!1,Ui=!1;function Bi(e){null===Fi?Fi=[e]:Fi.push(e)}function Vi(){if(!Ui&&null!==Fi){Ui=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,zi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Ze,Vi),i}finally{bt=t,Ui=!1}}return null}var Wi=[],Hi=0,qi=null,Ki=0,Gi=[],Qi=0,Ji=null,Yi=1,Xi="";function $i(e,t){Wi[Hi++]=Ki,Wi[Hi++]=qi,qi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Yi,Gi[Qi++]=Xi,Gi[Qi++]=Ji,Ji=e;var r=Yi;e=Xi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Yi=1<<32-at(t)+i|n<<i|r,Xi=o+e}else Yi=1<<o|n<<i|r,Xi=e}function eo(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function to(e){for(;e===qi;)qi=Wi[--Hi],Wi[Hi]=null,Ki=Wi[--Hi],Wi[Hi]=null;for(;e===Ji;)Ji=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null,Yi=Gi[--Qi],Gi[Qi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)ao(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function go(e){null===oo?oo=[e]:oo.push(e)}var mo=x.ReactCurrentBatchConfig;function yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function vo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Dc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===N&&bo(o)===t.type)?((r=i(t,n.props)).ref=yo(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=yo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Dc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=yo(e,null,t),n.return=e,n;case S:return(t=Mc(t,e.mode,n)).return=e,t;case N:return h(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=Lc(t,e.mode,n,null)).return=e,t;vo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case N:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||j(n))return null!==i?null:d(e,t,n,r,null);vo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case N:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||j(r))return d(t,e=e.get(n)||null,r,i,null);vo(t,r)}return null}function g(i,o,s,l){for(var c=null,u=null,d=o,g=o=0,m=null;null!==d&&g<s.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=f(i,d,s[g],l);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(i,d),o=a(y,o,g),null===u?c=y:u.sibling=y,u=y,d=m}if(g===s.length)return n(i,d),io&&$i(i,g),c;if(null===d){for(;g<s.length;g++)null!==(d=h(i,s[g],l))&&(o=a(d,o,g),null===u?c=d:u.sibling=d,u=d);return io&&$i(i,g),c}for(d=r(i,d);g<s.length;g++)null!==(m=p(d,i,g,s[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),o=a(m,o,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(i,e)}),io&&$i(i,g),c}function m(i,s,l,c){var u=j(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,g=s,m=s=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(i,g,v.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(i,g),s=a(b,s,m),null===d?u=b:d.sibling=b,d=b,g=y}if(v.done)return n(i,g),io&&$i(i,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=h(i,v.value,c))&&(s=a(v,s,m),null===d?u=v:d.sibling=v,d=v);return io&&$i(i,m),u}for(g=r(i,g);!v.done;m++,v=l.next())null!==(v=p(g,i,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),s=a(v,s,m),null===d?u=v:d.sibling=v,d=v);return e&&g.forEach(function(e){return t(i,e)}),io&&$i(i,m),u}return function e(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(r,u.sibling),(o=i(u,a.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===N&&bo(c)===u.type){n(r,u.sibling),(o=i(u,a.props)).ref=yo(r,u,a),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===k?((o=Lc(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Pc(a.type,a.key,a.props,null,r.mode,l)).ref=yo(r,o,a),l.return=r,r=l)}return s(r);case S:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Mc(a,r.mode,l)).return=r,r=o}return s(r);case N:return e(r,o,(u=a._init)(a._payload),l)}if(te(a))return g(r,o,a,l);if(j(a))return m(r,o,a,l);vo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Dc(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var wo=xo(!0),So=xo(!1),ko=Ci(null),Co=null,Eo=null,To=null;function Ao(){To=Eo=Co=null}function _o(e){var t=ko.current;Ei(ko),e._currentValue=t}function Io(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Oo(e,t){Co=e,To=Eo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ro(e){var t=e._currentValue;if(To!==e)if(e={context:e,memoizedValue:t,next:null},null===Eo){if(null===Co)throw Error(o(308));Eo=e,Co.dependencies={lanes:0,firstContext:e}}else Eo=Eo.next=e;return t}var No=null;function Po(e){null===No?No=[e]:No.push(e)}function Lo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Po(t)):(n.next=i.next,i.next=n),t.interleaved=n,jo(e,r)}function jo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Do=!1;function Mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Uo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,jo(e,n)}return null===(i=r.interleaved)?(t.next=t,Po(r)):(t.next=i.next,i.next=t),r.interleaved=t,jo(e,n)}function Bo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Vo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wo(e,t,n,r){var i=e.updateQueue;Do=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(a=0,u=c=l=null,s=o;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(h=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Do=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);jl|=a,e.lanes=a,e.memoizedState=d}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var qo={},Ko=Ci(qo),Go=Ci(qo),Qo=Ci(qo);function Jo(e){if(e===qo)throw Error(o(174));return e}function Yo(e,t){switch(Ti(Qo,t),Ti(Go,e),Ti(Ko,qo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Ko),Ti(Ko,t)}function Xo(){Ei(Ko),Ei(Go),Ei(Qo)}function $o(e){Jo(Qo.current);var t=Jo(Ko.current),n=le(t,e.type);t!==n&&(Ti(Go,e),Ti(Ko,n))}function Zo(e){Go.current===e&&(Ei(Ko),Ei(Go))}var ea=Ci(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ia=x.ReactCurrentDispatcher,oa=x.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,da=!1,ha=0,fa=0;function pa(){throw Error(o(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,i,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Za:es,e=n(r,i),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(o(301));a+=1,ca=la=null,t.updateQueue=null,ia.current=ts,e=n(r,i)}while(da)}if(ia.current=$a,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,t)throw Error(o(300));return e}function ya(){var e=0!==ha;return ha=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function ba(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(o(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function xa(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=la,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,sa.lanes|=d,jl|=d}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,sa.lanes|=a,jl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Sa(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ka(){}function Ca(e,t){var n=sa,r=ba(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,bs=!0),r=r.queue,Da(Aa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Ra(9,Ta.bind(null,n,r,i,t),void 0,null),null===_l)throw Error(o(349));0!==(30&aa)||Ea(n,t,i)}return i}function Ea(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ta(e,t,n,r){t.value=n,t.getSnapshot=r,_a(t)&&Ia(e)}function Aa(e,t,n){return n(function(){_a(t)&&Ia(e)})}function _a(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ia(e){var t=jo(e,1);null!==t&&tc(t,e,1,-1)}function Oa(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Qa.bind(null,sa,e),[t.memoizedState,e]}function Ra(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Na(){return ba().memoizedState}function Pa(e,t,n,r){var i=va();sa.flags|=e,i.memoizedState=Ra(1|t,n,void 0,void 0===r?null:r)}function La(e,t,n,r){var i=ba();r=void 0===r?null:r;var o=void 0;if(null!==la){var a=la.memoizedState;if(o=a.destroy,null!==r&&ga(r,a.deps))return void(i.memoizedState=Ra(t,n,o,r))}sa.flags|=e,i.memoizedState=Ra(1|t,n,o,r)}function ja(e,t){return Pa(8390656,8,e,t)}function Da(e,t){return La(2048,8,e,t)}function Ma(e,t){return La(4,2,e,t)}function Fa(e,t){return La(4,4,e,t)}function za(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,La(4,4,za.bind(null,t,e),n)}function Ba(){}function Va(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wa(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=gt(),sa.lanes|=n,jl|=n,e.baseState=!0),t)}function qa(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=oa.transition;oa.transition={};try{e(!1),t()}finally{bt=n,oa.transition=r}}function Ka(){return ba().memoizedState}function Ga(e,t,n){var r=ec(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ja(e))Ya(t,n);else if(null!==(n=Lo(e,t,n,r))){tc(n,e,r,Zl()),Xa(n,t,r)}}function Qa(e,t,n){var r=ec(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ja(e))Ya(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(i.next=i,Po(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Lo(e,t,i,r))&&(tc(n,e,r,i=Zl()),Xa(n,t,r))}}function Ja(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ya(e,t){da=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var $a={readContext:Ro,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Za={readContext:Ro,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ro,useEffect:ja,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4194308,4,za.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pa(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ga.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Oa,useDebugValue:Ba,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Oa(!1),t=e[0];return e=qa.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,i=va();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===_l)throw Error(o(349));0!==(30&aa)||Ea(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,ja(Aa.bind(null,r,a,e),[e]),r.flags|=2048,Ra(9,Ta.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=_l.identifierPrefix;if(io){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-at(Yi)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ro,useCallback:Va,useContext:Ro,useEffect:Da,useImperativeHandle:Ua,useInsertionEffect:Ma,useLayoutEffect:Fa,useMemo:Wa,useReducer:wa,useRef:Na,useState:function(){return wa(xa)},useDebugValue:Ba,useDeferredValue:function(e){return Ha(ba(),la.memoizedState,e)},useTransition:function(){return[wa(xa)[0],ba().memoizedState]},useMutableSource:ka,useSyncExternalStore:Ca,useId:Ka,unstable_isNewReconciler:!1},ts={readContext:Ro,useCallback:Va,useContext:Ro,useEffect:Da,useImperativeHandle:Ua,useInsertionEffect:Ma,useLayoutEffect:Fa,useMemo:Wa,useReducer:Sa,useRef:Na,useState:function(){return Sa(xa)},useDebugValue:Ba,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:Ha(t,la.memoizedState,e)},useTransition:function(){return[Sa(xa)[0],ba().memoizedState]},useMutableSource:ka,useSyncExternalStore:Ca,useId:Ka,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zl(),i=ec(e),o=zo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Uo(e,o,i))&&(tc(t,e,i,r),Bo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zl(),i=ec(e),o=zo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Uo(e,o,i))&&(tc(t,e,i,r),Bo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zl(),r=ec(e),i=zo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Uo(e,i,r))&&(tc(t,e,r,n),Bo(t,e,r))}};function os(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function as(e,t,n){var r=!1,i=Ai,o=t.contextType;return"object"===typeof o&&null!==o?o=Ro(o):(i=Ni(t)?Oi:_i.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ai),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Mo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Ro(o):(o=Ni(t)?Oi:_i.current,i.context=Ri(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(rs(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),Wo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=zo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Hl=r),ds(0,t)},n}function ps(e,t,n){(n=zo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zo(-1,1)).tag=2,Uo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var vs=x.ReactCurrentOwner,bs=!1;function xs(e,t,n,r){t.child=null===e?So(t,null,n,r):wo(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var o=t.ref;return Oo(t,i),r=ma(e,t,n,r,o,i),n=ya(),null===e||bs?(io&&n&&eo(t),t.flags|=1,xs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Ss(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Rc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,ks(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Nc(o,r)).ref=t.ref,e.return=t,t.child=e}function ks(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ts(e,t,n,r,i)}function Cs(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Nl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Nl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ti(Nl,Rl),Rl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ti(Nl,Rl),Rl|=r;return xs(e,t,i,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var o=Ni(n)?Oi:_i.current;return o=Ri(t,o),Oo(t,i),n=ma(e,t,n,r,o,i),r=ya(),null===e||bs?(io&&r&&eo(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function As(e,t,n,r,i){if(Ni(n)){var o=!0;Di(t)}else o=!1;if(Oo(t,i),null===t.stateNode)Vs(e,t),as(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ro(c):c=Ri(t,c=Ni(n)?Oi:_i.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,a,r,c),Do=!1;var h=t.memoizedState;a.state=h,Wo(t,r,a,i),l=t.memoizedState,s!==r||h!==l||Ii.current||Do?("function"===typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=Do||os(t,n,s,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Fo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ro(l):l=Ri(t,l=Ni(n)?Oi:_i.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&ss(t,a,r,l),Do=!1,h=t.memoizedState,a.state=h,Wo(t,r,a,i);var p=t.memoizedState;s!==d||h!==p||Ii.current||Do?("function"===typeof f&&(rs(t,n,f,r),p=t.memoizedState),(c=Do||os(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return _s(e,t,n,r,o,i)}function _s(e,t,n,r,i,o){Es(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Mi(t,n,!1),Ws(e,t,o);r=t.stateNode,vs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=wo(t,e.child,null,o),t.child=wo(t,null,s,o)):xs(e,t,s,o),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Is(e){var t=e.stateNode;t.pendingContext?Li(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Li(0,t.context,!1),Yo(e,t.containerInfo)}function Os(e,t,n,r,i){return po(),go(i),t.flags|=256,xs(e,t,n,r),t.child}var Rs,Ns,Ps,Ls={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ds(e,t,n){var r,i=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ti(ea,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=jc(l,i,0,null),e=Lc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=Ls,e):Ms(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Fs(e,t,s,r=us(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=jc({mode:"visible",children:r.children},i,0,null),(a=Lc(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&wo(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Ls,a);if(0===(1&t.mode))return Fs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fs(e,t,s,r=us(a=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=_l)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,jo(e,i),tc(r,e,i,-1))}return pc(),Fs(e,t,s,r=us(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Gi[Qi++]=Yi,Gi[Qi++]=Xi,Gi[Qi++]=Ji,Yi=e.id,Xi=e.overflow,Ji=t),t=Ms(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Nc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Nc(r,s):(s=Lc(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?js(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Nc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ms(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fs(e,t,n,r){return null!==r&&go(r),wo(t,e.child,null,n),(e=Ms(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Io(e.return,t,n)}function Us(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Bs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Us(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Us(t,!0,n,null,o);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Nc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hs(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ks(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Ni(t.type)&&Pi(),qs(t),null;case 3:return r=t.stateNode,Xo(),Ei(Ii),Ei(_i),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(oc(oo),oo=null))),qs(t),null;case 5:Zo(t);var i=Jo(Qo.current);if(n=t.type,null!==e&&null!=t.stateNode)Ns(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return qs(t),null}if(e=Jo(Ko.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<jr.length;i++)zr(jr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Y(r,a),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},zr("invalid",r);break;case"textarea":ie(r,a),zr("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":K(r),Z(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Rs(e,t),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<jr.length;i++)zr(jr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":Y(e,r),i=J(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(a in ve(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&zr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Ps(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Jo(Qo.current),Jo(Ko.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return qs(t),null;case 13:if(Ei(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),a=!1}else null!==oo&&(oc(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Pl&&(Pl=3):pc())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return Xo(),null===e&&Vr(t.stateNode.containerInfo),qs(t),null;case 10:return _o(t.type._context),qs(t),null;case 19:if(Ei(ea),null===(a=t.memoizedState))return qs(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Hs(a,!1);else{if(0!==Pl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Hs(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Bl&&(t.flags|=128,r=!0,Hs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return qs(t),null}else 2*Xe()-a.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Hs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=ea.current,Ti(ea,r?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Gs(e,t){switch(to(t),t.tag){case 1:return Ni(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xo(),Ei(Ii),Ei(_i),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Ei(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(ea),null;case 4:return Xo(),null;case 10:return _o(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ns=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Jo(Ko.current);var o,a=null;switch(n){case"input":i=J(e,i),r=J(e,r),a=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ps=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qs=!1,Js=!1,Ys="function"===typeof WeakSet?WeakSet:Set,Xs=null;function $s(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function Zs(e,t,n){try{n()}catch(r){kc(e,t,r)}}var el=!1;function tl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&Zs(t,n,o)}i=i.next}while(i!==r)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[gi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function sl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(sl(e,t,n),e=e.sibling;null!==e;)sl(e,t,n),e=e.sibling}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}var cl=null,ul=!1;function dl(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Js||$s(n,t);case 6:var r=cl,i=ul;cl=null,dl(e,t,n),ul=i,null!==(cl=r)&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Vt(e)):li(cl,n.stateNode));break;case 4:r=cl,i=ul,cl=n.stateNode.containerInfo,ul=!0,dl(e,t,n),cl=r,ul=i;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&Zs(n,t,a),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Js&&($s(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){kc(n,t,s)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,dl(e,t,n),Js=r):dl(e,t,n);break;default:dl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ys),t.forEach(function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,ul=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===cl)throw Error(o(160));hl(a,s,i),cl=null,ul=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){kc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),ml(e),4&r){try{tl(3,e,e.return),nl(3,e)}catch(m){kc(e,e.return,m)}try{tl(5,e,e.return)}catch(m){kc(e,e.return,m)}}break;case 1:pl(t,e),ml(e),512&r&&null!==n&&$s(n,n.return);break;case 5:if(pl(t,e),ml(e),512&r&&null!==n&&$s(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){kc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(i,a),be(l,s);var u=be(l,a);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?me(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":$(i,a);break;case"textarea":oe(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(m){kc(e,e.return,m)}}break;case 6:if(pl(t,e),ml(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){kc(e,e.return,m)}}break;case 3:if(pl(t,e),ml(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(m){kc(e,e.return,m)}break;case 4:default:pl(t,e),ml(e);break;case 13:pl(t,e),ml(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Xe())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Js=(u=Js)||d,pl(t,e),Js=u):pl(t,e),ml(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xs=e,d=e.child;null!==d;){for(h=Xs=d;null!==Xs;){switch(p=(f=Xs).child,f.tag){case 0:case 11:case 14:case 15:tl(4,f,f.return);break;case 1:$s(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){kc(r,n,m)}}break;case 5:$s(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==p?(p.return=f,Xs=p):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",s))}catch(m){kc(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){kc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pl(t,e),ml(e),4&r&&fl(e);case 21:}}function ml(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ll(e,al(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;sl(e,al(e),a);break;default:throw Error(o(161))}}catch(s){kc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Xs=e,vl(e,t,n)}function vl(e,t,n){for(var r=0!==(1&e.mode);null!==Xs;){var i=Xs,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Qs;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Js;s=Qs;var c=Js;if(Qs=a,(Js=l)&&!c)for(Xs=i;null!==Xs;)l=(a=Xs).child,22===a.tag&&null!==a.memoizedState?wl(i):null!==l?(l.return=a,Xs=l):wl(i);for(;null!==o;)Xs=o,vl(o,t,n),o=o.sibling;Xs=i,Qs=s,Js=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Xs=o):bl(e)}}function bl(e){for(;null!==Xs;){var t=Xs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||nl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Js)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ho(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(o(163))}Js||512&t.flags&&rl(t)}catch(f){kc(t,t.return,f)}}if(t===e){Xs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xs=n;break}Xs=t.return}}function xl(e){for(;null!==Xs;){var t=Xs;if(t===e){Xs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xs=n;break}Xs=t.return}}function wl(e){for(;null!==Xs;){var t=Xs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nl(4,t)}catch(l){kc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){kc(t,i,l)}}var o=t.return;try{rl(t)}catch(l){kc(t,o,l)}break;case 5:var a=t.return;try{rl(t)}catch(l){kc(t,a,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Xs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xs=s;break}Xs=t.return}}var Sl,kl=Math.ceil,Cl=x.ReactCurrentDispatcher,El=x.ReactCurrentOwner,Tl=x.ReactCurrentBatchConfig,Al=0,_l=null,Il=null,Ol=0,Rl=0,Nl=Ci(0),Pl=0,Ll=null,jl=0,Dl=0,Ml=0,Fl=null,zl=null,Ul=0,Bl=1/0,Vl=null,Wl=!1,Hl=null,ql=null,Kl=!1,Gl=null,Ql=0,Jl=0,Yl=null,Xl=-1,$l=0;function Zl(){return 0!==(6&Al)?Xe():-1!==Xl?Xl:Xl=Xe()}function ec(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Ol?Ol&-Ol:null!==mo.transition?(0===$l&&($l=gt()),$l):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function tc(e,t,n,r){if(50<Jl)throw Jl=0,Yl=null,Error(o(185));yt(e,n,r),0!==(2&Al)&&e===_l||(e===_l&&(0===(2&Al)&&(Dl|=n),4===Pl&&ac(e,Ol)),nc(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Bl=Xe()+500,zi&&Vi()))}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=ft(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ht(e,e===_l?Ol:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){zi=!0,Bi(e)}(sc.bind(null,e)):Bi(sc.bind(null,e)),ai(function(){0===(6&Al)&&Vi()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=_c(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Xl=-1,$l=0,0!==(6&Al))throw Error(o(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ht(e,e===_l?Ol:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Al;Al|=2;var a=fc();for(_l===e&&Ol===t||(Vl=null,Bl=Xe()+500,dc(e,t));;)try{yc();break}catch(l){hc(e,l)}Ao(),Cl.current=a,Al=i,null!==Il?t=0:(_l=null,Ol=0,t=Pl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ic(e,i))),1===t)throw n=Ll,dc(e,0),ac(e,r),nc(e,Xe()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=pt(e))&&(r=a,t=ic(e,a))),1===t))throw n=Ll,dc(e,0),ac(e,r),nc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:xc(e,zl,Vl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Ul+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Zl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,zl,Vl),t);break}xc(e,zl,Vl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,zl,Vl),r);break}xc(e,zl,Vl);break;default:throw Error(o(329))}}}return nc(e,Xe()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zl,zl=n,null!==t&&oc(t)),e}function oc(e){null===zl?zl=e:zl.push.apply(zl,e)}function ac(e,t){for(t&=~Ml,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Al))throw Error(o(327));wc();var t=ht(e,0);if(0===(1&t))return nc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Ll,dc(e,0),ac(e,t),nc(e,Xe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,zl,Vl),nc(e,Xe()),null}function lc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Bl=Xe()+500,zi&&Vi())}}function cc(e){null!==Gl&&0===Gl.tag&&0===(6&Al)&&wc();var t=Al;Al|=1;var n=Tl.transition,r=bt;try{if(Tl.transition=null,bt=1,e)return e()}finally{bt=r,Tl.transition=n,0===(6&(Al=t))&&Vi()}}function uc(){Rl=Nl.current,Ei(Nl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:Xo(),Ei(Ii),Ei(_i),ra();break;case 5:Zo(r);break;case 4:Xo();break;case 13:case 19:Ei(ea);break;case 10:_o(r.type._context);break;case 22:case 23:uc()}n=n.return}if(_l=e,Il=e=Nc(e.current,null),Ol=Rl=t,Pl=0,Ll=null,Ml=Dl=jl=0,zl=Fl=null,null!==No){for(t=0;t<No.length;t++)if(null!==(r=(n=No[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}No=null}return e}function hc(e,t){for(;;){var n=Il;try{if(Ao(),ia.current=$a,ua){for(var r=sa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=sa=null,da=!1,ha=0,El.current=null,null===n||null===n.return){Pl=1,Ll=t,Il=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Ol,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,ys(p,s,l,0,t),1&p.mode&&gs(a,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){gs(a,u,t),pc();break e}c=Error(o(426))}else if(io&&1&l.mode){var y=ms(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,l,0,t),go(cs(c,l));break e}}a=c=cs(c,l),4!==Pl&&(Pl=2),null===Fl?Fl=[a]:Fl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Vo(a,fs(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Vo(a,ps(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(x){t=x,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function fc(){var e=Cl.current;return Cl.current=$a,null===e?$a:e}function pc(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===_l||0===(268435455&jl)&&0===(268435455&Dl)||ac(_l,Ol)}function gc(e,t){var n=Al;Al|=2;var r=fc();for(_l===e&&Ol===t||(Vl=null,dc(e,t));;)try{mc();break}catch(i){hc(e,i)}if(Ao(),Al=n,Cl.current=r,null!==Il)throw Error(o(261));return _l=null,Ol=0,Pl}function mc(){for(;null!==Il;)vc(Il)}function yc(){for(;null!==Il&&!Je();)vc(Il)}function vc(e){var t=Sl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?bc(e):Il=t,El.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ks(n,t,Rl)))return void(Il=n)}else{if(null!==(n=Gs(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Pl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Pl&&(Pl=5)}function xc(e,t,n){var r=bt,i=Tl.transition;try{Tl.transition=null,bt=1,function(e,t,n,r){do{wc()}while(null!==Gl);if(0!==(6&Al))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===_l&&(Il=_l=null,Ol=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,_c(tt,function(){return wc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Tl.transition,Tl.transition=null;var s=bt;bt=1;var l=Al;Al|=4,El.current=null,function(e,t){if(ei=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==a||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=s),f===a&&++d===r&&(c=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Xs=t;null!==Xs;)if(e=(t=Xs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xs=e;else for(;null!==Xs;){t=Xs;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:ns(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(w){kc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Xs=e;break}Xs=t.return}g=el,el=!1}(e,n),gl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Ye(),Al=l,bt=s,Tl.transition=a}else e.current=n;if(Kl&&(Kl=!1,Gl=e,Ql=i),a=e.pendingLanes,0===a&&(ql=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Hl,Hl=null,e;0!==(1&Ql)&&0!==e.tag&&wc(),a=e.pendingLanes,0!==(1&a)?e===Yl?Jl++:(Jl=0,Yl=e):Jl=0,Vi()}(e,t,n,r)}finally{Tl.transition=i,bt=r}return null}function wc(){if(null!==Gl){var e=xt(Ql),t=Tl.transition,n=bt;try{if(Tl.transition=null,bt=16>e?16:e,null===Gl)var r=!1;else{if(e=Gl,Gl=null,Ql=0,0!==(6&Al))throw Error(o(331));var i=Al;for(Al|=4,Xs=e.current;null!==Xs;){var a=Xs,s=a.child;if(0!==(16&Xs.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xs=u;null!==Xs;){var d=Xs;switch(d.tag){case 0:case 11:case 15:tl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Xs=h;else for(;null!==Xs;){var f=(d=Xs).sibling,p=d.return;if(il(d),d===u){Xs=null;break}if(null!==f){f.return=p,Xs=f;break}Xs=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Xs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Xs=s;else e:for(;null!==Xs;){if(0!==(2048&(a=Xs).flags))switch(a.tag){case 0:case 11:case 15:tl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Xs=v;break e}Xs=a.return}}var b=e.current;for(Xs=b;null!==Xs;){var x=(s=Xs).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Xs=x;else e:for(s=b;null!==Xs;){if(0!==(2048&(l=Xs).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(S){kc(l,l.return,S)}if(l===s){Xs=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xs=w;break e}Xs=l.return}}if(Al=i,Vi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{bt=n,Tl.transition=t}}return!1}function Sc(e,t,n){e=Uo(e,t=fs(0,t=cs(n,t),1),1),t=Zl(),null!==e&&(yt(e,1,t),nc(e,t))}function kc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=Uo(t,e=ps(t,e=cs(n,e),1),1),e=Zl(),null!==t&&(yt(t,1,e),nc(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Zl(),e.pingedLanes|=e.suspendedLanes&n,_l===e&&(Ol&n)===n&&(4===Pl||3===Pl&&(130023424&Ol)===Ol&&500>Xe()-Ul?dc(e,0):Ml|=n),nc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=Zl();null!==(e=jo(e,t))&&(yt(e,t,n),nc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Ec(e,n)}function _c(e,t){return Ge(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Ic(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Rc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return Lc(n.children,i,a,t);case C:s=8,i|=8;break;case E:return(e=Oc(12,n,t,2|i)).elementType=E,e.lanes=a,e;case I:return(e=Oc(13,n,t,i)).elementType=I,e.lanes=a,e;case O:return(e=Oc(19,n,t,i)).elementType=O,e.lanes=a,e;case P:return jc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case A:s=9;break e;case _:s=11;break e;case R:s=14;break e;case N:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Oc(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Lc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Dc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function Mc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,o,a,s,l){return e=new Fc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Oc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mo(o),e}function Uc(e){if(!e)return Ai;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ni(n))return ji(e,n,t)}return t}function Bc(e,t,n,r,i,o,a,s,l){return(e=zc(n,r,!0,e,0,o,0,s,l)).context=Uc(null),n=e.current,(o=zo(r=Zl(),i=ec(n))).callback=void 0!==t&&null!==t?t:null,Uo(n,o,i),e.current.lanes=i,yt(e,i,r),nc(e,r),e}function Vc(e,t,n,r){var i=t.current,o=Zl(),a=ec(i);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Uo(i,t,a))&&(tc(e,i,a,o),Bo(e,i,a)),a}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Is(t),po();break;case 5:$o(t);break;case 1:Ni(t.type)&&Di(t);break;case 4:Yo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ko,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ds(e,t,n):(Ti(ea,1&ea.current),null!==(e=Ws(e,t,n))?e.sibling:null);Ti(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,n)}return Ws(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,io&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vs(e,t),e=t.pendingProps;var i=Ri(t,_i.current);Oo(t,n),i=ma(null,t,r,e,i,n);var a=ya();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ni(r)?(a=!0,Di(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Mo(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=_s(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),xs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===R)return 14}return 2}(r),e=ns(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=As(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,ns(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,As(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(Is(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Fo(e,t),Wo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Os(e,t,r,n,i=cs(Error(o(423)),t));break e}if(r!==i){t=Os(e,t,r,n,i=cs(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=So(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Ws(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return $o(t),null===e&&co(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Es(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return Ds(e,t,n);case 4:return Yo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wo(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ti(ko,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ii.current){t=Ws(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=zo(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Io(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Io(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Oo(t,n),r=r(i=Ro(i)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),Ss(e,t,r,i=ns(r.type,i),n);case 15:return ks(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),Vs(e,t),t.tag=1,Ni(r)?(e=!0,Di(t)):e=!1,Oo(t,n),as(t,r,i),ls(t,r,i,n),_s(null,t,r,!0,e,n);case 19:return Bs(e,t,n);case 22:return Cs(e,t,n)}throw Error(o(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function $c(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Wc(a);s.call(e)}}Vc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Wc(a);o.call(e)}}var a=Bc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=a,e[pi]=a.current,Vr(8===e.nodeType?e.parentNode:e),cc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wc(l);s.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pi]=l.current,Vr(8===e.nodeType?e.parentNode:e),cc(function(){Vc(t,l,n,r)}),l}(n,t,e,i,r);return Wc(a)}Qc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Vc(e,t,null,null)},Qc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc(function(){Vc(null,e,null,null)}),t[pi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),nc(t,Xe()),0===(6&Al)&&(Bl=Xe()+500,Vi()))}break;case 13:cc(function(){var t=jo(e,1);if(null!==t){var n=Zl();tc(t,e,1,n)}}),qc(e,1)}},St=function(e){if(13===e.tag){var t=jo(e,134217728);if(null!==t)tc(t,e,134217728,Zl());qc(e,134217728)}},kt=function(e){if(13===e.tag){var t=ec(e),n=jo(e,t);if(null!==n)tc(n,e,t,Zl());qc(e,t)}},Ct=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(o(90));G(r),$(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},_e=lc,Ie=cc;var Zc={usingClientEntryPoint:!1,Events:[bi,xi,wi,Te,Ae,lc]},eu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{it=nu.inject(tu),ot=nu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(o(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(o(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,a,s),e[pi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(o(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(o(40));return!!e._reactRootContainer&&(cc(function(){$c(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return $c(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},844(e){e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},853(e,t,n){"use strict";e.exports=n(234)},950(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".b23168a5.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="flightlog:";n.l=(r,i,o,a)=>{if(e[r])e[r].push(i);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/LogBook/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,o,[a,s,l]=r,c=0;if(a.some(t=>0!==e[t])){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkflightlog=self.webpackChunkflightlog||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(43);function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function u(e,n){if(n&&("object"==t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function h(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var y={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},v=new(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.init(t,n)}return a(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||y,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"===typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,m(m({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return(t=t||this.options).prefix=t.prefix||this.prefix,new e(this.logger,t)}}]),e}()),b=function(){function e(){r(this,e),this.observers={}}return a(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach(function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)}),this}},{key:"off",value:function(e,t){this.observers[e]&&(t?this.observers[e]=this.observers[e].filter(function(e){return e!==t}):delete this.observers[e])}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.observers[e]&&[].concat(this.observers[e]).forEach(function(e){e.apply(void 0,n)});this.observers["*"]&&[].concat(this.observers["*"]).forEach(function(t){t.apply(t,[e].concat(n))})}}]),e}();function x(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n}function w(e){return null==e?"":""+e}function S(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function i(){return!e||"string"===typeof e}for(var o="string"!==typeof t?[].concat(t):t.split(".");o.length>1;){if(i())return{};var a=r(o.shift());!e[a]&&n&&(e[a]=new n),e=Object.prototype.hasOwnProperty.call(e,a)?e[a]:{}}return i()?{}:{obj:e,k:r(o.shift())}}function k(e,t,n){var r=S(e,t,Object);r.obj[r.k]=n}function C(e,t){var n=S(e,t),r=n.obj,i=n.k;if(r)return r[i]}function E(e,t,n){for(var r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?"string"===typeof e[r]||e[r]instanceof String||"string"===typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):E(e[r],t[r],n):e[r]=t[r]);return e}function T(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var A={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function _(e){return"string"===typeof e?e.replace(/[&<>"'\/]/g,function(e){return A[e]}):e}var I="undefined"!==typeof window&&window.navigator&&"undefined"===typeof window.navigator.userAgentData&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,O=[" ",",","?","!",";"];function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(e){if(e[t])return e[t];for(var r=t.split(n),i=e,o=0;o<r.length;++o){if(!i)return;if("string"===typeof i[r[o]]&&o+1<r.length)return;if(void 0===i[r[o]]){for(var a=2,s=r.slice(o,o+a).join(n),l=i[s];void 0===l&&r.length>o+a;)a++,l=i[s=r.slice(o,o+a).join(n)];if(void 0===l)return;if(null===l)return null;if(t.endsWith(s)){if("string"===typeof l)return l;if(s&&"string"===typeof l[s])return l[s]}var c=r.slice(o+a).join(n);return c?R(l,c,n):void 0}i=i[r[o]]}return i}}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function L(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}var j=function(e){c(n,e);var t=L(n);function n(e){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return r(this,n),i=t.call(this),I&&b.call(s(i)),i.data=e||{},i.options=o,void 0===i.options.keySeparator&&(i.options.keySeparator="."),void 0===i.options.ignoreJSONStructure&&(i.options.ignoreJSONStructure=!0),i}return a(n,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure,a=[e,t];n&&"string"!==typeof n&&(a=a.concat(n)),n&&"string"===typeof n&&(a=a.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(a=e.split("."));var s=C(this.data,a);return s||!o||"string"!==typeof n?s:R(this.data&&this.data[e]&&this.data[e][t],n,i)}},{key:"addResource",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,a=[e,t];n&&(a=a.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(r=t,t=(a=e.split("."))[1]),this.addNamespaces(t),k(this.data,a,r),i.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!==typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[e,t];e.indexOf(".")>-1&&(r=n,n=t,t=(a=e.split("."))[1]),this.addNamespaces(t);var s=C(this.data,a)||{};r?E(s,n,i):s=P(P({},s),n),k(this.data,a,s),o.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?P(P({},{}),this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"hasLanguageSomeTranslations",value:function(e){var t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(function(e){return t[e]&&Object.keys(t[e]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),n}(b),D={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,i){var o=this;return e.forEach(function(e){o.processors[e]&&(t=o.processors[e].process(t,n,r,i))}),t}};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}var U={},B=function(e){c(i,e);var n=z(i);function i(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,i),t=n.call(this),I&&b.call(s(t)),function(e,t,n){e.forEach(function(e){t[e]&&(n[e]=t[e])})}(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,s(t)),t.options=o,void 0===t.options.keySeparator&&(t.options.keySeparator="."),t.logger=v.create("translator"),t}return a(i,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(void 0===e||null===e)return!1;var n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,i=t.ns||this.options.defaultNS||[],o=n&&e.indexOf(n)>-1,a=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!function(e,t,n){t=t||"",n=n||"";var r=O.filter(function(e){return t.indexOf(e)<0&&n.indexOf(e)<0});if(0===r.length)return!0;var i=new RegExp("(".concat(r.map(function(e){return"?"===e?"\\?":e}).join("|"),")")),o=!i.test(e);if(!o){var a=e.indexOf(n);a>0&&!i.test(e.substring(0,a))&&(o=!0)}return o}(e,n,r);if(o&&!a){var s=e.match(this.interpolator.nestingRegexp);if(s&&s.length>0)return{key:e,namespaces:i};var l=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(l[0])>-1)&&(i=l.shift()),e=l.join(r)}return"string"===typeof i&&(i=[i]),{key:e,namespaces:i}}},{key:"translate",value:function(e,n,r){var o=this;if("object"!==t(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),"object"===t(n)&&(n=F({},n)),n||(n={}),void 0===e||null===e)return"";Array.isArray(e)||(e=[String(e)]);var a=void 0!==n.returnDetails?n.returnDetails:this.options.returnDetails,s=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,l=this.extractFromKey(e[e.length-1],n),c=l.key,u=l.namespaces,d=u[u.length-1],h=n.lng||this.language,f=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h&&"cimode"===h.toLowerCase()){if(f){var p=n.nsSeparator||this.options.nsSeparator;return a?{res:"".concat(d).concat(p).concat(c),usedKey:c,exactUsedKey:c,usedLng:h,usedNS:d}:"".concat(d).concat(p).concat(c)}return a?{res:c,usedKey:c,exactUsedKey:c,usedLng:h,usedNS:d}:c}var g=this.resolve(e,n),m=g&&g.res,y=g&&g.usedKey||c,v=g&&g.exactUsedKey||c,b=Object.prototype.toString.apply(m),x=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject;if(w&&m&&("string"!==typeof m&&"boolean"!==typeof m&&"number"!==typeof m)&&["[object Number]","[object Function]","[object RegExp]"].indexOf(b)<0&&("string"!==typeof x||"[object Array]"!==b)){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var S=this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,m,F(F({},n),{},{ns:u})):"key '".concat(c," (").concat(this.language,")' returned an object instead of string.");return a?(g.res=S,g):S}if(s){var k="[object Array]"===b,C=k?[]:{},E=k?v:y;for(var T in m)if(Object.prototype.hasOwnProperty.call(m,T)){var A="".concat(E).concat(s).concat(T);C[T]=this.translate(A,F(F({},n),{joinArrays:!1,ns:u})),C[T]===A&&(C[T]=m[T])}m=C}}else if(w&&"string"===typeof x&&"[object Array]"===b)(m=m.join(x))&&(m=this.extendTranslation(m,e,n,r));else{var _=!1,I=!1,O=void 0!==n.count&&"string"!==typeof n.count,R=i.hasDefaultValue(n),N=O?this.pluralResolver.getSuffix(h,n.count,n):"",P=n["defaultValue".concat(N)]||n.defaultValue;!this.isValidLookup(m)&&R&&(_=!0,m=P),this.isValidLookup(m)||(I=!0,m=c);var L=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&I?void 0:m,j=R&&P!==m&&this.options.updateMissing;if(I||_||j){if(this.logger.log(j?"updateKey":"missingKey",h,d,c,j?P:m),s){var D=this.resolve(c,F(F({},n),{},{keySeparator:!1}));D&&D.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var M=[],z=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&z&&z[0])for(var U=0;U<z.length;U++)M.push(z[U]);else"all"===this.options.saveMissingTo?M=this.languageUtils.toResolveHierarchy(n.lng||this.language):M.push(n.lng||this.language);var B=function(e,t,r){var i=R&&r!==m?r:L;o.options.missingKeyHandler?o.options.missingKeyHandler(e,d,t,i,j,n):o.backendConnector&&o.backendConnector.saveMissing&&o.backendConnector.saveMissing(e,d,t,i,j,n),o.emit("missingKey",e,d,t,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&O?M.forEach(function(e){o.pluralResolver.getSuffixes(e,n).forEach(function(t){B([e],c+t,n["defaultValue".concat(t)]||P)})}):B(M,c,P))}m=this.extendTranslation(m,e,n,g,r),I&&m===c&&this.options.appendNamespaceToMissingKey&&(m="".concat(d,":").concat(c)),(I||_)&&this.options.parseMissingKeyHandler&&(m="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(d,":").concat(c):c,_?m:void 0):this.options.parseMissingKeyHandler(m))}return a?(g.res=m,g):m}},{key:"extendTranslation",value:function(e,t,n,r,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,F(F({},this.options.interpolation.defaultVariables),n),r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(F(F({},n),{interpolation:F(F({},this.options.interpolation),n.interpolation)}));var a,s="string"===typeof e&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(s){var l=e.match(this.interpolator.nestingRegexp);a=l&&l.length}var c=n.replace&&"string"!==typeof n.replace?n.replace:n;if(this.options.interpolation.defaultVariables&&(c=F(F({},this.options.interpolation.defaultVariables),c)),e=this.interpolator.interpolate(e,c,n.lng||this.language,n),s){var u=e.match(this.interpolator.nestingRegexp);a<(u&&u.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&r&&r.res&&(n.lng=r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i&&i[0]===r[0]&&!n.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):o.translate.apply(o,r.concat([t]))},n)),n.interpolation&&this.interpolator.reset()}var d=n.postProcess||this.options.postProcess,h="string"===typeof d?[d]:d;return void 0!==e&&null!==e&&h&&h.length&&!1!==n.applyPostProcessor&&(e=D.handle(h,e,t,this.options&&this.options.postProcessPassResolved?F({i18nResolved:r},n):n,this)),e}},{key:"resolve",value:function(e){var t,n,r,i,o,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"===typeof e&&(e=[e]),e.forEach(function(e){if(!a.isValidLookup(t)){var l=a.extractFromKey(e,s),c=l.key;n=c;var u=l.namespaces;a.options.fallbackNS&&(u=u.concat(a.options.fallbackNS));var d=void 0!==s.count&&"string"!==typeof s.count,h=d&&!s.ordinal&&0===s.count&&a.pluralResolver.shouldUseIntlApi(),f=void 0!==s.context&&("string"===typeof s.context||"number"===typeof s.context)&&""!==s.context,p=s.lngs?s.lngs:a.languageUtils.toResolveHierarchy(s.lng||a.language,s.fallbackLng);u.forEach(function(e){a.isValidLookup(t)||(o=e,!U["".concat(p[0],"-").concat(e)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(o)&&(U["".concat(p[0],"-").concat(e)]=!0,a.logger.warn('key "'.concat(n,'" for languages "').concat(p.join(", "),'" won\'t get resolved as namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach(function(n){if(!a.isValidLookup(t)){i=n;var o,l=[c];if(a.i18nFormat&&a.i18nFormat.addLookupKeys)a.i18nFormat.addLookupKeys(l,c,n,e,s);else{var u;d&&(u=a.pluralResolver.getSuffix(n,s.count,s));var p="".concat(a.options.pluralSeparator,"zero");if(d&&(l.push(c+u),h&&l.push(c+p)),f){var g="".concat(c).concat(a.options.contextSeparator).concat(s.context);l.push(g),d&&(l.push(g+u),h&&l.push(g+p))}}for(;o=l.pop();)a.isValidLookup(t)||(r=o,t=a.getResource(n,e,o,s))}}))})}}),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:o}}},{key:"isValidLookup",value:function(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}],[{key:"hasDefaultValue",value:function(e){var t="defaultValue";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}]),i}(b);function V(e){return e.charAt(0).toUpperCase()+e.slice(1)}var W=function(){function e(t){r(this,e),this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=v.create("languageUtils")}return a(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"===typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map(function(e){return e.toLowerCase()}):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=V(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=V(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=V(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isSupportedCode",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var t,n=this;return e?(e.forEach(function(e){if(!t){var r=n.formatLanguageCode(e);n.options.supportedLngs&&!n.isSupportedCode(r)||(t=r)}}),!t&&this.options.supportedLngs&&e.forEach(function(e){if(!t){var r=n.getLanguagePartFromCode(e);if(n.isSupportedCode(r))return t=r;t=n.options.supportedLngs.find(function(e){return e===r?e:e.indexOf("-")<0&&r.indexOf("-")<0?void 0:0===e.indexOf(r)?e:void 0})}}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t):null}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("function"===typeof e&&(e=e(t)),"string"===typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e.default||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],o=function(e){e&&(n.isSupportedCode(e)?i.push(e):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return"string"===typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):"string"===typeof e&&o(this.formatLanguageCode(e)),r.forEach(function(e){i.indexOf(e)<0&&o(n.formatLanguageCode(e))}),i}}]),e}(),H=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],q={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0==e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)}},K=["v1","v2","v3"],G={zero:0,one:1,two:2,few:3,many:4,other:5};var Q=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.languageUtils=t,this.options=n,this.logger=v.create("pluralResolver"),this.options.compatibilityJSON&&"v4"!==this.options.compatibilityJSON||"undefined"!==typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=function(){var e={};return H.forEach(function(t){t.lngs.forEach(function(n){e[n]={numbers:t.nr,plurals:q[t.fc]}})}),e}()}return a(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(e,{type:t.ordinal?"ordinal":"cardinal"})}catch(n){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map(function(e){return"".concat(t).concat(e)})}},{key:"getSuffixes",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort(function(e,t){return G[e]-G[t]}).map(function(e){return"".concat(t.options.prepend).concat(e)}):r.numbers.map(function(r){return t.getSuffix(e,r,n)}):[]}},{key:"getSuffix",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getRule(e,n);return r?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(r.select(t)):this.getSuffixRetroCompatible(r,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}},{key:"getSuffixRetroCompatible",value:function(e,t){var n=this,r=e.noAbs?e.plurals(t):e.plurals(Math.abs(t)),i=e.numbers[r];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===i?i="plural":1===i&&(i=""));var o=function(){return n.options.prepend&&i.toString()?n.options.prepend+i.toString():i.toString()};return"v1"===this.options.compatibilityJSON?1===i?"":"number"===typeof i?"_plural_".concat(i.toString()):o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?o():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}},{key:"shouldUseIntlApi",value:function(){return!K.includes(this.options.compatibilityJSON)}}]),e}();function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function X(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=function(e,t,n){var r=C(e,n);return void 0!==r?r:C(t,n)}(e,t,n);return!o&&i&&"string"===typeof n&&void 0===(o=R(e,n,r))&&(o=R(t,n,r)),o}var $=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.logger=v.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(e){return e},this.init(t)}return a(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var t=e.interpolation;this.escape=void 0!==t.escape?t.escape:_,this.escapeValue=void 0===t.escapeValue||t.escapeValue,this.useRawValueToEscape=void 0!==t.useRawValueToEscape&&t.useRawValueToEscape,this.prefix=t.prefix?T(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?T(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?T(t.nestingPrefix):t.nestingPrefixEscaped||T("$t("),this.nestingSuffix=t.nestingSuffix?T(t.nestingSuffix):t.nestingSuffixEscaped||T(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=void 0!==t.alwaysFormat&&t.alwaysFormat,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){var i,o,a,s=this,l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(e){return e.replace(/\$/g,"$$$$")}var u=function(e){if(e.indexOf(s.formatSeparator)<0){var i=X(t,l,e,s.options.keySeparator,s.options.ignoreJSONStructure);return s.alwaysFormat?s.format(i,void 0,n,Y(Y(Y({},r),t),{},{interpolationkey:e})):i}var o=e.split(s.formatSeparator),a=o.shift().trim(),c=o.join(s.formatSeparator).trim();return s.format(X(t,l,a,s.options.keySeparator,s.options.ignoreJSONStructure),c,n,Y(Y(Y({},r),t),{},{interpolationkey:a}))};this.resetRegExp();var d=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,h=r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:function(e){return c(e)}},{regex:this.regexp,safeValue:function(e){return s.escapeValue?c(s.escape(e)):c(e)}}].forEach(function(t){for(a=0;i=t.regex.exec(e);){var n=i[1].trim();if(void 0===(o=u(n)))if("function"===typeof d){var l=d(e,i,r);o="string"===typeof l?l:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))o="";else{if(h){o=i[0];continue}s.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(e)),o=""}else"string"===typeof o||s.useRawValueToEscape||(o=w(o));var c=t.safeValue(o);if(e=e.replace(i[0],c),h?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,++a>=s.maxReplaces)break}}),e}},{key:"nest",value:function(e,t){var n,r,i,o=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};function s(e,t){var n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;var r=e.split(new RegExp("".concat(n,"[ ]*{"))),o="{".concat(r[1]);e=r[0];var a=(o=this.interpolate(o,i)).match(/'/g),s=o.match(/"/g);(a&&a.length%2===0&&!s||s.length%2!==0)&&(o=o.replace(/'/g,'"'));try{i=JSON.parse(o),t&&(i=Y(Y({},t),i))}catch(l){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),l),"".concat(e).concat(n).concat(o)}return delete i.defaultValue,e}for(;n=this.nestingRegexp.exec(e);){var l=[];(i=(i=Y({},a)).replace&&"string"!==typeof i.replace?i.replace:i).applyPostProcessor=!1,delete i.defaultValue;var c=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){var u=n[1].split(this.formatSeparator).map(function(e){return e.trim()});n[1]=u.shift(),l=u,c=!0}if((r=t(s.call(this,n[1].trim(),i),i))&&n[0]===e&&"string"!==typeof r)return r;"string"!==typeof r&&(r=w(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),c&&(r=l.reduce(function(e,t){return o.format(e,t,a.lng,Y(Y({},a),{},{interpolationkey:n[1].trim()}))},r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}]),e}();function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function te(e){var t={};return function(n,r,i){var o=r+JSON.stringify(i),a=t[o];return a||(a=e(r,i),t[o]=a),a(n)}}var ne=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.logger=v.create("formatter"),this.options=t,this.formats={number:te(function(e,t){var n=new Intl.NumberFormat(e,ee({},t));return function(e){return n.format(e)}}),currency:te(function(e,t){var n=new Intl.NumberFormat(e,ee(ee({},t),{},{style:"currency"}));return function(e){return n.format(e)}}),datetime:te(function(e,t){var n=new Intl.DateTimeFormat(e,ee({},t));return function(e){return n.format(e)}}),relativetime:te(function(e,t){var n=new Intl.RelativeTimeFormat(e,ee({},t));return function(e){return n.format(e,t.range||"day")}}),list:te(function(e,t){var n=new Intl.ListFormat(e,ee({},t));return function(e){return n.format(e)}})},this.init(t)}return a(e,[{key:"init",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||","}},{key:"add",value:function(e,t){this.formats[e.toLowerCase().trim()]=t}},{key:"addCached",value:function(e,t){this.formats[e.toLowerCase().trim()]=te(t)}},{key:"format",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t.split(this.formatSeparator).reduce(function(e,t){var o=function(e){var t=e.toLowerCase().trim(),n={};if(e.indexOf("(")>-1){var r=e.split("(");t=r[0].toLowerCase().trim();var i=r[1].substring(0,r[1].length-1);"currency"===t&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):"relativetime"===t&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(function(e){if(e){var t=p(e.split(":")),r=t[0],i=t.slice(1).join(":").trim().replace(/^'+|'+$/g,"");n[r.trim()]||(n[r.trim()]=i),"false"===i&&(n[r.trim()]=!1),"true"===i&&(n[r.trim()]=!0),isNaN(i)||(n[r.trim()]=parseInt(i,10))}})}return{formatName:t,formatOptions:n}}(t),a=o.formatName,s=o.formatOptions;if(r.formats[a]){var l=e;try{var c=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},u=c.locale||c.lng||i.locale||i.lng||n;l=r.formats[a](e,u,ee(ee(ee({},s),i),c))}catch(d){r.logger.warn(d)}return l}return r.logger.warn("there was no format function for ".concat(a)),e},e)}}]),e}();function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}var ae=function(e){c(n,e);var t=oe(n);function n(e,i,o){var a,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return r(this,n),a=t.call(this),I&&b.call(s(a)),a.backend=e,a.store=i,a.services=o,a.languageUtils=o.languageUtils,a.options=l,a.logger=v.create("backendConnector"),a.waitingReads=[],a.maxParallelReads=l.maxParallelReads||10,a.readingCalls=0,a.maxRetries=l.maxRetries>=0?l.maxRetries:5,a.retryTimeout=l.retryTimeout>=1?l.retryTimeout:350,a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(o,l.backend,l),a}return a(n,[{key:"queueLoad",value:function(e,t,n,r){var i=this,o={},a={},s={},l={};return e.forEach(function(e){var r=!0;t.forEach(function(t){var s="".concat(e,"|").concat(t);!n.reload&&i.store.hasResourceBundle(e,t)?i.state[s]=2:i.state[s]<0||(1===i.state[s]?void 0===a[s]&&(a[s]=!0):(i.state[s]=1,r=!1,void 0===a[s]&&(a[s]=!0),void 0===o[s]&&(o[s]=!0),void 0===l[t]&&(l[t]=!0)))}),r||(s[e]=!0)}),(Object.keys(o).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(a),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(l)}}},{key:"loaded",value:function(e,t,n){var r=e.split("|"),i=r[0],o=r[1];t&&this.emit("failedLoading",i,o,t),n&&this.store.addResourceBundle(i,o,n),this.state[e]=t?-1:2;var a={};this.queue.forEach(function(n){!function(e,t,n,r){var i=S(e,t,Object),o=i.obj,a=i.k;o[a]=o[a]||[],r&&(o[a]=o[a].concat(n)),r||o[a].push(n)}(n.loaded,[i],o),function(e,t){void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)}(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach(function(e){a[e]||(a[e]={});var t=n.loaded[e];t.length&&t.forEach(function(t){void 0===a[e][t]&&(a[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(function(e){return!e.done})}},{key:"read",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads)this.waitingReads.push({lng:e,ns:t,fcName:n,tried:i,wait:o,callback:a});else{this.readingCalls++;var s=function(s,l){if(r.readingCalls--,r.waitingReads.length>0){var c=r.waitingReads.shift();r.read(c.lng,c.ns,c.fcName,c.tried,c.wait,c.callback)}s&&l&&i<r.maxRetries?setTimeout(function(){r.read.call(r,e,t,n,i+1,2*o,a)},o):a(s,l)},l=this.backend[n].bind(this.backend);if(2!==l.length)return l(e,t,s);try{var c=l(e,t);c&&"function"===typeof c.then?c.then(function(e){return s(null,e)}).catch(s):s(null,c)}catch(u){s(u)}}}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"===typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"===typeof t&&(t=[t]);var o=this.queueLoad(e,t,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(function(e){n.loadOne(e)})}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,function(r,a){r&&t.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(i," failed"),r),!r&&a&&t.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(i),a),t.loaded(e,r,a)})}},{key:"saveMissing",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(void 0!==n&&null!==n&&""!==n){if(this.backend&&this.backend.create){var s=ie(ie({},o),{},{isUpdate:i}),l=this.backend.create.bind(this.backend);if(l.length<6)try{var c;(c=5===l.length?l(e,t,n,r,s):l(e,t,n,r))&&"function"===typeof c.then?c.then(function(e){return a(null,e)}).catch(a):a(null,c)}catch(u){a(u)}else l(e,t,n,r,a,s)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}}]),n}(b);function se(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var n={};if("object"===t(e[1])&&(n=e[1]),"string"===typeof e[1]&&(n.defaultValue=e[1]),"string"===typeof e[2]&&(n.tDescription=e[2]),"object"===t(e[2])||"object"===t(e[3])){var r=e[3]||e[2];Object.keys(r).forEach(function(e){n[e]=r[e]})}return n},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function le(e){return"string"===typeof e.ns&&(e.ns=[e.ns]),"string"===typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"===typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function de(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function he(){}var fe=function(e){c(i,e);var n=de(i);function i(){var e,t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(r(this,i),e=n.call(this),I&&b.call(s(e)),e.options=le(o),e.services={},e.logger=v,e.modules={external:[]},t=s(e),Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(e){"function"===typeof t[e]&&(t[e]=t[e].bind(t))}),a&&!e.isInitialized&&!o.isClone){if(!e.options.initImmediate)return e.init(o,a),u(e,s(e));setTimeout(function(){e.init(o,a)},0)}return e}return a(i,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;"function"===typeof t&&(n=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&("string"===typeof t.ns?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));var r=se();function i(e){return e?"function"===typeof e?new e:e:null}if(this.options=ue(ue(ue({},r),this.options),le(t)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=ue(ue({},r.interpolation),this.options.interpolation)),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator),!this.options.isClone){var o;this.modules.logger?v.init(i(this.modules.logger),this.options):v.init(null,this.options),this.modules.formatter?o=this.modules.formatter:"undefined"!==typeof Intl&&(o=ne);var a=new W(this.options);this.store=new j(this.options.resources,this.options);var s=this.services;s.logger=v,s.resourceStore=this.store,s.languageUtils=a,s.pluralResolver=new Q(a,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!o||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(s.formatter=i(o),s.formatter.init(s,this.options),this.options.interpolation.format=s.formatter.format.bind(s.formatter)),s.interpolator=new $(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new ae(i(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))}),this.modules.languageDetector&&(s.languageDetector=i(this.modules.languageDetector),s.languageDetector.init&&s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=i(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new B(this.services,this.options),this.translator.on("*",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t].concat(r))}),this.modules.external.forEach(function(t){t.init&&t.init(e)})}if(this.format=this.options.interpolation.format,n||(n=he),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&"dev"!==l[0]&&(this.options.lng=l[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments)}});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(function(t){e[t]=function(){var n;return(n=e.store)[t].apply(n,arguments),e}});var c=x(),u=function(){var t=function(t,r){e.isInitialized&&!e.initializedStoreOnce&&e.logger.warn("init: i18next is already initialized. You should call init just once!"),e.isInitialized=!0,e.options.isClone||e.logger.log("initialized",e.options),e.emit("initialized",e.options),c.resolve(r),n(t,r)};if(e.languages&&"v1"!==e.options.compatibilityAPI&&!e.isInitialized)return t(null,e.t.bind(e));e.changeLanguage(e.options.lng,t)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}},{key:"loadResources",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he,r="string"===typeof e?e:this.language;if("function"===typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&"cimode"===r.toLowerCase())return n();var i=[],o=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach(function(e){i.indexOf(e)<0&&i.push(e)})};if(r)o(r);else this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(function(e){return o(e)});this.options.preload&&this.options.preload.forEach(function(e){return o(e)}),this.services.backendConnector.load(i,this.options.ns,function(e){e||t.resolvedLanguage||!t.language||t.setResolvedLanguage(t.language),n(e)})}else n(null)}},{key:"reloadResources",value:function(e,t,n){var r=x();return e||(e=this.languages),t||(t=this.options.ns),n||(n=he),this.services.backendConnector.reload(e,t,function(e){r.resolve(),n(e)}),r}},{key:"use",value:function(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&D.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"setResolvedLanguage",value:function(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(var t=0;t<this.languages.length;t++){var n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}},{key:"changeLanguage",value:function(e,t){var n=this;this.isLanguageChangingTo=e;var r=x();this.emit("languageChanging",e);var i=function(e){n.language=e,n.languages=n.services.languageUtils.toResolveHierarchy(e),n.resolvedLanguage=void 0,n.setResolvedLanguage(e)},o=function(o){e||o||!n.services.languageDetector||(o=[]);var a="string"===typeof o?o:n.services.languageUtils.getBestMatchFromCodes(o);a&&(n.language||i(a),n.translator.language||n.translator.changeLanguage(a),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage&&n.services.languageDetector.cacheUserLanguage(a)),n.loadResources(a,function(e){!function(e,o){o?(i(o),n.translator.changeLanguage(o),n.isLanguageChangingTo=void 0,n.emit("languageChanged",o),n.logger.log("languageChanged",o)):n.isLanguageChangingTo=void 0,r.resolve(function(){return n.t.apply(n,arguments)}),t&&t(e,function(){return n.t.apply(n,arguments)})}(e,a)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(e,n,r){var i=this,o=function e(n,o){var a;if("object"!==t(o)){for(var s=arguments.length,l=new Array(s>2?s-2:0),c=2;c<s;c++)l[c-2]=arguments[c];a=i.options.overloadTranslationOptionHandler([n,o].concat(l))}else a=ue({},o);a.lng=a.lng||e.lng,a.lngs=a.lngs||e.lngs,a.ns=a.ns||e.ns,a.keyPrefix=a.keyPrefix||r||e.keyPrefix;var u,d=i.options.keySeparator||".";return u=a.keyPrefix&&Array.isArray(n)?n.map(function(e){return"".concat(a.keyPrefix).concat(d).concat(e)}):a.keyPrefix?"".concat(a.keyPrefix).concat(d).concat(n):n,i.t(u,a)};return"string"===typeof e?o.lng=e:o.lngs=e,o.ns=n,o.keyPrefix=r,o}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"hasLoadedNamespace",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var r=n.lng||this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;var a=function(e,n){var r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};if(n.precheck){var s=n.precheck(this,a);if(void 0!==s)return s}return!!this.hasResourceBundle(r,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!a(r,e)||i&&!a(o,e)))}},{key:"loadNamespaces",value:function(e,t){var n=this,r=x();return this.options.ns?("string"===typeof e&&(e=[e]),e.forEach(function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)}),this.loadResources(function(e){r.resolve(),t&&t(e)}),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=x();"string"===typeof e&&(e=[e]);var r=this.options.preload||[],i=e.filter(function(e){return r.indexOf(e)<0});return i.length?(this.options.preload=r.concat(i),this.loadResources(function(e){n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";var t=this.services&&this.services.languageUtils||new W(se());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he,r=ue(ue(ue({},this.options),t),{isClone:!0}),o=new i(r);void 0===t.debug&&void 0===t.prefix||(o.logger=o.logger.clone(t));return["store","services","language"].forEach(function(t){o[t]=e[t]}),o.services=ue({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new B(o.services,o.options),o.translator.on("*",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o.emit.apply(o,[e].concat(n))}),o.init(r,n),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),i}(b);h(fe,"createInstance",function(){return new fe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)});var pe=fe.createInstance();pe.createInstance=fe.createInstance;pe.createInstance,pe.dir,pe.init,pe.loadResources,pe.reloadResources,pe.use,pe.changeLanguage,pe.getFixedT,pe.t,pe.exists,pe.setDefaultNamespace,pe.hasLoadedNamespace,pe.loadNamespaces,pe.loadLanguages,n(844);Object.create(null);var ge=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,me={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xa9","&#169;":"\xa9","&reg;":"\xae","&#174;":"\xae","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},ye=function(e){return me[e]};function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var xe={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:function(e){return e.replace(ge,ye)}};var we={type:"3rdParty",init:function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xe=be(be({},xe),e)}(e.options.react),function(e){0}(e)}};(0,e.createContext)(),function(){function e(){r(this,e),this.usedNamespaces={}}a(e,[{key:"addUsedNamespaces",value:function(e){var t=this;e.forEach(function(e){t.usedNamespaces[e]||(t.usedNamespaces[e]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}])}();const{slice:Se,forEach:ke}=[];const Ce=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Ee={create(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+60*n*1e3)),r&&(i.domain=r),document.cookie=function(e,t){const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/"},r=encodeURIComponent(t);let i="".concat(e,"=").concat(r);if(n.maxAge>0){const e=n.maxAge-0;if(Number.isNaN(e))throw new Error("maxAge should be a Number");i+="; Max-Age=".concat(Math.floor(e))}if(n.domain){if(!Ce.test(n.domain))throw new TypeError("option domain is invalid");i+="; Domain=".concat(n.domain)}if(n.path){if(!Ce.test(n.path))throw new TypeError("option path is invalid");i+="; Path=".concat(n.path)}if(n.expires){if("function"!==typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");i+="; Expires=".concat(n.expires.toUTCString())}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.sameSite)switch("string"===typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(i+="; Partitioned"),i}(e,t,i)},read(e){const t="".concat(e,"="),n=document.cookie.split(";");for(let r=0;r<n.length;r++){let e=n[r];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t))return e.substring(t.length,e.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var Te={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&"undefined"!==typeof document)return Ee.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:o}=t;n&&"undefined"!==typeof document&&Ee.create(n,e,r,i,o)}},Ae={name:"querystring",lookup(e){let t,{lookupQuerystring:n}=e;if("undefined"!==typeof window){var r;let{search:e}=window.location;!window.location.search&&(null===(r=window.location.hash)||void 0===r?void 0:r.indexOf("?"))>-1&&(e=window.location.hash.substring(window.location.hash.indexOf("?")));const i=e.substring(1).split("&");for(let r=0;r<i.length;r++){const e=i[r].indexOf("=");if(e>0){i[r].substring(0,e)===n&&(t=i[r].substring(e+1))}}}return t}},_e={name:"hash",lookup(e){let t,{lookupHash:n,lookupFromHashIndex:r}=e;if("undefined"!==typeof window){const{hash:e}=window.location;if(e&&e.length>2){const o=e.substring(1);if(n){const e=o.split("&");for(let r=0;r<e.length;r++){const i=e[r].indexOf("=");if(i>0){e[r].substring(0,i)===n&&(t=e[r].substring(i+1))}}}if(t)return t;if(!t&&r>-1){var i;const t=e.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(t))return;return null===(i=t["number"===typeof r?r:0])||void 0===i?void 0:i.replace("/","")}}}return t}};let Ie=null;const Oe=()=>{if(null!==Ie)return Ie;try{if(Ie="undefined"!==typeof window&&null!==window.localStorage,!Ie)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(e){Ie=!1}return Ie};var Re={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&Oe())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&Oe()&&window.localStorage.setItem(n,e)}};let Ne=null;const Pe=()=>{if(null!==Ne)return Ne;try{if(Ne="undefined"!==typeof window&&null!==window.sessionStorage,!Ne)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(e){Ne=!1}return Ne};var Le={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&Pe())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&Pe()&&window.sessionStorage.setItem(n,e)}},je={name:"navigator",lookup(e){const t=[];if("undefined"!==typeof navigator){const{languages:e,userLanguage:n,language:r}=navigator;if(e)for(let i=0;i<e.length;i++)t.push(e[i]);n&&t.push(n),r&&t.push(r)}return t.length>0?t:void 0}},De={name:"htmlTag",lookup(e){let t,{htmlTag:n}=e;const r=n||("undefined"!==typeof document?document.documentElement:null);return r&&"function"===typeof r.getAttribute&&(t=r.getAttribute("lang")),t}},Me={name:"path",lookup(e){var t;let{lookupFromPathIndex:n}=e;if("undefined"===typeof window)return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(r))return;return null===(t=r["number"===typeof n?n:0])||void 0===t?void 0:t.replace("/","")}},Fe={name:"subdomain",lookup(e){var t;let{lookupFromSubdomainIndex:n}=e;const r="number"===typeof n?n+1:1,i="undefined"!==typeof window&&(null===(t=window.location)||void 0===t||null===(t=t.hostname)||void 0===t?void 0:t.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(i)return i[r]}};let ze=!1;try{document.cookie,ze=!0}catch(sm){}const Ue=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];ze||Ue.splice(1,1);class Be{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{languageUtils:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(e){return ke.call(Se.call(arguments,1),t=>{if(t)for(const n in t)void 0===e[n]&&(e[n]=t[n])}),e}(t,this.options||{},{order:Ue,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}),"string"===typeof this.options.convertDetectedLanguage&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=e=>e.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(Te),this.addDetector(Ae),this.addDetector(Re),this.addDetector(Le),this.addDetector(je),this.addDetector(De),this.addDetector(Me),this.addDetector(Fe),this.addDetector(_e)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.order,t=[];return e.forEach(e=>{if(this.detectors[e]){let n=this.detectors[e].lookup(this.options);n&&"string"===typeof n&&(n=[n]),n&&(t=t.concat(n))}}),t=t.filter(e=>{return void 0!==e&&null!==e&&!("string"===typeof(t=e)&&[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(e=>e.test(t)));var t}).map(e=>this.options.convertDetectedLanguage(e)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)}))}}function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}Be.type="languageDetector";function We(){return"function"===typeof XMLHttpRequest||"object"===("undefined"===typeof XMLHttpRequest?"undefined":Ve(XMLHttpRequest))}function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach(function(t){Ke(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ke(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ge(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ge(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}var Qe,Je,Ye="function"===typeof fetch?fetch:void 0;if("undefined"!==typeof n.g&&n.g.fetch?Ye=n.g.fetch:"undefined"!==typeof window&&window.fetch&&(Ye=window.fetch),We()&&("undefined"!==typeof n.g&&n.g.XMLHttpRequest?Qe=n.g.XMLHttpRequest:"undefined"!==typeof window&&window.XMLHttpRequest&&(Qe=window.XMLHttpRequest)),"function"===typeof ActiveXObject&&("undefined"!==typeof n.g&&n.g.ActiveXObject?Je=n.g.ActiveXObject:"undefined"!==typeof window&&window.ActiveXObject&&(Je=window.ActiveXObject)),"function"!==typeof Ye&&(Ye=void 0),!Ye&&!Qe&&!Je)try{n.e(38).then(n.t.bind(n,38,19)).then(function(e){Ye=e.default}).catch(function(){})}catch(sm){}var Xe=function(e,t){if(t&&"object"===Ge(t)){var n="";for(var r in t)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t[r]);if(!n)return e;e=e+(-1!==e.indexOf("?")?"&":"?")+n.slice(1)}return e},$e=function(e,t,n,r){var i=function(e){if(!e.ok)return n(e.statusText||"Error",{status:e.status});e.text().then(function(t){n(null,{status:e.status,data:t})}).catch(n)};if(r){var o=r(e,t);if(o instanceof Promise)return void o.then(i).catch(n)}"function"===typeof fetch?fetch(e,t).then(i).catch(n):Ye(e,t).then(i).catch(n)},Ze=!1;const et=function(e,t,r,i){return"function"===typeof r&&(i=r,r=void 0),i=i||function(){},Ye&&0!==t.indexOf("file:")?function(e,t,r,i){e.queryStringParams&&(t=Xe(t,e.queryStringParams));var o=qe({},"function"===typeof e.customHeaders?e.customHeaders():e.customHeaders);"undefined"===typeof window&&"undefined"!==typeof n.g&&"undefined"!==typeof n.g.process&&n.g.process.versions&&n.g.process.versions.node&&(o["User-Agent"]="i18next-http-backend (node/".concat(n.g.process.version,"; ").concat(n.g.process.platform," ").concat(n.g.process.arch,")")),r&&(o["Content-Type"]="application/json");var a="function"===typeof e.requestOptions?e.requestOptions(r):e.requestOptions,s=qe({method:r?"POST":"GET",body:r?e.stringify(r):void 0,headers:o},Ze?{}:a),l="function"===typeof e.alternateFetch&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{$e(t,s,i,l)}catch(sm){if(!a||0===Object.keys(a).length||!sm.message||sm.message.indexOf("not implemented")<0)return i(sm);try{Object.keys(a).forEach(function(e){delete s[e]}),$e(t,s,i,l),Ze=!0}catch(c){i(c)}}}(e,t,r,i):We()||"function"===typeof ActiveXObject?function(e,t,n,r){n&&"object"===Ge(n)&&(n=Xe("",n).slice(1)),e.queryStringParams&&(t=Xe(t,e.queryStringParams));try{var i=Qe?new Qe:new Je("MSXML2.XMLHTTP.3.0");i.open(n?"POST":"GET",t,1),e.crossDomain||i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.withCredentials=!!e.withCredentials,n&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.overrideMimeType&&i.overrideMimeType("application/json");var o=e.customHeaders;if(o="function"===typeof o?o():o)for(var a in o)i.setRequestHeader(a,o[a]);i.onreadystatechange=function(){i.readyState>3&&r(i.status>=400?i.statusText:null,{status:i.status,data:i.responseText})},i.send(n)}catch(sm){console&&console.log(sm)}}(e,t,r,i):void i(new Error("No fetch and no xhr implementation found!"))};function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach(function(t){ot(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,at(r.key),r)}}function ot(e,t,n){return(t=at(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function at(e){var t=function(e,t){if("object"!=tt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tt(t)?t:t+""}var st=function(e,t,n){return t&&it(e.prototype,t),n&&it(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.services=t,this.options=n,this.allOptions=r,this.type="backend",this.init(t,n,r)},[{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.services=e,this.options=rt(rt(rt({},{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(e){return JSON.parse(e)},stringify:JSON.stringify,parsePayload:function(e,t,n){return ot({},t,n||"")},parseLoadPayload:function(e,t){},request:et,reloadInterval:"undefined"===typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}),this.options||{}),n),this.allOptions=r,this.services&&this.options.reloadInterval){var i=setInterval(function(){return t.reload()},this.options.reloadInterval);"object"===tt(i)&&"function"===typeof i.unref&&i.unref()}}},{key:"readMulti",value:function(e,t,n){this._readAny(e,e,t,t,n)}},{key:"read",value:function(e,t,n){this._readAny([e],e,[t],t,n)}},{key:"_readAny",value:function(e,t,n,r,i){var o,a=this,s=this.options.loadPath;"function"===typeof this.options.loadPath&&(s=this.options.loadPath(e,n)),(s=function(e){return!!e&&"function"===typeof e.then}(o=s)?o:Promise.resolve(o)).then(function(o){if(!o)return i(null,{});var s=a.services.interpolator.interpolate(o,{lng:e.join("+"),ns:n.join("+")});a.loadUrl(s,i,t,r)})}},{key:"loadUrl",value:function(e,t,n,r){var i=this,o="string"===typeof n?[n]:n,a="string"===typeof r?[r]:r,s=this.options.parseLoadPayload(o,a);this.options.request(this.options,e,s,function(o,a){if(a&&(a.status>=500&&a.status<600||!a.status))return t("failed loading "+e+"; status code: "+a.status,!0);if(a&&a.status>=400&&a.status<500)return t("failed loading "+e+"; status code: "+a.status,!1);if(!a&&o&&o.message){var s=o.message.toLowerCase();if(["failed","fetch","network","load"].find(function(e){return s.indexOf(e)>-1}))return t("failed loading "+e+": "+o.message,!0)}if(o)return t(o,!1);var l,c;try{l="string"===typeof a.data?i.options.parse(a.data,n,r):a.data}catch(sm){c="failed parsing "+e+" to json"}if(c)return t(c,!1);t(null,l)})}},{key:"create",value:function(e,t,n,r,i){var o=this;if(this.options.addPath){"string"===typeof e&&(e=[e]);var a=this.options.parsePayload(t,n,r),s=0,l=[],c=[];e.forEach(function(n){var r=o.options.addPath;"function"===typeof o.options.addPath&&(r=o.options.addPath(n,t));var u=o.services.interpolator.interpolate(r,{lng:n,ns:t});o.options.request(o.options,u,a,function(t,n){s+=1,l.push(t),c.push(n),s===e.length&&"function"===typeof i&&i(l,c)})})}}},{key:"reload",value:function(){var e=this,t=this.services,n=t.backendConnector,r=t.languageUtils,i=t.logger,o=n.language;if(!o||"cimode"!==o.toLowerCase()){var a=[],s=function(e){r.toResolveHierarchy(e).forEach(function(e){a.indexOf(e)<0&&a.push(e)})};s(o),this.allOptions.preload&&this.allOptions.preload.forEach(function(e){return s(e)}),a.forEach(function(t){e.allOptions.ns.forEach(function(e){n.read(t,e,"read",null,null,function(r,o){r&&i.warn("loading namespace ".concat(e," for language ").concat(t," failed"),r),!r&&o&&i.log("loaded namespace ".concat(e," for language ").concat(t),o),n.loaded("".concat(t,"|").concat(e),r,o)})})})}}}]);st.type="backend";const lt=st;pe.use(lt).use(Be).use(we).init({fallbackLng:"en",supportedLngs:["en","es","ca","pt"],ns:["common"],defaultNS:"common",load:"languageOnly",debug:!1,detection:{},backend:{loadPath:"/LogBook/locales/{{lng}}/{{ns}}.json"},interpolation:{escapeValue:!1},react:{useSuspense:!1}});var ct=n(391);function ut(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ft={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const pt=["color","size","strokeWidth","absoluteStrokeWidth","children"];var gt=(t,n)=>{const r=(0,e.forwardRef)((r,i)=>{let{color:o="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:l,children:c}=r,u=ut(r,pt);return(0,e.createElement)("svg",ht(ht({ref:i},ft),{},{width:a,height:a,stroke:o,strokeWidth:l?24*Number(s)/Number(a):s,className:"lucide lucide-".concat((d=t,d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},u),[...n.map(t=>{let[n,r]=t;return(0,e.createElement)(n,r)}),...(Array.isArray(c)?c:[c])||[]]);var d});return r.displayName="".concat(t),r};const mt=gt("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]),yt=gt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),vt=gt("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),bt=gt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),xt=gt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),wt=gt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),St=gt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),kt=gt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Ct=gt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Et=gt("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),Tt=gt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),At=gt("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),_t=gt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),It=gt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Ot=gt("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Rt=gt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Nt=gt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Pt=gt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Lt=gt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),jt=gt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Dt=gt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),Mt=gt("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),Ft=gt("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),zt=gt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Ut=gt("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]),Bt=gt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Vt=gt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Wt=gt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Ht=gt("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]),qt=gt("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]),Kt=gt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Gt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Qt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,a=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;s||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Gt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const s=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==a||null==s)throw new Jt;const l=t<<2|o>>4;if(r.push(l),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==s){const e=a<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Jt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Yt=function(e){return function(e){const t=Gt(e);return Qt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Xt=function(e){try{return Qt.decodeString(e,!0)}catch(sm){console.error("base64Decode failed: ",sm)}return null};const $t=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Zt=()=>{try{return $t()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/LogBook",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(sm){return}const t=e&&Xt(e[1]);return t&&JSON.parse(t)})()}catch(sm){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(sm))}},en=e=>{var t,n;return null===(n=null===(t=Zt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},tn=()=>{var e;return null===(e=Zt())||void 0===e?void 0:e.config},nn=e=>{var t;return null===(t=Zt())||void 0===t?void 0:t["_".concat(e)]};class rn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function on(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function an(){return!function(){var e;const t=null===(e=Zt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(sm){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sn(){try{return"object"===typeof indexedDB}catch(sm){return!1}}class ln extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ln.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cn.prototype.create)}}class cn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(un,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new ln(n,o,t)}}const un=/\{\$([^}]+)}/g;function dn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(hn(n)&&hn(o)){if(!dn(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function hn(e){return null!==e&&"object"===typeof e}function fn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function pn(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function gn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class mn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=yn),void 0===r.error&&(r.error=yn),void 0===r.complete&&(r.complete=yn);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(sm){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(sm){"undefined"!==typeof console&&console.error&&console.error(sm)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yn(){}function vn(e){return e&&e._delegate?e._delegate:e}class bn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const xn="[DEFAULT]";class wn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new rn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(sm){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(sm){if(r)return null;throw sm}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:xn})}catch(sm){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(sm){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===xn?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xn;return this.component?this.component.multipleInstances?e:xn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Sn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const kn=[];var Cn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Cn||(Cn={}));const En={debug:Cn.DEBUG,verbose:Cn.VERBOSE,info:Cn.INFO,warn:Cn.WARN,error:Cn.ERROR,silent:Cn.SILENT},Tn=Cn.INFO,An={[Cn.DEBUG]:"log",[Cn.VERBOSE]:"log",[Cn.INFO]:"info",[Cn.WARN]:"warn",[Cn.ERROR]:"error"},_n=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=An[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class In{constructor(e){this.name=e,this._logLevel=Tn,this._logHandler=_n,this._userLogHandler=null,kn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Cn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?En[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Cn.DEBUG,...t),this._logHandler(this,Cn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Cn.VERBOSE,...t),this._logHandler(this,Cn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Cn.INFO,...t),this._logHandler(this,Cn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Cn.WARN,...t),this._logHandler(this,Cn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Cn.ERROR,...t),this._logHandler(this,Cn.ERROR,...t)}}let On,Rn;const Nn=new WeakMap,Pn=new WeakMap,Ln=new WeakMap,jn=new WeakMap,Dn=new WeakMap;let Mn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Pn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ln.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Un(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Fn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Rn||(Rn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Bn(this),n),Un(Nn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Un(e.apply(Bn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Bn(this),t,...r);return Ln.set(o,t.sort?t.sort():[t]),Un(o)}}function zn(e){return"function"===typeof e?Fn(e):(e instanceof IDBTransaction&&function(e){if(Pn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});Pn.set(e,t)}(e),t=e,(On||(On=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Mn):e);var t}function Un(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Un(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&Nn.set(t,e)}).catch(()=>{}),Dn.set(t,e),t}(e);if(jn.has(e))return jn.get(e);const t=zn(e);return t!==e&&(jn.set(e,t),Dn.set(t,e)),t}const Bn=e=>Dn.get(e);const Vn=["get","getKey","getAll","getAllKeys","count"],Wn=["put","add","delete","clear"],Hn=new Map;function qn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Hn.get(t))return Hn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Wn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Vn.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&t.done]))[0]};return Hn.set(t,o),o}Mn=(e=>ht(ht({},e),{},{get:(t,n,r)=>qn(t,n)||e.get(t,n,r),has:(t,n)=>!!qn(t,n)||e.has(t,n)}))(Mn);class Kn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Gn="@firebase/app",Qn="0.10.13",Jn=new In("@firebase/app"),Yn="@firebase/app-compat",Xn="@firebase/analytics-compat",$n="@firebase/analytics",Zn="@firebase/app-check-compat",er="@firebase/app-check",tr="@firebase/auth",nr="@firebase/auth-compat",rr="@firebase/database",ir="@firebase/data-connect",or="@firebase/database-compat",ar="@firebase/functions",sr="@firebase/functions-compat",lr="@firebase/installations",cr="@firebase/installations-compat",ur="@firebase/messaging",dr="@firebase/messaging-compat",hr="@firebase/performance",fr="@firebase/performance-compat",pr="@firebase/remote-config",gr="@firebase/remote-config-compat",mr="@firebase/storage",yr="@firebase/storage-compat",vr="@firebase/firestore",br="@firebase/vertexai-preview",xr="@firebase/firestore-compat",wr="firebase",Sr="[DEFAULT]",kr={[Gn]:"fire-core",[Yn]:"fire-core-compat",[$n]:"fire-analytics",[Xn]:"fire-analytics-compat",[er]:"fire-app-check",[Zn]:"fire-app-check-compat",[tr]:"fire-auth",[nr]:"fire-auth-compat",[rr]:"fire-rtdb",[ir]:"fire-data-connect",[or]:"fire-rtdb-compat",[ar]:"fire-fn",[sr]:"fire-fn-compat",[lr]:"fire-iid",[cr]:"fire-iid-compat",[ur]:"fire-fcm",[dr]:"fire-fcm-compat",[hr]:"fire-perf",[fr]:"fire-perf-compat",[pr]:"fire-rc",[gr]:"fire-rc-compat",[mr]:"fire-gcs",[yr]:"fire-gcs-compat",[vr]:"fire-fst",[xr]:"fire-fst-compat",[br]:"fire-vertex","fire-js":"fire-js",[wr]:"fire-js-all"},Cr=new Map,Er=new Map,Tr=new Map;function Ar(e,t){try{e.container.addComponent(t)}catch(sm){Jn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),sm)}}function _r(e){const t=e.name;if(Tr.has(t))return Jn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Tr.set(t,e);for(const n of Cr.values())Ar(n,e);for(const n of Er.values())Ar(n,e);return!0}function Ir(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Or(e){return void 0!==e.settings}const Rr=new cn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Nr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new bn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}const Pr="10.14.1";function Lr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Sr,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Rr.create("bad-app-name",{appName:String(i)});if(n||(n=tn()),!n)throw Rr.create("no-options");const o=Cr.get(i);if(o){if(dn(n,o.options)&&dn(r,o.config))return o;throw Rr.create("duplicate-app",{appName:i})}const a=new Sn(i);for(const l of Tr.values())a.addComponent(l);const s=new Nr(n,r,a);return Cr.set(i,s),s}function jr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr;const t=Cr.get(e);if(!t&&e===Sr&&tn())return Lr();if(!t)throw Rr.create("no-app",{appName:e});return t}function Dr(e,t,n){var r;let i=null!==(r=kr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Jn.warn(e.join(" "))}_r(new bn("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Mr="firebase-heartbeat-store";let Fr=null;function zr(){return Fr||(Fr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=Un(a);return r&&a.addEventListener("upgradeneeded",e=>{r(Un(a.result),e.oldVersion,e.newVersion,Un(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Mr)}catch(sm){console.warn(sm)}}}).catch(e=>{throw Rr.create("idb-open",{originalErrorMessage:e.message})})),Fr}async function Ur(e,t){try{const n=(await zr()).transaction(Mr,"readwrite"),r=n.objectStore(Mr);await r.put(t,Br(e)),await n.done}catch(sm){if(sm instanceof ln)Jn.warn(sm.message);else{const t=Rr.create("idb-set",{originalErrorMessage:null===sm||void 0===sm?void 0:sm.message});Jn.warn(t.message)}}}function Br(e){return"".concat(e.name,"!").concat(e.options.appId)}class Vr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Hr(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Wr();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(sm){Jn.warn(sm)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Wr(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),qr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),qr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Yt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(sm){return Jn.warn(sm),""}}}function Wr(){return(new Date).toISOString().substring(0,10)}class Hr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!sn()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await zr()).transaction(Mr),n=await t.objectStore(Mr).get(Br(e));return await t.done,n}catch(sm){if(sm instanceof ln)Jn.warn(sm.message);else{const t=Rr.create("idb-get",{originalErrorMessage:null===sm||void 0===sm?void 0:sm.message});Jn.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ur(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ur(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function qr(e){return Yt(JSON.stringify({version:2,heartbeats:e})).length}var Kr;Kr="",_r(new bn("platform-logger",e=>new Kn(e),"PRIVATE")),_r(new bn("heartbeat",e=>new Vr(e),"PRIVATE")),Dr(Gn,Qn,Kr),Dr(Gn,Qn,"esm2017"),Dr("fire-js","");Dr("firebase","10.14.1","app");function Gr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Qr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Jr=Qr,Yr=new cn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xr=new In("@firebase/auth");function $r(e){if(Xr.logLevel<=Cn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xr.error("Auth (".concat(Pr,"): ").concat(e),...n)}}function Zr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ii(e,...n)}function ei(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ii(e,...n)}function ti(e,t,n){const r=Object.assign(Object.assign({},Jr()),{[t]:n});return new cn("auth","Firebase",r).create(t,{appName:e.name})}function ni(e){return ti(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ri(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Zr(e,"argument-error"),ti(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function ii(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Yr.create(e,...n)}function oi(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ii(t,...r)}}function ai(e){const t="INTERNAL ASSERTION FAILED: "+e;throw $r(t),new Error(t)}function si(e,t){e||ai(t)}function li(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ci(){return"http:"===ui()||"https:"===ui()}function ui(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function di(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ci()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class hi{constructor(e,t){this.shortDelay=e,this.longDelay=t,si(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return di()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fi(e,t){si(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class pi{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},mi=new hi(3e4,6e4);function yi(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function vi(e,t,n,r){return bi(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=fn(Object.assign({key:e.config.apiKey},o)).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:s},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),pi.fetch()(wi(e,e.config.apiHost,n,a),l)})}async function bi(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},gi),t);try{const t=new ki(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ci(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ci(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Ci(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Ci(e,"user-disabled",o);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw ti(e,s,a);Zr(e,s)}}catch(sm){if(sm instanceof ln)throw sm;Zr(e,"network-request-failed",{message:String(sm)})}}async function xi(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await vi(e,t,n,r,i);return"mfaPendingCredential"in o&&Zr(e,"multi-factor-auth-required",{_serverResponse:o}),o}function wi(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?fi(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Si(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ki{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(ei(this.auth,"network-request-failed")),mi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ci(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ei(e,t,r);return i.customData._tokenResponse=n,i}function Ei(e){return void 0!==e&&void 0!==e.enterprise}class Ti{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Si(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Ai(e,t){return vi(e,"GET","/v2/recaptchaConfig",yi(e,t))}async function _i(e,t){return vi(e,"POST","/v1/accounts:lookup",t)}function Ii(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(sm){}}function Oi(e){return 1e3*Number(e)}function Ri(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return $r("JWT malformed, contained fewer than 3 sections"),null;try{const e=Xt(n);return e?JSON.parse(e):($r("Failed to decode base64 JWT payload"),null)}catch(sm){return $r("Caught error parsing JWT payload as JSON",null===sm||void 0===sm?void 0:sm.toString()),null}}function Ni(e){const t=Ri(e);return oi(t,"internal-error"),oi("undefined"!==typeof t.exp,"internal-error"),oi("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Pi(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(sm){throw sm instanceof ln&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(sm)&&e.auth.currentUser===e&&await e.auth.signOut(),sm}}class Li{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(sm){return void((null===sm||void 0===sm?void 0:sm.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class ji{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ii(this.lastLoginAt),this.creationTime=Ii(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Di(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Pi(e,_i(n,{idToken:r}));oi(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?Mi(o.providerUserInfo):[],s=function(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),u=!!l&&c,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new ji(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(e,d)}function Mi(e){return e.map(e=>{var{providerId:t}=e,n=Gr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Fi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oi(e.idToken,"internal-error"),oi("undefined"!==typeof e.idToken,"internal-error"),oi("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Ni(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){oi(0!==e.length,"internal-error");const t=Ni(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(oi(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await bi(e,{},async()=>{const n=fn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=wi(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",pi.fetch()(o,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Fi;return n&&(oi("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(oi("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(oi("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fi,this.toJSON())}_performRefresh(){return ai("not implemented")}}function zi(e,t){oi("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ui{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Gr(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Li(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ji(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Pi(this,this.stsTokenManager.getToken(this.auth,e));return oi(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=vn(e),r=await n.getIdToken(t),i=Ri(r);oi(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Ii(Oi(i.auth_time)),issuedAtTime:Ii(Oi(i.iat)),expirationTime:Ii(Oi(i.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=vn(e);await Di(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(oi(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ui(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){oi(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Di(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Or(this.auth.app))return Promise.reject(ni(this.auth));const e=await this.getIdToken();return await Pi(this,async function(e,t){return vi(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,a,s,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:S}=t;oi(v&&S,e,"internal-error");const k=Fi.fromJSON(this.name,S);oi("string"===typeof v,e,"internal-error"),zi(u,e.name),zi(d,e.name),oi("boolean"===typeof b,e,"internal-error"),oi("boolean"===typeof x,e,"internal-error"),zi(h,e.name),zi(f,e.name),zi(p,e.name),zi(g,e.name),zi(m,e.name),zi(y,e.name);const C=new Ui({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:m,lastLoginAt:y});return w&&Array.isArray(w)&&(C.providerData=w.map(e=>Object.assign({},e))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Fi;r.updateFromServerResponse(t);const i=new Ui({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Di(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];oi(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Mi(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new Fi;a.updateFromIdToken(n);const s=new Ui({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new ji(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(s,l),s}}const Bi=new Map;function Vi(e){si(e instanceof Function,"Expected a class definition");let t=Bi.get(e);return t?(si(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Bi.set(e,t),t)}class Wi{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Wi.type="NONE";const Hi=Wi;function qi(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Ki{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=qi(this.userKey,r.apiKey,i),this.fullPersistenceKey=qi("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ui._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Ki(Vi(Hi),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Vi(Hi);const o=qi(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(o);if(t){const n=Ui._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const s=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(l){}})),new Ki(i,e,n)):new Ki(i,e,n)}}function Gi(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Xi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Qi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Zi(t))return"Blackberry";if(eo(t))return"Webos";if(Ji(t))return"Safari";if((t.includes("chrome/")||Yi(t))&&!t.includes("edge/"))return"Chrome";if($i(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Qi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on();return/firefox\//i.test(e)}function Ji(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:on()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Yi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on();return/crios\//i.test(e)}function Xi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on();return/iemobile/i.test(e)}function $i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on();return/android/i.test(e)}function Zi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on();return/blackberry/i.test(e)}function eo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on();return/webos/i.test(e)}function to(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function no(){return function(){const e=on();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function ro(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on();return to(e)||$i(e)||eo(e)||Zi(e)||/windows phone/i.test(e)||Xi(e)}function io(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Gi(on());break;case"Worker":t="".concat(Gi(on()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Pr,"/").concat(r)}class oo{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(sm){r(sm)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(sm){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===sm||void 0===sm?void 0:sm.message})}}}class ao{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(o=s.containsNumericCharacter)||void 0===o||o),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class so{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new co(this),this.idTokenSubscription=new co(this),this.beforeStateQueue=new oo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vi(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Ki.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(sm){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await _i(this,{idToken:e}),n=await Ui._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Or(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==o||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(sm){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(sm))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return oi(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(sm){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Di(e)}catch(sm){if((null===sm||void 0===sm?void 0:sm.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Or(this.app))return Promise.reject(ni(this));const t=e?vn(e):null;return t&&oi(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&oi(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Or(this.app)?Promise.reject(ni(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Or(this.app)?Promise.reject(ni(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vi(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return vi(e,"GET","/v2/passwordPolicy",yi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ao(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cn("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return vi(e,"POST","/v2/accounts:revokeToken",yi(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Vi(e)||this._popupRedirectResolver;oi(t,this,"argument-error"),this.redirectPersistenceManager=await Ki.create(this,[Vi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oi(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oi(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=io(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Xr.logLevel<=Cn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xr.warn("Auth (".concat(Pr,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function lo(e){return vn(e)}class co{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new mn(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return oi(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let uo={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ho(e){return uo.loadJS(e)}function fo(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class po{constructor(e){this.type="recaptcha-enterprise",this.auth=lo(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Ei(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Ai(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Ti(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Ei(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=uo.recaptchaEnterpriseScript;0!==t.length&&(t+=i),ho(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function go(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new po(e);let o;try{o=await i.verify(n)}catch(s){o=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function mo(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await go(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await go(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}function yo(e,t,n){const r=lo(e);oi(r._canInitEmulator,r,"emulator-config-failed"),oi(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=vo(t),{host:a,port:s}=function(e){const t=vo(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:bo(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:bo(t)}}}(t),l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(o,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function vo(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function bo(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class xo{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ai("not implemented")}_getIdTokenResponse(e){return ai("not implemented")}_linkToIdToken(e,t){return ai("not implemented")}_getReauthenticationResolver(e){return ai("not implemented")}}async function wo(e,t){return vi(e,"POST","/v1/accounts:signUp",t)}async function So(e,t){return xi(e,"POST","/v1/accounts:signInWithPassword",yi(e,t))}class ko extends xo{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ko(e,t,"password")}static _fromEmailAndCode(e,t){return new ko(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return mo(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",So);case"emailLink":return async function(e,t){return xi(e,"POST","/v1/accounts:signInWithEmailLink",yi(e,t))}(e,{email:this._email,oobCode:this._password});default:Zr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return mo(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wo);case"emailLink":return async function(e,t){return xi(e,"POST","/v1/accounts:signInWithEmailLink",yi(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Zr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Co(e,t){return xi(e,"POST","/v1/accounts:signInWithIdp",yi(e,t))}class Eo extends xo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Gr(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Eo(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return Co(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Co(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Co(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fn(t)}return e}}const To={USER_NOT_FOUND:"user-not-found"};class Ao extends xo{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ao({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ao({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return xi(e,"POST","/v1/accounts:signInWithPhoneNumber",yi(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await xi(e,"POST","/v1/accounts:signInWithPhoneNumber",yi(e,t));if(n.temporaryProof)throw Ci(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return xi(e,"POST","/v1/accounts:signInWithPhoneNumber",yi(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),To)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ao({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class _o{constructor(e){var t,n,r,i,o,a;const s=pn(gn(e)),l=null!==(t=s.apiKey)&&void 0!==t?t:null,c=null!==(n=s.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);oi(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=s.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=pn(gn(e)).link,n=t?pn(gn(t)).deep_link_id:null,r=pn(gn(e)).deep_link_id;return(r?pn(gn(r)).link:null)||r||n||t||e}(e);try{return new _o(t)}catch(n){return null}}}class Io{constructor(){this.providerId=Io.PROVIDER_ID}static credential(e,t){return ko._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=_o.parseLink(t);return oi(n,"argument-error"),ko._fromEmailAndCode(e,n.code,n.tenantId)}}Io.PROVIDER_ID="password",Io.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Oo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ro extends Oo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class No extends Ro{constructor(){super("facebook.com")}static credential(e){return Eo._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return No.credential(t.oauthAccessToken)}catch(n){return null}}}No.FACEBOOK_SIGN_IN_METHOD="facebook.com",No.PROVIDER_ID="facebook.com";class Po extends Ro{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Eo._fromParams({providerId:Po.PROVIDER_ID,signInMethod:Po.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Po.credentialFromTaggedObject(e)}static credentialFromError(e){return Po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Po.credential(n,r)}catch(i){return null}}}Po.GOOGLE_SIGN_IN_METHOD="google.com",Po.PROVIDER_ID="google.com";class Lo extends Ro{constructor(){super("github.com")}static credential(e){return Eo._fromParams({providerId:Lo.PROVIDER_ID,signInMethod:Lo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lo.credentialFromTaggedObject(e)}static credentialFromError(e){return Lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Lo.credential(t.oauthAccessToken)}catch(n){return null}}}Lo.GITHUB_SIGN_IN_METHOD="github.com",Lo.PROVIDER_ID="github.com";class jo extends Ro{constructor(){super("twitter.com")}static credential(e,t){return Eo._fromParams({providerId:jo.PROVIDER_ID,signInMethod:jo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return jo.credentialFromTaggedObject(e)}static credentialFromError(e){return jo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return jo.credential(n,r)}catch(i){return null}}}async function Do(e,t){return xi(e,"POST","/v1/accounts:signUp",yi(e,t))}jo.TWITTER_SIGN_IN_METHOD="twitter.com",jo.PROVIDER_ID="twitter.com";class Mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Ui._fromIdTokenResponse(e,n,r),o=Fo(n);return new Mo({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Fo(n);return new Mo({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Fo(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class zo extends ln{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,zo.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new zo(e,t,n,r)}}function Uo(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw zo._fromErrorAndOperation(e,n,t,r);throw n})}async function Bo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Pi(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Mo._forOperation(e,"link",r)}async function Vo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Or(r.app))return Promise.reject(ni(r));const i="reauthenticate";try{const o=await Pi(e,Uo(r,i,t,e),n);oi(o.idToken,r,"internal-error");const a=Ri(o.idToken);oi(a,r,"internal-error");const{sub:s}=a;return oi(e.uid===s,r,"user-mismatch"),Mo._forOperation(e,i,o)}catch(sm){throw(null===sm||void 0===sm?void 0:sm.code)==="auth/".concat("user-not-found")&&Zr(r,"user-mismatch"),sm}}async function Wo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Or(e.app))return Promise.reject(ni(e));const r="signIn",i=await Uo(e,r,t),o=await Mo._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function Ho(e,t){return Wo(lo(e),t)}async function qo(e){const t=lo(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}new WeakMap;const Ko="__sak";class Go{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ko,"1"),this.storage.removeItem(Ko),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Qo extends Go{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ro(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);no()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Qo.type="LOCAL";const Jo=Qo;class Yo extends Go{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Yo.type="SESSION";const Xo=Yo;class $o{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new $o(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map(async e=>e(t.origin,i)),s=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Zo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}$o.receivers=[];class ea{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,s)=>{const l=Zo("",20);r.port1.start();const c=setTimeout(()=>{s(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function ta(){return window}function na(){return"undefined"!==typeof ta().WorkerGlobalScope&&"function"===typeof ta().importScripts}const ra="firebaseLocalStorageDb",ia="firebaseLocalStorage",oa="fbase_key";class aa{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function sa(e,t){return e.transaction([ia],t?"readwrite":"readonly").objectStore(ia)}function la(){const e=indexedDB.open(ra,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(ia,{keyPath:oa})}catch(sm){n(sm)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(ia)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(ra);return new aa(e).toPromise()}(),t(await la()))})})}async function ca(e,t,n){const r=sa(e,!0).put({[oa]:t,value:n});return new aa(r).toPromise()}function ua(e,t){const n=sa(e,!0).delete(t);return new aa(n).toPromise()}class da{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await la()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(sm){if(t++>3)throw sm;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return na()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$o._getInstance(na()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new ea(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await la();return await ca(e,Ko,"1"),await ua(e,Ko),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ca(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=sa(e,!1).get(t),r=await new aa(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ua(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=sa(e,!1).getAll();return new aa(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}da.type="LOCAL";const ha=da;fo("rcb"),new hi(3e4,6e4);const fa="recaptcha";async function pa(e,t,n){var r;const i=await n.verify();try{let o;if(oi("string"===typeof i,e,"argument-error"),oi(n.type===fa,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){oi("enroll"===t.type,e,"internal-error");const n=await function(e,t){return vi(e,"POST","/v2/accounts/mfaEnrollment:start",yi(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{oi("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;oi(n,e,"missing-multi-factor-info");const a=await function(e,t){return vi(e,"POST","/v2/accounts/mfaSignIn:start",yi(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return vi(e,"POST","/v1/accounts:sendVerificationCode",yi(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class ga{constructor(e){this.providerId=ga.PROVIDER_ID,this.auth=lo(e)}verifyPhoneNumber(e,t){return pa(this.auth,e,vn(t))}static credential(e,t){return Ao._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ga.credentialFromTaggedObject(t)}static credentialFromError(e){return ga.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ao._fromTokenResponse(n,r):null}}function ma(e,t){return t?Vi(t):(oi(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ga.PROVIDER_ID="phone",ga.PHONE_SIGN_IN_METHOD="phone";class ya extends xo{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Co(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Co(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Co(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function va(e){return Wo(e.auth,new ya(e),e.bypassAuthState)}function ba(e){const{auth:t,user:n}=e;return oi(n,t,"internal-error"),Vo(n,new ya(e),e.bypassAuthState)}async function xa(e){const{auth:t,user:n}=e;return oi(n,t,"internal-error"),Bo(n,new ya(e),e.bypassAuthState)}class wa{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(sm){this.reject(sm)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(sm){this.reject(sm)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return va;case"linkViaPopup":case"linkViaRedirect":return xa;case"reauthViaPopup":case"reauthViaRedirect":return ba;default:Zr(this.auth,"internal-error")}}resolve(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Sa=new hi(2e3,1e4);class ka extends wa{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,ka.currentPopupAction&&ka.currentPopupAction.cancel(),ka.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oi(e,this.auth,"internal-error"),e}async onExecution(){si(1===this.filter.length,"Popup operations only handle one event");const e=Zo();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ka.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ei(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Sa.get())};e()}}ka.currentPopupAction=null;const Ca=new Map;class Ea extends wa{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ca.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=_a(t),r=Aa(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(sm){e=()=>Promise.reject(sm)}Ca.set(this.auth._key(),e)}return this.bypassAuthState||Ca.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ta(e,t){Ca.set(e._key(),t)}function Aa(e){return Vi(e._redirectPersistence)}function _a(e){return qi("pendingRedirect",e.config.apiKey,e.name)}async function Ia(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Or(e.app))return Promise.reject(ni(e));const r=lo(e),i=ma(r,t),o=new Ea(r,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Oa{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Na(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Na(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ei(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ra(e))}saveEventToCache(e){this.cachedEventUids.add(Ra(e)),this.lastProcessedEventTime=Date.now()}}function Ra(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Na(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Pa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,La=/^https?/;async function ja(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return vi(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Da(r))return}catch(n){}Zr(e,"unauthorized-domain")}function Da(e){const t=li(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!La.test(n))return!1;if(Pa.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ma=new hi(3e4,6e4);function Fa(){const e=ta().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function za(e){return new Promise((t,n)=>{var r,i,o;function a(){Fa(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Fa(),n(ei(e,"network-request-failed"))},timeout:Ma.get()})}if(null===(i=null===(r=ta().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=ta().gapi)||void 0===o?void 0:o.load)){const t=fo("iframefcb");return ta()[t]=()=>{gapi.load?a():n(ei(e,"network-request-failed"))},ho("".concat(uo.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw Ua=null,e})}let Ua=null;const Ba=new hi(5e3,15e3),Va={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ha(e){const t=e.config;oi(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?fi(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Pr},i=Wa.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(fn(r).slice(1))}async function qa(e){const t=await function(e){return Ua=Ua||za(e),Ua}(e),n=ta().gapi;return oi(n,e,"internal-error"),t.open({where:document.body,url:Ha(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Va,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=ei(e,"network-request-failed"),o=ta().setTimeout(()=>{r(i)},Ba.get());function a(){ta().clearTimeout(o),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const Ka={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ga{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(sm){}}}function Qa(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=Object.assign(Object.assign({},Ka),{width:r.toString(),height:i.toString(),top:o,left:a}),c=on().toLowerCase();n&&(s=Yi(c)?"_blank":n),Qi(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return to(arguments.length>0&&void 0!==arguments[0]?arguments[0]:on())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new Ga(null);const d=window.open(t||"",s,u);oi(d,e,"popup-blocked");try{d.focus()}catch(sm){}return new Ga(d)}const Ja="__/auth/handler",Ya="emulator/auth/handler",Xa=encodeURIComponent("fac");async function $a(e,t,n,r,i,o){oi(e.config.authDomain,e,"auth-domain-config-required"),oi(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Pr,eventId:i};if(t instanceof Oo){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))a[e]=t}if(t instanceof Ro){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const u of Object.keys(s))void 0===s[u]&&delete s[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Xa,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ja);return fi(t,Ya)}(e),"?").concat(fn(s).slice(1)).concat(c)}const Za="webStorageSupport";const es=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xo,this._completeRedirectFn=Ia,this._overrideRedirectResult=Ta}async _openPopup(e,t,n,r){var i;si(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Qa(e,await $a(e,t,n,li(),r),Zo())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){ta().location.href=e}(await $a(e,t,n,li(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(si(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await qa(e),n=new Oa(e);return t.register("authEvent",t=>{oi(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Za,{type:Za},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Za];void 0!==i&&t(!!i),Zr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ja(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ro()||Ji()||to()}};var ts="@firebase/auth",ns="1.7.9";class rs{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){oi(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const is=nn("authIdTokenMaxAge")||300;let os=null;var as;uo={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=ei("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},as="Browser",_r(new bn("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;oi(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:s,clientPlatform:as,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:io(as)},c=new so(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vi);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),_r(new bn("auth-internal",e=>(e=>new rs(e))(lo(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Dr(ts,ns,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(as)),Dr(ts,ns,"esm2017");var ss,ls,cs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},us={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],a=t+(o^n&(i^o))+r[0]+3614090360&4294967295;a=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(a<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((o=(t=n+((a=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=o+((a=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,o=this.h,a=0;a<t;){if(0==o)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[o++]=e.charCodeAt(a++),o==this.blockSize){n(this,i),o=0;break}}else for(;a<t;)if(i[o++]=e[a++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function o(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return s;if(0>e)return h(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var s=o(0),l=o(1),c=o(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(s,s);if(d(e))return t=m(h(e),t),new g(h(t.g),h(t.h));if(d(t))return t=m(e,h(t)),new g(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),o=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=o.add(r);0>=c.l(e)&&(i=i.add(n),o=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new g(i,t)}for(i=s;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(o=a(n)).j(t);d(c)||0<c.l(e);)c=(o=a(n-=r)).j(t);u(o)&&(o=l),i=i.add(o),e=f(e,c)}return new g(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,o=[],a=0;a<i;a++)o[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,o=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,o=0;o<=t;o++){var a=i+(65535&this.i(o))+(65535&e.i(o)),s=(a>>>16)+(this.i(o)>>>16)+(e.i(o)>>>16);i=s>>>16,a&=65535,s&=65535,n[o]=s<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return s;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var o=0;o<e.g.length;o++){var l=this.i(i)>>>16,f=65535&this.i(i),g=e.i(o)>>>16,m=65535&e.i(o);n[2*i+2*o]+=f*m,p(n,2*i+2*o),n[2*i+2*o+1]+=l*m,p(n,2*i+2*o+1),n[2*i+2*o+1]+=f*g,p(n,2*i+2*o+1),n[2*i+2*o+2]+=l*g,p(n,2*i+2*o+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,ls=us.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=s,o=0;o<t.length;o+=8){var l=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},ss=us.Integer=r}).apply("undefined"!==typeof cs?cs:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ds,hs,fs,ps,gs,ms,ys,vs,bs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},xs={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof bs&&bs];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in i))break e;i=i[a]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?s:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(o(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){i.setTimeout(()=>{throw e},0)}function C(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let A,_=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},O=()=>{const e=i.Promise.resolve(void 0);A=()=>{e.then(R)}};var R=()=>{for(var e;e=C();){try{e.h.call(e.g)}catch(n){k(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}_=!1};function N(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}N.prototype.s=!1,N.prototype.ma=function(){this.s||(this.s=!0,this.N())},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var L=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function j(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:D[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&j.aa.h.call(this)}}d(j,P);var D={2:"touch",3:"pen",4:"mouse"};j.prototype.h=function(){j.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function z(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function V(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function W(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}B.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=W(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new z(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),q={};function K(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)K(e,t[o],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=a(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new B(e)),(n=l.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)L||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Q(e,t[o],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function J(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)J(e,t[o],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=W(o=e.g[t],n,r,i))&&(U(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=W(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])V(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(V(n,e),0==n.h&&(n.src=null,t[H]=null)):U(e)}}}function X(e){return e in q?q[e]:q[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new j(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof B?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){N.call(this),this.i=new B(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var i=t;w(t=new P(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ie(a=t.g=n[o],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.da&&a.capture==n){var s=a.listener,l=a.ha||a.src;a.fa&&V(e.i,a),i=!1!==s.call(l,r)&&i}}return i&&!r.defaultPrevented}function oe(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=oe(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,N),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){J(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class se extends N{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){N.call(this),this.h=e,this.g={}}d(le,N);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){P.call(this,"d")}function be(){P.call(this,"c")}d(ve,P),d(be,P);var xe={},we=null;function Se(){return we=we||new ne}function ke(e){P.call(this,xe.La,e)}function Ce(e){const t=Se();re(t,new ke(t))}function Ee(e,t){P.call(this,xe.STAT_EVENT,e),this.stat=t}function Te(e){const t=Se();re(t,new Ee(t,e))}function Ae(e,t){P.call(this,xe.Ma,e),this.size=t}function _e(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ie(){this.g=!0}function Oe(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return de(n)}catch(s){return t}}(e,n)+(r?" "+r:"")})}xe.La="serverreachability",d(ke,P),xe.STAT_EVENT="statevent",d(Ee,P),xe.Ma="timingevent",d(Ae,P),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var Re,Ne={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Le(){}function je(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}d(Le,pe),Le.prototype.g=function(){return new XMLHttpRequest},Le.prototype.i=function(){return{}},Re=new Le;var Me={},Fe={};function ze(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),We(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Ct(n.i,"t",r),e.C=0,n=e.j.J,e.h=new De,e.g=hn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new se(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var o=0;o<i.length;o++){var a=K(n,i[o],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ce(),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o)for(var a="",s=o.split("&"),l=0;l<s.length;l++){var c=s[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Be(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ve(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function We(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=_e(c(e.ba,e),t)}function qe(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||sn(e.j,e)}function Ge(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Jt(n)}nn(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=_e(c(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else cn(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(et(o,o.h),o.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var s=a,l=r.L;l&&(s.I=l),s.B&&(qe(s),We(s)),r.g=a}else tn(r);0<n.i.length&&Xt(n)}else"stop"!=c[0]&&"close"!=c[0]||cn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?cn(n,7):Qt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ce()}catch(u){}}je.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},je.prototype.Y=function(e){try{if(e==this.g)e:{const h=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||qt(this.g)))){this.J||4!=h||7==t||Ce(),qe(this);var n=this.g.Z();this.X=n;t:if(Be(this)){var r=qt(this.g);e="";var o=r.length,a=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var s="";break t}this.h.i=new i.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==o-1)});r.length=0,this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,o,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Te(12),Ge(this),Ke(this);break e}Oe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<s.length;){if(e=Ve(this,s),e==Fe){4==h&&(this.s=4,Te(14),n=!1),Oe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Te(15),Oe(this.i,this.l,s,"[Invalid Chunk]"),n=!1;break}Oe(this.i,this.l,e,null),Qe(this,e)}if(Be(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=s.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<s.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),rn(d),d.M=!0,Te(11))}}else Oe(this.i,this.l,s,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else Oe(this.i,this.l,s,null),Qe(this,s);4==h&&Ge(this),this.o&&!this.J&&(4==h?sn(this.j,this):(this.o=!1,We(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=S(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Ge(this),Ke(this)}}}catch(ws){}},je.prototype.cancel=function(){this.J=!0,Ge(this)},je.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ce(),Te(17)),Ge(this),this.s=2,Ke(this)):He(this,this.S-e)};var Je=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(o(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ot){this.h=e.h,st(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,st(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function at(e){return new ot(e)}function st(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(wt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),Ct(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,vt)),e.i=new xt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ot.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:mt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var gt=/[#\/\?@]/g,mt=/[#\?:]/g,yt=/[#\?]/g,vt=/[#\?@]/g,bt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function St(e,t){wt(e),t=Et(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function kt(e,t){return wt(e),t=Et(e,t),e.g.has(t)}function Ct(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(Et(e,t),h(n)),e.h+=n.length)}function Et(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(o){}}function At(){this.g=new fe}function _t(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;a(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(sm){throw t.push(r+"type="+encodeURIComponent("_badmap")),sm}}function It(e){this.l=e.Ub||null,this.j=e.eb||!1}function Ot(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Rt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Nt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Pt(e)}function Pt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function jt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Dt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){wt(this),this.i=null,e=Et(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){wt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){wt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){wt(this);let t=[];if("string"===typeof e)kt(this,e)&&(t=t.concat(this.g.get(Et(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return wt(this),this.i=null,kt(this,e=Et(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=o;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},d(It,pe),It.prototype.g=function(){return new Ot(this.l,this.j)},It.prototype.i=function(e){return function(){return e}}({}),d(Ot,ne),(e=Ot.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Pt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Pt(this)),this.g&&(this.readyState=3,Pt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Nt(this):Pt(this),3==this.readyState&&Rt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Nt(this))},e.Qa=function(e){this.g&&(this.response=e,Nt(this))},e.ga=function(){this.g&&Nt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ot.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Dt,ne);var Mt=/^https?$/i,Ft=["POST","PUT"];function zt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Ut(e),Vt(e)}function Ut(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))oe(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var o;if(o=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),o=!Mt.test(a?a.toLowerCase():"")}n=o}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var s=2<Ht(e)?e.g.statusText:""}catch(l){s=""}e.l=s+" ["+e.Z()+"]",Ut(e)}}finally{Vt(e)}}}function Vt(e,t){if(e.g){Wt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(sm){}}}function Wt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function qt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Cs){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new At,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Yt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),Zt(e,n),(t=new je(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=hn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),We(t)}un(e)}function Jt(e){e.g&&(rn(e),e.g.cancel(),e.g=null)}function Yt(e){Jt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;A||O(),_||(A(),_=!0),I.add(t,e),e.B=0}}function $t(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),Zt(e,r),e.m&&e.o&&jt(r,e.m,e.o),n=new je(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=en(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),ze(n,r,t)}function Zt(e,t){e.H&&v(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function en(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const s=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{_t(s,e,"req"+n+"_")}catch(ws){r&&r(s)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function tn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;A||O(),_||(A(),_=!0),I.add(t,e),e.v=0}}function nn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=_e(c(e.Fa,e),ln(e,e.v)),e.v++,!0)}function rn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new je(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),Zt(e,t),e.m&&e.o&&jt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Ue(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function sn(e,t){var n=null;if(e.g==t){an(e),rn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Se(),new Ae(r,n)),Xt(e)}else tn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=_e(c(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&nn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:cn(e,5);break;case 4:cn(e,10);break;case 3:cn(e,6);break;default:cn(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function cn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new ot(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||st(r,"https"),dt(r),t?function(e,t){const n=new Ie;if(i.Image){const r=new Image;r.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout(()=>{n.abort(),Tt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Tt(0,0,!1,t)})}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),un(e),Yt(e)}function un(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof ot?at(n):new ot(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var o=i.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var a=new ot(null);r&&st(a,r),t&&(a.g=t),o&&lt(a,o),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),Zt(e,r),r}function hn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Dt(new It({eb:n})):new Dt(e.pa)).Ha(e.J),t}function fn(){}function pn(){}function gn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new vn(this)}function mn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){be.call(this),this.status=1}function vn(e){this.g=e}(e=Dt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?ge(this.o):ge(Re),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void zt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),o=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,s]of n)this.g.setRequestHeader(i,s);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wt(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){zt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Vt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),Dt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new je(this,this.j,e);let o=this.o;if(this.S&&(o?(o=b(o),w(o,this.S)):o=this.S),null!==this.m||this.O||(i.H=o,o=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=en(this,i,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),Zt(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Lt(o)))+"&"+t:this.m&&jt(n,this.m,o)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,ze(i,n,null)):ze(i,n,t),this.G=2}}else 3==this.G&&(e?$t(this,e):0==this.i.length||Xe(this.h)||$t(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=_e(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Jt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Jt(this),nn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=fn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},pn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Je(t.Ya++,e)),3==t.G&&Xt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.aa.N.call(this)},d(mn,ve),d(yn,be),d(vn,fn),vn.prototype.ua=function(){re(this.g,"a")},vn.prototype.ta=function(e){re(this.g,new mn(e))},vn.prototype.sa=function(e){re(this.g,new yn)},vn.prototype.ra=function(){re(this.g,"b")},pn.prototype.createWebChannel=pn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,vs=xs.createWebChannelTransport=function(){return new pn},ys=xs.getStatEventTarget=function(){return Se()},ms=xs.Event=xe,gs=xs.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ne.NO_ERROR=0,Ne.TIMEOUT=8,Ne.HTTP_ERROR=6,ps=xs.ErrorCode=Ne,Pe.COMPLETE="complete",fs=xs.EventType=Pe,me.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,hs=xs.WebChannel=me,xs.FetchXmlHttpFactory=It,Dt.prototype.listenOnce=Dt.prototype.L,Dt.prototype.getLastError=Dt.prototype.Ka,Dt.prototype.getLastErrorCode=Dt.prototype.Ba,Dt.prototype.getStatus=Dt.prototype.Z,Dt.prototype.getResponseJson=Dt.prototype.Oa,Dt.prototype.getResponseText=Dt.prototype.oa,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Ha,ds=xs.XhrIo=Dt}).apply("undefined"!==typeof bs?bs:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const ws="@firebase/firestore";class Ss{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ss.UNAUTHENTICATED=new Ss(null),Ss.GOOGLE_CREDENTIALS=new Ss("google-credentials-uid"),Ss.FIRST_PARTY=new Ss("first-party-uid"),Ss.MOCK_USER=new Ss("mock-user");let ks="10.14.0";const Cs=new In("@firebase/firestore");function Es(){return Cs.logLevel}function Ts(e){if(Cs.logLevel<=Cn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Is);Cs.debug("Firestore (".concat(ks,"): ").concat(e),...i)}}function As(e){if(Cs.logLevel<=Cn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Is);Cs.error("Firestore (".concat(ks,"): ").concat(e),...i)}}function _s(e){if(Cs.logLevel<=Cn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Is);Cs.warn("Firestore (".concat(ks,"): ").concat(e),...i)}}function Is(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Os(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(ks,") INTERNAL ASSERTION FAILED: ")+e;throw As(t),new Error(t)}function Rs(e,t){e||Os()}function Ns(e,t){return e}const Ps={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ls extends ln{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class js{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ds{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Ms{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ss.UNAUTHENTICATED))}shutdown(){}}class Fs{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class zs{constructor(e){this.t=e,this.currentUser=Ss.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Rs(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new js;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new js,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Ts("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Ts("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new js)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Ts("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Rs("string"==typeof t.accessToken),new Ds(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Rs(null===e||"string"==typeof e),new Ss(e)}}class Us{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ss.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Bs{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Us(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ss.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vs{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ws{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Rs(void 0===this.o);const n=e=>{null!=e.error&&Ts("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Ts("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Ts("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Ts("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Rs("string"==typeof e.token),this.R=e.token,new Vs(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Hs(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class qs{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Hs(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Ks(e,t){return e<t?-1:e>t?1:0}function Gs(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class Qs{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ls(Ps.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ls(Ps.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ls(Ps.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ls(Ps.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qs.fromMillis(Date.now())}static fromDate(e){return Qs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Qs(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ks(this.nanoseconds,e.nanoseconds):Ks(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Js{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Js(e)}static min(){return new Js(new Qs(0,0))}static max(){return new Js(new Qs(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ys{constructor(e,t,n){void 0===t?t=0:t>e.length&&Os(),void 0===n?n=e.length-t:n>e.length-t&&Os(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ys.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ys?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xs extends Ys{construct(e,t,n){return new Xs(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Ls(Ps.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Xs(e)}static emptyPath(){return new Xs([])}}const $s=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zs extends Ys{construct(e,t,n){return new Zs(e,t,n)}static isValidIdentifier(e){return $s.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zs(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ls(Ps.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ls(Ps.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ls(Ps.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new Ls(Ps.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zs(t)}static emptyPath(){return new Zs([])}}class el{constructor(e){this.path=e}static fromPath(e){return new el(Xs.fromString(e))}static fromName(e){return new el(Xs.fromString(e).popFirst(5))}static empty(){return new el(Xs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xs.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Xs.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new el(new Xs(e.slice()))}}class tl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}tl.UNKNOWN_ID=-1;function nl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Js.fromTimestamp(1e9===r?new Qs(n+1,0):new Qs(n,r));return new il(i,el.empty(),t)}function rl(e){return new il(e.readTime,e.key,-1)}class il{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new il(Js.min(),el.empty(),-1)}static max(){return new il(Js.max(),el.empty(),-1)}}function ol(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=el.comparator(e.documentKey,t.documentKey),0!==n?n:Ks(e.largestBatchId,t.largestBatchId))}const al="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function ll(e){if(e.code!==Ps.FAILED_PRECONDITION||e.message!==al)throw e;Ts("LocalStore","Unexpectedly lost primary lease")}class cl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Os(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new cl((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof cl?t:cl.resolve(t)}catch(e){return cl.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):cl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):cl.reject(t)}static resolve(e){return new cl((t,n)=>{t(e)})}static reject(e){return new cl((t,n)=>{n(e)})}static waitFor(e){return new cl((t,n)=>{let r=0,i=0,o=!1;e.forEach(e=>{++r,e.next(()=>{++i,o&&i===r&&t()},e=>n(e))}),o=!0,i===r&&t()})}static or(e){let t=cl.resolve(!1);for(const n of e)t=t.next(e=>e?cl.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new cl((n,r)=>{const i=e.length,o=new Array(i);let a=0;for(let s=0;s<i;s++){const l=s;t(e[l]).next(e=>{o[l]=e,++a,a===i&&n(o)},e=>r(e))}})}static doWhile(e,t){return new cl((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function ul(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function dl(e){return"IndexedDbTransactionError"===e.name}class hl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function fl(e){return null==e}function pl(e){return 0===e&&1/e==-1/0}function gl(e){return"number"==typeof e&&Number.isInteger(e)&&!pl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}hl.oe=-1;const ml=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],vl=yl,bl=[...vl,"indexConfiguration","indexState","indexEntries"];function xl(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function wl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Sl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class kl{constructor(e,t){this.comparator=e,this.root=t||El.EMPTY}insert(e,t){return new kl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,El.BLACK,null,null))}remove(e){return new kl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,El.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cl(this.root,e,this.comparator,!0)}}class Cl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class El{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:El.RED,this.left=null!=r?r:El.EMPTY,this.right=null!=i?i:El.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new El(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return El.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return El.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,El.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,El.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Os();if(this.right.isRed())throw Os();const e=this.left.check();if(e!==this.right.check())throw Os();return e+(this.isRed()?0:1)}}El.EMPTY=null,El.RED=!0,El.BLACK=!1,El.EMPTY=new class{constructor(){this.size=0}get key(){throw Os()}get value(){throw Os()}get color(){throw Os()}get left(){throw Os()}get right(){throw Os()}copy(e,t,n,r,i){return this}insert(e,t,n){return new El(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Tl{constructor(e){this.comparator=e,this.data=new kl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Al(this.data.getIterator())}getIteratorFrom(e){return new Al(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Tl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Tl(this.comparator);return t.data=e,t}}class Al{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class _l{constructor(e){this.fields=e,e.sort(Zs.comparator)}static empty(){return new _l([])}unionWith(e){let t=new Tl(Zs.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new _l(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gs(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Il extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ol{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Il("Invalid base64 string: "+e):e}}(e);return new Ol(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ol(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ks(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ol.EMPTY_BYTE_STRING=new Ol("");const Rl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nl(e){if(Rs(!!e),"string"==typeof e){let t=0;const n=Rl.exec(e);if(Rs(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Pl(e.seconds),nanos:Pl(e.nanos)}}function Pl(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ll(e){return"string"==typeof e?Ol.fromBase64String(e):Ol.fromUint8Array(e)}function jl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Dl(e){const t=e.mapValue.fields.__previous_value__;return jl(t)?Dl(t):t}function Ml(e){const t=Nl(e.mapValue.fields.__local_write_time__.timestampValue);return new Qs(t.seconds,t.nanos)}class Fl{constructor(e,t,n,r,i,o,a,s,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=l}}class zl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new zl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof zl&&e.projectId===this.projectId&&e.database===this.database}}const Ul={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Bl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?jl(e)?4:nc(e)?9007199254740991:ec(e)?10:11:Os()}function Vl(e,t){if(e===t)return!0;const n=Bl(e);if(n!==Bl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ml(e).isEqual(Ml(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Nl(e.timestampValue),r=Nl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ll(e.bytesValue).isEqual(Ll(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Pl(e.geoPointValue.latitude)===Pl(t.geoPointValue.latitude)&&Pl(e.geoPointValue.longitude)===Pl(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Pl(e.integerValue)===Pl(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Pl(e.doubleValue),r=Pl(t.doubleValue);return n===r?pl(n)===pl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Gs(e.arrayValue.values||[],t.arrayValue.values||[],Vl);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(xl(n)!==xl(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Vl(n[i],r[i])))return!1;return!0}(e,t);default:return Os()}}function Wl(e,t){return void 0!==(e.values||[]).find(e=>Vl(e,t))}function Hl(e,t){if(e===t)return 0;const n=Bl(e),r=Bl(t);if(n!==r)return Ks(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ks(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Pl(e.integerValue||e.doubleValue),r=Pl(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ql(e.timestampValue,t.timestampValue);case 4:return ql(Ml(e),Ml(t));case 5:return Ks(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ll(e),r=Ll(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Ks(n[i],r[i]);if(0!==e)return e}return Ks(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ks(Pl(e.latitude),Pl(t.latitude));return 0!==n?n:Ks(Pl(e.longitude),Pl(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Kl(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,o;const a=e.fields||{},s=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=s.value)||void 0===r?void 0:r.arrayValue,u=Ks((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(o=null==c?void 0:c.values)||void 0===o?void 0:o.length)||0);return 0!==u?u:Kl(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ul.mapValue&&t===Ul.mapValue)return 0;if(e===Ul.mapValue)return 1;if(t===Ul.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let a=0;a<r.length&&a<o.length;++a){const e=Ks(r[a],o[a]);if(0!==e)return e;const t=Hl(n[r[a]],i[o[a]]);if(0!==t)return t}return Ks(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Os()}}function ql(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ks(e,t);const n=Nl(e),r=Nl(t),i=Ks(n.seconds,r.seconds);return 0!==i?i:Ks(n.nanos,r.nanos)}function Kl(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Hl(n[i],r[i]);if(e)return e}return Ks(n.length,r.length)}function Gl(e){return Ql(e)}function Ql(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Nl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ll(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return el.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ql(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Ql(e.fields[i]));return n+"}"}(e.mapValue):Os()}function Jl(e){return!!e&&"integerValue"in e}function Yl(e){return!!e&&"arrayValue"in e}function Xl(e){return!!e&&"nullValue"in e}function $l(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Zl(e){return!!e&&"mapValue"in e}function ec(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function tc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return wl(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=tc(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=tc(e.arrayValue.values[n]);return t}return Object.assign({},e)}function nc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class rc{constructor(e){this.value=e}static empty(){return new rc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Zl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tc(t)}setAll(e){let t=Zs.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=tc(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Zl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Zl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){wl(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new rc(tc(this.value))}}function ic(e){const t=[];return wl(e.fields,(e,n)=>{const r=new Zs([e]);if(Zl(n)){const e=ic(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new _l(t)}class oc{constructor(e,t,n,r,i,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new oc(e,0,Js.min(),Js.min(),Js.min(),rc.empty(),0)}static newFoundDocument(e,t,n,r){return new oc(e,1,t,Js.min(),n,r,0)}static newNoDocument(e,t){return new oc(e,2,t,Js.min(),Js.min(),rc.empty(),0)}static newUnknownDocument(e,t){return new oc(e,3,t,Js.min(),Js.min(),rc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Js.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Js.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof oc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new oc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ac{constructor(e,t){this.position=e,this.inclusive=t}}function sc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],a=e.position[i];if(r=o.field.isKeyField()?el.comparator(el.fromName(a.referenceValue),n.key):Hl(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function lc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Vl(e.position[n],t.position[n]))return!1;return!0}class cc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function uc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class dc{}class hc extends dc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new xc(e,t,n):"array-contains"===t?new Cc(e,n):"in"===t?new Ec(e,n):"not-in"===t?new Tc(e,n):"array-contains-any"===t?new Ac(e,n):new hc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new wc(e,n):new Sc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Hl(t,this.value)):null!==t&&Bl(this.value)===Bl(t)&&this.matchesComparison(Hl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Os()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fc extends dc{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new fc(e,t)}matches(e){return pc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function pc(e){return"and"===e.op}function gc(e){return mc(e)&&pc(e)}function mc(e){for(const t of e.filters)if(t instanceof fc)return!1;return!0}function yc(e){if(e instanceof hc)return e.field.canonicalString()+e.op.toString()+Gl(e.value);if(gc(e))return e.filters.map(e=>yc(e)).join(",");{const t=e.filters.map(e=>yc(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function vc(e,t){return e instanceof hc?function(e,t){return t instanceof hc&&e.op===t.op&&e.field.isEqual(t.field)&&Vl(e.value,t.value)}(e,t):e instanceof fc?function(e,t){return t instanceof fc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&vc(n,t.filters[r]),!0)}(e,t):void Os()}function bc(e){return e instanceof hc?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Gl(e.value))}(e):e instanceof fc?function(e){return e.op.toString()+" {"+e.getFilters().map(bc).join(" ,")+"}"}(e):"Filter"}class xc extends hc{constructor(e,t,n){super(e,t,n),this.key=el.fromName(n.referenceValue)}matches(e){const t=el.comparator(e.key,this.key);return this.matchesComparison(t)}}class wc extends hc{constructor(e,t){super(e,"in",t),this.keys=kc("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Sc extends hc{constructor(e,t){super(e,"not-in",t),this.keys=kc("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function kc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>el.fromName(e.referenceValue))}class Cc extends hc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yl(t)&&Wl(t.arrayValue,this.value)}}class Ec extends hc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Wl(this.value.arrayValue,t)}}class Tc extends hc{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Wl(this.value.arrayValue,t)}}class Ac extends hc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Wl(this.value.arrayValue,e))}}class _c{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function Ic(e){return new _c(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Oc(e){const t=Ns(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>yc(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),fl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Gl(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Gl(e)).join(",")),t.ue=e}return t.ue}function Rc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!uc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!vc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!lc(e.startAt,t.startAt)&&lc(e.endAt,t.endAt)}function Nc(e){return el.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Pc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Lc(e,t,n,r,i,o,a,s){return new Pc(e,t,n,r,i,o,a,s)}function jc(e){return new Pc(e)}function Dc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Mc(e){return null!==e.collectionGroup}function Fc(e){const t=Ns(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Tl(Zs.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new cc(r,n))}),e.has(Zs.keyField().canonicalString())||t.ce.push(new cc(Zs.keyField(),n))}return t.ce}function zc(e){const t=Ns(e);return t.le||(t.le=Uc(t,Fc(e))),t.le}function Uc(e,t){if("F"===e.limitType)return Ic(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new cc(e.field,t)});const n=e.endAt?new ac(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ac(e.startAt.position,e.startAt.inclusive):null;return Ic(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Bc(e,t,n){return new Pc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Vc(e,t){return Rc(zc(e),zc(t))&&e.limitType===t.limitType}function Wc(e){return"".concat(Oc(zc(e)),"|lt:").concat(e.limitType)}function Hc(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>bc(e)).join(", "),"]")),fl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Gl(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Gl(e)).join(",")),"Target(".concat(t,")")}(zc(e)),"; limitType=").concat(e.limitType,")")}function qc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):el.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Fc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=sc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Fc(e),t))&&!(e.endAt&&!function(e,t,n){const r=sc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Fc(e),t))}(e,t)}function Kc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Gc(e){return(t,n)=>{let r=!1;for(const i of Fc(e)){const e=Qc(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Qc(e,t,n){const r=e.field.isKeyField()?el.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Hl(r,i):Os()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Os()}}class Jc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){wl(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Sl(this.inner)}size(){return this.innerSize}}const Yc=new kl(el.comparator);function Xc(){return Yc}const $c=new kl(el.comparator);function Zc(){let e=$c;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function eu(e){let t=$c;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function tu(){return ru()}function nu(){return ru()}function ru(){return new Jc(e=>e.toString(),(e,t)=>e.isEqual(t))}const iu=new kl(el.comparator),ou=new Tl(el.comparator);function au(){let e=ou;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const su=new Tl(Ks);function lu(){return su}function cu(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pl(t)?"-0":t}}function uu(e){return{integerValue:""+e}}function du(e,t){return gl(t)?uu(t):cu(e,t)}class hu{constructor(){this._=void 0}}function fu(e,t,n){return e instanceof mu?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&jl(t)&&(t=Dl(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof yu?vu(e,t):e instanceof bu?xu(e,t):function(e,t){const n=gu(e,t),r=Su(n)+Su(e.Pe);return Jl(n)&&Jl(e.Pe)?uu(r):cu(e.serializer,r)}(e,t)}function pu(e,t,n){return e instanceof yu?vu(e,t):e instanceof bu?xu(e,t):n}function gu(e,t){return e instanceof wu?function(e){return Jl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class mu extends hu{}class yu extends hu{constructor(e){super(),this.elements=e}}function vu(e,t){const n=ku(t);for(const r of e.elements)n.some(e=>Vl(e,r))||n.push(r);return{arrayValue:{values:n}}}class bu extends hu{constructor(e){super(),this.elements=e}}function xu(e,t){let n=ku(t);for(const r of e.elements)n=n.filter(e=>!Vl(e,r));return{arrayValue:{values:n}}}class wu extends hu{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Su(e){return Pl(e.integerValue||e.doubleValue)}function ku(e){return Yl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Cu{constructor(e,t){this.version=e,this.transformResults=t}}class Eu{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Eu}static exists(e){return new Eu(void 0,e)}static updateTime(e){return new Eu(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tu(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Au{}function _u(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Fu(e.key,Eu.none()):new Pu(e.key,e.data,Eu.none());{const n=e.data,r=rc.empty();let i=new Tl(Zs.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Lu(e.key,r,new _l(i.toArray()),Eu.none())}}function Iu(e,t,n){e instanceof Pu?function(e,t,n){const r=e.value.clone(),i=Du(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Lu?function(e,t,n){if(!Tu(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Du(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ju(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ou(e,t,n,r){return e instanceof Pu?function(e,t,n,r){if(!Tu(e.precondition,t))return n;const i=e.value.clone(),o=Mu(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Lu?function(e,t,n,r){if(!Tu(e.precondition,t))return n;const i=Mu(e.fieldTransforms,r,t),o=t.data;return o.setAll(ju(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Tu(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ru(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=gu(r.transform,e||null);null!=i&&(null===n&&(n=rc.empty()),n.set(r.field,i))}return n||null}function Nu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Gs(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof yu&&t instanceof yu||e instanceof bu&&t instanceof bu?Gs(e.elements,t.elements,Vl):e instanceof wu&&t instanceof wu?Vl(e.Pe,t.Pe):e instanceof mu&&t instanceof mu}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Pu extends Au{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Lu extends Au{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ju(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Du(e,t,n){const r=new Map;Rs(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,pu(a,s,n[i]))}return r}function Mu(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,fu(e,o,t))}return r}class Fu extends Au{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zu extends Au{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Uu{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Iu(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ou(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ou(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=nu();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const s=_u(o,a);null!==s&&n.set(r.key,s),o.isValidDocument()||o.convertToNoDocument(Js.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),au())}isEqual(e){return this.batchId===e.batchId&&Gs(this.mutations,e.mutations,(e,t)=>Nu(e,t))&&Gs(this.baseMutations,e.baseMutations,(e,t)=>Nu(e,t))}}class Bu{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Rs(e.mutations.length===n.length);let r=iu;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Bu(e,t,n,r)}}class Vu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Wu{constructor(e,t){this.count=e,this.unchangedNames=t}}var Hu,qu;function Ku(e){switch(e){default:return Os();case Ps.CANCELLED:case Ps.UNKNOWN:case Ps.DEADLINE_EXCEEDED:case Ps.RESOURCE_EXHAUSTED:case Ps.INTERNAL:case Ps.UNAVAILABLE:case Ps.UNAUTHENTICATED:return!1;case Ps.INVALID_ARGUMENT:case Ps.NOT_FOUND:case Ps.ALREADY_EXISTS:case Ps.PERMISSION_DENIED:case Ps.FAILED_PRECONDITION:case Ps.ABORTED:case Ps.OUT_OF_RANGE:case Ps.UNIMPLEMENTED:case Ps.DATA_LOSS:return!0}}function Gu(e){if(void 0===e)return As("GRPC error has no .code"),Ps.UNKNOWN;switch(e){case Hu.OK:return Ps.OK;case Hu.CANCELLED:return Ps.CANCELLED;case Hu.UNKNOWN:return Ps.UNKNOWN;case Hu.DEADLINE_EXCEEDED:return Ps.DEADLINE_EXCEEDED;case Hu.RESOURCE_EXHAUSTED:return Ps.RESOURCE_EXHAUSTED;case Hu.INTERNAL:return Ps.INTERNAL;case Hu.UNAVAILABLE:return Ps.UNAVAILABLE;case Hu.UNAUTHENTICATED:return Ps.UNAUTHENTICATED;case Hu.INVALID_ARGUMENT:return Ps.INVALID_ARGUMENT;case Hu.NOT_FOUND:return Ps.NOT_FOUND;case Hu.ALREADY_EXISTS:return Ps.ALREADY_EXISTS;case Hu.PERMISSION_DENIED:return Ps.PERMISSION_DENIED;case Hu.FAILED_PRECONDITION:return Ps.FAILED_PRECONDITION;case Hu.ABORTED:return Ps.ABORTED;case Hu.OUT_OF_RANGE:return Ps.OUT_OF_RANGE;case Hu.UNIMPLEMENTED:return Ps.UNIMPLEMENTED;case Hu.DATA_LOSS:return Ps.DATA_LOSS;default:return Os()}}(qu=Hu||(Hu={}))[qu.OK=0]="OK",qu[qu.CANCELLED=1]="CANCELLED",qu[qu.UNKNOWN=2]="UNKNOWN",qu[qu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qu[qu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qu[qu.NOT_FOUND=5]="NOT_FOUND",qu[qu.ALREADY_EXISTS=6]="ALREADY_EXISTS",qu[qu.PERMISSION_DENIED=7]="PERMISSION_DENIED",qu[qu.UNAUTHENTICATED=16]="UNAUTHENTICATED",qu[qu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qu[qu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qu[qu.ABORTED=10]="ABORTED",qu[qu.OUT_OF_RANGE=11]="OUT_OF_RANGE",qu[qu.UNIMPLEMENTED=12]="UNIMPLEMENTED",qu[qu.INTERNAL=13]="INTERNAL",qu[qu.UNAVAILABLE=14]="UNAVAILABLE",qu[qu.DATA_LOSS=15]="DATA_LOSS";let Qu=null;function Ju(){return new TextEncoder}const Yu=new ss([4294967295,4294967295],0);function Xu(e){const t=Ju().encode(e),n=new ls;return n.update(t),new Uint8Array(n.digest())}function $u(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new ss([n,r],0),new ss([i,o],0)]}class Zu{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ed("Invalid padding: ".concat(t));if(n<0)throw new ed("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ed("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ed("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=ss.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(ss.fromNumber(n)));return 1===r.compare(Yu)&&(r=new ss([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Xu(e),[n,r]=$u(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Zu(i,r,t);return n.forEach(e=>o.insert(e)),o}insert(e){if(0===this.Ie)return;const t=Xu(e),[n,r]=$u(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ed extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class td{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,nd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new td(Js.min(),r,new kl(Ks),Xc(),au())}}class nd{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new nd(n,t,au(),au(),au())}}class rd{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class id{constructor(e,t){this.targetId=e,this.me=t}}class od{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ol.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ad{constructor(){this.fe=0,this.ge=cd(),this.pe=Ol.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=au(),t=au(),n=au();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Os()}}),new nd(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=cd()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Rs(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class sd{constructor(e){this.Le=e,this.Be=new Map,this.ke=Xc(),this.qe=ld(),this.Qe=new kl(Ks)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Os()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Nc(i))if(0===n){const e=new el(i.path);this.Ue(t,e,oc.newNoDocument(e,Js.min()))}else Rs(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Qu||Qu.et(function(e,t,n,r,i){var o,a,s,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(o=null==h?void 0:h.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(s=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===s?void 0:s.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=Ll(n).toUint8Array()}catch(e){if(e instanceof Il)return _s("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Zu(o,r,i)}catch(e){return _s(e instanceof ed?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Le.tt(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Nc(i.target)){const t=new el(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,oc.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=au();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new td(e,t,this.Qe,this.ke,n);return this.ke=Xc(),this.qe=ld(),this.Qe=new kl(Ks),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new ad,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Tl(Ks),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ts("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ad),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ld(){return new kl(el.comparator)}function cd(){return new kl(el.comparator)}const ud={asc:"ASCENDING",desc:"DESCENDING"},dd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hd={and:"AND",or:"OR"};class fd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function pd(e,t){return e.useProto3Json||fl(t)?t:{value:t}}function gd(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function md(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function yd(e,t){return gd(e,t.toTimestamp())}function vd(e){return Rs(!!e),Js.fromTimestamp(function(e){const t=Nl(e);return new Qs(t.seconds,t.nanos)}(e))}function bd(e,t){return xd(e,t).canonicalString()}function xd(e,t){const n=function(e){return new Xs(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function wd(e){const t=Xs.fromString(e);return Rs(Bd(t)),t}function Sd(e,t){return bd(e.databaseId,t.path)}function kd(e,t){const n=wd(t);if(n.get(1)!==e.databaseId.projectId)throw new Ls(Ps.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ls(Ps.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new el(Ad(n))}function Cd(e,t){return bd(e.databaseId,t)}function Ed(e){const t=wd(e);return 4===t.length?Xs.emptyPath():Ad(t)}function Td(e){return new Xs(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ad(e){return Rs(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function _d(e,t,n){return{name:Sd(e,t),fields:n.value.mapValue.fields}}function Id(e,t){let n;if(t instanceof Pu)n={update:_d(e,t.key,t.value)};else if(t instanceof Fu)n={delete:Sd(e,t.key)};else if(t instanceof Lu)n={update:_d(e,t.key,t.data),updateMask:Ud(t.fieldMask)};else{if(!(t instanceof zu))return Os();n={verify:Sd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof mu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof yu)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof bu)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wu)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Os()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:yd(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Os()}(e,t.precondition)),n}function Od(e,t){return{documents:[Cd(e,t.path)]}}function Rd(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Cd(e,i);const o=function(e){if(0!==e.length)return zd(fc.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Md(e.field),direction:Ld(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const s=pd(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Nd(e){let t=Ed(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Rs(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Pd(e);return t instanceof fc&&gc(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new cc(Fd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,fl(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ac(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new ac(n,t)}(n.endAt)),Lc(t,i,a,o,s,"F",l,c)}function Pd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Fd(e.unaryFilter.field);return hc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Fd(e.unaryFilter.field);return hc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Fd(e.unaryFilter.field);return hc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Fd(e.unaryFilter.field);return hc.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Os()}}(e):void 0!==e.fieldFilter?function(e){return hc.create(Fd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Os()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fc.create(e.compositeFilter.filters.map(e=>Pd(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Os()}}(e.compositeFilter.op))}(e):Os()}function Ld(e){return ud[e]}function jd(e){return dd[e]}function Dd(e){return hd[e]}function Md(e){return{fieldPath:e.canonicalString()}}function Fd(e){return Zs.fromServerFormat(e.fieldPath)}function zd(e){return e instanceof hc?function(e){if("=="===e.op){if($l(e.value))return{unaryFilter:{field:Md(e.field),op:"IS_NAN"}};if(Xl(e.value))return{unaryFilter:{field:Md(e.field),op:"IS_NULL"}}}else if("!="===e.op){if($l(e.value))return{unaryFilter:{field:Md(e.field),op:"IS_NOT_NAN"}};if(Xl(e.value))return{unaryFilter:{field:Md(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Md(e.field),op:jd(e.op),value:e.value}}}(e):e instanceof fc?function(e){const t=e.getFilters().map(e=>zd(e));return 1===t.length?t[0]:{compositeFilter:{op:Dd(e.op),filters:t}}}(e):Os()}function Ud(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Bd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Vd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Js.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Js.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ol.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new Vd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Wd{constructor(e){this.ct=e}}function Hd(e){const t=Nd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Bc(t,t.limit,"L"):t}class qd{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Pl(e.integerValue));else if("doubleValue"in e){const n=Pl(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),pl(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Nl(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ll(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?nc(e)?this.dt(t,Number.MAX_SAFE_INTEGER):ec(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Os()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const o="value",a=(null===(r=null===(n=i[o].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Pl(a)),this.Vt(o,t),this.Tt(i[o],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),el.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}qd.vt=new qd;class Kd{constructor(){this.un=new Gd}addToCollectionParentIndex(e,t){return this.un.add(t),cl.resolve()}getCollectionParents(e,t){return cl.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return cl.resolve()}deleteFieldIndex(e,t){return cl.resolve()}deleteAllFieldIndexes(e){return cl.resolve()}createTargetIndexes(e,t){return cl.resolve()}getDocumentsMatchingTarget(e,t){return cl.resolve(null)}getIndexType(e,t){return cl.resolve(0)}getFieldIndexes(e,t){return cl.resolve([])}getNextCollectionGroupToUpdate(e){return cl.resolve(null)}getMinOffset(e,t){return cl.resolve(il.min())}getMinOffsetFromCollectionGroup(e,t){return cl.resolve(il.min())}updateCollectionGroup(e,t,n){return cl.resolve()}updateIndexEntries(e,t){return cl.resolve()}}class Gd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Tl(Xs.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Tl(Xs.comparator)).toArray()}}new Uint8Array(0);class Qd{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Qd(e,Qd.DEFAULT_COLLECTION_PERCENTILE,Qd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Qd.DEFAULT_COLLECTION_PERCENTILE=10,Qd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qd.DEFAULT=new Qd(41943040,Qd.DEFAULT_COLLECTION_PERCENTILE,Qd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qd.DISABLED=new Qd(-1,0,0);class Jd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Jd(0)}static kn(){return new Jd(-1)}}class Yd{constructor(){this.changes=new Jc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,oc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?cl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Xd{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class $d{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Ou(n.mutation,e,_l.empty(),Qs.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,au()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:au();const r=tu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Zc();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=tu();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,au()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Xc();const o=ru(),a=ru();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Lu)?i=i.insert(t.key,t):void 0!==a?(o.set(t.key,a.mutation.getFieldMask()),Ou(a.mutation,t,a.mutation.getFieldMask(),Qs.now())):o.set(t.key,_l.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Xd(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=ru();let r=new kl((e,t)=>e-t),i=au();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let a=n.get(e)||_l.empty();a=i.applyToLocalView(o,a),n.set(e,a);const s=(r.get(i.batchId)||au()).add(e);r=r.insert(i.batchId,s)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,c=nu();l.forEach(e=>{if(!i.has(e)){const r=_u(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,s,c))}return cl.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return el.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Mc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):cl.resolve(tu());let a=-1,s=i;return o.next(t=>cl.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?cl.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{s=s.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,s,t,au())).next(e=>({batchId:a,changes:eu(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new el(t)).next(e=>{let t=Zc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Zc();return this.indexManager.getCollectionParents(e,i).next(a=>cl.forEach(a,a=>{const s=function(e,t){return new Pc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next(e=>{e.forEach((e,t)=>{o=o.insert(e,t)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,oc.newInvalidDocument(r)))});let n=Zc();return e.forEach((e,r)=>{const o=i.get(e);void 0!==o&&Ou(o.mutation,r,_l.empty(),Qs.now()),qc(t,r)&&(n=n.insert(e,r))}),n})}}class Zd{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return cl.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:vd(e.createTime)}}(t)),cl.resolve()}getNamedQuery(e,t){return cl.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Hd(e.bundledQuery),readTime:vd(e.readTime)}}(t)),cl.resolve()}}class eh{constructor(){this.overlays=new kl(el.comparator),this.Ir=new Map}getOverlay(e,t){return cl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=tu();return cl.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),cl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),cl.resolve()}getOverlaysForCollection(e,t,n){const r=tu(),i=t.length+1,o=new el(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const e=a.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return cl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new kl((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=tu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=tu(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return cl.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Vu(t,n));let i=this.Ir.get(t);void 0===i&&(i=au(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class th{constructor(){this.sessionToken=Ol.EMPTY_BYTE_STRING}getSessionToken(e){return cl.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,cl.resolve()}}class nh{constructor(){this.Tr=new Tl(rh.Er),this.dr=new Tl(rh.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new rh(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new rh(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new el(new Xs([])),n=new rh(t,e),r=new rh(t,e+1),i=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),i.push(e.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new el(new Xs([])),n=new rh(t,e),r=new rh(t,e+1);let i=au();return this.dr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new rh(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class rh{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return el.comparator(e.key,t.key)||Ks(e.wr,t.wr)}static Ar(e,t){return Ks(e.wr,t.wr)||el.comparator(e.key,t.key)}}class ih{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Tl(rh.Er)}checkEmpty(e){return cl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Uu(i,t,n,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new rh(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return cl.resolve(o)}lookupMutationBatch(e,t){return cl.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return cl.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return cl.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return cl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new rh(t,0),r=new rh(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);i.push(t)}),cl.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Tl(Ks);return t.forEach(e=>{const t=new rh(e,0),r=new rh(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),cl.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;el.isDocumentKey(i)||(i=i.child(""));const o=new rh(new el(i),0);let a=new Tl(Ks);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},o),cl.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Rs(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return cl.forEach(t.mutations,r=>{const i=new rh(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new rh(t,0),r=this.br.firstAfterOrEqual(n);return cl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,cl.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class oh{constructor(e){this.Mr=e,this.docs=new kl(el.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return cl.resolve(n?n.document.mutableCopy():oc.newInvalidDocument(t))}getEntries(e,t){let n=Xc();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():oc.newInvalidDocument(e))}),cl.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Xc();const o=t.path,a=new el(o.child("")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||ol(rl(a),n)<=0||(r.has(a.key)||qc(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return cl.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Os()}Or(e,t){return cl.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new ah(this)}getSize(e){return cl.resolve(this.size)}}class ah extends Yd{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),cl.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class sh{constructor(e){this.persistence=e,this.Nr=new Jc(e=>Oc(e),Rc),this.lastRemoteSnapshotVersion=Js.min(),this.highestTargetId=0,this.Lr=0,this.Br=new nh,this.targetCount=0,this.kr=Jd.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),cl.resolve()}getLastRemoteSnapshotVersion(e){return cl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return cl.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),cl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),cl.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Jd(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,cl.resolve()}updateTargetData(e,t){return this.Kn(t),cl.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,cl.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),cl.waitFor(i).next(()=>r)}getTargetCount(e){return cl.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return cl.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),cl.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),cl.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),cl.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return cl.resolve(n)}containsKey(e,t){return cl.resolve(this.Br.containsKey(t))}}class lh{constructor(e,t){this.qr={},this.overlays={},this.Qr=new hl(0),this.Kr=!1,this.Kr=!0,this.$r=new th,this.referenceDelegate=e(this),this.Ur=new sh(this),this.indexManager=new Kd,this.remoteDocumentCache=function(e){return new oh(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new Wd(t),this.Gr=new Zd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new eh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new ih(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Ts("MemoryPersistence","Starting transaction:",e);const r=new ch(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return cl.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class ch extends sl{constructor(e){super(),this.currentSequenceNumber=e}}class uh{constructor(e){this.persistence=e,this.Jr=new nh,this.Yr=null}static Zr(e){return new uh(e)}get Xr(){if(this.Yr)return this.Yr;throw Os()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),cl.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),cl.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),cl.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return cl.forEach(this.Xr,n=>{const r=el.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,Js.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return cl.or([()=>cl.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class dh{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=au(),r=au();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new dh(e,t.fromCache,n,r)}}class hh{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class fh{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=an()?8:ul(on())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.Zi(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new hh;return this.Xi(e,t,n).next(r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>i.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(Es()<=Cn.DEBUG&&Ts("QueryEngine","SDK will not create cache indexes for query:",Hc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),cl.resolve()):(Es()<=Cn.DEBUG&&Ts("QueryEngine","Query:",Hc(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(Es()<=Cn.DEBUG&&Ts("QueryEngine","The SDK decides to create cache indexes for query:",Hc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zc(t))):cl.resolve())}Yi(e,t){if(Dc(t))return cl.resolve(null);let n=zc(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Bc(t,null,"F"),n=zc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=au(...r);return this.Ji.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.ts(t,r);return this.ns(t,o,i,n.readTime)?this.Yi(e,Bc(t,null,"F")):this.rs(e,o,t,n)}))})))}Zi(e,t,n,r){return Dc(t)||r.isEqual(Js.min())?cl.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const o=this.ts(t,i);return this.ns(t,o,n,r)?cl.resolve(null):(Es()<=Cn.DEBUG&&Ts("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hc(t)),this.rs(e,o,t,nl(r,-1)).next(e=>e))})}ts(e,t){let n=new Tl(Gc(e));return t.forEach((t,r)=>{qc(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return Es()<=Cn.DEBUG&&Ts("QueryEngine","Using full collection scan to execute query:",Hc(t)),this.Ji.getDocumentsMatchingQuery(e,t,il.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class ph{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new kl(Ks),this._s=new Jc(e=>Oc(e),Rc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $d(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function gh(e,t,n,r){return new ph(e,t,n,r)}async function mh(e,t){const n=Ns(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],o=[];let a=au();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:i,addedBatchIds:o}))})})}function yh(e){const t=Ns(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function vh(e,t,n){let r=au(),i=au();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Xc();return n.forEach((n,o)=>{const a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(Js.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Ts("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),{Ps:r,Is:i}})}function bh(e,t){const n=Ns(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function xh(e,t){const n=Ns(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(i=>i?(r=i,cl.resolve(r)):n.Ur.allocateTargetId(e).next(i=>(r=new Vd(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function wh(e,t,n){const r=Ns(e),i=r.os.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!dl(e))throw e;Ts("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.os=r.os.remove(t),r._s.delete(i.target)}function Sh(e,t,n){const r=Ns(e);let i=Js.min(),o=au();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Ns(e),i=r._s.get(n);return void 0!==i?cl.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,zc(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{o=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:Js.min(),n?o:au())).next(e=>(kh(r,Kc(t),e),{documents:e,Ts:o})))}function kh(e,t,n){let r=e.us.get(t)||Js.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class Ch{constructor(){this.activeTargetIds=lu()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Eh{constructor(){this.so=new Ch,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ch,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Th{_o(e){}shutdown(){}}class Ah{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ts("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ts("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let _h=null;function Ih(){return null===_h?_h=268435456+Math.round(2147483648*Math.random()):_h++,"0x"+_h.toString(16)}const Oh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Rh{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Nh="WebChannelConnection";class Ph extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(e,t,n,r,i){const o=Ih(),a=this.xo(e,t.toUriEncodedString());Ts("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),a,n);const s={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(s,r,i),this.No(e,a,s,n).then(t=>(Ts("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t),t=>{throw _s("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,i,o){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ks,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=Oh[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=Ih();return new Promise((o,a)=>{const s=new ds;s.setWithCredentials(!0),s.listenOnce(fs.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case ps.NO_ERROR:const t=s.getResponseJson();Ts(Nh,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case ps.TIMEOUT:Ts(Nh,"RPC '".concat(e,"' ").concat(i," timed out")),a(new Ls(Ps.DEADLINE_EXCEEDED,"Request time out"));break;case ps.HTTP_ERROR:const n=s.getStatus();if(Ts(Nh,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ps).indexOf(t)>=0?t:Ps.UNKNOWN}(t.status);a(new Ls(e,t.message))}else a(new Ls(Ps.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new Ls(Ps.UNAVAILABLE,"Connection failed."));break;default:Os()}}finally{Ts(Nh,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);Ts(Nh,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=Ih(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=vs(),a=ys(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Oo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const c=i.join("");Ts(Nh,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);const u=o.createWebChannel(c,s);let d=!1,h=!1;const f=new Rh({Io:t=>{h?Ts(Nh,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Ts(Nh,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Ts(Nh,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,hs.EventType.OPEN,()=>{h||(Ts(Nh,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.yo())}),p(u,hs.EventType.CLOSE,()=>{h||(h=!0,Ts(Nh,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.So())}),p(u,hs.EventType.ERROR,t=>{h||(h=!0,_s(Nh,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.So(new Ls(Ps.UNAVAILABLE,"The operation could not be completed")))}),p(u,hs.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];Rs(!!i);const o=i,a=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){Ts(Nh,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Hu[e];if(void 0!==t)return Gu(t)}(t),i=a.message;void 0===n&&(n=Ps.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.So(new Ls(n,i)),u.close()}else Ts(Nh,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.bo(i)}}),p(a,ms.STAT_EVENT,t=>{t.stat===gs.PROXY?Ts(Nh,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===gs.NOPROXY&&Ts(Nh,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.wo()},0),f}}function Lh(){return"undefined"!=typeof document?document:null}function jh(e){return new fd(e,!0)}class Dh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&Ts("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Mh{constructor(e,t,n,r,i,o,a,s){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Dh(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===Ps.RESOURCE_EXHAUSTED?(As(t.toString()),As("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Ps.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new Ls(Ps.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ts("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Ts("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Fh extends Mh{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Os()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Rs(void 0===t||"string"==typeof t),Ol.fromBase64String(t||"")):(Rs(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Ol.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?Ps.UNKNOWN:Gu(e.code);return new Ls(t,e.message||"")}(a);n=new od(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=kd(e,r.document.name),o=vd(r.document.updateTime),a=r.document.createTime?vd(r.document.createTime):Js.min(),s=new rc({mapValue:{fields:r.document.fields}}),l=oc.newFoundDocument(i,o,a,s),c=r.targetIds||[],u=r.removedTargetIds||[];n=new rd(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=kd(e,r.document),o=r.readTime?vd(r.readTime):Js.min(),a=oc.newNoDocument(i,o),s=r.removedTargetIds||[];n=new rd([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=kd(e,r.document),o=r.removedTargetIds||[];n=new rd([],o,i,null)}else{if(!("filter"in t))return Os();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Wu(r,i),a=e.targetId;n=new id(a,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Js.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Js.min():t.readTime?vd(t.readTime):Js.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Td(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Nc(r)?{documents:Od(e,r)}:{query:Rd(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=md(e,t.resumeToken);const r=pd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Js.min())>0){n.readTime=gd(e,t.snapshotVersion.toTimestamp());const r=pd(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Os()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Td(this.serializer),t.removeTarget=e,this.a_(t)}}class zh extends Mh{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Rs(!!e.streamToken),this.lastStreamToken=e.streamToken,Rs(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Rs(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(Rs(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?vd(e.updateTime):vd(t);return n.isEqual(Js.min())&&(n=vd(t)),new Cu(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=vd(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Td(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Id(this.serializer,e))};this.a_(t)}}class Uh extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Ls(Ps.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,a]=i;return this.connection.Mo(e,xd(t,n),r,o,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ps.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ls(Ps.UNKNOWN,e.toString())})}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(o=>{let[a,s]=o;return this.connection.Lo(e,xd(t,n),r,a,s,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ps.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ls(Ps.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Bh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(As(t),this.D_=!1):Ts("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Vh{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(e=>{n.enqueueAndForget(async()=>{Xh(this)&&(Ts("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ns(e);t.L_.add(4),await Hh(t),t.q_.set("Unknown"),t.L_.delete(4),await Wh(t)}(this))})}),this.q_=new Bh(n,r)}}async function Wh(e){if(Xh(e))for(const t of e.B_)await t(!0)}async function Hh(e){for(const t of e.B_)await t(!1)}function qh(e,t){const n=Ns(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Yh(n)?Jh(n):yf(n).r_()&&Gh(n,t))}function Kh(e,t){const n=Ns(e),r=yf(n);n.N_.delete(t),r.r_()&&Qh(n,t),0===n.N_.size&&(r.r_()?r.o_():Xh(n)&&n.q_.set("Unknown"))}function Gh(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Js.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}yf(e).A_(t)}function Qh(e,t){e.Q_.xe(t),yf(e).R_(t)}function Jh(e){e.Q_=new sd({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),yf(e).start(),e.q_.v_()}function Yh(e){return Xh(e)&&!yf(e).n_()&&e.N_.size>0}function Xh(e){return 0===Ns(e).L_.size}function $h(e){e.Q_=void 0}async function Zh(e){e.q_.set("Online")}async function ef(e){e.N_.forEach((t,n)=>{Gh(e,t)})}async function tf(e,t){$h(e),Yh(e)?(e.q_.M_(t),Jh(e)):e.q_.set("Unknown")}async function nf(e,t,n){if(e.q_.set("Online"),t instanceof od&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){Ts("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await rf(e,n)}else if(t instanceof rd?e.Q_.Ke(t):t instanceof id?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Js.min()))try{const t=await yh(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(Ol.EMPTY_BYTE_STRING,r.snapshotVersion)),Qh(e,t);const i=new Vd(r.target,t,n,r.sequenceNumber);Gh(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ts("RemoteStore","Failed to raise snapshot:",t),await rf(e,t)}}async function rf(e,t,n){if(!dl(t))throw t;e.L_.add(1),await Hh(e),e.q_.set("Offline"),n||(n=()=>yh(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Ts("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Wh(e)})}function of(e,t){return t().catch(n=>rf(e,n,t))}async function af(e){const t=Ns(e),n=vf(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;sf(t);)try{const e=await bh(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,lf(t,e)}catch(e){await rf(t,e)}cf(t)&&uf(t)}function sf(e){return Xh(e)&&e.O_.length<10}function lf(e,t){e.O_.push(t);const n=vf(e);n.r_()&&n.V_&&n.m_(t.mutations)}function cf(e){return Xh(e)&&!vf(e).n_()&&e.O_.length>0}function uf(e){vf(e).start()}async function df(e){vf(e).p_()}async function hf(e){const t=vf(e);for(const n of e.O_)t.m_(n.mutations)}async function ff(e,t,n){const r=e.O_.shift(),i=Bu.from(r,t,n);await of(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await af(e)}async function pf(e,t){t&&vf(e).V_&&await async function(e,t){if(function(e){return Ku(e)&&e!==Ps.ABORTED}(t.code)){const n=e.O_.shift();vf(e).s_(),await of(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await af(e)}}(e,t),cf(e)&&uf(e)}async function gf(e,t){const n=Ns(e);n.asyncQueue.verifyOperationInProgress(),Ts("RemoteStore","RemoteStore received new credentials");const r=Xh(n);n.L_.add(3),await Hh(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Wh(n)}async function mf(e,t){const n=Ns(e);t?(n.L_.delete(2),await Wh(n)):t||(n.L_.add(2),await Hh(n),n.q_.set("Unknown"))}function yf(e){return e.K_||(e.K_=function(e,t,n){const r=Ns(e);return r.w_(),new Fh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:Zh.bind(null,e),Ro:ef.bind(null,e),mo:tf.bind(null,e),d_:nf.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Yh(e)?Jh(e):e.q_.set("Unknown")):(await e.K_.stop(),$h(e))})),e.K_}function vf(e){return e.U_||(e.U_=function(e,t,n){const r=Ns(e);return r.w_(),new zh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:df.bind(null,e),mo:pf.bind(null,e),f_:hf.bind(null,e),g_:ff.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await af(e)):(await e.U_.stop(),e.O_.length>0&&(Ts("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))})),e.U_}class bf{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new js,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,a=new bf(e,t,o,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ls(Ps.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xf(e,t){if(As("AsyncQueue","".concat(t,": ").concat(e)),dl(e))return new Ls(Ps.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class wf{constructor(e){this.comparator=e?(t,n)=>e(t,n)||el.comparator(t.key,n.key):(e,t)=>el.comparator(e.key,t.key),this.keyedMap=Zc(),this.sortedSet=new kl(this.comparator)}static emptySet(e){return new wf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wf))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new wf;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Sf{constructor(){this.W_=new kl(el.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Os():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class kf{constructor(e,t,n,r,i,o,a,s,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach(e=>{o.push({type:0,doc:e})}),new kf(e,t,wf.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Cf{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Ef{constructor(){this.queries=Tf(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Ns(e),r=n.queries;n.queries=Tf(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new Ls(Ps.ABORTED,"Firestore shutting down"))}}function Tf(){return new Jc(e=>Wc(e),Vc)}async function Af(e,t){const n=Ns(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.H_()&&t.J_()&&(r=2):(o=new Cf,r=t.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=xf(e,"Initialization of query '".concat(Hc(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.j_.push(t),t.Z_(n.onlineState),o.z_&&t.X_(o.z_)&&Rf(n)}async function _f(e,t){const n=Ns(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.j_.indexOf(t);e>=0&&(o.j_.splice(e,1),0===o.j_.length?i=t.J_()?0:1:!o.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function If(e,t){const n=Ns(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&Rf(n)}function Of(e,t,n){const r=Ns(e),i=r.queries.get(t);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(t)}function Rf(e){e.Y_.forEach(e=>{e.next()})}var Nf,Pf;(Pf=Nf||(Nf={})).ea="default",Pf.Cache="cache";class Lf{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new kf(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=kf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Nf.Cache}}class jf{constructor(e){this.key=e}}class Df{constructor(e){this.key=e}}class Mf{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=au(),this.mutatedKeys=au(),this.Aa=Gc(e),this.Ra=new wf(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Sf,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=qc(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(s&&this.Aa(u,s)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(s||l)&&(a=!0)),f&&(u?(o=o.add(u),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:o,fa:n,ns:a,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Os()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],s=0===this.da.size&&this.current&&!r?1:0,l=s!==this.Ea;return this.Ea=s,0!==o.length||l?{snapshot:new kf(this.query,e.Ra,i,o,e.mutatedKeys,0===s,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Sf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=au(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new Df(e))}),this.da.forEach(n=>{e.has(n)||t.push(new jf(n))}),t}ba(e){this.Ta=e.Ts,this.da=au();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return kf.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Ff{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class zf{constructor(e){this.key=e,this.va=!1}}class Uf{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Jc(e=>Wc(e),Vc),this.Ma=new Map,this.xa=new Set,this.Oa=new kl(el.comparator),this.Na=new Map,this.La=new nh,this.Ba={},this.ka=new Map,this.qa=Jd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Bf(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=lp(e);let i;const o=r.Fa.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await Wf(r,t,n,!0),i}async function Vf(e,t){const n=lp(e);await Wf(n,t,!0,!1)}async function Wf(e,t,n,r){const i=await xh(e.localStore,zc(t)),o=i.targetId,a=e.sharedClientState.addLocalQueryTarget(o,n);let s;return r&&(s=await Hf(e,t,o,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&qh(e.remoteStore,i),s}async function Hf(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await Sh(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,i)}));const o=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o,a);return np(e,t.targetId,s.wa),s.snapshot}(e,t,n,r);const o=await Sh(e.localStore,t,!0),a=new Mf(t,o.Ts),s=a.ma(o.documents),l=nd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(s,e.isPrimaryClient,l);np(e,n,c.wa);const u=new Ff(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function qf(e,t,n){const r=Ns(e),i=r.Fa.get(t),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(e=>!Vc(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await wh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Kh(r.remoteStore,i.targetId),ep(r,i.targetId)}).catch(ll)):(ep(r,i.targetId),await wh(r.localStore,i.targetId,!0))}async function Kf(e,t){const n=Ns(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Kh(n.remoteStore,r.targetId))}async function Gf(e,t){const n=Ns(e);try{const e=await function(e,t){const n=Ns(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];t.targetChanges.forEach((o,s)=>{const l=i.get(s);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,o.removedDocuments,s).next(()=>n.Ur.addMatchingKeys(e,o.addedDocuments,s)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(Ol.EMPTY_BYTE_STRING,Js.min()).withLastLimboFreeSnapshotVersion(Js.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,o)&&a.push(n.Ur.updateTargetData(e,c))});let s=Xc(),l=au();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(vh(e,o,t.documentUpdates).next(e=>{s=e.Ps,l=e.Is})),!r.isEqual(Js.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return cl.waitFor(a).next(()=>o.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,s,l)).next(()=>s)}).then(e=>(n.os=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(Rs(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?Rs(r.va):e.removedDocuments.size>0&&(Rs(r.va),r.va=!1))}),await op(n,e,t)}catch(e){await ll(e)}}function Qf(e,t,n){const r=Ns(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Ns(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)}),r&&Rf(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Jf(e,t,n){const r=Ns(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),o=i&&i.key;if(o){let e=new kl(el.comparator);e=e.insert(o,oc.newNoDocument(o,Js.min()));const n=au().add(o),i=new td(Js.min(),new Map,new kl(Ks),e,n);await Gf(r,i),r.Oa=r.Oa.remove(o),r.Na.delete(t),ip(r)}else await wh(r.localStore,t,!1).then(()=>ep(r,t,n)).catch(ll)}async function Yf(e,t){const n=Ns(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ns(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let a=cl.resolve();return o.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const o=n.docVersions.get(e);Rs(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=au();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Zf(n,r,null),$f(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await op(n,e)}catch(e){await ll(e)}}async function Xf(e,t,n){const r=Ns(e);try{const e=await function(e,t){const n=Ns(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Rs(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Zf(r,t,n),$f(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await op(r,e)}catch(n){await ll(n)}}function $f(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function Zf(e,t,n){const r=Ns(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function ep(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||tp(e,t)})}function tp(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Kh(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),ip(e))}function np(e,t,n){for(const r of n)r instanceof jf?(e.La.addReference(r.key,t),rp(e,r)):r instanceof Df?(Ts("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||tp(e,r.key)):Os()}function rp(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(Ts("SyncEngine","New document in limbo: "+n),e.xa.add(r),ip(e))}function ip(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new el(Xs.fromString(t)),r=e.qa.next();e.Na.set(r,new zf(n)),e.Oa=e.Oa.insert(n,r),qh(e.remoteStore,new Vd(zc(jc(n.path)),r,"TargetPurposeLimboResolution",hl.oe))}}async function op(e,t,n){const r=Ns(e),i=[],o=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,s)=>{a.push(r.Ka(s,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(s.targetId,i?"current":"not-current")}if(e){i.push(e);const t=dh.Wi(s.targetId,e);o.push(t)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(e,t){const n=Ns(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>cl.forEach(t,t=>cl.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>cl.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!dl(e))throw e;Ts("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,o))}async function ap(e,t){const n=Ns(e);if(!n.currentUser.isEqual(t)){Ts("SyncEngine","User change. New user:",t.toKey());const e=await mh(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new Ls(Ps.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await op(n,e.hs)}}function sp(e,t){const n=Ns(e),r=n.Na.get(t);if(r&&r.va)return au().add(r.key);{let e=au();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function lp(e){const t=Ns(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Gf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=sp.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Jf.bind(null,t),t.Ca.d_=If.bind(null,t.eventManager),t.Ca.$a=Of.bind(null,t.eventManager),t}function cp(e){const t=Ns(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Yf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Xf.bind(null,t),t}class up{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return gh(this.persistence,new fh,e.initialUser,this.serializer)}Ga(e){return new lh(uh.Zr,this.serializer)}Wa(e){return new Eh}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}up.provider={build:()=>new up};class dp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Qf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ap.bind(null,this.syncEngine),await mf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ef}createDatastore(e){const t=jh(e.databaseInfo.databaseId),n=function(e){return new Ph(e)}(e.databaseInfo);return function(e,t,n,r){return new Uh(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Vh(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Qf(this.syncEngine,e,0),Ah.D()?new Ah:new Th)}createSyncEngine(e,t){return function(e,t,n,r,i,o,a){const s=new Uf(e,t,n,r,i,o);return a&&(s.Qa=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Ns(e);Ts("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Hh(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}dp.provider={build:()=>new dp};class hp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):As("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class fp{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ss.UNAUTHENTICATED,this.clientId=qs.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Ts("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Ts("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new js;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=xf(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function pp(e,t){e.asyncQueue.verifyOperationInProgress(),Ts("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await mh(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function gp(e,t){e.asyncQueue.verifyOperationInProgress();const n=await mp(e);Ts("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>gf(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>gf(t.remoteStore,n)),e._onlineComponents=t}async function mp(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ts("FirestoreClient","Using user provided OfflineComponentProvider");try{await pp(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Ps.FAILED_PRECONDITION||e.code===Ps.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;_s("Error using user provided cache. Falling back to memory cache: "+n),await pp(e,new up)}}else Ts("FirestoreClient","Using default OfflineComponentProvider"),await pp(e,new up);return e._offlineComponents}async function yp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ts("FirestoreClient","Using user provided OnlineComponentProvider"),await gp(e,e._uninitializedComponentsProvider._online)):(Ts("FirestoreClient","Using default OnlineComponentProvider"),await gp(e,new dp))),e._onlineComponents}function vp(e){return yp(e).then(e=>e.syncEngine)}async function bp(e){const t=await yp(e),n=t.eventManager;return n.onListen=Bf.bind(null,t.syncEngine),n.onUnlisten=qf.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Vf.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Kf.bind(null,t.syncEngine),n}function xp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new js;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new hp({next:s=>{o.Za(),t.enqueueAndForget(()=>_f(e,a));const l=s.docs.has(n);!l&&s.fromCache?i.reject(new Ls(Ps.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&s.fromCache&&r&&"server"===r.source?i.reject(new Ls(Ps.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),a=new Lf(jc(n.path),o,{includeMetadataChanges:!0,_a:!0});return Af(e,a)}(await bp(e),e.asyncQueue,t,n,r)),r.promise}function wp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new js;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new hp({next:n=>{o.Za(),t.enqueueAndForget(()=>_f(e,a)),n.fromCache&&"server"===r.source?i.reject(new Ls(Ps.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Lf(n,o,{includeMetadataChanges:!0,_a:!0});return Af(e,a)}(await bp(e),e.asyncQueue,t,n,r)),r.promise}function Sp(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const kp=new Map;function Cp(e,t,n){if(!n)throw new Ls(Ps.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Ep(e){if(!el.isDocumentKey(e))throw new Ls(Ps.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Tp(e){if(el.isDocumentKey(e))throw new Ls(Ps.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ap(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Os()}function _p(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ls(Ps.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ap(e);throw new Ls(Ps.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Ip{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ls(Ps.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ls(Ps.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Ls(Ps.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sp(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ls(Ps.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Ls(Ps.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Ls(Ps.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Op{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ip({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ls(Ps.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ls(Ps.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ip(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ms;switch(e.type){case"firstParty":return new Bs(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ls(Ps.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=kp.get(e);t&&(Ts("ComponentProvider","Removing Datastore"),kp.delete(e),t.terminate())}(this),Promise.resolve()}}function Rp(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=_p(e,Op))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==a&&_s("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ss.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Yt(JSON.stringify({alg:"none",type:"JWT"})),Yt(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Ls(Ps.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ss(o)}e._authCredentials=new Fs(new Ds(t,n))}}class Np{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Np(this.firestore,e,this._query)}}class Pp{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pp(this.firestore,e,this._key)}}class Lp extends Np{constructor(e,t,n){super(e,t,jc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pp(this.firestore,null,new el(e))}withConverter(e){return new Lp(this.firestore,e,this._path)}}function jp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=vn(e),1===arguments.length&&(t=qs.newId()),Cp("doc","path",t),e instanceof Op){const n=Xs.fromString(t,...r);return Ep(n),new Pp(e,null,new el(n))}{if(!(e instanceof Pp||e instanceof Lp))throw new Ls(Ps.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Xs.fromString(t,...r));return Ep(n),new Pp(e.firestore,e instanceof Lp?e.converter:null,new el(n))}}class Dp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Dh(this,"async_queue_retry"),this.Vu=()=>{const e=Lh();e&&Ts("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Lh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Lh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new js;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(sm){if(!dl(sm))throw sm;Ts("AsyncQueue","Operation failed with retryable error: "+sm)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw As("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=bf.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&Os()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Mp extends Op{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Dp,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Dp(e),this._firestoreClient=void 0,await e}}}function Fp(e){if(e._terminated)throw new Ls(Ps.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||zp(e),e._firestoreClient}function zp(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new Fl(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Sp(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new fp(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Up{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Up(Ol.fromBase64String(e))}catch(e){throw new Ls(Ps.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Up(Ol.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Bp{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Ls(Ps.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zs(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vp{constructor(e){this._methodName=e}}class Wp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ls(Ps.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ls(Ps.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ks(this._lat,e._lat)||Ks(this._long,e._long)}}class Hp{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const qp=/^__.*__$/;class Kp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Lu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pu(e,this.data,t,this.fieldTransforms)}}class Gp{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Lu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Qp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Os()}}class Jp{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Jp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return cg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Qp(this.Cu)&&qp.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Yp{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||jh(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Jp({Cu:e,methodName:t,qu:n,path:Zs.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xp(e){const t=e._freezeSettings(),n=jh(e._databaseId);return new Yp(e._databaseId,!!t.ignoreUndefinedProperties,n)}function $p(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(o.merge||o.mergeFields?2:0,t,n,i);og("Data must be an object, but it was:",a,r);const s=rg(r,a);let l,c;if(o.merge)l=new _l(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=ag(t,r,n);if(!a.contains(i))throw new Ls(Ps.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));ug(e,i)||e.push(i)}l=new _l(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Kp(new rc(s),l,c)}class Zp extends Vp{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zp}}function eg(e,t,n,r){const i=e.Qu(1,t,n);og("Data must be an object, but it was:",i,r);const o=[],a=rc.empty();wl(r,(e,r)=>{const s=lg(t,e,n);r=vn(r);const l=i.Nu(s);if(r instanceof Zp)o.push(s);else{const e=ng(r,l);null!=e&&(o.push(s),a.set(s,e))}});const s=new _l(o);return new Gp(a,s,i.fieldTransforms)}function tg(e,t,n,r,i,o){const a=e.Qu(1,t,n),s=[ag(t,r,n)],l=[i];if(o.length%2!=0)throw new Ls(Ps.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<o.length;h+=2)s.push(ag(t,o[h])),l.push(o[h+1]);const c=[],u=rc.empty();for(let h=s.length-1;h>=0;--h)if(!ug(c,s[h])){const e=s[h];let t=l[h];t=vn(t);const n=a.Nu(e);if(t instanceof Zp)c.push(e);else{const r=ng(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new _l(c);return new Gp(u,d,a.fieldTransforms)}function ng(e,t){if(ig(e=vn(e)))return og("Unsupported field value:",t,e),rg(e,t);if(e instanceof Vp)return function(e,t){if(!Qp(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=ng(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=vn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return du(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Qs.fromDate(e);return{timestampValue:gd(t.serializer,n)}}if(e instanceof Qs){const n=new Qs(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:gd(t.serializer,n)}}if(e instanceof Wp)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Up)return{bytesValue:md(t.serializer,e._byteString)};if(e instanceof Pp){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:bd(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Hp)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return cu(t.serializer,e)})}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(Ap(e)))}(e,t)}function rg(e,t){const n={};return Sl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):wl(e,(e,r)=>{const i=ng(r,t.Mu(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function ig(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Qs||e instanceof Wp||e instanceof Up||e instanceof Pp||e instanceof Vp||e instanceof Hp)}function og(e,t,n){if(!ig(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ap(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function ag(e,t,n){if((t=vn(t))instanceof Bp)return t._internalPath;if("string"==typeof t)return lg(e,t);throw cg("Field path arguments must be of type string or ",e,!1,void 0,n)}const sg=new RegExp("[~\\*/\\[\\]]");function lg(e,t,n){if(t.search(sg)>=0)throw cg("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Bp(...t.split("."))._internalPath}catch(r){throw cg("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function cg(e,t,n,r,i){const o=r&&!r.isEmpty(),a=void 0!==i;let s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new Ls(Ps.INVALID_ARGUMENT,s+e+l)}function ug(e,t){return e.some(e=>e.isEqual(t))}class dg{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Pp(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new hg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class hg extends dg{data(){return super.data()}}function fg(e,t){return"string"==typeof t?lg(e,t):t instanceof Bp?t._internalPath:t._delegate._internalPath}function pg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ls(Ps.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gg{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Bl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pl(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ll(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Os()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return wl(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Pl(e.doubleValue));return new Hp(i)}convertGeoPoint(e){return new Wp(Pl(e.latitude),Pl(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Dl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ml(e));default:return null}}convertTimestamp(e){const t=Nl(e);return new Qs(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Xs.fromString(e);Rs(Bd(n));const r=new zl(n.get(1),n.get(3)),i=new el(n.popFirst(5));return r.isEqual(t)||As("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function mg(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class yg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vg extends dg{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new bg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(fg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class bg extends vg{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class xg{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new yg(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new bg(this._firestore,this._userDataWriter,n.key,n,new yg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ls(Ps.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new bg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new yg(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new bg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new yg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:wg(t.type),doc:r,oldIndex:i,newIndex:o}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function wg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Os()}}class Sg extends gg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Up(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pp(this.firestore,null,t)}}function kg(e,t,n){e=_p(e,Pp);const r=_p(e.firestore,Mp),i=mg(e.converter,t,n);return Eg(r,[$p(Xp(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Eu.none())])}function Cg(e,t,n){e=_p(e,Pp);const r=_p(e.firestore,Mp),i=Xp(r);let o;for(var a=arguments.length,s=new Array(a>3?a-3:0),l=3;l<a;l++)s[l-3]=arguments[l];return o="string"==typeof(t=vn(t))||t instanceof Bp?tg(i,"updateDoc",e._key,t,n,s):eg(i,"updateDoc",e._key,t),Eg(r,[o.toMutation(e._key,Eu.exists(!0))])}function Eg(e,t){return function(e,t){const n=new js;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=cp(e);try{const e=await function(e,t){const n=Ns(e),r=Qs.now(),i=t.reduce((e,t)=>e.add(t.key),au());let o,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let s=Xc(),l=au();return n.cs.getEntries(e,i).next(e=>{s=e,s.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,s)).next(i=>{o=i;const a=[];for(const e of t){const t=Ru(e,o.get(e.key).overlayedDocument);null!=t&&a.push(new Lu(e.key,t,ic(t.value.mapValue),Eu.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:eu(o)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new kl(Ks)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await op(r,e.changes),await af(r.remoteStore)}catch(e){const t=xf(e,"Failed to persist write");n.reject(t)}}(await vp(e),t,n)),n.promise}(Fp(e),t)}function Tg(e,t,n){const r=n.docs.get(t._key),i=new Sg(e);return new vg(e,i,t._key,r,new yg(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ks=e}(Pr),_r(new bn("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),a=new Mp(new zs(e.getProvider("auth-internal")),new Ws(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ls(Ps.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zl(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Dr(ws,"4.7.3",e),Dr(ws,"4.7.3","esm2017")}();var Ag=n(579);const _g=["checkLandmarks","hasLayover","viaAirports","legAirlines","legAircraftTypes","legServiceClasses"],Ig=Lr({apiKey:"AIzaSyBN3khxqaQpC8Ws9EQ7syvnPC_rLasMOL0",authDomain:"flightlog-82a3c.firebaseapp.com",projectId:"flightlog-82a3c",storageBucket:"flightlog-82a3c.firebasestorage.app",messagingSenderId:"959347389178",appId:"1:959347389178:web:f175b4aac3b755b71d8f43",measurementId:"G-CDV75B04DY"}),Og=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jr();const t=Ir(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Ir(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(dn(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Zr(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:es,persistence:[ha,Jo,Xo]}),r=nn("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>is)return;const r=null===t||void 0===t?void 0:t.token;os!==r&&(os=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){vn(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){vn(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const o=en("auth");return o&&yo(n,"http://".concat(o)),n}(Ig),Rg=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Ir("object"==typeof e?e:jr(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=en(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Rp(r,...e)}return r}(Ig),Ng=new Po;Ng.setCustomParameters({prompt:"select_account"});const Pg="870884007039-9got7ia77t611u2fugedlq6j7kftf51p.apps.googleusercontent.com",Lg="AIzaSyArv6AbTjFIM_nuCm4VKZAZTdfP_y2G0ag",jg=["https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest"],Dg="https://www.googleapis.com/auth/gmail.readonly",Mg=[{code:"JFK",name:"John F. Kennedy Intl",city:"New York",country:"USA",lat:40.6413,lon:-73.7781},{code:"LGA",name:"LaGuardia",city:"New York",country:"USA",lat:40.7769,lon:-73.874},{code:"EWR",name:"Newark Liberty Intl",city:"Newark",country:"USA",lat:40.6895,lon:-74.1745},{code:"LAX",name:"Los Angeles Intl",city:"Los Angeles",country:"USA",lat:33.9416,lon:-118.4085},{code:"SFO",name:"San Francisco Intl",city:"San Francisco",country:"USA",lat:37.6188,lon:-122.3749},{code:"ORD",name:"O'Hare Intl",city:"Chicago",country:"USA",lat:41.9742,lon:-87.9073},{code:"MDW",name:"Midway Intl",city:"Chicago",country:"USA",lat:41.7868,lon:-87.7522},{code:"ATL",name:"Hartsfield-Jackson Atlanta",city:"Atlanta",country:"USA",lat:33.6407,lon:-84.4277},{code:"DFW",name:"Dallas/Fort Worth Intl",city:"Dallas",country:"USA",lat:32.8998,lon:-97.0403},{code:"DEN",name:"Denver Intl",city:"Denver",country:"USA",lat:39.8561,lon:-104.6737},{code:"SEA",name:"Seattle-Tacoma Intl",city:"Seattle",country:"USA",lat:47.4502,lon:-122.3088},{code:"PHX",name:"Phoenix Sky Harbor",city:"Phoenix",country:"USA",lat:33.4373,lon:-112.0078},{code:"MIA",name:"Miami Intl",city:"Miami",country:"USA",lat:25.7959,lon:-80.287},{code:"FLL",name:"Fort Lauderdale-Hollywood",city:"Fort Lauderdale",country:"USA",lat:26.0742,lon:-80.1506},{code:"MCO",name:"Orlando Intl",city:"Orlando",country:"USA",lat:28.4312,lon:-81.3081},{code:"BOS",name:"Logan Intl",city:"Boston",country:"USA",lat:42.3656,lon:-71.0096},{code:"IAD",name:"Dulles Intl",city:"Washington",country:"USA",lat:38.9531,lon:-77.4565},{code:"DCA",name:"Reagan National",city:"Washington",country:"USA",lat:38.8512,lon:-77.0402},{code:"BWI",name:"Baltimore-Washington",city:"Baltimore",country:"USA",lat:39.1774,lon:-76.6684},{code:"PHL",name:"Philadelphia Intl",city:"Philadelphia",country:"USA",lat:39.8729,lon:-75.2437},{code:"MSP",name:"Minneapolis-St Paul",city:"Minneapolis",country:"USA",lat:44.8848,lon:-93.2223},{code:"DTW",name:"Detroit Metro",city:"Detroit",country:"USA",lat:42.2162,lon:-83.3554},{code:"CLT",name:"Charlotte Douglas",city:"Charlotte",country:"USA",lat:35.214,lon:-80.9431},{code:"LAS",name:"Harry Reid Intl",city:"Las Vegas",country:"USA",lat:36.084,lon:-115.1537},{code:"SAN",name:"San Diego Intl",city:"San Diego",country:"USA",lat:32.7338,lon:-117.1933},{code:"SJC",name:"San Jose Intl",city:"San Jose",country:"USA",lat:37.3626,lon:-121.929},{code:"OAK",name:"Oakland Intl",city:"Oakland",country:"USA",lat:37.7213,lon:-122.2208},{code:"PDX",name:"Portland Intl",city:"Portland",country:"USA",lat:45.5898,lon:-122.5951},{code:"IAH",name:"George Bush Intercontinental",city:"Houston",country:"USA",lat:29.9902,lon:-95.3368},{code:"HOU",name:"Hobby",city:"Houston",country:"USA",lat:29.6454,lon:-95.2789},{code:"AUS",name:"Austin-Bergstrom",city:"Austin",country:"USA",lat:30.1975,lon:-97.6664},{code:"SLC",name:"Salt Lake City Intl",city:"Salt Lake City",country:"USA",lat:40.7899,lon:-111.9791},{code:"TPA",name:"Tampa Intl",city:"Tampa",country:"USA",lat:27.9755,lon:-82.5332},{code:"HNL",name:"Daniel K. Inouye Intl",city:"Honolulu",country:"USA",lat:21.3245,lon:-157.9251},{code:"ANC",name:"Ted Stevens Anchorage",city:"Anchorage",country:"USA",lat:61.1743,lon:-149.9962},{code:"YYZ",name:"Toronto Pearson",city:"Toronto",country:"Canada",lat:43.6777,lon:-79.6248},{code:"YVR",name:"Vancouver Intl",city:"Vancouver",country:"Canada",lat:49.1967,lon:-123.1815},{code:"YUL",name:"Montr\xe9al-Trudeau",city:"Montreal",country:"Canada",lat:45.4657,lon:-73.7455},{code:"YYC",name:"Calgary Intl",city:"Calgary",country:"Canada",lat:51.1215,lon:-114.0076},{code:"MEX",name:"Benito Ju\xe1rez Intl",city:"Mexico City",country:"Mexico",lat:19.4363,lon:-99.0721},{code:"CUN",name:"Canc\xfan Intl",city:"Cancun",country:"Mexico",lat:21.0365,lon:-86.8771},{code:"LHR",name:"London Heathrow",city:"London",country:"UK",lat:51.47,lon:-.4543},{code:"LGW",name:"London Gatwick",city:"London",country:"UK",lat:51.1537,lon:-.1821},{code:"STN",name:"London Stansted",city:"London",country:"UK",lat:51.886,lon:.2389},{code:"LTN",name:"London Luton",city:"London",country:"UK",lat:51.8763,lon:-.3717},{code:"MAN",name:"Manchester",city:"Manchester",country:"UK",lat:53.3537,lon:-2.275},{code:"EDI",name:"Edinburgh",city:"Edinburgh",country:"UK",lat:55.9508,lon:-3.3615},{code:"CDG",name:"Paris Charles de Gaulle",city:"Paris",country:"France",lat:49.0097,lon:2.5479},{code:"ORY",name:"Paris Orly",city:"Paris",country:"France",lat:48.7233,lon:2.3795},{code:"NCE",name:"Nice C\xf4te d'Azur",city:"Nice",country:"France",lat:43.6584,lon:7.2159},{code:"FRA",name:"Frankfurt am Main",city:"Frankfurt",country:"Germany",lat:50.0379,lon:8.5622},{code:"MUC",name:"Munich",city:"Munich",country:"Germany",lat:48.3537,lon:11.775},{code:"BER",name:"Berlin Brandenburg",city:"Berlin",country:"Germany",lat:52.3667,lon:13.5033},{code:"DUS",name:"D\xfcsseldorf",city:"Dusseldorf",country:"Germany",lat:51.2895,lon:6.7668},{code:"HAM",name:"Hamburg",city:"Hamburg",country:"Germany",lat:53.6304,lon:10.0065},{code:"AMS",name:"Amsterdam Schiphol",city:"Amsterdam",country:"Netherlands",lat:52.3105,lon:4.7683},{code:"BRU",name:"Brussels",city:"Brussels",country:"Belgium",lat:50.901,lon:4.4856},{code:"ZRH",name:"Z\xfcrich",city:"Zurich",country:"Switzerland",lat:47.4647,lon:8.5492},{code:"GVA",name:"Geneva",city:"Geneva",country:"Switzerland",lat:46.237,lon:6.1092},{code:"VIE",name:"Vienna Intl",city:"Vienna",country:"Austria",lat:48.1103,lon:16.5697},{code:"PRG",name:"V\xe1clav Havel Prague",city:"Prague",country:"Czechia",lat:50.1008,lon:14.26},{code:"WAW",name:"Warsaw Chopin",city:"Warsaw",country:"Poland",lat:52.1657,lon:20.9671},{code:"KRK",name:"John Paul II Krak\xf3w",city:"Krakow",country:"Poland",lat:50.0777,lon:19.7848},{code:"BUD",name:"Budapest Ferenc Liszt",city:"Budapest",country:"Hungary",lat:47.4298,lon:19.2611},{code:"FCO",name:"Rome Fiumicino",city:"Rome",country:"Italy",lat:41.8003,lon:12.2389},{code:"MXP",name:"Milan Malpensa",city:"Milan",country:"Italy",lat:45.6306,lon:8.7281},{code:"LIN",name:"Milan Linate",city:"Milan",country:"Italy",lat:45.4555,lon:9.2765},{code:"VCE",name:"Venice Marco Polo",city:"Venice",country:"Italy",lat:45.5053,lon:12.3519},{code:"NAP",name:"Naples Intl",city:"Naples",country:"Italy",lat:40.886,lon:14.2908},{code:"MAD",name:"Madrid Barajas",city:"Madrid",country:"Spain",lat:40.4936,lon:-3.5668},{code:"BCN",name:"Barcelona El Prat",city:"Barcelona",country:"Spain",lat:41.2974,lon:2.0833},{code:"PMI",name:"Palma de Mallorca",city:"Palma",country:"Spain",lat:39.5517,lon:2.7388},{code:"AGP",name:"M\xe1laga",city:"Malaga",country:"Spain",lat:36.6749,lon:-4.4991},{code:"LIS",name:"Lisbon Humberto Delgado",city:"Lisbon",country:"Portugal",lat:38.7756,lon:-9.1354},{code:"OPO",name:"Porto Francisco S\xe1 Carneiro",city:"Porto",country:"Portugal",lat:41.2481,lon:-8.6814},{code:"ATH",name:"Athens Eleftherios Venizelos",city:"Athens",country:"Greece",lat:37.9364,lon:23.9445},{code:"IST",name:"Istanbul Airport",city:"Istanbul",country:"Turkey",lat:41.2753,lon:28.7519},{code:"SAW",name:"Istanbul Sabiha G\xf6k\xe7en",city:"Istanbul",country:"Turkey",lat:40.8986,lon:29.3092},{code:"DUB",name:"Dublin",city:"Dublin",country:"Ireland",lat:53.4264,lon:-6.2499},{code:"CPH",name:"Copenhagen Kastrup",city:"Copenhagen",country:"Denmark",lat:55.618,lon:12.6508},{code:"OSL",name:"Oslo Gardermoen",city:"Oslo",country:"Norway",lat:60.1976,lon:11.0004},{code:"ARN",name:"Stockholm Arlanda",city:"Stockholm",country:"Sweden",lat:59.6498,lon:17.9238},{code:"HEL",name:"Helsinki-Vantaa",city:"Helsinki",country:"Finland",lat:60.3172,lon:24.9633},{code:"SVO",name:"Moscow Sheremetyevo",city:"Moscow",country:"Russia",lat:55.9726,lon:37.4146},{code:"LED",name:"St Petersburg Pulkovo",city:"St Petersburg",country:"Russia",lat:59.8003,lon:30.2625},{code:"DXB",name:"Dubai Intl",city:"Dubai",country:"UAE",lat:25.2532,lon:55.3657},{code:"AUH",name:"Abu Dhabi Intl",city:"Abu Dhabi",country:"UAE",lat:24.433,lon:54.6511},{code:"DOH",name:"Hamad Intl",city:"Doha",country:"Qatar",lat:25.2609,lon:51.6138},{code:"TLV",name:"Ben Gurion",city:"Tel Aviv",country:"Israel",lat:32.0055,lon:34.8854},{code:"CAI",name:"Cairo Intl",city:"Cairo",country:"Egypt",lat:30.1219,lon:31.4056},{code:"AMM",name:"Queen Alia Intl",city:"Amman",country:"Jordan",lat:31.7226,lon:35.9932},{code:"RUH",name:"King Khalid Intl",city:"Riyadh",country:"Saudi Arabia",lat:24.9578,lon:46.6989},{code:"JED",name:"King Abdulaziz Intl",city:"Jeddah",country:"Saudi Arabia",lat:21.6796,lon:39.1565},{code:"SIN",name:"Singapore Changi",city:"Singapore",country:"Singapore",lat:1.3644,lon:103.9915},{code:"HKG",name:"Hong Kong Intl",city:"Hong Kong",country:"Hong Kong",lat:22.308,lon:113.9185},{code:"NRT",name:"Tokyo Narita",city:"Tokyo",country:"Japan",lat:35.772,lon:140.3929},{code:"HND",name:"Tokyo Haneda",city:"Tokyo",country:"Japan",lat:35.5494,lon:139.7798},{code:"KIX",name:"Osaka Kansai",city:"Osaka",country:"Japan",lat:34.4347,lon:135.2441},{code:"ICN",name:"Seoul Incheon",city:"Seoul",country:"South Korea",lat:37.4602,lon:126.4407},{code:"GMP",name:"Seoul Gimpo",city:"Seoul",country:"South Korea",lat:37.5583,lon:126.7906},{code:"PEK",name:"Beijing Capital",city:"Beijing",country:"China",lat:40.0799,lon:116.6031},{code:"PKX",name:"Beijing Daxing",city:"Beijing",country:"China",lat:39.5098,lon:116.4105},{code:"PVG",name:"Shanghai Pudong",city:"Shanghai",country:"China",lat:31.1443,lon:121.8083},{code:"SHA",name:"Shanghai Hongqiao",city:"Shanghai",country:"China",lat:31.1979,lon:121.3363},{code:"CAN",name:"Guangzhou Baiyun",city:"Guangzhou",country:"China",lat:23.3959,lon:113.308},{code:"HAN",name:"Noi Bai Intl",city:"Hanoi",country:"Vietnam",lat:21.2212,lon:105.8072},{code:"SGN",name:"Tan Son Nhat",city:"Ho Chi Minh City",country:"Vietnam",lat:10.8188,lon:106.652},{code:"BKK",name:"Suvarnabhumi",city:"Bangkok",country:"Thailand",lat:13.69,lon:100.7501},{code:"DMK",name:"Don Mueang",city:"Bangkok",country:"Thailand",lat:13.9126,lon:100.6068},{code:"KUL",name:"Kuala Lumpur Intl",city:"Kuala Lumpur",country:"Malaysia",lat:2.7456,lon:101.7072},{code:"CGK",name:"Soekarno-Hatta",city:"Jakarta",country:"Indonesia",lat:-6.1256,lon:106.6558},{code:"DPS",name:"Ngurah Rai",city:"Bali",country:"Indonesia",lat:-8.7482,lon:115.1672},{code:"MNL",name:"Ninoy Aquino Intl",city:"Manila",country:"Philippines",lat:14.5086,lon:121.0198},{code:"DEL",name:"Indira Gandhi Intl",city:"Delhi",country:"India",lat:28.5562,lon:77.1},{code:"BOM",name:"Chhatrapati Shivaji",city:"Mumbai",country:"India",lat:19.0896,lon:72.8656},{code:"BLR",name:"Kempegowda Intl",city:"Bangalore",country:"India",lat:13.1986,lon:77.7066},{code:"MAA",name:"Chennai Intl",city:"Chennai",country:"India",lat:12.9941,lon:80.1709},{code:"TPE",name:"Taiwan Taoyuan",city:"Taipei",country:"Taiwan",lat:25.0797,lon:121.2342},{code:"SYD",name:"Sydney Kingsford Smith",city:"Sydney",country:"Australia",lat:-33.9399,lon:151.1753},{code:"MEL",name:"Melbourne Tullamarine",city:"Melbourne",country:"Australia",lat:-37.669,lon:144.841},{code:"BNE",name:"Brisbane",city:"Brisbane",country:"Australia",lat:-27.3942,lon:153.1218},{code:"PER",name:"Perth",city:"Perth",country:"Australia",lat:-31.9385,lon:115.9672},{code:"AKL",name:"Auckland",city:"Auckland",country:"New Zealand",lat:-37.0082,lon:174.785},{code:"CHC",name:"Christchurch",city:"Christchurch",country:"New Zealand",lat:-43.4894,lon:172.5322},{code:"WLG",name:"Wellington",city:"Wellington",country:"New Zealand",lat:-41.3272,lon:174.805},{code:"GRU",name:"S\xe3o Paulo Guarulhos",city:"Sao Paulo",country:"Brazil",lat:-23.4356,lon:-46.4731},{code:"GIG",name:"Rio de Janeiro Gale\xe3o",city:"Rio de Janeiro",country:"Brazil",lat:-22.81,lon:-43.2506},{code:"EZE",name:"Buenos Aires Ezeiza",city:"Buenos Aires",country:"Argentina",lat:-34.8222,lon:-58.5358},{code:"SCL",name:"Santiago Arturo Merino",city:"Santiago",country:"Chile",lat:-33.393,lon:-70.7858},{code:"LIM",name:"Lima Jorge Ch\xe1vez",city:"Lima",country:"Peru",lat:-12.0219,lon:-77.1143},{code:"BOG",name:"Bogot\xe1 El Dorado",city:"Bogota",country:"Colombia",lat:4.7016,lon:-74.1469},{code:"JNB",name:"O.R. Tambo Intl",city:"Johannesburg",country:"South Africa",lat:-26.1392,lon:28.246},{code:"CPT",name:"Cape Town Intl",city:"Cape Town",country:"South Africa",lat:-33.9715,lon:18.6021},{code:"NBO",name:"Jomo Kenyatta Intl",city:"Nairobi",country:"Kenya",lat:-1.3192,lon:36.9278},{code:"ADD",name:"Addis Ababa Bole",city:"Addis Ababa",country:"Ethiopia",lat:8.9779,lon:38.7993},{code:"CMN",name:"Mohammed V Intl",city:"Casablanca",country:"Morocco",lat:33.3675,lon:-7.5898},{code:"RAK",name:"Marrakech Menara",city:"Marrakech",country:"Morocco",lat:31.6069,lon:-8.0363},{code:"LOS",name:"Murtala Muhammed",city:"Lagos",country:"Nigeria",lat:6.5774,lon:3.3212},{code:"CAI",name:"Cairo Intl",city:"Cairo",country:"Egypt",lat:30.1219,lon:31.4056}],Fg={USA:"North America",Canada:"North America",Mexico:"North America",UK:"Europe",France:"Europe",Germany:"Europe",Netherlands:"Europe",Belgium:"Europe",Switzerland:"Europe",Austria:"Europe",Czechia:"Europe",Poland:"Europe",Hungary:"Europe",Italy:"Europe",Spain:"Europe",Portugal:"Europe",Greece:"Europe",Turkey:"Europe",Ireland:"Europe",Denmark:"Europe",Norway:"Europe",Sweden:"Europe",Finland:"Europe",Russia:"Europe",UAE:"Middle East",Qatar:"Middle East",Israel:"Middle East",Egypt:"Africa",Jordan:"Middle East","Saudi Arabia":"Middle East",Singapore:"Asia","Hong Kong":"Asia",Japan:"Asia","South Korea":"Asia",China:"Asia",Vietnam:"Asia",Thailand:"Asia",Malaysia:"Asia",Indonesia:"Asia",Philippines:"Asia",India:"Asia",Taiwan:"Asia",Australia:"Oceania","New Zealand":"Oceania",Brazil:"South America",Argentina:"South America",Chile:"South America",Peru:"South America",Colombia:"South America","South Africa":"Africa",Kenya:"Africa",Ethiopia:"Africa",Morocco:"Africa",Nigeria:"Africa"},zg=e=>Fg[e]||"Unknown",Ug=e=>{if(!e||e.length<2)return[];const t=e.toLowerCase().trim();return Mg.filter(e=>e.code.toLowerCase().includes(t)||e.city.toLowerCase().includes(t)||e.name.toLowerCase().includes(t)||e.country&&e.country.toLowerCase().includes(t)).slice(0,8)},Bg=["Economy","Premium Economy","Business","First"],Vg={"Star Alliance":["Aegean Airlines","Aegean","Air Canada","Air China","Air India","Air New Zealand","ANA","All Nippon Airways","All Nippon","Asiana Airlines","Asiana","Austrian","Austrian Airlines","Avianca","Brussels Airlines","Brussels","Copa Airlines","Copa","Croatia Airlines","Croatia","EgyptAir","Egypt Air","Egyptair","Ethiopian Airlines","Ethiopian","EVA Air","EVA","LOT Polish Airlines","LOT","Polish Airlines","Lufthansa","Scandinavian Airlines","SAS","Scandinavian","Shenzhen Airlines","Shenzhen","Singapore Airlines","Singapore","South African Airways","South African","Swiss","Swiss International","SWISS","TAP Air Portugal","TAP Portugal","TAP","Thai Airways","Thai","THAI","Turkish Airlines","Turkish","THY","United","United Airlines"],SkyTeam:["Aeroflot","Aerol\xedneas Argentinas","Aerolineas Argentinas","Aerol\xedneas","Aerom\xe9xico","Aeromexico","AeroMexico","Air Europa","Air France","AirFrance","China Airlines","China Eastern","China Eastern Airlines","Czech Airlines","CSA","Delta","Delta Air Lines","Delta Airlines","Garuda Indonesia","Garuda","ITA Airways","ITA","Alitalia","Kenya Airways","Kenya","KLM","KLM Royal Dutch","Royal Dutch Airlines","Korean Air","Korean","Middle East Airlines","MEA","Saudia","Saudi Arabian Airlines","Saudi Arabian","TAROM","Vietnam Airlines","Vietnam","Virgin Atlantic","Virgin","XiamenAir","Xiamen Airlines","Xiamen"],Oneworld:["Alaska Airlines","Alaska","American Airlines","American","AA","British Airways","BA","Cathay Pacific","Cathay","Finnair","Iberia","Japan Airlines","JAL","Malaysia Airlines","Malaysia","Qantas","Qatar Airways","Qatar","Royal Air Maroc","RAM","Royal Jordanian","SriLankan Airlines","SriLankan"]},Wg={"Star Alliance":{color:"#1e3a5f",background:"#e8f4fd",icon:"\u2b50",fullName:"Star Alliance"},SkyTeam:{color:"#0f4c81",background:"#e3f2fd",icon:"\ud83c\udf10",fullName:"SkyTeam"},Oneworld:{color:"#b91c1c",background:"#fee2e2",icon:"\ud83c\udf0d",fullName:"Oneworld"},Independent:{color:"#6b7280",background:"#f3f4f6",icon:"\u2708\ufe0f",fullName:"Independent"}},Hg=(e,t)=>{var n,r;if(!e||!t)return!1;const i=e.toLowerCase().trim(),o=t.toLowerCase().trim();if(i===o)return!0;const a=o.replace(/\s*\([^)]*\)\s*/g,"").trim(),s=(null===(n=o.match(/\(([^)]+)\)/))||void 0===n||null===(r=n[1])||void 0===r?void 0:r.toLowerCase())||"";if(i===a)return!0;if(s&&i===s)return!0;const l=i.split(/\s+/),c=a.split(/\s+/);if(1===l.length){if(c[0]===l[0])return!0;if(s&&s.split(/\s+/)[0]===l[0])return!0}if(a.startsWith(i))return!0;if(s&&s.startsWith(i))return!0;const u=a.replace(/\s*(airlines?|airways?|air lines?)\s*$/i,"").trim();return i===u||i.replace(/\s*(airlines?|airways?|air lines?)\s*$/i,"").trim()===u},qg={"Star Alliance":["Aegean Airlines","Air Canada","Air China","Air India","Air New Zealand","ANA (All Nippon Airways)","Asiana Airlines","Austrian Airlines","Avianca","Brussels Airlines","Copa Airlines","Croatia Airlines","EgyptAir","Ethiopian Airlines","EVA Air","LOT Polish Airlines","Lufthansa","Scandinavian Airlines (SAS)","Shenzhen Airlines","Singapore Airlines","South African Airways","Swiss International","TAP Air Portugal","Thai Airways","Turkish Airlines","United Airlines"],SkyTeam:["Aeroflot","Aerol\xedneas Argentinas","Aerom\xe9xico","Air Europa","Air France","China Airlines","China Eastern Airlines","Czech Airlines","Delta Air Lines","Garuda Indonesia","ITA Airways","Kenya Airways","KLM Royal Dutch Airlines","Korean Air","Middle East Airlines","Saudia","TAROM","Vietnam Airlines","Virgin Atlantic","XiamenAir"],Oneworld:["Alaska Airlines","American Airlines","British Airways","Cathay Pacific","Finnair","Iberia","Japan Airlines (JAL)","Malaysia Airlines","Qantas","Qatar Airways","Royal Air Maroc","Royal Jordanian","SriLankan Airlines"]},Kg=e=>{if(!e)return null;const t=e.trim().toLowerCase();for(const[n,r]of Object.entries(Vg))for(const e of r)if(t.includes(e.toLowerCase())||e.toLowerCase().includes(t))return n;return"Independent"},Gg=e=>e*Math.PI/180,Qg=e=>180*e/Math.PI,Jg=(e,t,n,r)=>{const i=Gg(n-e),o=Gg(r-t),a=Math.sin(i/2)*Math.sin(i/2)+Math.cos(Gg(e))*Math.cos(Gg(n))*Math.sin(o/2)*Math.sin(o/2),s=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return Math.round(3958.8*s)},Yg=(e,t,n,r,i)=>{const o=Gg(e),a=Gg(t),s=Gg(n),l=Gg(r),c=Math.pow(Math.sin((s-o)/2),2),u=Math.pow(Math.sin((l-a)/2),2),d=c+Math.cos(o)*Math.cos(s)*u,h=Math.min(1,Math.max(0,d)),f=2*Math.asin(Math.sqrt(h));if(0===f)return{lat:e,lon:t};const p=Math.sin((1-i)*f)/Math.sin(f),g=Math.sin(i*f)/Math.sin(f),m=p*Math.cos(o)*Math.cos(a)+g*Math.cos(s)*Math.cos(l),y=p*Math.cos(o)*Math.sin(a)+g*Math.cos(s)*Math.sin(l),v=p*Math.sin(o)+g*Math.sin(s);return{lat:Qg(Math.atan2(v,Math.sqrt(m*m+y*y))),lon:Qg(Math.atan2(y,m))}},Xg=[{name:"Grand Canyon National Park",lat:36.0544,lon:-112.1401,radius:40},{name:"Joshua Tree National Park",lat:33.8734,lon:-115.901,radius:35},{name:"Death Valley National Park",lat:36.5054,lon:-117.0794,radius:50},{name:"Yosemite National Park",lat:37.8651,lon:-119.5383,radius:35},{name:"Sequoia National Park",lat:36.4864,lon:-118.5658,radius:25},{name:"Kings Canyon National Park",lat:36.8879,lon:-118.5551,radius:25},{name:"Zion National Park",lat:37.2982,lon:-113.0263,radius:25},{name:"Bryce Canyon National Park",lat:37.593,lon:-112.1871,radius:20},{name:"Arches National Park",lat:38.7331,lon:-109.5925,radius:20},{name:"Canyonlands National Park",lat:38.3269,lon:-109.8783,radius:35},{name:"Capitol Reef National Park",lat:38.2833,lon:-111.2471,radius:30},{name:"Mesa Verde National Park",lat:37.2309,lon:-108.4618,radius:20},{name:"Petrified Forest National Park",lat:34.91,lon:-109.8068,radius:25},{name:"Saguaro National Park",lat:32.2967,lon:-111.1666,radius:20},{name:"Carlsbad Caverns National Park",lat:32.1479,lon:-104.5567,radius:20},{name:"Big Bend National Park",lat:29.25,lon:-103.2502,radius:40},{name:"Guadalupe Mountains National Park",lat:31.9231,lon:-104.8645,radius:20},{name:"White Sands National Park",lat:32.7872,lon:-106.3257,radius:25},{name:"Redwood National Park",lat:41.2132,lon:-124.0046,radius:25},{name:"Crater Lake National Park",lat:42.8684,lon:-122.1685,radius:20},{name:"Olympic National Park",lat:47.8021,lon:-123.6044,radius:35},{name:"Mount Rainier National Park",lat:46.88,lon:-121.7269,radius:30},{name:"North Cascades National Park",lat:48.7718,lon:-121.2985,radius:30},{name:"Lassen Volcanic National Park",lat:40.4977,lon:-121.508,radius:20},{name:"Channel Islands National Park",lat:34.0069,lon:-119.7785,radius:25},{name:"Pinnacles National Park",lat:36.4906,lon:-121.1825,radius:15},{name:"Yellowstone National Park",lat:44.428,lon:-110.5885,radius:50},{name:"Grand Teton National Park",lat:43.7904,lon:-110.6818,radius:30},{name:"Glacier National Park",lat:48.7596,lon:-113.787,radius:40},{name:"Rocky Mountain National Park",lat:40.3428,lon:-105.6836,radius:30},{name:"Great Sand Dunes National Park",lat:37.7916,lon:-105.5943,radius:20},{name:"Black Canyon of the Gunnison",lat:38.5754,lon:-107.7416,radius:15},{name:"Badlands National Park",lat:43.8554,lon:-102.3397,radius:30},{name:"Theodore Roosevelt National Park",lat:46.979,lon:-103.459,radius:25},{name:"Wind Cave National Park",lat:43.5724,lon:-103.4213,radius:15},{name:"Voyageurs National Park",lat:48.4839,lon:-92.8318,radius:25},{name:"Isle Royale National Park",lat:48,lon:-88.8269,radius:25},{name:"Mammoth Cave National Park",lat:37.1862,lon:-86.0996,radius:20},{name:"Great Smoky Mountains National Park",lat:35.6532,lon:-83.507,radius:35},{name:"Shenandoah National Park",lat:38.4755,lon:-78.4535,radius:30},{name:"Acadia National Park",lat:44.3386,lon:-68.2733,radius:20},{name:"Cuyahoga Valley National Park",lat:41.2808,lon:-81.5678,radius:15},{name:"Indiana Dunes National Park",lat:41.6533,lon:-87.0524,radius:15},{name:"Everglades National Park",lat:25.2866,lon:-80.8987,radius:50},{name:"Biscayne National Park",lat:25.4824,lon:-80.2083,radius:20},{name:"Dry Tortugas National Park",lat:24.6285,lon:-82.8732,radius:20},{name:"Congaree National Park",lat:33.7948,lon:-80.7821,radius:15},{name:"Hot Springs National Park",lat:34.5217,lon:-93.0424,radius:10},{name:"Great Lakes Region",lat:44,lon:-84.5,radius:150},{name:"Lake Superior",lat:47.5,lon:-88,radius:100},{name:"Lake Michigan",lat:43.5,lon:-87,radius:80},{name:"Lake Erie",lat:42.2,lon:-81.2,radius:60},{name:"Mississippi River Delta",lat:29.5,lon:-89.5,radius:40},{name:"Appalachian Mountains",lat:37,lon:-81,radius:80},{name:"Ozark Mountains",lat:36,lon:-93,radius:60},{name:"Sierra Nevada",lat:37.5,lon:-119.5,radius:60},{name:"Cascade Range",lat:44,lon:-121.5,radius:50},{name:"Colorado Plateau",lat:37,lon:-110.5,radius:100},{name:"Mojave Desert",lat:35,lon:-116,radius:70},{name:"Sonoran Desert",lat:32,lon:-112,radius:80},{name:"Chihuahuan Desert",lat:31,lon:-106,radius:70},{name:"Great Basin",lat:39.5,lon:-117,radius:100},{name:"Monument Valley",lat:36.9983,lon:-110.0985,radius:25},{name:"Sedona Red Rocks",lat:34.8697,lon:-111.761,radius:20},{name:"Lake Tahoe",lat:39.0968,lon:-120.0324,radius:20},{name:"Lake Powell",lat:37.0683,lon:-111.2433,radius:30},{name:"Lake Mead",lat:36.146,lon:-114.3901,radius:30},{name:"Hoover Dam",lat:36.0161,lon:-114.7377,radius:10},{name:"Mount Whitney",lat:36.5785,lon:-118.292,radius:15},{name:"Mount Shasta",lat:41.4092,lon:-122.1949,radius:20},{name:"Denali (Mount McKinley)",lat:63.0695,lon:-151.0074,radius:40},{name:"Canadian Rockies",lat:51.5,lon:-116,radius:80},{name:"Banff National Park",lat:51.4968,lon:-115.9281,radius:40},{name:"Niagara Falls",lat:43.0962,lon:-79.0377,radius:15},{name:"Alps",lat:46.5,lon:9.5,radius:150},{name:"Pyrenees",lat:42.6,lon:1,radius:80},{name:"Scottish Highlands",lat:57,lon:-5,radius:60},{name:"English Channel",lat:50.2,lon:-1,radius:40},{name:"Amazon Rainforest",lat:-3,lon:-60,radius:500},{name:"Sahara Desert",lat:23,lon:12,radius:800},{name:"Himalayas",lat:28,lon:84,radius:200},{name:"Great Barrier Reef",lat:-18.2871,lon:147.6992,radius:150},{name:"Uluru (Ayers Rock)",lat:-25.3444,lon:131.0369,radius:20},{name:"Mount Fuji",lat:35.3606,lon:138.7274,radius:30},{name:"Gobi Desert",lat:42.5,lon:103,radius:300},{name:"Siberian Taiga",lat:60,lon:100,radius:500}],$g=[{name:"North Atlantic Ocean",bounds:{minLat:10,maxLat:60,minLon:-80,maxLon:-5},center:{lat:35,lon:-40}},{name:"South Atlantic Ocean",bounds:{minLat:-60,maxLat:0,minLon:-70,maxLon:20},center:{lat:-25,lon:-15}},{name:"North Pacific Ocean",bounds:{minLat:10,maxLat:60,minLon:-180,maxLon:-125},center:{lat:35,lon:-155}},{name:"South Pacific Ocean",bounds:{minLat:-60,maxLat:0,minLon:-180,maxLon:-70},center:{lat:-30,lon:-130}},{name:"Indian Ocean",bounds:{minLat:-60,maxLat:25,minLon:20,maxLon:120},center:{lat:-10,lon:80}},{name:"Arctic Ocean",bounds:{minLat:66,maxLat:90,minLon:-180,maxLon:180},center:{lat:85,lon:0}},{name:"Caribbean Sea",bounds:{minLat:9,maxLat:23,minLon:-88,maxLon:-60},center:{lat:15,lon:-75}},{name:"Mediterranean Sea",bounds:{minLat:30,maxLat:46,minLon:-6,maxLon:36},center:{lat:35,lon:18}},{name:"Gulf of Mexico",bounds:{minLat:18,maxLat:30.5,minLon:-98,maxLon:-81},center:{lat:25,lon:-90}},{name:"Bering Sea",bounds:{minLat:51,maxLat:66,minLon:162,maxLon:-157},center:{lat:58,lon:-175}},{name:"Sea of Japan",bounds:{minLat:33,maxLat:52,minLon:127,maxLon:142},center:{lat:40,lon:135}},{name:"South China Sea",bounds:{minLat:0,maxLat:25,minLon:99,maxLon:121},center:{lat:12,lon:113}},{name:"Bay of Bengal",bounds:{minLat:5,maxLat:22,minLon:80,maxLon:95},center:{lat:15,lon:88}},{name:"Arabian Sea",bounds:{minLat:5,maxLat:25,minLon:50,maxLon:77},center:{lat:15,lon:65}},{name:"Red Sea",bounds:{minLat:12,maxLat:30,minLon:32,maxLon:44},center:{lat:20,lon:38}},{name:"Persian Gulf",bounds:{minLat:24,maxLat:30,minLon:48,maxLon:56},center:{lat:27,lon:51}},{name:"Tasman Sea",bounds:{minLat:-47,maxLat:-28,minLon:147,maxLon:175},center:{lat:-38,lon:160}},{name:"Coral Sea",bounds:{minLat:-28,maxLat:-10,minLon:143,maxLon:165},center:{lat:-18,lon:155}}],Zg=e=>{if(!e)return"";const[t,n,r]=e.split("-"),i=parseInt(n,10)-1;return"".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][i]," ").concat(parseInt(r,10),", ").concat(t)},em={padding:"24px",border:"1px solid #eee",borderRadius:"16px",textAlign:"center"},tm={fontSize:"28px",fontWeight:"bold",margin:"10px 0 5px"},nm={fontSize:"12px",color:"#888",textTransform:"uppercase"},rm={padding:"12px",borderRadius:"8px",border:"1px solid #ddd"},im={position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},om={background:"#fff",padding:"30px",borderRadius:"20px",width:"400px"},am=()=>{const[t,n]=(0,e.useState)(null),[r,i]=(0,e.useState)(null),[o,a]=(0,e.useState)(!0),[s,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)("login"),[d,h]=(0,e.useState)(""),[f,p]=(0,e.useState)(""),[g,m]=(0,e.useState)(""),[y,v]=(0,e.useState)(!1),[b,x]=(0,e.useState)([]),[w,S]=(0,e.useState)(!1),[k,C]=(0,e.useState)(!1),[E,T]=(0,e.useState)(!1);(0,e.useEffect)(()=>(window._setGmailImporting=T,()=>{window._setGmailImporting=null}),[]);const[A,_]=(0,e.useState)([]),[I,O]=(0,e.useState)(!1),[R,N]=(0,e.useState)(!1),[P,L]=(0,e.useState)([]),[j,D]=(0,e.useState)(!1),[M,F]=(0,e.useState)(!1),[z,U]=(0,e.useState)("miles"),[B,V]=(0,e.useState)(""),[W,H]=(0,e.useState)(!1),[q,K]=(0,e.useState)(""),[G,Q]=(0,e.useState)(()=>{const e=localStorage.getItem("statsExpanded");return null===e||JSON.parse(e)}),[J,Y]=(0,e.useState)(()=>{const e=localStorage.getItem("chartsExpanded");return null===e||JSON.parse(e)}),[X,$]=(0,e.useState)(()=>{const e={flights:!0,miles:!0,routes:!0,countries:!0,continents:!0,airports:!0,co2:!0,alliance:!0,moon:!0,world:!0,passengers:!0,money:!0,milesSpent:!0},t=localStorage.getItem("visibleStats");return t?ht(ht({},e),JSON.parse(t)):e}),[Z,ee]=(0,e.useState)(!1),[te,ne]=(0,e.useState)(!1),[re,ie]=(0,e.useState)(()=>localStorage.getItem("flightSortMode")||"date"),[oe,ae]=(0,e.useState)(()=>!localStorage.getItem("landingDismissed")),[se,le]=(0,e.useState)({show:!1,phase:"searching",currentQuery:0,totalQueries:9,currentEmail:0,totalEmails:0,foundFlights:0,currentQueryText:""}),[ce,ue]=(0,e.useState)(!1),[de,he]=(0,e.useState)(null),[fe,pe]=(0,e.useState)(null),[ge,me]=(0,e.useState)(!1),[ye,ve]=(0,e.useState)(""),[be,xe]=(0,e.useState)(null),[we,Se]=(0,e.useState)(!1),[ke,Ce]=(0,e.useState)({current:0,total:0}),Ee=(()=>{const e=new Date;return e.setFullYear(e.getFullYear()-3),e.toISOString().split("T")[0]})(),Te=(new Date).toISOString().split("T")[0],Ae=(0,e.useRef)(null),[_e,Ie]=(0,e.useState)({origin:"",destination:"",date:"",returnDate:"",aircraftType:"",airline:"",serviceClass:"Economy",checkLandmarks:!1,hasLayover:!1,isRoundTrip:!1,viaAirports:[""],legAirlines:["",""],legAircraftTypes:["",""],legServiceClasses:["Economy","Economy"],paymentType:"money",paymentAmount:""}),[Oe,Re]=(0,e.useState)([]),[Ne,Pe]=(0,e.useState)(null);(0,e.useEffect)(()=>{const e=function(e,t,n,r){return vn(e).onAuthStateChanged(t,n,r)}(Og,async e=>{if(a(!0),e){i(e);const t=jp(Rg,"users",e.uid),n=await function(e){e=_p(e,Pp);const t=_p(e.firestore,Mp);return xp(Fp(t),e._key).then(n=>Tg(t,e,n))}(t);n.exists()?(x(n.data().flights||[]),O(n.data().contestOptIn||!1),V(n.data().nickname||"")):(await kg(t,{flights:[],createdAt:(new Date).toISOString(),contestOptIn:!1,nickname:""}),x([]),O(!1),V(""))}else{i(null),O(!1),V("");const e=localStorage.getItem("flights-data");x(e?JSON.parse(e):[])}a(!1)});return()=>e()},[]),(0,e.useEffect)(()=>{if(r&&!o){Cg(jp(Rg,"users",r.uid),{flights:b}).catch(console.error)}else r||o||localStorage.setItem("flights-data",JSON.stringify(b))},[b,r,o]);const Le=e=>{const t=e.reduce((e,t)=>{const n=t.isRoundTrip?2:1;return e+(t.distance||0)*n},0),n=e.reduce((e,t)=>e+(t.legs&&t.legs.length>1?t.legs.length:1)*(t.isRoundTrip?2:1),0),r=[...new Set(e.flatMap(e=>[e.originCountry,e.destCountry].filter(Boolean)))].length,i=[...new Set(e.flatMap(e=>[e.origin,e.destination]))].length,o={Economy:1,"Premium Economy":1.5,Business:2.5,First:4},a=e.reduce((e,t)=>{const n=t.isRoundTrip?2:1;if(t.legs&&t.legs.length>1)return e+t.legs.reduce((e,t)=>{const n=o[t.serviceClass]||1;return e+Math.round(.14*(t.distance||0)*n)},0)*n;const r=o[t.serviceClass]||1;return e+Math.round(.14*(t.distance||0)*r)*n},0);return{totalMiles:t,totalFlights:n,uniqueCountries:r,uniqueAirports:i,totalCO2:a}};(0,e.useEffect)(()=>{(async()=>{if(r&&I&&!o&&!R){const n=Le(b),i=jp(Rg,"publicStats",r.uid);try{var e;await kg(i,ht(ht({displayName:B||r.displayName||(null===(e=r.email)||void 0===e?void 0:e.split("@")[0])||"Anonymous Flyer",email:r.email},n),{},{updatedAt:(new Date).toISOString()}))}catch(t){console.error("Error updating public stats:",t)}}})()},[b,I,r,o,R,B]);const je=async e=>{if(!r||R)return;N(!0);const t=jp(Rg,"users",r.uid);try{await Cg(t,{contestOptIn:e});const i=jp(Rg,"publicStats",r.uid);if(e){var n;const e=Le(b);await kg(i,ht(ht({displayName:B||r.displayName||(null===(n=r.email)||void 0===n?void 0:n.split("@")[0])||"Anonymous Flyer",email:r.email},e),{},{updatedAt:(new Date).toISOString()}))}else await kg(i,{optedOut:!0,updatedAt:(new Date).toISOString()});O(e)}catch(i){console.error("Error updating contest opt-in:",i),alert("Failed to update contest preference. Please check your connection and try again.")}finally{N(!1)}},De=async()=>{D(!0);try{const e=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=vn(e),Cp("collection","path",t),e instanceof Op){const n=Xs.fromString(t,...r);return Tp(n),new Lp(e,null,n)}{if(!(e instanceof Pp||e instanceof Lp))throw new Ls(Ps.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Xs.fromString(t,...r));return Tp(n),new Lp(e.firestore,null,n)}}(Rg,"publicStats"),t=await function(e){e=_p(e,Np);const t=_p(e.firestore,Mp),n=Fp(t),r=new Sg(t);return pg(e._query),wp(n,e._query).then(n=>new xg(t,r,e,n))}(e),n=[];console.log("Fetching leaderboard, found documents:",t.size),t.forEach(e=>{const t=e.data();console.log("Document:",e.id,t);const i=!0===t.optedOut,o=void 0!==t.totalMiles&&null!==t.totalMiles;!i&&o&&n.push(ht(ht({id:e.id},t),{},{totalMiles:t.totalMiles||0,totalFlights:t.totalFlights||0,uniqueCountries:t.uniqueCountries||0,uniqueAirports:t.uniqueAirports||0,totalCO2:t.totalCO2||0,isCurrentUser:r&&e.id===r.uid}))}),console.log("Filtered leaderboard entries:",n.length),n.sort((e,t)=>(t.totalMiles||0)-(e.totalMiles||0)),L(n)}catch(e){console.error("Error fetching leaderboard:",e),alert("Error loading leaderboard: "+e.message)}finally{D(!1)}};(0,e.useEffect)(()=>{M&&De()},[M,r]);const Me=async()=>{if(!r)return;const e=q.trim(),t=jp(Rg,"users",r.uid);try{if(await Cg(t,{nickname:e}),V(e),H(!1),I){var n;const t=jp(Rg,"publicStats",r.uid),i=Le(b);await kg(t,ht(ht({displayName:e||r.displayName||(null===(n=r.email)||void 0===n?void 0:n.split("@")[0])||"Anonymous Flyer",email:r.email},i),{},{updatedAt:(new Date).toISOString()}))}}catch(i){console.error("Error saving nickname:",i),alert("Failed to save nickname. Please try again.")}};(0,e.useEffect)(()=>{const e=localStorage.getItem("user-profile");if(e&&n(JSON.parse(e)),document.querySelector('script[src*="apis.google.com"]'))window.gapi&&window.gapi.client&&ue(!0);else{const e=document.createElement("script");e.src="https://apis.google.com/js/api.js",e.onload=()=>{window.gapi.load("client",async()=>{await window.gapi.client.init({apiKey:Lg,discoveryDocs:jg}),ue(!0)})},document.body.appendChild(e)}if(document.querySelector('script[src*="accounts.google.com"]')){if(window.google&&window.google.accounts&&window.google.accounts.oauth2){const e=window.google.accounts.oauth2.initTokenClient({client_id:Pg,scope:Dg,callback:"",ux_mode:"popup",error_callback:e=>{console.error("Google OAuth error:",e),window._gmailAuthTimeout&&(clearTimeout(window._gmailAuthTimeout),window._gmailAuthTimeout=null),window._setGmailImporting&&window._setGmailImporting(!1),"popup_closed"!==e.type&&"popup_failed_to_open"!==e.type||alert("Popup was blocked or closed. Please allow popups for this site and try again.")}});he(e)}}else{const e=document.createElement("script");e.src="https://accounts.google.com/gsi/client",e.onload=()=>{const e=window.google.accounts.oauth2.initTokenClient({client_id:Pg,scope:Dg,callback:"",ux_mode:"popup",error_callback:e=>{console.error("Google OAuth error:",e),window._gmailAuthTimeout&&(clearTimeout(window._gmailAuthTimeout),window._gmailAuthTimeout=null),window._setGmailImporting&&window._setGmailImporting(!1),"popup_closed"!==e.type&&"popup_failed_to_open"!==e.type||alert("Popup was blocked or closed. Please allow popups for this site and try again.")}});he(e)},document.body.appendChild(e)}const t="google-maps-script";if(window.initFlightMaps=()=>{window.google&&window.google.maps&&(Ae.current=new window.google.maps.Geocoder)},document.getElementById(t))window.google&&window.google.maps&&window.google.maps.Geocoder&&(Ae.current=new window.google.maps.Geocoder);else{const e=document.createElement("script");e.id=t,e.src="https://maps.googleapis.com/maps/api/js?key=".concat(Lg,"&libraries=places&loading=async&callback=initFlightMaps"),e.async=!0,e.defer=!0,document.body.appendChild(e)}},[]),(0,e.useEffect)(()=>{const e=()=>{be&&xe(null)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[be]);const Fe=async e=>{e.preventDefault(),m("");try{await async function(e,t,n){if(Or(e.app))return Promise.reject(ni(e));const r=lo(e),i=mo(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Do),o=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&qo(e),t}),a=await Mo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}(Og,d,f),l(!1),h(""),p("")}catch(t){switch(t.code){case"auth/email-already-in-use":m("This email is already registered. Try logging in.");break;case"auth/weak-password":m("Password should be at least 6 characters.");break;case"auth/invalid-email":m("Please enter a valid email address.");break;default:m(t.message)}}},ze=async e=>{e.preventDefault(),m("");try{await function(e,t,n){return Or(e.app)?Promise.reject(ni(e)):Ho(vn(e),Io.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&qo(e),t})}(Og,d,f),l(!1),h(""),p("")}catch(t){switch(t.code){case"auth/user-not-found":m("No account found with this email.");break;case"auth/wrong-password":m("Incorrect password.");break;case"auth/invalid-email":m("Please enter a valid email address.");break;case"auth/too-many-requests":m("Too many failed attempts. Please try again later.");break;default:m("Invalid email or password.")}}},Ue=e=>{u(e),m(""),h(""),p(""),l(!0)},Be=e=>{"signup"===c?Fe(e):ze(e)},Ve=e=>!(e.schemaVersion&&e.schemaVersion>=3)&&(void 0===e.originCountry||void 0===e.destCountry||void 0===e.originContinent||void 0===e.destContinent||"Unknown"===e.originContinent||"Unknown"===e.destContinent||""===e.originCountry||e.destCountry,!0),We=()=>b.filter(e=>Ve(e)),He=(e,t)=>Jg(e.lat,e.lon,t.lat,t.lon)<=t.radius,qe=async(e,t)=>{const n=new Set,r=[];for(let i=1;i<20;i++){const r=Yg(e.lat,e.lon,t.lat,t.lon,i/20);!r||isNaN(r.lat)||isNaN(r.lon)||Xg.forEach(e=>{He(r,e)&&n.add(e.name)})}if(Ae.current){const i=[.1,.25,.4,.5,.6,.75,.9];for(let o of i){const i=Yg(e.lat,e.lon,t.lat,t.lon,o);if(i&&!isNaN(i.lat)&&!isNaN(i.lon)){ve("Scanning point ".concat(Math.round(100*o),"%..."));try{await new Promise(e=>setTimeout(e,300));const e={lat:i.lat,lng:i.lon},t=await new Promise(t=>{Ae.current.geocode({location:e},(e,n)=>t({res:e,status:n}))});"OK"===t.status&&t.res&&t.res.length>0?(r.push(i),t.res.forEach(e=>{const t=e.types||[];var r;(t.includes("natural_feature")||t.includes("park")||t.includes("establishment"))&&(null===(r=e.address_components)||void 0===r||r.forEach(e=>{const t=e.types||[];if(t.includes("country")||t.includes("administrative_area_level_1")||t.includes("administrative_area_level_2")||t.includes("locality"))return;const r=e.long_name;(r.includes("National Park")||r.includes("National Forest")||r.includes("National Monument")||r.includes("Wilderness")||r.includes("Mountain")||r.includes("Lake")||r.includes("River")||r.includes("Canyon")||r.includes("Desert")||r.includes("Valley"))&&n.add(r)}))})):"ZERO_RESULTS"===t.status&&Ke(i,n)}catch(sm){console.warn("Geocoding skip:",sm)}}}}return ve(""),Array.from(n)},Ke=(e,t)=>{$g.forEach(n=>{((e,t)=>{const{minLat:n,maxLat:r,minLon:i,maxLon:o}=t.bounds;return i>o?e.lat>=n&&e.lat<=r&&(e.lon>=i||e.lon<=o):e.lat>=n&&e.lat<=r&&e.lon>=i&&e.lon<=o})(e,n)&&t.add(n.name)})},Ge=e=>{var t,n,r,i;const o=e.payload.headers,a=(null===(t=o.find(e=>"Subject"===e.name))||void 0===t?void 0:t.value)||"",s=(null===(n=o.find(e=>"From"===e.name))||void 0===n?void 0:n.value)||"",l=(null===(r=o.find(e=>"Date"===e.name))||void 0===r?void 0:r.value)||"",c=(e=>{let t="";const n=e=>{if(e)for(const r of e)if(r.parts&&n(r.parts),"text/html"===r.mimeType&&r.body&&r.body.data)try{t+=atob(r.body.data.replace(/-/g,"+").replace(/_/g,"/"))}catch(sm){}};if(e.parts)n(e.parts);else if("text/html"===e.mimeType&&e.body&&e.body.data)try{t=atob(e.body.data.replace(/-/g,"+").replace(/_/g,"/"))}catch(sm){}return t})(e.payload),u=(e=>{let t="",n="";const r=e=>{if(e)for(const i of e)if(i.parts&&r(i.parts),i.body&&i.body.data)try{const e=atob(i.body.data.replace(/-/g,"+").replace(/_/g,"/"));"text/plain"===i.mimeType?t+=e+" ":"text/html"===i.mimeType&&(n+=e.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"").replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"").replace(/<[^>]+>/g," ").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#(\d+);/g,(e,t)=>String.fromCharCode(t))+" ")}catch(sm){}};if(e.parts)r(e.parts);else if(e.body&&e.body.data)try{const r=atob(e.body.data.replace(/-/g,"+").replace(/_/g,"/"));"text/html"===e.mimeType?n=r.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"").replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"").replace(/<[^>]+>/g," ").replace(/&nbsp;/g," "):t=r}catch(sm){}return(t+" "+n).replace(/\s+/g," ").trim()})(e.payload),d=[];try{const t=/<script[^>]*type\s*=\s*["']application\/ld\+json["'][^>]*>([\s\S]*?)<\/script>/gi;let n;for(;null!==(n=t.exec(c));)try{const t=n[1].trim(),r=JSON.parse(t),i=Array.isArray(r)?r:[r];for(const n of i){if("FlightReservation"===n["@type"]&&n.reservationFor){const t=n.reservationFor,r=t.departureAirport,i=t.arrivalAirport;var h,f,p,g,m,y;if(null!==r&&void 0!==r&&r.iataCode&&null!==i&&void 0!==i&&i.iataCode)d.push({id:"".concat(e.id,"-").concat(d.length),origin:r.iataCode.toUpperCase(),destination:i.iataCode.toUpperCase(),date:t.departureTime?t.departureTime.split("T")[0]:"",flightNumber:((null===(h=t.airline)||void 0===h?void 0:h.iataCode)||"")+(t.flightNumber||""),airline:(null===(f=t.airline)||void 0===f?void 0:f.name)||"",aircraftType:(null===(p=t.aircraft)||void 0===p?void 0:p.name)||(null===(g=t.aircraft)||void 0===g?void 0:g.model)||"Unknown",serviceClass:(null===(m=n.reservedTicket)||void 0===m||null===(y=m.ticketedSeat)||void 0===y?void 0:y.seatingType)||"Economy",confirmationNumber:n.reservationNumber||"",snippet:"".concat(r.name||r.iataCode," \u2192 ").concat(i.name||i.iataCode),source:"json-ld"})}if("Flight"===n["@type"]){const t=n.departureAirport,r=n.arrivalAirport;var v,b,x;if(null!==t&&void 0!==t&&t.iataCode&&null!==r&&void 0!==r&&r.iataCode)d.push({id:"".concat(e.id,"-").concat(d.length),origin:t.iataCode.toUpperCase(),destination:r.iataCode.toUpperCase(),date:n.departureTime?n.departureTime.split("T")[0]:"",flightNumber:((null===(v=n.airline)||void 0===v?void 0:v.iataCode)||"")+(n.flightNumber||""),airline:(null===(b=n.airline)||void 0===b?void 0:b.name)||"",aircraftType:(null===(x=n.aircraft)||void 0===x?void 0:x.name)||"Unknown",serviceClass:"Economy",confirmationNumber:"",snippet:"".concat(t.name||t.iataCode," \u2192 ").concat(r.name||r.iataCode),source:"json-ld"})}}}catch(V){console.log("JSON-LD parse error:",V.message)}}catch(sm){console.log("JSON-LD extraction error:",sm.message)}if(d.length>0)return console.log("Found ".concat(d.length," flight(s) via JSON-LD in email:"),a),d;const w=(a+" "+u).replace(/\s+/g," "),S={"united.com":{name:"United Airlines",code:"UA"},"delta.com":{name:"Delta Air Lines",code:"DL"},"aa.com":{name:"American Airlines",code:"AA"},"southwest.com":{name:"Southwest Airlines",code:"WN"},"jetblue.com":{name:"JetBlue",code:"B6"},"alaskaair.com":{name:"Alaska Airlines",code:"AS"},"britishairways.com":{name:"British Airways",code:"BA"},"lufthansa.com":{name:"Lufthansa",code:"LH"},"airfrance.com":{name:"Air France",code:"AF"},"klm.com":{name:"KLM",code:"KL"},"emirates.com":{name:"Emirates",code:"EK"},"qatarairways.com":{name:"Qatar Airways",code:"QR"},"singaporeair.com":{name:"Singapore Airlines",code:"SQ"},"cathaypacific.com":{name:"Cathay Pacific",code:"CX"},"turkishairlines.com":{name:"Turkish Airlines",code:"TK"},"aircanada.com":{name:"Air Canada",code:"AC"},"qantas.com":{name:"Qantas",code:"QF"},"iberia.com":{name:"Iberia",code:"IB"},"vueling.com":{name:"Vueling",code:"VY"},"tap.pt":{name:"TAP Air Portugal",code:"TP"},"ana.co.jp":{name:"ANA",code:"NH"},"jal.com":{name:"Japan Airlines",code:"JL"},"thaiairways.com":{name:"Thai Airways",code:"TG"},"koreanair.com":{name:"Korean Air",code:"KE"},"evaair.com":{name:"EVA Air",code:"BR"},"virginatlantic.com":{name:"Virgin Atlantic",code:"VS"},"swiss.com":{name:"Swiss",code:"LX"},"austrian.com":{name:"Austrian",code:"OS"},"finnair.com":{name:"Finnair",code:"AY"},"sas.se":{name:"SAS",code:"SK"},"ryanair.com":{name:"Ryanair",code:"FR"},"easyjet.com":{name:"easyJet",code:"U2"},"wizzair.com":{name:"Wizz Air",code:"W6"},"spirit.com":{name:"Spirit Airlines",code:"NK"},"flyfrontier.com":{name:"Frontier Airlines",code:"F9"},"norwegian.com":{name:"Norwegian",code:"DY"},"expedia.com":{name:"",code:""},"booking.com":{name:"",code:""},"kayak.com":{name:"",code:""}};let k=!1,C="",E="";for(const[W,H]of Object.entries(S)){const e=W.replace(".","\\.");if(new RegExp("[.@]".concat(e),"i").test(s)||s.toLowerCase().includes(W)){k=!0,C=H.name,E=H.code;break}}const T=/\b(e-?ticket|itinerary|boarding\s*pass|flight\s*confirm|booking\s*confirm|trip\s*confirm|check-?in|your\s*flight|your\s*trip|reservation|confirmation)\b/i.test(a+" "+w);if(!k&&!T)return null;const A=new Set(["JFK","LGA","EWR","LAX","SFO","ORD","ATL","DFW","DEN","SEA","PHX","MIA","FLL","MCO","BOS","IAD","DCA","PHL","MSP","DTW","CLT","LAS","IAH","HOU","AUS","SLC","TPA","HNL","YYZ","YVR","YUL","MEX","CUN","LHR","LGW","CDG","ORY","FRA","MUC","BER","AMS","BRU","ZRH","VIE","PRG","WAW","FCO","MXP","BCN","MAD","LIS","ATH","IST","DUB","CPH","OSL","ARN","HEL","DXB","AUH","DOH","TLV","CAI","SIN","KUL","BKK","HKG","TPE","NRT","HND","ICN","PEK","PVG","DEL","BOM","SYD","MEL","AKL","GRU","GIG","EZE","SCL","LIM","BOG","JNB","CPT","NBO","CAI","CMN","RAK"]),_=e=>(e=>Mg.some(t=>t.code===e))(e)||A.has(e),I=[/(?:flight|flying|from|depart|route)\s+(?:from\s+)?([A-Z]{3})\s+(?:to|\u2192|->|\u2013|-)\s+([A-Z]{3})/gi,/(?:departure|depart|origin)\s*[:\s]+([A-Z]{3})[\s\S]{0,150}?(?:arrival|arrive|destination)\s*[:\s]+([A-Z]{3})/gi,/\b([A-Z]{3})\s*(?:\u2192|->|=>|\u2794|\xbb)\s*([A-Z]{3})\b/g,/(?:flight|route|itinerary).{0,30}?\b([A-Z]{3})\s*[-\u2013]\s*([A-Z]{3})\b/gi,/\b[A-Z]{2}\d{1,4}\s+([A-Z]{3})\s*[-\u2013\/]\s*([A-Z]{3})\b/g,/\b\w+\s*\(([A-Z]{3})\)\s*(?:to|\u2192|->|\u2013|-)\s*\w+\s*\(([A-Z]{3})\)/gi,/\b[A-Za-z\s,]+\(([A-Z]{3})\)\s+to\s+[A-Za-z\s,]+\(([A-Z]{3})\)/gi,/\b([A-Z]{3})\b[^A-Z]{0,30}(?:Newark|New York|Los Angeles|Chicago|Dallas|Houston|Miami|Boston|Denver|Seattle|Phoenix|Atlanta|San Francisco|Washington|Philadelphia|Detroit|Minneapolis|Charlotte|Orlando|Tampa|Austin|San Diego|Portland|Las Vegas|Baltimore|Fort Lauderdale|Salt Lake|Honolulu|Fort Worth|Cleveland|St\.? Louis|Pittsburgh|Indianapolis|Kansas City|Columbus|Cincinnati|Milwaukee|Nashville|Raleigh|San Antonio|Sacramento)[^A-Z]{0,200}?\b([A-Z]{3})\b/gi];let O="",R="";for(const W of I){W.lastIndex=0;const e=[...w.matchAll(W)];for(const t of e){var N,P;const e=null===(N=t[1])||void 0===N?void 0:N.toUpperCase(),n=null===(P=t[2])||void 0===P?void 0:P.toUpperCase();if(e&&n&&_(e)&&_(n)&&e!==n){O=e,R=n;break}}if(O&&R)break}const L=(e=>{const t=[],n=/((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)[a-z]*,?\s*\d{1,2}[A-Z]{3}\d{2,4})[^<>]{0,500}?([A-Z]{2}\d{2,4})[^<>]{0,300}?\(([A-Z]{3})\)[^<>]{0,200}?\(([A-Z]{3})\)/gi;let r;for(;null!==(r=n.exec(e));){const e=r[1],n=r[2],i=r[3].toUpperCase(),o=r[4].toUpperCase();_(i)&&_(o)&&i!==o&&t.push({date:e,flightNumber:n,origin:i,destination:o})}if(0===t.length){const n=[],r=/\(([A-Z]{3})\)/g;let i;for(;null!==(i=r.exec(e));){const e=i[1];_(e)&&n.push(e)}for(let e=0;e<n.length-1;e++){const r=n[e],i=n[e+1];r===i||t.some(e=>e.origin===r&&e.destination===i)||t.push({date:"",flightNumber:"",origin:r,destination:i})}}return t})(w);if(L.length>0){console.log("Found ".concat(L.length," flight segment(s) in multi-segment itinerary"));return L.map((t,n)=>{let r="";const i=t.date.match(/(\d{1,2})([A-Z]{3})(\d{2,4})/i);if(i){const e=i[1].padStart(2,"0"),t=i[2].toLowerCase(),n=2===i[3].length?"20"+i[3]:i[3];r="".concat(n,"-").concat(M[t]||"01","-").concat(e)}return{id:"".concat(e.id,"-seg").concat(n),origin:t.origin,destination:t.destination,date:r||D||new Date(l).toISOString().split("T")[0],flightNumber:t.flightNumber,airline:C,aircraftType:"Unknown",serviceClass:"Economy",confirmationNumber:U,snippet:"".concat(t.origin," \u2192 ").concat(t.destination),source:"multi-segment"}})}if(!O||!R){const e=(e=>{const t=[...e.matchAll(/([A-Z][A-Za-z\s,]+?)(?:<BR\s*\/?>|\n)\s*\(([A-Z]{3})\)/gi)],n=[];for(const r of t){const e=r[2].toUpperCase();_(e)&&!n.includes(e)&&n.push(e)}return n})(c||w);e.length>=2&&(O=e[0],R=e[e.length-1],console.log("Found codes via United-style HTML: ".concat(O," \u2192 ").concat(R)))}if(!O||!R){const e=(e=>{const t=[...e.matchAll(/\b([A-Z]{3})\b[\s\n]{0,20}(Newark|New York|JFK|LaGuardia|Los Angeles|LAX|Chicago|O'Hare|Midway|Dallas|Fort Worth|DFW|Houston|Hobby|Bush|Miami|Boston|Logan|Denver|Seattle|Tacoma|Phoenix|Atlanta|Hartsfield|San Francisco|SFO|Washington|Dulles|Reagan|National|Philadelphia|Detroit|Minneapolis|St\.? Paul|Charlotte|Douglas|Orlando|Tampa|Austin|San Diego|Portland|Las Vegas|McCarran|Baltimore|BWI|Fort Lauderdale|Hollywood|Salt Lake|Honolulu|Cleveland|Hopkins|St\.? Louis|Lambert|Pittsburgh|Indianapolis|Kansas City|Columbus|Cincinnati|Milwaukee|Nashville|Raleigh|Durham|San Antonio|Sacramento|Anchorage|Toronto|Pearson|Vancouver|Montreal|Trudeau|Mexico City|Cancun|London|Heathrow|Gatwick|Paris|CDG|Orly|Frankfurt|Munich|Berlin|Amsterdam|Schiphol|Brussels|Zurich|Geneva|Vienna|Prague|Warsaw|Budapest|Rome|Fiumicino|Milan|Malpensa|Barcelona|Madrid|Barajas|Lisbon|Athens|Istanbul|Dubai|Doha|Singapore|Changi|Kuala Lumpur|Bangkok|Hong Kong|Tokyo|Narita|Haneda|Seoul|Incheon|Beijing|Shanghai|Pudong|Sydney|Melbourne|Auckland|Hanoi|Buenos Aires|Sao Paulo|Guarulhos)/gi)],n=[];for(const r of t){const e=r[1].toUpperCase();_(e)&&!n.includes(e)&&n.push(e)}return n})(w);e.length>=2&&(O=e[0],R=e[1],console.log("Found codes via city context: ".concat(O," \u2192 ").concat(R)))}const j=new Set(["THE","AND","FOR","ARE","BUT","NOT","YOU","ALL","CAN","HAS","WAS","ONE","OUR","OUT","DAY","GET","HIM","HIS","HOW","ITS","MAY","NEW","NOW","OLD","SEE","TWO","WHO","WAY","ANY","FEW","GOT","HER","LET","PUT","SAY","SHE","TOO","USE","AGO","BIG","END","FAR","MAN","OWN","RUN","SET","TOP","TRY","WHY","YES","YET","ADD","AIR","BAD","BAG","BED","BOX","BOY","BUS","BUY","CAR","CUT","DID","DOG","EAT","EYE","FUN","GAS","HAD","HAT","HIT","HOT","ICE","JOB","KEY","KID","LAW","LAY","LED","LOT","LOW","MAP","MEN","MET","MIX","OIL","PAY","PER","PIE","POP","RAN","RAW","RED","SIT","SIX","SKY","SON","SUM","TAX","TEA","TEN","TIP","VAN","WAR","WET","WIN","WON","YEA","FRI","SAT","SUN","MON","TUE","WED","THU","JAN","FEB","MAR","APR","JUN","JUL","AUG","SEP","OCT","NOV","DEC","USD","EUR","GBP","CAD","AUD","JPY","CNY","INR","KRW","MXN","BRL","CHF","SEK","NOK","DKK","NZD","SGD","HKD","TWD","THB","MYR","PHP","IDR","VND","PLN","CZK","HUF","RUB","ZAR","AED","SAR","ILS","EGP","QAR","KWD","BHD","OMR","JOD","LBS","OZS","KGS","GMS","MLS","QTS","PTS","GLS","PDF","APP","WWW","COM","ORG","NET","GOV","EDU","MIL","BIZ","HTML","CSS","XML","API","URL","SSL","VPN","DNS","FTP","SQL","PHP","JSP","ASP","DOC","XLS","PPT","ZIP","RAR","TAR","GIF","PNG","JPG","SVG","BMP","TXT","CSV","LOG","BAK","TMP","EXE","DLL","SYS","BAT","CMD","REG","INI","CFG","DAT","BIN","ISO","IMG","DMG","APK","IPA","AAB","EST","PST","CST","MST","GMT","UTC","EDT","PDT","CDT","MDT","BST","CET","EET","JST","KST","IST","INC","LLC","LTD","PLC","LLP","GBH","CEO","CFO","COO","CTO","CIO","CMO","EVP","SVP","AVP","MGR","DIR","REP","REF","FAQ","TBD","TBA","ETA","ETD","ROI","KPI","SLA","NDA","MOU","LOI","RFP","RFQ","POC","MVP","UAT","FWD","BCC","EOM","EOD","EOW","EOY","YTD","MTD","WTD","QTD","MOM","YOY","WOW","POV","IMO","FYI","BTW","TBH","IDK","OMG","LOL","THX","PLS","MSG","VIP","TSA","CBP","ICE","DHS","DOT","FAA","CAA","PNR","TST","SSR","OSI","RES","CNF","CNL","CHG","ADV","ACK","REQ","TKT","EMD","PTA","ITN","NON","OFF","PRO","VIA","MAX","MIN","AVG","TOT","SUB","DEL","UPD","FIX","BUG","SRC","DST","OBJ","ARR","DEP","RET","ALT","OPT"]);if(!O||!R){const e=/(?:flight|depart|arrive|from|to|origin|destination|airport).{0,40}?\b([A-Z]{3})\b/gi,t=[...w.matchAll(e)],n=[];for(const r of t){const e=r[1].toUpperCase();!_(e)||j.has(e)||n.includes(e)||n.push(e)}n.length>=2&&(O=n[0],R=n[1])}if((!O||!R)&&k){const e=/\b([A-Z]{3})\b/g,t=[...w.matchAll(e)],n=[];for(const r of t){const e=r[1].toUpperCase();!_(e)||j.has(e)||n.includes(e)||n.push(e)}n.length>=2&&(O=n[0],R=n[1],console.log("Found codes from airline email (last resort): ".concat(O," \u2192 ").concat(R)))}if(!O||!R)return null;let D="";const M={jan:"01",feb:"02",mar:"03",apr:"04",may:"05",jun:"06",jul:"07",aug:"08",sep:"09",oct:"10",nov:"11",dec:"12",january:"01",february:"02",march:"03",april:"04",june:"06",july:"07",august:"08",september:"09",october:"10",november:"11",december:"12"},F=[{regex:/\b(\d{4})-(\d{2})-(\d{2})\b/,parse:e=>e[0]},{regex:/(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday),?\s+(January|February|March|April|May|June|July|August|September|October|November|December)\s+(\d{1,2}),?\s+(\d{4})/i,parse:e=>"".concat(e[3],"-").concat(M[e[1].toLowerCase()],"-").concat(e[2].padStart(2,"0"))},{regex:/(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)[a-z]*,?\s*(\d{1,2})([A-Z]{3})(\d{2})\b/i,parse:e=>{const t=e[1].padStart(2,"0"),n=e[2].toLowerCase(),r=parseInt(e[3])>50?"19"+e[3]:"20"+e[3];return"".concat(r,"-").concat(M[n]||"01","-").concat(t)}},{regex:/\b(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]*\s+(\d{1,2}),?\s+(\d{4})\b/i,parse:e=>"".concat(e[3],"-").concat(M[e[1].toLowerCase().substring(0,3)],"-").concat(e[2].padStart(2,"0"))},{regex:/\b(\d{1,2})\s+(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]*\s+(\d{4})\b/i,parse:e=>"".concat(e[3],"-").concat(M[e[2].toLowerCase().substring(0,3)],"-").concat(e[1].padStart(2,"0"))},{regex:/\b(\d{1,2})([A-Z]{3})(\d{4})\b/i,parse:e=>"".concat(e[3],"-").concat(M[e[2].toLowerCase()]||"01","-").concat(e[1].padStart(2,"0"))},{regex:/\b(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})\b/,parse:e=>"".concat(e[3],"-").concat(e[1].padStart(2,"0"),"-").concat(e[2].padStart(2,"0"))}];for(const{regex:W,parse:H}of F){const e=w.match(W);if(e)try{D=H(e);const t=new Date(D);if(t.getFullYear()>=2020&&t.getFullYear()<=2030)break;D=""}catch(sm){D=""}}if(!D)try{D=new Date(l).toISOString().split("T")[0]}catch(sm){D=(new Date).toISOString().split("T")[0]}if(!C){const e=[[/\bunited\s*(airlines?)?\b/i,"United Airlines"],[/\bdelta\s*(air\s*lines?)?\b/i,"Delta Air Lines"],[/\bamerican\s*airlines?\b/i,"American Airlines"],[/\bsouthwest\b/i,"Southwest Airlines"],[/\bjetblue\b/i,"JetBlue"],[/\bbritish\s*airways?\b/i,"British Airways"],[/\blufthansa\b/i,"Lufthansa"],[/\bair\s*france\b/i,"Air France"],[/\bklm\b/i,"KLM"],[/\bemirates\b/i,"Emirates"],[/\bqatar\b/i,"Qatar Airways"],[/\bsingapore\s*air/i,"Singapore Airlines"],[/\bturkish\b/i,"Turkish Airlines"],[/\biberia\b/i,"Iberia"],[/\btap\s*(portugal)?\b/i,"TAP"],[/\bswiss\b/i,"Swiss"],[/\bryanair\b/i,"Ryanair"],[/\beasyjet\b/i,"easyJet"],[/\blatam\b/i,"LATAM"],[/\bgol\b/i,"GOL"],[/\bazul\b/i,"Azul"],[/\bavianca\b/i,"Avianca"]];for(const[t,n]of e)if(t.test(w)){C=n;break}}let z="";if(E){const e=w.match(new RegExp("\\b".concat(E,"\\s?(\\d{1,4})\\b"),"i"));e&&(z=E+e[1])}if(!z){const e=w.match(/\b([A-Z]{2})\s?(\d{3,4})\b/);e&&(z=e[1]+e[2])}let U="";const B=w.match(/(?:confirm|booking|pnr|locator|reference)\s*(?:number|code|#)?\s*[:\s]*([A-Z0-9]{5,8})\b/i);return B&&(U=B[1].toUpperCase()),console.log("Regex fallback found: ".concat(O," \u2192 ").concat(R," (").concat(C||"unknown",")")),[{id:e.id,origin:O,destination:R,date:D,flightNumber:z,airline:C,aircraftType:"Unknown",serviceClass:"Economy",confirmationNumber:U,snippet:(null===(i=e.snippet)||void 0===i?void 0:i.substring(0,80))+"...",source:"regex-fallback"}]},Qe=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.isRoundTrip&&t){me(!0),ve("Adding outbound flight...");try{const t=e.outboundFlight,n=Date.now();await Je(ht(ht({},t),{},{id:n}),!0,!0),await new Promise(e=>setTimeout(e,50)),ve("Adding return flight...");const r=e.returnFlight,i=Date.now();await Je(ht(ht({},r),{},{id:i}),!0,!0),_(t=>t.filter(t=>t.id!==e.id)),me(!1),ve("")}catch(sm){console.error("Error adding round trip:",sm),me(!1),ve(""),alert("Error adding round trip. Check console for details.")}}else await Je(e,t,!1)},Je=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];me(!0),ve("Verifying Airports...");try{const n=await Ye(e.origin),i=await Ye(e.destination);if(!n||!i||isNaN(n.lat)||isNaN(n.lon)||isNaN(i.lat)||isNaN(i.lon))return alert("Could not verify airports: ".concat(e.origin," or ").concat(e.destination,". Please check the codes.")),me(!1),void ve("");let o=[],a=0,s=[];if(e.hasLayover&&e.viaAirports&&e.viaAirports.some(e=>e.trim())){const t=e.viaAirports.filter(e=>e.trim()),r=[];for(let e=0;e<t.length;e++){ve("Verifying connection ".concat(e+1,": ").concat(t[e],"..."));const n=await Ye(t[e]);if(!n||isNaN(n.lat)||isNaN(n.lon))return alert("Could not verify connection airport: ".concat(t[e],". Please check the code.")),me(!1),void ve("");r.push(n)}const l=[n,...r,i],c=e.legAirlines||[],u=e.legAircraftTypes||[],d=e.legServiceClasses||[];for(let n=0;n<l.length-1;n++){const t=l[n],r=l[n+1],i=Jg(t.lat,t.lon,r.lat,r.lon);a+=i;let h=[];e.checkLandmarks&&(ve("Analyzing leg ".concat(n+1,": ").concat(t.code," \u2192 ").concat(r.code,"...")),h=await qe(t,r),s=[...new Set([...s,...h])]),o.push({origin:t.code,destination:r.code,originCity:t.city,destCity:r.city,originCountry:t.country||"",destCountry:r.country||"",originContinent:zg(t.country),destContinent:zg(r.country),airline:c[n]||e.airline||"",aircraftType:u[n]||e.aircraftType||"",serviceClass:d[n]||e.serviceClass||"Economy",distance:i,featuresCrossed:h})}}else{let t,r;if(fe&&fe.origin===e.origin&&fe.destination===e.destination&&!fe.legs)t=fe.distance,r=fe.featuresCrossed||[],ve("Route unchanged, keeping landmarks...");else if(t=Jg(n.lat,n.lon,i.lat,i.lon),e.checkLandmarks)r=await qe(n,i);else{const t=b.filter(t=>t.origin===e.origin&&t.destination===e.destination);t.length>0&&t[0].featuresCrossed?(r=t[0].featuresCrossed,ve("Copied landmarks from existing route...")):r=[]}a=t,s=r,o.push({origin:e.origin,destination:e.destination,originCity:n.city,destCity:i.city,originCountry:n.country||"",destCountry:i.country||"",originContinent:zg(n.country),destContinent:zg(i.country),airline:e.airline||"",aircraftType:e.aircraftType||"",serviceClass:e.serviceClass||"Economy",distance:t,featuresCrossed:r})}const l=o.reduce((e,t)=>e+Xe(t.aircraftType),0),{checkLandmarks:c,hasLayover:u,viaAirports:d,legAirlines:h,legAircraftTypes:f,legServiceClasses:p}=e,g=ht(ht({},ut(e,_g)),{},{id:e.id||Date.now(),date:e.date,returnDate:e.returnDate||"",isRoundTrip:e.isRoundTrip||!1,distance:a,originCity:n.city,destCity:i.city,originCountry:n.country||"",destCountry:i.country||"",originContinent:zg(n.country),destContinent:zg(i.country),featuresCrossed:s,passengerCount:l,legs:o,legCount:o.length,schemaVersion:3});g.isRoundTrip&&console.log("Saving round trip flight:",g.origin,"\u21c4",g.destination,"dates:",g.date,"-",g.returnDate);const m=JSON.parse(localStorage.getItem("flights-data")||"[]"),y=t?[g,...m]:fe?m.map(e=>e.id===fe.id?g:e):[g,...m];console.log("Saving flight record to localStorage:",{id:g.id,route:"".concat(g.origin," \u2192 ").concat(g.destination),isRoundTrip:g.isRoundTrip,returnDate:g.returnDate,date:g.date}),x(y),localStorage.setItem("flights-data",JSON.stringify(y)),t&&_(t=>t.filter(t=>t.id!==e.id)),r||(S(!1),pe(null),Ie({origin:"",destination:"",date:"",returnDate:"",aircraftType:"",airline:"",serviceClass:"Economy",checkLandmarks:!1,hasLayover:!1,isRoundTrip:!1,viaAirports:[""],legAirlines:["",""],legAircraftTypes:["",""],legServiceClasses:["Economy","Economy"],paymentType:"money",paymentAmount:""}),Re([]),Pe(null))}catch(sm){if(console.error(sm),n)throw sm;alert("Error saving flight. Check console for details.")}finally{n||(me(!1),ve(""))}},Ye=async e=>{const t=e.trim().toUpperCase(),n=Mg.find(e=>e.code===t);if(n)return n;try{const e=await fetch("https://raw.githubusercontent.com/jpatokal/openflights/master/data/airports.dat"),n=(await e.text()).split("\n");for(let r of n)if(r.includes('"'.concat(t,'"'))){const e=r.split(","),n=parseFloat(e[e.length-8]),i=parseFloat(e[e.length-7]),o=e[3]?e[3].replace(/"/g,""):"";if(!isNaN(n)&&!isNaN(i))return{code:t,city:e[2].replace(/"/g,""),country:o,lat:n,lon:i}}}catch(sm){console.error(sm)}return null},Xe=e=>{const t=(e||"").toUpperCase();let n=150;return t.includes("380")?n=500:t.includes("747")?n=416:t.includes("777")||t.includes("350")?n=350:t.includes("787")||t.includes("330")?n=250:t.includes("767")?n=220:(t.includes("CRJ")||t.includes("ERJ")||t.includes("EMB"))&&(n=70),Math.round(.82*n)},$e=(e,t)=>{const n={Economy:1,"Premium Economy":1.5,Business:2.5,First:4}[t]||1;return Math.round(.14*e*n)},Ze=b.reduce((e,t)=>e+(t.legCount||1)*(t.isRoundTrip?2:1),0),et=b.reduce((e,t)=>{const n=t.isRoundTrip?2:1;return e+(t.distance||0)*n},0),tt=b.reduce((e,t)=>{const n=t.isRoundTrip?2:1;t.legs&&t.legs.length>0&&t.legs.length;if(t.passengerCount&&t.passengerCount>0)return e+t.passengerCount*n;if(t.legs&&t.legs.length>0){return e+t.legs.reduce((e,t)=>e+Xe(t.aircraftType),0)*n}return e+Xe(t.aircraftType)*n},0),nt=[...new Set(b.flatMap(e=>{const t=[];return e.originCountry&&t.push(e.originCountry),e.destCountry&&t.push(e.destCountry),e.legs&&e.legs.forEach(e=>{e.originCountry&&t.push(e.originCountry),e.destCountry&&t.push(e.destCountry)}),t}).filter(Boolean))],rt=[...new Set(b.flatMap(e=>{const t=[];return e.originContinent&&t.push(e.originContinent),e.destContinent&&t.push(e.destContinent),e.originCountry&&t.push(zg(e.originCountry)),e.destCountry&&t.push(zg(e.destCountry)),t}).filter(e=>e&&"Unknown"!==e))],it=[...new Set(b.flatMap(e=>{const t=[e.origin,e.destination];return e.legs&&e.legs.forEach(e=>{t.push(e.origin,e.destination)}),t}).filter(Boolean))];(0,e.useEffect)(()=>{localStorage.setItem("statsExpanded",JSON.stringify(G))},[G]),(0,e.useEffect)(()=>{localStorage.setItem("chartsExpanded",JSON.stringify(J))},[J]),(0,e.useEffect)(()=>{localStorage.setItem("visibleStats",JSON.stringify(X))},[X]),(0,e.useEffect)(()=>{localStorage.setItem("flightSortMode",re)},[re]);const ot=b.reduce((e,t)=>t.legs&&t.legs.length>1?e+t.legs.reduce((e,t)=>e+$e(t.distance||0,t.serviceClass||"Economy"),0):e+$e(t.distance||0,t.serviceClass||"Economy"),0),at=(ot/1e3).toFixed(2),st=b.reduce((e,t)=>{const n=t.passengerCount||Xe(t.aircraftType);return e+.14*(t.distance||0)*n},0),lt=(st/1e3).toFixed(1),ct={};b.forEach(e=>{e.featuresCrossed&&e.featuresCrossed.forEach(e=>{ct[e]=(ct[e]||0)+1})});const dt=Object.entries(ct).sort((e,t)=>t[1]-e[1]).slice(0,5),ft={};b.forEach(e=>{e.legs&&e.legs.length>1?e.legs.forEach(e=>{e.airline&&(ft[e.airline]=(ft[e.airline]||0)+1)}):e.airline&&(ft[e.airline]=(ft[e.airline]||0)+1)});const pt=Object.entries(ft).sort((e,t)=>t[1]-e[1]).slice(0,5),gt={};b.forEach(e=>{e.legs&&e.legs.length>1?e.legs.forEach(e=>{e.aircraftType&&"Unknown"!==e.aircraftType&&(gt[e.aircraftType]=(gt[e.aircraftType]||0)+1)}):e.aircraftType&&"Unknown"!==e.aircraftType&&(gt[e.aircraftType]=(gt[e.aircraftType]||0)+1)});const Gt=Object.entries(gt).sort((e,t)=>t[1]-e[1]),Qt=Gt.slice(0,5),Jt={};let Yt=0;b.forEach(e=>{if(e.legs&&e.legs.length>1)e.legs.forEach(e=>{if(e.airline){const t=Kg(e.airline);Jt[t]=(Jt[t]||0)+1,Yt++}});else if(e.airline){const t=Kg(e.airline);Jt[t]=(Jt[t]||0)+1,Yt++}});const Xt=Object.entries(Jt).sort((e,t)=>t[1]-e[1]),$t=Xt.length>0?Xt[0][0]:null,Zt={};b.forEach(e=>{e.legs&&e.legs.length>1?e.legs.forEach(e=>{const t=e.serviceClass||"Economy";Zt[t]=(Zt[t]||0)+1}):e.serviceClass&&(Zt[e.serviceClass]=(Zt[e.serviceClass]||0)+1)});const en=["First","Business","Premium Economy","Economy"],tn=Object.entries(Zt).sort((e,t)=>en.indexOf(e[0])-en.indexOf(t[0])),nn={};b.forEach(e=>{if(e.legs&&e.legs.length>1)e.legs.forEach(e=>{const t=e.serviceClass||"Economy",n=$e(e.distance||0,t);nn[t]=(nn[t]||0)+n});else{const t=e.serviceClass||"Economy",n=$e(e.distance||0,t);nn[t]=(nn[t]||0)+n}});const rn=Object.entries(nn).sort((e,t)=>t[1]-e[1]),on=b.reduce((e,t)=>{if(t.paymentAmount&&!isNaN(parseFloat(t.paymentAmount))){const n=parseFloat(t.paymentAmount);"miles"===t.paymentType?(e.totalMilesSpent+=n,e.milesFlightCount+=1):(e.totalMoneySpent+=n,e.moneyFlightCount+=1)}return e},{totalMilesSpent:0,totalMoneySpent:0,milesFlightCount:0,moneyFlightCount:0}),an=b.reduce((e,t)=>{const n="".concat(t.origin,"-").concat(t.destination);return e[n]||(e[n]={origin:t.origin,destination:t.destination,originCity:t.originCity,destCity:t.destCity,originCountry:t.originCountry,destCountry:t.destCountry,originContinent:t.originContinent||zg(t.originCountry),destContinent:t.destContinent||zg(t.destCountry),featuresCrossed:t.featuresCrossed,distance:t.distance,flights:[]}),e[n].flights.push(t),e},{});Object.values(an).forEach(e=>{e.flights.sort((e,t)=>new Date(t.date)-new Date(e.date))});const sn=Object.values(an).sort((e,t)=>{const n=new Date(e.flights[0].date);return new Date(t.flights[0].date)-n}),ln="country"===re?(()=>{const e={};return Object.values(an).forEach(t=>{[...new Set([t.originCountry,t.destCountry].filter(Boolean))].forEach(n=>{e[n]||(e[n]={country:n,groups:[]}),e[n].groups.find(e=>e.origin===t.origin&&e.destination===t.destination)||e[n].groups.push(t)})}),Object.values(e).sort((e,t)=>e.country.localeCompare(t.country))})():[],cn="continent"===re?(()=>{const e={};Object.values(an).forEach(t=>{const n=[...new Set([t.originContinent,t.destContinent].filter(e=>e&&"Unknown"!==e))];n.forEach(n=>{e[n]||(e[n]={continent:n,groups:[]}),e[n].groups.find(e=>e.origin===t.origin&&e.destination===t.destination)||e[n].groups.push(t)})});const t=["North America","South America","Europe","Africa","Middle East","Asia","Oceania"];return Object.values(e).sort((e,n)=>{const r=t.indexOf(e.continent),i=t.indexOf(n.continent);return(-1===r?999:r)-(-1===i?999:i)})})():[],un=e=>{pe(null);if(e.legs&&e.legs.length>1){const t=e.legs.slice(1,-1).map(e=>e.origin),n=e.legs.map(e=>e.airline||""),r=e.legs.map(e=>e.aircraftType||""),i=e.legs.map(e=>e.serviceClass||"Economy");Ie({origin:e.origin,destination:e.destination,airline:"",aircraftType:"",serviceClass:"Economy",date:"",returnDate:"",checkLandmarks:!1,hasLayover:!0,isRoundTrip:!1,viaAirports:t.length>0?t:[""],legAirlines:n,legAircraftTypes:r,legServiceClasses:i,paymentType:"money",paymentAmount:""})}else{const t=e.legs&&e.legs[0];Ie({origin:e.origin,destination:e.destination,airline:e.airline||(t?t.airline:"")||"",aircraftType:e.aircraftType||(t?t.aircraftType:"")||"",serviceClass:e.serviceClass||(t?t.serviceClass:"")||"Economy",date:"",returnDate:"",checkLandmarks:!1,hasLayover:!1,isRoundTrip:!1,viaAirports:[""],legAirlines:["",""],legAircraftTypes:["",""],legServiceClasses:["Economy","Economy"],paymentType:"money",paymentAmount:""})}S(!0)},dn=e=>{pe(null);if(e.legs&&e.legs.length>1){const t=[...e.legs].reverse(),n=t.slice(1,-1).map(e=>e.destination),r=t.map(e=>e.airline||""),i=t.map(e=>e.aircraftType||""),o=t.map(e=>e.serviceClass||"Economy");Ie({origin:e.destination,destination:e.origin,airline:"",aircraftType:"",serviceClass:"Economy",date:"",returnDate:"",checkLandmarks:!1,hasLayover:!0,isRoundTrip:!1,viaAirports:n.length>0?n:[""],legAirlines:r,legAircraftTypes:i,legServiceClasses:o,paymentType:"money",paymentAmount:""})}else{const t=e.legs&&e.legs[0];Ie({origin:e.destination,destination:e.origin,airline:e.airline||(t?t.airline:"")||"",aircraftType:e.aircraftType||(t?t.aircraftType:"")||"",serviceClass:e.serviceClass||(t?t.serviceClass:"")||"Economy",date:"",returnDate:"",checkLandmarks:!1,hasLayover:!1,isRoundTrip:!1,viaAirports:[""],legAirlines:["",""],legAircraftTypes:["",""],legServiceClasses:["Economy","Economy"],paymentType:"money",paymentAmount:""})}S(!0)},hn=e=>{pe(e);if(e.legs&&e.legs.length>1){const t=[];for(let o=1;o<e.legs.length;o++)t.push(e.legs[o].origin);const n=e.legs.map(e=>e.airline||""),r=e.legs.map(e=>e.aircraftType||""),i=e.legs.map(e=>e.serviceClass||"Economy");Ie({origin:e.origin,destination:e.destination,airline:"",aircraftType:"",serviceClass:"Economy",date:e.date||"",returnDate:e.returnDate||"",checkLandmarks:!1,hasLayover:!0,isRoundTrip:e.isRoundTrip||!1,viaAirports:t.length>0?t:[""],legAirlines:n,legAircraftTypes:r,legServiceClasses:i,paymentType:e.paymentType||"money",paymentAmount:e.paymentAmount||""})}else{const t=e.legs&&e.legs[0];Ie({origin:e.origin,destination:e.destination,airline:e.airline||(t?t.airline:"")||"",aircraftType:e.aircraftType||(t?t.aircraftType:"")||"",serviceClass:e.serviceClass||(t?t.serviceClass:"")||"Economy",date:e.date||"",returnDate:e.returnDate||"",checkLandmarks:!1,hasLayover:!1,isRoundTrip:e.isRoundTrip||!1,viaAirports:[""],legAirlines:["",""],legAircraftTypes:["",""],legServiceClasses:["Economy","Economy"],paymentType:e.paymentType||"money",paymentAmount:e.paymentAmount||""})}S(!0)},fn=e=>{const t=b.filter(t=>t.id!==e);x(t),localStorage.setItem("flights-data",JSON.stringify(t))},pn=()=>{localStorage.setItem("landingDismissed","true"),ae(!1),r||Ue("signup")};return!oe||r||o?(0,Ag.jsxs)("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"40px 20px",fontFamily:"sans-serif"},children:[(0,Ag.jsxs)("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px",flexWrap:"wrap",gap:"15px"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,Ag.jsx)("h1",{style:{margin:0},children:"FlightLog"}),(0,Ag.jsx)("span",{style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",color:"#fff",fontSize:"10px",fontWeight:"700",padding:"3px 8px",borderRadius:"6px",textTransform:"uppercase",letterSpacing:"0.5px",boxShadow:"0 2px 4px rgba(99, 102, 241, 0.3)"},children:"Beta"})]}),(0,Ag.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"},children:[o?(0,Ag.jsx)(kt,{className:"animate-spin",size:20,style:{color:"#888"}}):r?(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[W?(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 8px",background:"#f0fdf4",borderRadius:"20px"},children:[(0,Ag.jsx)("input",{type:"text",value:q,onChange:e=>K(e.target.value),placeholder:"Enter nickname",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&Me(),"Escape"===e.key&&(H(!1),K(B))},style:{border:"1px solid #d1d5db",borderRadius:"6px",padding:"4px 8px",fontSize:"13px",width:"120px",outline:"none"}}),(0,Ag.jsx)("button",{onClick:Me,style:{background:"#10b981",color:"#fff",border:"none",borderRadius:"6px",padding:"4px 8px",cursor:"pointer",fontSize:"12px"},children:"Save"}),(0,Ag.jsx)("button",{onClick:()=>{H(!1),K(B)},style:{background:"#f3f4f6",color:"#666",border:"1px solid #d1d5db",borderRadius:"6px",padding:"4px 8px",cursor:"pointer",fontSize:"12px"},children:"Cancel"})]}):(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",background:"#f0fdf4",borderRadius:"20px",fontSize:"13px",color:"#166534",cursor:"pointer"},onClick:()=>{K(B||""),H(!0)},title:"Click to edit nickname",children:[(0,Ag.jsx)(Ct,{size:16}),(0,Ag.jsx)("span",{style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:B||(null!==r&&void 0!==r&&r.displayName?r.displayName:null!==r&&void 0!==r&&r.email?r.email.split("@")[0]:"User")}),(0,Ag.jsx)(Et,{size:12,style:{opacity:.6}})]}),(0,Ag.jsxs)("button",{onClick:async()=>{try{await function(e){return vn(e).signOut()}(Og)}catch(e){console.error("Logout error:",e)}finally{try{localStorage.removeItem("landingDismissed")}catch(sm){}"function"===typeof ae&&ae(!0),"undefined"!==typeof window&&window.scrollTo&&window.scrollTo({top:0,behavior:"smooth"})}},style:{background:"transparent",border:"1px solid #ddd",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"#666"},children:[(0,Ag.jsx)(Tt,{size:18})," Sign Out"]})]}):(0,Ag.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,Ag.jsxs)("button",{onClick:()=>Ue("login"),style:{background:"transparent",border:"1px solid #ddd",padding:"8px 16px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"13px"},children:[(0,Ag.jsx)(At,{size:16})," Log In"]}),(0,Ag.jsxs)("button",{onClick:()=>Ue("signup"),style:{background:"#10b981",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",fontWeight:"600"},children:[(0,Ag.jsx)(Ct,{size:16})," Sign Up"]})]}),(0,Ag.jsxs)("button",{onClick:()=>{if(!de)return void alert("Google services are still loading. Please wait a moment and try again.");if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)&&!sessionStorage.getItem("gmailMobileWarningShown")){const e=window.confirm("Gmail sync may not work well on mobile browsers due to popup restrictions.\n\nFor best results, please use a desktop browser.\n\nWould you like to try anyway?");if(sessionStorage.setItem("gmailMobileWarningShown","true"),!e)return}T(!0),de.callback=async e=>{if(window._gmailAuthTimeout&&(clearTimeout(window._gmailAuthTimeout),window._gmailAuthTimeout=null),e.error)return T(!1),le(e=>ht(ht({},e),{},{show:!1})),console.error("Gmail auth error:",e.error),void alert("Auth failed. "+(e.error_description||""));const t=await new Promise(e=>{const t=document.createElement("div");t.style.cssText="position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:10000;";const n=document.createElement("div");n.style.cssText="background:#fff;padding:30px;border-radius:16px;box-shadow:0 10px 40px rgba(0,0,0,0.2);max-width:400px;width:90%;",n.innerHTML='\n            <h2 style="margin:0 0 20px 0;font-size:20px;font-weight:600;">Select Date Range</h2>\n            <div style="margin-bottom:15px;">\n              <label style="display:block;margin-bottom:5px;font-size:13px;font-weight:600;">From:</label>\n              <input type="date" id="dateFrom" value="'.concat(Ee,'" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;font-size:14px;"/>\n            </div>\n            <div style="margin-bottom:20px;">\n              <label style="display:block;margin-bottom:5px;font-size:13px;font-weight:600;">To:</label>\n              <input type="date" id="dateTo" value="').concat(Te,'" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;font-size:14px;"/>\n            </div>\n            <div style="display:flex;gap:10px;justify-content:flex-end;">\n              <button id="cancelBtn" style="padding:10px 20px;border:1px solid #ddd;background:#fff;border-radius:8px;cursor:pointer;font-weight:600;">Cancel</button>\n              <button id="searchBtn" style="padding:10px 20px;border:none;background:#4285F4;color:#fff;border-radius:8px;cursor:pointer;font-weight:600;">Search</button>\n            </div>\n          '),t.appendChild(n),document.body.appendChild(t),document.getElementById("cancelBtn").onclick=()=>{document.body.removeChild(t),e(null)},document.getElementById("searchBtn").onclick=()=>{const n=document.getElementById("dateFrom").value,r=document.getElementById("dateTo").value;n&&r?new Date(n)>new Date(r)?alert("Start date must be before end date."):(console.log("Date range selected - From:",n,"To:",r),document.body.removeChild(t),e({from:n,to:r})):alert("Please select both start and end dates.")}});if(t){console.log("User selected date range:",t),le({show:!0,phase:"searching",currentQuery:0,totalQueries:9,currentEmail:0,totalEmails:0,foundFlights:0,currentQueryText:"Initializing..."});try{const e=e=>e.replace(/-/g,"/"),n=e(t.from),r=e(t.to);console.log("Gmail date range - After:",n,"Before:",r);const i=["category:reservations after:".concat(n," before:").concat(r),'subject:(itinerary OR "flight confirmation" OR "booking confirmation" OR "e-ticket" OR eticket OR "boarding pass") after:'.concat(n," before:").concat(r),'subject:("check-in" OR "your trip" OR "your flight" OR "trip confirmation") after:'.concat(n," before:").concat(r),"from:(united.com OR delta.com OR aa.com OR southwest.com OR jetblue.com OR alaskaair.com OR email.aa.com OR email.united.com OR email.delta.com) after:".concat(n," before:").concat(r),"from:(britishairways.com OR lufthansa.com OR airfrance.com OR klm.com OR iberia.com OR vueling.com OR tap.pt OR swiss.com) after:".concat(n," before:").concat(r),"from:(emirates.com OR qatarairways.com OR singaporeair.com OR cathaypacific.com OR turkishairlines.com OR thaiairways.com) after:".concat(n," before:").concat(r),"from:(aircanada.com OR qantas.com OR ana.co.jp OR jal.com OR koreanair.com OR evaair.com) after:".concat(n," before:").concat(r),"from:(ryanair.com OR easyjet.com OR wizzair.com OR norwegian.com OR spirit.com OR flyfrontier.com) after:".concat(n," before:").concat(r),"from:(expedia.com OR booking.com OR kayak.com OR priceline.com OR orbitz.com OR travelocity.com OR tripadvisor.com) after:".concat(n," before:").concat(r)],o=["Gmail Reservations","Flight Confirmations","Check-in & Trip Emails","US Airlines","European Airlines","Middle East & Asian Airlines","Other Major Airlines","Low-cost Carriers","Travel Booking Sites"],a=new Set,s=[];for(let t=0;t<i.length;t++){const e=i[t];le(e=>ht(ht({},e),{},{phase:"searching",currentQuery:t+1,totalQueries:i.length,currentQueryText:o[t]}));try{console.log("Search ".concat(t+1,"/").concat(i.length,": ").concat(e.substring(0,60),"..."));const n=(await window.gapi.client.gmail.users.messages.list({userId:"me",q:e,maxResults:50})).result.messages||[];console.log("  \u2192 Found ".concat(n.length," emails"));for(const e of n)a.has(e.id)||(a.add(e.id),s.push(e))}catch(sm){console.log("  \u2192 Search failed:",sm.message)}}console.log("\nTotal unique emails to process: ".concat(s.length)),le(e=>ht(ht({},e),{},{phase:"processing",currentEmail:0,totalEmails:s.length,currentQueryText:"Analyzing emails..."}));const l=[],c=new Set;let u=0,d=0;const h=e=>{if(!e||e.length<2)return e;const t=[],n=new Set;for(let r=0;r<e.length;r++){if(n.has(r))continue;const i=e[r];let o=null,a=-1;for(let t=r+1;t<e.length;t++){if(n.has(t))continue;const r=e[t],s=i.confirmationNumber&&i.confirmationNumber===r.confirmationNumber,l=i.origin===r.destination&&i.destination===r.origin,c=!i.date||!r.date||new Date(r.date)>=new Date(i.date);if((s||l)&&l&&c){o=r,a=t;break}}o?(n.add(r),n.add(a),t.push(ht(ht({},i),{},{id:"".concat(i.id,"-rt"),isRoundTrip:!0,outboundFlight:i,returnFlight:o,snippet:"".concat(i.origin," \u21c4 ").concat(i.destination," (Round Trip)"),returnDate:o.date}))):t.push(i)}return t};for(let t=0;t<s.length;t++){const e=s[t];le(e=>ht(ht({},e),{},{currentEmail:t+1,foundFlights:l.length}));try{t%10===0&&console.log("Processing email ".concat(t+1,"/").concat(s.length,"..."));const n=await window.gapi.client.gmail.users.messages.get({userId:"me",id:e.id,format:"full"});let r=Ge(n.result);r&&Array.isArray(r)&&r.length>=2&&(r=h(r)),r&&Array.isArray(r)&&r.forEach(e=>{const t=e.isRoundTrip?"".concat(e.origin,"-").concat(e.destination,"-RT-").concat(e.date):"".concat(e.origin,"-").concat(e.destination,"-").concat(e.date);c.has(t)||(c.add(t),l.push(e),"json-ld"===e.source?u++:d++,e.isRoundTrip?console.log("\u2713 Found Round Trip: ".concat(e.origin," \u21c4 ").concat(e.destination," | ").concat(e.date," - ").concat(e.returnDate," | ").concat(e.airline||"Unknown"," | ").concat(e.source)):console.log("\u2713 Found: ".concat(e.origin," \u2192 ").concat(e.destination," | ").concat(e.date," | ").concat(e.airline||"Unknown"," | ").concat(e.source)))})}catch(sm){}}l.sort((e,t)=>new Date(t.date)-new Date(e.date)),console.log("\n=== RESULTS ==="),console.log("Total flights: ".concat(l.length," (").concat(u," from JSON-LD, ").concat(d," from regex)")),le(e=>ht(ht({},e),{},{show:!1})),_(l),C(!0)}catch(n){console.error("Gmail Import Error:",n),le(e=>ht(ht({},e),{},{show:!1})),alert("An error occurred while scanning emails.")}finally{T(!1)}}else T(!1)};try{const e=setTimeout(()=>{E&&(T(!1),console.log("Gmail auth timed out"))},6e4);window._gmailAuthTimeout=e,window.gapi&&window.gapi.client&&null===window.gapi.client.getToken()?de.requestAccessToken({prompt:"consent"}):window.gapi&&window.gapi.client?de.requestAccessToken({prompt:""}):(clearTimeout(e),T(!1),alert("Google API is still loading. Please wait a moment and try again."))}catch(e){console.error("Error requesting access token:",e),T(!1),alert("Failed to open Google sign-in. If you're on mobile, please try using a desktop browser, or check that popups are allowed.")}},disabled:!ce||E,title:"Import flights from your Gmail inbox",style:{background:"#4285F4",color:"#fff",border:"none",padding:"12px 20px",borderRadius:"8px",cursor:ce&&!E?"pointer":"not-allowed",fontWeight:"bold",display:"flex",gap:"8px",alignItems:"center",opacity:ce&&!E?1:.6},children:[E?(0,Ag.jsx)(kt,{className:"animate-spin",size:18}):(0,Ag.jsx)(_t,{size:18}),E?"Scanning...":"Sync Gmail"]}),(0,Ag.jsx)("button",{onClick:()=>{pe(null),Ie({origin:"",destination:"",date:"",returnDate:"",aircraftType:"",airline:"",serviceClass:"Economy",checkLandmarks:!1,hasLayover:!1,isRoundTrip:!1,viaAirports:[""],legAirlines:["",""],legAircraftTypes:["",""],legServiceClasses:["Economy","Economy"],paymentType:"money",paymentAmount:""}),Re([]),Pe(null),S(!0)},style:{background:"#000",color:"#fff",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"},children:"+ Manual Add"})]})]}),s&&(0,Ag.jsx)("div",{style:im,children:(0,Ag.jsxs)("div",{style:ht(ht({},om),{},{maxWidth:"400px"}),children:[(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,Ag.jsx)("h2",{style:{margin:0},children:"login"===c?"Welcome Back":"Create Account"}),(0,Ag.jsx)(bt,{style:{cursor:"pointer"},onClick:()=>l(!1)})]}),g&&(0,Ag.jsxs)("div",{style:{background:"#fef2f2",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"15px",fontSize:"13px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,Ag.jsx)(xt,{size:16}),g]}),(0,Ag.jsxs)("form",{onSubmit:"login"===c?ze:Fe,style:{display:"grid",gap:"15px"},children:[(0,Ag.jsx)("input",{type:"email",placeholder:"Email address",required:!0,value:d,onChange:e=>h(e.target.value),style:rm}),(0,Ag.jsxs)("div",{style:{position:"relative"},children:[(0,Ag.jsx)("input",{type:y?"text":"password",placeholder:"Password",required:!0,value:f,onChange:e=>p(e.target.value),style:ht(ht({},rm),{},{paddingRight:"45px"})}),(0,Ag.jsx)("button",{type:"button",onClick:()=>v(!y),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",color:"#888"},children:y?(0,Ag.jsx)(wt,{size:18}):(0,Ag.jsx)(St,{size:18})})]}),(0,Ag.jsx)("button",{type:"submit",style:{background:"login"===c?"#000":"#10b981",color:"#fff",padding:"12px",borderRadius:"8px",border:"none",fontWeight:"bold",cursor:"pointer"},children:"login"===c?"Log In":"Create Account"})]}),(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",margin:"20px 0",gap:"10px"},children:[(0,Ag.jsx)("div",{style:{flex:1,height:"1px",background:"#ddd"}}),(0,Ag.jsx)("span",{style:{color:"#888",fontSize:"12px"},children:"or"}),(0,Ag.jsx)("div",{style:{flex:1,height:"1px",background:"#ddd"}})]}),(0,Ag.jsxs)("button",{onClick:async()=>{m("");try{await async function(e,t,n){if(Or(e.app))return Promise.reject(ei(e,"operation-not-supported-in-this-environment"));const r=lo(e);ri(e,t,Oo);const i=ma(r,n);return new ka(r,"signInViaPopup",t,i).executeNotNull()}(Og,Ng),l(!1)}catch(e){"auth/popup-closed-by-user"!==e.code&&m("Google sign-in failed. Please try again.")}},style:{width:"100%",background:"#fff",border:"1px solid #ddd",padding:"12px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",fontSize:"14px"},children:[(0,Ag.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[(0,Ag.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,Ag.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,Ag.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,Ag.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),(0,Ag.jsx)("p",{style:{textAlign:"center",marginTop:"20px",fontSize:"13px",color:"#666"},children:"login"===c?(0,Ag.jsxs)(Ag.Fragment,{children:["Don't have an account? ",(0,Ag.jsx)("button",{onClick:()=>u("signup"),style:{background:"none",border:"none",color:"#10b981",cursor:"pointer",fontWeight:"600"},children:"Sign up"})]}):(0,Ag.jsxs)(Ag.Fragment,{children:["Already have an account? ",(0,Ag.jsx)("button",{onClick:()=>u("login"),style:{background:"none",border:"none",color:"#000",cursor:"pointer",fontWeight:"600"},children:"Log in"})]})})]})}),!o&&!r&&(0,Ag.jsxs)("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"12px",padding:"16px",marginBottom:"30px",display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[(0,Ag.jsx)(xt,{size:20,color:"#d97706"}),(0,Ag.jsxs)("div",{style:{flex:1,minWidth:"200px"},children:[(0,Ag.jsx)("strong",{style:{color:"#92400e"},children:"Your data is stored locally."}),(0,Ag.jsx)("span",{style:{color:"#a16207",marginLeft:"8px"},children:"Sign up to sync your flights across devices and never lose your data."})]}),(0,Ag.jsx)("button",{onClick:()=>Ue("signup"),style:{background:"#f59e0b",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontWeight:"600",whiteSpace:"nowrap"},children:"Sign Up Free"})]}),se.show&&(0,Ag.jsx)("div",{style:im,children:(0,Ag.jsxs)("div",{style:ht(ht({},om),{},{maxWidth:"450px",textAlign:"center"}),children:[(0,Ag.jsxs)("div",{style:{marginBottom:"25px"},children:[(0,Ag.jsx)("div",{style:{width:"60px",height:"60px",margin:"0 auto 20px",borderRadius:"50%",background:"linear-gradient(135deg, #4285F4 0%, #34A853 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 0 0 0 rgba(66, 133, 244, 0.4)"},children:(0,Ag.jsx)(kt,{size:28,color:"#fff",className:"animate-spin"})}),(0,Ag.jsx)("h2",{style:{margin:"0 0 8px 0",fontSize:"20px",fontWeight:"600"},children:"searching"===se.phase?"Searching Gmail...":"Analyzing Emails..."}),(0,Ag.jsx)("p",{style:{margin:0,color:"#666",fontSize:"14px"},children:se.currentQueryText})]}),(0,Ag.jsx)("div",{style:{background:"#f0f0f0",borderRadius:"10px",height:"12px",overflow:"hidden",marginBottom:"15px"},children:(0,Ag.jsx)("div",{style:{background:"linear-gradient(90deg, #4285F4 0%, #34A853 100%)",height:"100%",borderRadius:"10px",transition:"width 0.3s ease",width:"searching"===se.phase?"".concat(se.currentQuery/se.totalQueries*100,"%"):"".concat(se.totalEmails>0?se.currentEmail/se.totalEmails*100:0,"%")}})}),(0,Ag.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[(0,Ag.jsxs)("div",{style:{background:"#f8f9fa",padding:"12px",borderRadius:"10px"},children:[(0,Ag.jsx)("div",{style:{fontSize:"24px",fontWeight:"700",color:"#4285F4"},children:"searching"===se.phase?"".concat(se.currentQuery,"/").concat(se.totalQueries):"".concat(se.currentEmail,"/").concat(se.totalEmails)}),(0,Ag.jsx)("div",{style:{fontSize:"11px",color:"#666",marginTop:"4px"},children:"searching"===se.phase?"Queries":"Emails"})]}),(0,Ag.jsxs)("div",{style:{background:"#f0fdf4",padding:"12px",borderRadius:"10px"},children:[(0,Ag.jsx)("div",{style:{fontSize:"24px",fontWeight:"700",color:"#16a34a"},children:se.foundFlights}),(0,Ag.jsx)("div",{style:{fontSize:"11px",color:"#666",marginTop:"4px"},children:"Flights Found"})]})]}),(0,Ag.jsx)("div",{style:{fontSize:"13px",color:"#999"},children:"searching"===se.phase?"".concat(Math.round(se.currentQuery/se.totalQueries*100),"% complete"):se.totalEmails>0?"".concat(Math.round(se.currentEmail/se.totalEmails*100),"% complete"):"Starting..."})]})}),k&&(0,Ag.jsx)("div",{style:im,children:(0,Ag.jsxs)("div",{style:ht(ht({},om),{},{maxWidth:"650px"}),children:[(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,Ag.jsxs)("h2",{style:{margin:0},children:["Flights Found (",A.length,")"]}),(0,Ag.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[A.length>0&&(0,Ag.jsx)(Ag.Fragment,{children:(0,Ag.jsx)("button",{onClick:()=>_([]),style:{padding:"6px 12px",border:"1px solid #fecaca",background:"#fff",color:"#dc2626",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"500"},children:"Clear All"})}),(0,Ag.jsx)(bt,{style:{cursor:"pointer"},onClick:()=>C(!1)})]})]}),0===A.length?(0,Ag.jsxs)("div",{style:{textAlign:"center",padding:"30px",color:"#666"},children:[(0,Ag.jsx)(xt,{size:40,style:{marginBottom:"15px",color:"#ccc"}}),(0,Ag.jsx)("p",{style:{fontWeight:"500",marginBottom:"10px"},children:"No flight emails found"}),(0,Ag.jsxs)("p",{style:{fontSize:"13px",color:"#999",lineHeight:"1.5"},children:["We searched your Gmail using multiple queries:",(0,Ag.jsx)("br",{}),"\u2022 Gmail's reservation category",(0,Ag.jsx)("br",{}),"\u2022 Flight confirmation keywords",(0,Ag.jsx)("br",{}),"\u2022 Emails from known airline domains",(0,Ag.jsx)("br",{}),(0,Ag.jsx)("br",{}),(0,Ag.jsx)("strong",{children:"Tip:"})," Open browser console (F12) to see detailed search logs."]})]}):(0,Ag.jsx)("div",{style:{maxHeight:"450px",overflowY:"auto"},children:A.map(e=>(0,Ag.jsxs)("div",{style:{padding:"15px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"12px",background:e.isRoundTrip?"#f0fdf4":"transparent"},children:[(0,Ag.jsxs)("div",{style:{flex:1},children:[(0,Ag.jsx)("div",{style:{fontWeight:"bold",fontSize:"16px",marginBottom:"4px",display:"flex",alignItems:"center",gap:"8px"},children:e.isRoundTrip?(0,Ag.jsxs)(Ag.Fragment,{children:[e.origin," \u21c4 ",e.destination,(0,Ag.jsx)("span",{style:{fontSize:"10px",background:"#16a34a",color:"#fff",padding:"2px 8px",borderRadius:"10px",fontWeight:"600"},children:"Round Trip"})]}):(0,Ag.jsxs)(Ag.Fragment,{children:[e.origin," \u2192 ",e.destination]})}),(0,Ag.jsxs)("div",{style:{fontSize:"13px",color:"#555",marginBottom:"6px"},children:[e.isRoundTrip?(0,Ag.jsxs)(Ag.Fragment,{children:[(0,Ag.jsxs)("span",{children:["Outbound: ",Zg(e.date)]}),(0,Ag.jsxs)("span",{style:{marginLeft:"12px"},children:["Return: ",Zg(e.returnDate)]})]}):Zg(e.date),e.flightNumber&&!e.isRoundTrip&&(0,Ag.jsxs)("span",{style:{marginLeft:"10px",fontWeight:"500"},children:["\u2708 ",e.flightNumber]})]}),(0,Ag.jsxs)("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",alignItems:"center"},children:[e.airline&&(0,Ag.jsx)("span",{style:{fontSize:"11px",background:"#e8f4fd",color:"#1e3a5f",padding:"2px 8px",borderRadius:"10px"},children:e.airline}),e.confirmationNumber&&(0,Ag.jsxs)("span",{style:{fontSize:"11px",background:"#fef2f2",color:"#991b1b",padding:"2px 8px",borderRadius:"10px"},children:["PNR: ",e.confirmationNumber]}),"json-ld"===e.source&&(0,Ag.jsx)("span",{style:{fontSize:"10px",background:"#dcfce7",color:"#166534",padding:"2px 6px",borderRadius:"8px"},children:"\u2713 Verified"})]})]}),(0,Ag.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[(0,Ag.jsx)("button",{onClick:()=>{return t=e.id,void _(e=>e.filter(e=>e.id!==t));var t},title:"Remove from list",style:{background:"#fff",color:"#dc2626",border:"1px solid #fecaca",padding:"8px 10px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",transition:"all 0.15s ease"},onMouseOver:e=>{e.currentTarget.style.background="#fef2f2",e.currentTarget.style.borderColor="#dc2626"},onMouseOut:e=>{e.currentTarget.style.background="#fff",e.currentTarget.style.borderColor="#fecaca"},children:(0,Ag.jsx)(It,{size:16})}),(0,Ag.jsxs)("button",{onClick:()=>Qe(e,!0),style:{background:e.isRoundTrip?"#16a34a":"#00C851",color:"#fff",border:"none",padding:"10px 16px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontWeight:"500",whiteSpace:"nowrap"},children:[(0,Ag.jsx)(vt,{size:16})," ",e.isRoundTrip?"Add Both":"Add"]})]})]},e.id))}),(0,Ag.jsx)("div",{style:{marginTop:"15px",paddingTop:"15px",borderTop:"1px solid #eee",fontSize:"11px",color:"#999",textAlign:"center"},children:'Searched using multiple Gmail queries. "Verified" = extracted from structured email data (JSON-LD).'})]})}),r&&(0,Ag.jsxs)("div",{style:{background:I?"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)":"#f8fafc",border:I?"1px solid #f59e0b":"1px solid #e2e8f0",borderRadius:"12px",padding:"12px 16px",marginBottom:"20px",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"12px"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1},children:[(0,Ag.jsx)(Ot,{size:20,color:I?"#f59e0b":"#94a3b8"}),(0,Ag.jsx)("span",{style:{fontSize:"14px",color:"#1e293b",fontWeight:"500"},children:I?"\ud83c\udfc6 Competing in Global Contest":"Global Travel Contest"}),!I&&(0,Ag.jsx)("span",{style:{fontSize:"12px",color:"#64748b"},children:"\u2014 Compare your stats worldwide"})]}),(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,Ag.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"6px",cursor:R?"wait":"pointer",padding:"6px 12px",background:I?"#fff":"#f1f5f9",borderRadius:"8px",border:I?"1px solid #f59e0b":"1px solid #e2e8f0",fontSize:"13px",fontWeight:"600",color:I?"#92400e":"#475569",opacity:R?.7:1},children:[R?(0,Ag.jsx)(kt,{className:"animate-spin",size:14,style:{color:"#f59e0b"}}):(0,Ag.jsx)("input",{type:"checkbox",checked:I,onChange:e=>je(e.target.checked),style:{width:"16px",height:"16px",cursor:"pointer",accentColor:"#f59e0b"}}),R?"...":I?"Opted In":"Opt In"]}),(0,Ag.jsxs)("button",{onClick:()=>F(!0),style:{background:"#1e293b",color:"#fff",border:"none",padding:"6px 14px",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"13px",display:"flex",alignItems:"center",gap:"6px"},children:[(0,Ag.jsx)(Rt,{size:14}),"Leaderboard"]})]})]}),M&&(0,Ag.jsx)("div",{style:im,children:(0,Ag.jsxs)("div",{style:ht(ht({},om),{},{maxWidth:"750px",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"}),children:[(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid #eee"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Ag.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Ag.jsx)(Ot,{size:20,color:"#fff"})}),(0,Ag.jsxs)("div",{children:[(0,Ag.jsx)("h2",{style:{margin:0,fontSize:"20px"},children:"Global Leaderboard"}),(0,Ag.jsxs)("p",{style:{margin:"2px 0 0 0",fontSize:"12px",color:"#888"},children:[P.length," explorer",1!==P.length?"s":""," competing"]})]})]}),(0,Ag.jsx)(bt,{style:{cursor:"pointer"},onClick:()=>F(!1)})]}),j?(0,Ag.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",color:"#888"},children:[(0,Ag.jsx)(kt,{className:"animate-spin",size:32,style:{marginBottom:"12px"}}),(0,Ag.jsx)("span",{children:"Loading leaderboard..."})]}):0===P.length?(0,Ag.jsxs)("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:[(0,Ag.jsx)(Rt,{size:48,style:{marginBottom:"16px",color:"#ccc"}}),(0,Ag.jsx)("h3",{style:{margin:"0 0 8px 0"},children:"No competitors yet"}),(0,Ag.jsx)("p",{style:{fontSize:"14px",color:"#888",margin:0},children:"Be the first to opt in and claim the top spot!"})]}):(0,Ag.jsxs)("div",{style:{flex:1,overflowY:"auto",overflowX:"auto",marginRight:"-10px",paddingRight:"10px"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",flexWrap:"wrap",alignItems:"center"},children:[(0,Ag.jsx)("span",{style:{fontSize:"12px",color:"#64748b",marginRight:"4px"},children:"Sort by:"}),[{key:"miles",label:"\u2708\ufe0f Miles",color:"#f59e0b"},{key:"flights",label:"\ud83d\udeeb Flights",color:"#3b82f6"},{key:"countries",label:"\ud83c\udf0d Countries",color:"#10b981"},{key:"co2",label:"\ud83c\udf31 CO\u2082 (Low)",color:"#059669"}].map(e=>{let{key:t,label:n,color:r}=e;return(0,Ag.jsx)("button",{onClick:()=>U(t),style:{background:z===t?r:"#f1f5f9",color:z===t?"#fff":"#64748b",border:"none",padding:"6px 12px",borderRadius:"8px",fontSize:"11px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",whiteSpace:"nowrap"},children:n},t)})]}),(0,Ag.jsxs)("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:"0 6px",minWidth:"600px"},children:[(0,Ag.jsx)("thead",{children:(0,Ag.jsxs)("tr",{style:{background:"#f8fafc",fontSize:"10px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:[(0,Ag.jsx)("th",{style:{padding:"10px 10px",textAlign:"center",borderRadius:"8px 0 0 8px",width:"50px"},children:"#"}),(0,Ag.jsx)("th",{style:{padding:"10px 10px",textAlign:"left",minWidth:"120px"},children:"Explorer"}),(0,Ag.jsxs)("th",{style:{padding:"10px 10px",textAlign:"right",width:"90px",background:"miles"===z?"#fef3c7":"transparent",cursor:"pointer"},onClick:()=>U("miles"),children:["Miles ","miles"===z&&"\u25bc"]}),(0,Ag.jsxs)("th",{style:{padding:"10px 10px",textAlign:"right",width:"70px",background:"flights"===z?"#dbeafe":"transparent",cursor:"pointer"},onClick:()=>U("flights"),children:["Flights ","flights"===z&&"\u25bc"]}),(0,Ag.jsxs)("th",{style:{padding:"10px 10px",textAlign:"right",width:"80px",background:"countries"===z?"#dcfce7":"transparent",cursor:"pointer"},onClick:()=>U("countries"),children:["Countries ","countries"===z&&"\u25bc"]}),(0,Ag.jsxs)("th",{style:{padding:"10px 10px",textAlign:"right",borderRadius:"0 8px 8px 0",width:"75px",background:"co2"===z?"#ecfdf5":"transparent",cursor:"pointer"},onClick:()=>U("co2"),children:["CO\u2082 ","co2"===z&&"\u25b2"]})]})}),(0,Ag.jsx)("tbody",{children:(()=>{const e=[...P];switch(z){case"miles":default:e.sort((e,t)=>(t.totalMiles||0)-(e.totalMiles||0));break;case"flights":e.sort((e,t)=>(t.totalFlights||0)-(e.totalFlights||0));break;case"countries":e.sort((e,t)=>(t.uniqueCountries||0)-(e.uniqueCountries||0));break;case"co2":e.sort((e,t)=>(e.totalCO2||0)-(t.totalCO2||0))}return e})().map((e,t)=>{var n;const r=t+1,i=r<=3;return(0,Ag.jsxs)("tr",{style:{background:e.isCurrentUser?"linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)":i?"#fffbeb":"#fff",boxShadow:e.isCurrentUser?"inset 0 0 0 2px #10b981":i?"inset 0 0 0 1px #fde68a":"inset 0 0 0 1px #f1f5f9",borderRadius:"10px"},children:[(0,Ag.jsx)("td",{style:{padding:"12px 10px",textAlign:"center",borderRadius:"10px 0 0 10px"},children:i?(0,Ag.jsx)("div",{style:{width:"26px",height:"26px",borderRadius:"50%",background:["#fbbf24","#9ca3af","#cd7f32"][r-1],display:"inline-flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"700",fontSize:"11px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:r}):(0,Ag.jsx)("span",{style:{fontWeight:"600",color:"#64748b",fontSize:"13px"},children:r})}),(0,Ag.jsx)("td",{style:{padding:"12px 10px"},children:(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Ag.jsx)("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:e.isCurrentUser?"#10b981":"#e2e8f0",display:"flex",alignItems:"center",justifyContent:"center",color:e.isCurrentUser?"#fff":"#64748b",fontWeight:"600",fontSize:"12px",flexShrink:0},children:(null===(n=e.displayName)||void 0===n?void 0:n.charAt(0).toUpperCase())||"?"}),(0,Ag.jsxs)("div",{style:{fontWeight:"600",fontSize:"13px",color:e.isCurrentUser?"#059669":"#1e293b",display:"flex",alignItems:"center",gap:"4px",overflow:"hidden"},children:[(0,Ag.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"90px"},children:e.displayName}),e.isCurrentUser&&(0,Ag.jsx)("span",{style:{fontSize:"9px",background:"#10b981",color:"#fff",padding:"2px 5px",borderRadius:"4px",flexShrink:0},children:"YOU"})]})]})}),(0,Ag.jsx)("td",{style:{padding:"12px 10px",textAlign:"right",fontWeight:"miles"===z?"700":"600",fontSize:"13px",color:"miles"===z?"#b45309":"#1e293b",background:"miles"===z?"rgba(254, 243, 199, 0.5)":"transparent",fontVariantNumeric:"tabular-nums"},children:(e.totalMiles||0).toLocaleString()}),(0,Ag.jsx)("td",{style:{padding:"12px 10px",textAlign:"right",fontWeight:"flights"===z?"700":"500",fontSize:"13px",color:"flights"===z?"#1e40af":"#64748b",background:"flights"===z?"rgba(219, 234, 254, 0.5)":"transparent",fontVariantNumeric:"tabular-nums"},children:e.totalFlights||0}),(0,Ag.jsx)("td",{style:{padding:"12px 10px",textAlign:"right",fontWeight:"countries"===z?"700":"500",fontSize:"13px",color:"countries"===z?"#166534":"#64748b",background:"countries"===z?"rgba(220, 252, 231, 0.5)":"transparent",fontVariantNumeric:"tabular-nums"},children:e.uniqueCountries||0}),(0,Ag.jsxs)("td",{style:{padding:"12px 10px",textAlign:"right",fontWeight:"co2"===z?"700":"500",fontSize:"12px",color:"co2"===z?"#047857":"#64748b",background:"co2"===z?"rgba(236, 253, 245, 0.5)":"transparent",borderRadius:"0 10px 10px 0",fontVariantNumeric:"tabular-nums"},children:[((e.totalCO2||0)/1e3).toFixed(1),"t"]})]},e.id)})})]})]}),!I&&r&&!R&&(0,Ag.jsxs)("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid #eee",textAlign:"center"},children:[(0,Ag.jsx)("p",{style:{fontSize:"14px",color:"#64748b",margin:"0 0 12px 0"},children:"Want to join the competition?"}),(0,Ag.jsxs)("button",{onClick:async()=>{await je(!0),De()},disabled:R,style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"#fff",border:"none",padding:"12px 24px",borderRadius:"10px",cursor:R?"wait":"pointer",fontWeight:"600",fontSize:"14px",display:"inline-flex",alignItems:"center",gap:"8px"},children:[(0,Ag.jsx)(Ot,{size:18}),"Opt In Now"]})]})]})}),b.length>0&&We().length>0&&(0,Ag.jsxs)("div",{style:{background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",border:"1px solid #f59e0b",borderRadius:"12px",padding:"16px 20px",marginBottom:"24px",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"12px"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Ag.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Ag.jsx)(xt,{size:20,color:"#fff"})}),(0,Ag.jsxs)("div",{children:[(0,Ag.jsx)("div",{style:{fontWeight:"600",color:"#92400e",fontSize:"14px"},children:"New features available for your flights!"}),(0,Ag.jsxs)("div",{style:{fontSize:"12px",color:"#a16207",marginTop:"2px"},children:[We().length," flight",We().length>1?"s":""," can be updated with country & continent data"]})]})]}),(0,Ag.jsx)("button",{onClick:async()=>{const e=We();if(0!==e.length){Se(!0),Ce({current:0,total:e.length});try{const t=b.map((e,t)=>Ve(e)?(Ce(e=>ht(ht({},e),{},{current:e.current+1})),(e=>{const t=Mg.find(t=>t.code===e.origin),n=Mg.find(t=>t.code===e.destination),r=e.originCountry&&""!==e.originCountry?e.originCountry:(null===t||void 0===t?void 0:t.country)||"",i=e.destCountry&&""!==e.destCountry?e.destCountry:(null===n||void 0===n?void 0:n.country)||"",o=zg(r),a=zg(i),s=ht(ht({},e),{},{originCountry:r,destCountry:i,originContinent:"Unknown"!==o?o:e.originContinent||"Unknown",destContinent:"Unknown"!==a?a:e.destContinent||"Unknown",schemaVersion:3});return s.legs&&s.legs.length>0&&(s.legs=s.legs.map(e=>{const t=Mg.find(t=>t.code===e.origin),n=Mg.find(t=>t.code===e.destination),r=e.originCountry&&""!==e.originCountry?e.originCountry:(null===t||void 0===t?void 0:t.country)||"",i=e.destCountry&&""!==e.destCountry?e.destCountry:(null===n||void 0===n?void 0:n.country)||"";return ht(ht({},e),{},{originCountry:r,destCountry:i,originContinent:zg(r),destContinent:zg(i)})})),s})(e)):e);if(x(t),localStorage.setItem("flights-data",JSON.stringify(t)),r){const e=jp(Rg,"users",r.uid);await Cg(e,{flights:t})}alert("Successfully updated ".concat(e.length," flight").concat(e.length>1?"s":""," with new data!"))}catch(t){console.error("Error reprocessing database:",t),alert("Error updating flights. Please try again.")}finally{Se(!1),Ce({current:0,total:0})}}},disabled:we,style:{background:we?"#d97706":"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"8px",fontWeight:"600",fontSize:"13px",cursor:we?"wait":"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 2px 8px rgba(245, 158, 11, 0.3)"},children:we?(0,Ag.jsxs)(Ag.Fragment,{children:[(0,Ag.jsx)(kt,{className:"animate-spin",size:16}),"Updating... ",ke.current,"/",ke.total]}):(0,Ag.jsxs)(Ag.Fragment,{children:[(0,Ag.jsx)(vt,{size:16}),"Update All Flights"]})})]}),(0,Ag.jsxs)("div",{style:{marginBottom:G?"40px":"12px"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:G?"20px":"0",padding:"12px 16px",background:"#f8fafc",borderRadius:"12px",cursor:"pointer"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",flex:1},onClick:()=>Q(!G),children:[(0,Ag.jsx)(Nt,{size:20,color:"#6366f1"}),(0,Ag.jsx)("h3",{style:{margin:0,fontSize:"16px",fontWeight:"600",color:"#334155"},children:"Travel Statistics"}),G?(0,Ag.jsx)(Pt,{size:18,color:"#64748b"}):(0,Ag.jsx)(Lt,{size:18,color:"#64748b"}),!G&&(0,Ag.jsxs)("span",{style:{fontSize:"13px",color:"#64748b",marginLeft:"10px"},children:[Ze," flights \u2022 ",et.toLocaleString()," mi \u2022 ",nt.length," countries"]})]}),(0,Ag.jsx)("button",{onClick:e=>{e.stopPropagation(),ee(!Z)},style:{background:Z?"#e0e7ff":"transparent",border:"1px solid #e2e8f0",borderRadius:"8px",padding:"6px 10px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",color:"#64748b"},title:"Customize visible stats",children:(0,Ag.jsx)(jt,{size:14})})]}),Z&&(0,Ag.jsxs)("div",{style:{background:"#fff",border:"1px solid #e2e8f0",borderRadius:"12px",padding:"16px",marginBottom:"16px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1)"},children:[(0,Ag.jsx)("div",{style:{fontSize:"13px",fontWeight:"600",color:"#334155",marginBottom:"12px"},children:"Choose which stats to display:"}),(0,Ag.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:[{key:"flights",label:"\u2708\ufe0f Flights"},{key:"miles",label:"\ud83c\udf0d Miles"},{key:"routes",label:"\ud83d\uddfa\ufe0f Routes"},{key:"countries",label:"\ud83c\udff3\ufe0f Countries"},{key:"continents",label:"\ud83c\udf0e Continents"},{key:"airports",label:"\ud83d\udccd Airports"},{key:"co2",label:"\u2601\ufe0f CO\u2082"},{key:"alliance",label:"\u2b50 Alliance"},{key:"moon",label:"\ud83c\udf19 Moon %"},{key:"world",label:"\ud83c\udf0d World Laps"},{key:"passengers",label:"\ud83d\udc65 Passengers"},{key:"money",label:"\ud83d\udcb5 Money"},{key:"milesSpent",label:"\ud83d\udcb3 Miles Spent"}].map(e=>{let{key:t,label:n}=e;return(0,Ag.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:X[t]?"#e0e7ff":"#f1f5f9",borderRadius:"20px",cursor:"pointer",fontSize:"12px",color:X[t]?"#4338ca":"#64748b",transition:"all 0.2s ease"},children:[(0,Ag.jsx)("input",{type:"checkbox",checked:X[t],onChange:e=>$(ht(ht({},X),{},{[t]:e.target.checked})),style:{display:"none"}}),n]},t)})})]}),G&&(0,Ag.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"16px"},children:[X.flights&&(0,Ag.jsxs)("div",{style:em,children:[(0,Ag.jsx)(mt,{size:20}),(0,Ag.jsx)("div",{style:tm,children:Ze}),(0,Ag.jsx)("div",{style:nm,children:"Total Flights"}),b.length!==Ze&&(0,Ag.jsxs)("div",{style:{fontSize:"10px",color:"#888",marginTop:"4px"},children:["(",b.length," trips)"]})]}),X.miles&&(0,Ag.jsxs)("div",{style:em,children:[(0,Ag.jsx)(Dt,{size:20}),(0,Ag.jsx)("div",{style:tm,children:et.toLocaleString()}),(0,Ag.jsx)("div",{style:nm,children:"Total Miles"})]}),X.routes&&(0,Ag.jsxs)("div",{style:em,children:[(0,Ag.jsx)(Mt,{size:20}),(0,Ag.jsx)("div",{style:tm,children:Object.keys(an).length}),(0,Ag.jsx)("div",{style:nm,children:"Unique Routes"})]}),X.countries&&(0,Ag.jsxs)("div",{style:ht(ht({},em),{},{background:"#fef3c7",borderColor:"#f59e0b"}),children:[(0,Ag.jsx)(Ft,{size:20,color:"#d97706"}),(0,Ag.jsx)("div",{style:ht(ht({},tm),{},{color:"#b45309"}),children:nt.length}),(0,Ag.jsx)("div",{style:nm,children:"Countries"}),nt.length>0&&(0,Ag.jsxs)("div",{style:{fontSize:"9px",color:"#92400e",marginTop:"4px",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:nt.join(", "),children:[nt.slice(0,3).join(", "),nt.length>3?"...":""]})]}),X.continents&&(0,Ag.jsxs)("div",{style:ht(ht({},em),{},{background:"#dbeafe",borderColor:"#3b82f6"}),children:[(0,Ag.jsx)(Dt,{size:20,color:"#2563eb"}),(0,Ag.jsx)("div",{style:ht(ht({},tm),{},{color:"#1d4ed8"}),children:rt.length}),(0,Ag.jsx)("div",{style:nm,children:"Continents"}),rt.length>0&&(0,Ag.jsx)("div",{style:{fontSize:"9px",color:"#1e40af",marginTop:"4px"},children:rt.join(", ")})]}),X.airports&&(0,Ag.jsxs)("div",{style:ht(ht({},em),{},{background:"#f0fdf4",borderColor:"#22c55e"}),children:[(0,Ag.jsx)(zt,{size:20,color:"#16a34a"}),(0,Ag.jsx)("div",{style:ht(ht({},tm),{},{color:"#15803d"}),children:it.length}),(0,Ag.jsx)("div",{style:nm,children:"Airports"})]}),X.co2&&(0,Ag.jsxs)("div",{style:em,children:[(0,Ag.jsx)(Ut,{size:20,color:"#dc2626"}),(0,Ag.jsx)("div",{style:tm,children:at}),(0,Ag.jsx)("div",{style:nm,children:"Your CO\u2082 (tons)"})]}),X.alliance&&$t&&"Independent"!==$t&&(0,Ag.jsxs)("div",{style:ht(ht({},em),{},{background:Wg[$t].background,borderColor:Wg[$t].color}),children:[(0,Ag.jsx)("span",{style:{fontSize:"20px"},children:Wg[$t].icon}),(0,Ag.jsx)("div",{style:ht(ht({},tm),{},{color:Wg[$t].color,fontSize:"18px"}),children:$t}),(0,Ag.jsx)("div",{style:nm,children:"Top Alliance"})]}),X.moon&&(0,Ag.jsxs)("div",{style:ht(ht({},em),{},{background:"#eef2ff",borderColor:"#6366f1"}),children:[(0,Ag.jsx)(Bt,{size:20,color:"#6366f1"}),(0,Ag.jsxs)("div",{style:ht(ht({},tm),{},{color:"#4f46e5"}),children:[(et/238855*100).toFixed(2),"%"]}),(0,Ag.jsx)("div",{style:nm,children:"\ud83c\udf19 To the Moon"})]}),X.world&&(0,Ag.jsxs)("div",{style:ht(ht({},em),{},{background:"#ecfdf5",borderColor:"#10b981"}),children:[(0,Ag.jsx)(Dt,{size:20,color:"#10b981"}),(0,Ag.jsxs)("div",{style:ht(ht({},tm),{},{color:"#059669"}),children:[(et/24901).toFixed(2),"\xd7"]}),(0,Ag.jsx)("div",{style:nm,children:"\ud83c\udf0d Around the World"})]}),X.passengers&&b.length>0&&(0,Ag.jsxs)("div",{style:ht(ht({},em),{},{background:"#fdf4ff",borderColor:"#c026d3"}),children:[(0,Ag.jsx)(Rt,{size:20,color:"#c026d3"}),(0,Ag.jsx)("div",{style:ht(ht({},tm),{},{color:"#a21caf"}),children:tt.toLocaleString()}),(0,Ag.jsx)("div",{style:nm,children:"\ud83d\udc65 Fellow Passengers"})]}),X.money&&on.totalMoneySpent>0&&(0,Ag.jsxs)("div",{style:ht(ht({},em),{},{background:"#f0fdf4",borderColor:"#22c55e"}),children:[(0,Ag.jsx)(Vt,{size:20,color:"#22c55e"}),(0,Ag.jsxs)("div",{style:ht(ht({},tm),{},{color:"#16a34a"}),children:["$",on.totalMoneySpent.toLocaleString()]}),(0,Ag.jsx)("div",{style:nm,children:"Money Spent"}),(0,Ag.jsxs)("div",{style:{fontSize:"10px",color:"#888",marginTop:"4px"},children:["(",on.moneyFlightCount," trip",on.moneyFlightCount>1?"s":"",")"]})]}),X.milesSpent&&on.totalMilesSpent>0&&(0,Ag.jsxs)("div",{style:ht(ht({},em),{},{background:"#eff6ff",borderColor:"#3b82f6"}),children:[(0,Ag.jsx)(Wt,{size:20,color:"#3b82f6"}),(0,Ag.jsx)("div",{style:ht(ht({},tm),{},{color:"#2563eb"}),children:on.totalMilesSpent.toLocaleString()}),(0,Ag.jsx)("div",{style:nm,children:"Miles Redeemed"}),(0,Ag.jsxs)("div",{style:{fontSize:"10px",color:"#888",marginTop:"4px"},children:["(",on.milesFlightCount," trip",on.milesFlightCount>1?"s":"",")"]})]})]})]}),b.length>0&&(0,Ag.jsxs)("div",{style:{marginBottom:J?"40px":"12px"},children:[(0,Ag.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:J?"20px":"0",padding:"12px 16px",background:"#f8fafc",borderRadius:"12px",cursor:"pointer"},onClick:()=>Y(!J),children:(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,Ag.jsx)(Ot,{size:20,color:"#f59e0b"}),(0,Ag.jsx)("h3",{style:{margin:0,fontSize:"16px",fontWeight:"600",color:"#334155"},children:"Detailed Breakdown"}),J?(0,Ag.jsx)(Pt,{size:18,color:"#64748b"}):(0,Ag.jsx)(Lt,{size:18,color:"#64748b"}),!J&&(0,Ag.jsxs)("span",{style:{fontSize:"13px",color:"#64748b",marginLeft:"10px"},children:[pt.length," airlines \u2022 ",Qt.length," aircraft \u2022 ",Xt.length," alliances"]})]})}),J&&(0,Ag.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:[pt.length>0&&(0,Ag.jsxs)("div",{style:{background:"#f9f9f9",padding:"24px",borderRadius:"16px"},children:[(0,Ag.jsxs)("h3",{style:{marginTop:0},children:[(0,Ag.jsx)(mt,{size:18,style:{verticalAlign:"middle",marginRight:"8px"}})," Top Airlines"]}),pt.map(e=>{let[t,n]=e;return(0,Ag.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",marginBottom:"5px"},children:[(0,Ag.jsx)("span",{children:t}),(0,Ag.jsxs)("span",{children:[n," flight",n>1?"s":""]})]}),(0,Ag.jsx)("div",{style:{height:"8px",background:"#eee",borderRadius:"4px"},children:(0,Ag.jsx)("div",{style:{height:"100%",background:"#4285F4",borderRadius:"4px",width:"".concat(n/Ze*100,"%")}})})]},t)})]}),Qt.length>0&&(0,Ag.jsxs)("div",{style:{background:"#f9f9f9",padding:"24px",borderRadius:"16px"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[(0,Ag.jsxs)("h3",{style:{margin:0},children:[(0,Ag.jsx)(Nt,{size:18,style:{verticalAlign:"middle",marginRight:"8px"}})," ",te?"All Aircraft":"Top Aircraft"]}),Gt.length>5&&(0,Ag.jsx)("button",{onClick:()=>ne(!te),style:{background:te?"#f97316":"#fff",color:te?"#fff":"#f97316",border:"1px solid #f97316",padding:"4px 10px",borderRadius:"6px",fontSize:"11px",fontWeight:"600",cursor:"pointer"},children:te?"Show Top 5":"Show All (".concat(Gt.length,")")})]}),(te?Gt:Qt).map(e=>{let[t,n]=e;return(0,Ag.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",marginBottom:"5px"},children:[(0,Ag.jsx)("span",{children:t}),(0,Ag.jsxs)("span",{children:[n," flights"]})]}),(0,Ag.jsx)("div",{style:{height:"8px",background:"#eee",borderRadius:"4px"},children:(0,Ag.jsx)("div",{style:{height:"100%",background:"#f97316",borderRadius:"4px",width:"".concat(n/b.length*100,"%")}})})]},t)})]}),tn.length>0&&(0,Ag.jsxs)("div",{style:{background:"#f9f9f9",padding:"24px",borderRadius:"16px"},children:[(0,Ag.jsxs)("h3",{style:{marginTop:0},children:[(0,Ag.jsx)(Ot,{size:18,style:{verticalAlign:"middle",marginRight:"8px"}})," Class of Service"]}),tn.map(e=>{let[t,n]=e;const r="Economy"===t?"#d97706":"Premium Economy"===t?"#16a34a":"Business"===t?"#2563eb":"#ca8a04",i="Economy"===t?"\ud83d\udc14 Chicken class":"Premium Economy"===t?"\ud83d\udcba Premium Economy":"Business"===t?"\ud83d\udcbc Business":"\ud83d\udc51 First";return(0,Ag.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",marginBottom:"5px"},children:[(0,Ag.jsx)("span",{children:i}),(0,Ag.jsxs)("span",{children:[n," flight",n>1?"s":""]})]}),(0,Ag.jsx)("div",{style:{height:"8px",background:"#eee",borderRadius:"4px"},children:(0,Ag.jsx)("div",{style:{height:"100%",background:r,borderRadius:"4px",width:"".concat(n/Ze*100,"%")}})})]},t)})]}),Xt.length>0&&(0,Ag.jsxs)("div",{style:{background:"#f9f9f9",padding:"24px",borderRadius:"16px"},children:[(0,Ag.jsxs)("h3",{style:{marginTop:0},children:[(0,Ag.jsx)(Rt,{size:18,style:{verticalAlign:"middle",marginRight:"8px"}})," Airline Alliances"]}),Xt.map(e=>{let[t,n]=e;const r=Wg[t]||Wg.Independent,i="chart-alliance-".concat(t),o=be===i,a=qg[t]||[],s="Independent"!==t&&a.length>0;return(0,Ag.jsxs)("div",{style:{marginBottom:"15px",position:"relative"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",marginBottom:"5px"},children:[(0,Ag.jsxs)("span",{onClick:e=>{s&&(e.stopPropagation(),xe(o?null:i))},style:{display:"flex",alignItems:"center",gap:"6px",cursor:s?"pointer":"default",padding:"4px 8px",marginLeft:"-8px",borderRadius:"6px",background:o?r.background:"transparent",transition:"background 0.2s ease"},title:s?"Click to see all ".concat(t," members"):"",children:[(0,Ag.jsx)("span",{children:r.icon}),t,s&&(0,Ag.jsx)("span",{style:{fontSize:"10px",color:"#888",transform:o?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:"\u25bc"})]}),(0,Ag.jsxs)("span",{children:[n," flights (",Math.round(n/Yt*100),"%)"]})]}),(0,Ag.jsx)("div",{style:{height:"8px",background:"#eee",borderRadius:"4px"},children:(0,Ag.jsx)("div",{style:{height:"100%",background:r.color,borderRadius:"4px",width:"".concat(n/Yt*100,"%")}})}),o&&a.length>0&&(0,Ag.jsxs)("div",{style:{position:"absolute",top:"100%",left:"0",marginTop:"8px",background:"#fff",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0,0,0,0.15)",border:"1px solid ".concat(r.color,"20"),zIndex:1e3,minWidth:"260px",maxHeight:"350px",overflowY:"auto"},onClick:e=>e.stopPropagation(),children:[(0,Ag.jsxs)("div",{style:{padding:"14px 18px",borderBottom:"1px solid #eee",background:r.background,borderRadius:"12px 12px 0 0",position:"sticky",top:0},children:[(0,Ag.jsxs)("div",{style:{fontWeight:"600",color:r.color,display:"flex",alignItems:"center",gap:"8px",fontSize:"15px"},children:[(0,Ag.jsx)("span",{children:r.icon}),t]}),(0,Ag.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:[a.length," member airlines worldwide"]})]}),(0,Ag.jsx)("div",{style:{padding:"8px 0"},children:a.map((e,t)=>{const n=b.some(t=>!(!t.airline||!Hg(t.airline,e))||!!(t.legs&&t.legs.length>0)&&t.legs.some(t=>t.airline&&Hg(t.airline,e)));return(0,Ag.jsxs)("div",{style:{padding:"10px 18px",fontSize:"13px",color:n?r.color:"#555",display:"flex",alignItems:"center",gap:"10px",background:n?r.background:"transparent",fontWeight:n?"600":"normal",borderLeft:n?"3px solid ".concat(r.color):"3px solid transparent"},children:[(0,Ag.jsx)("span",{style:{color:n?r.color:"#999"},children:"\u2708"}),e,n&&(0,Ag.jsx)("span",{style:{fontSize:"9px",background:r.color,color:"#fff",padding:"2px 8px",borderRadius:"10px",marginLeft:"auto"},children:"FLOWN"})]},t)})})]})]},t)}),$t&&"Independent"!==$t&&(0,Ag.jsxs)("div",{style:{marginTop:"15px",padding:"12px",background:Wg[$t].background,borderRadius:"8px",fontSize:"13px",color:Wg[$t].color,textAlign:"center"},children:[Wg[$t].icon," You're a ",(0,Ag.jsx)("strong",{children:$t})," loyalist!"]})]}),(0,Ag.jsxs)("div",{style:{background:"#f9f9f9",padding:"24px",borderRadius:"16px"},children:[(0,Ag.jsxs)("h3",{style:{marginTop:0},children:[(0,Ag.jsx)(Ht,{size:18,style:{verticalAlign:"middle",marginRight:"8px"}})," Top Landmarks"]}),0===dt.length?(0,Ag.jsx)("p",{style:{color:"#666",fontSize:"13px"},children:"No landmarks detected yet."}):dt.map(e=>{let[t,n]=e;return(0,Ag.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",marginBottom:"5px"},children:[(0,Ag.jsx)("span",{children:t}),(0,Ag.jsxs)("span",{children:[n," times"]})]}),(0,Ag.jsx)("div",{style:{height:"8px",background:"#eee",borderRadius:"4px"},children:(0,Ag.jsx)("div",{style:{height:"100%",background:"#008080",borderRadius:"4px",width:"".concat(n/b.length*100,"%")}})})]},t)})]}),ot>0&&(0,Ag.jsxs)("div",{style:{background:"#fef2f2",padding:"24px",borderRadius:"16px"},children:[(0,Ag.jsxs)("h3",{style:{marginTop:0,color:"#991b1b"},children:[(0,Ag.jsx)(Ut,{size:18,style:{verticalAlign:"middle",marginRight:"8px"}})," Your Carbon Footprint"]}),(0,Ag.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"16px"},children:[(0,Ag.jsxs)("div",{style:{padding:"12px",background:"#fff",borderRadius:"8px",textAlign:"center"},children:[(0,Ag.jsxs)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#dc2626"},children:[at,"t"]}),(0,Ag.jsx)("div",{style:{fontSize:"11px",color:"#666",marginTop:"4px"},children:"Your emissions"})]}),(0,Ag.jsxs)("div",{style:{padding:"12px",background:"#fff",borderRadius:"8px",textAlign:"center"},children:[(0,Ag.jsxs)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#9ca3af"},children:[lt,"t"]}),(0,Ag.jsx)("div",{style:{fontSize:"11px",color:"#666",marginTop:"4px"},children:"Total flights' emissions"})]})]}),(0,Ag.jsxs)("div",{style:{padding:"12px",background:"#fff",borderRadius:"8px",marginBottom:"12px"},children:[(0,Ag.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px"},children:["\ud83d\ude97 If you drove ",et.toLocaleString()," miles instead:"]}),(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Ag.jsxs)("div",{children:[(0,Ag.jsxs)("span",{style:{fontSize:"18px",fontWeight:"bold",color:"#059669"},children:[(.21*et/1e3).toFixed(2),"t"]}),(0,Ag.jsx)("span",{style:{fontSize:"12px",color:"#666",marginLeft:"8px"},children:"CO\u2082 by car"})]}),(0,Ag.jsx)("div",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"12px",background:ot<.21*et?"#dcfce7":"#fef3c7",color:ot<.21*et?"#166534":"#854d0e"},children:ot<.21*et?"\u2708\ufe0f Flying saved ".concat(((.21*et-ot)/1e3).toFixed(2),"t"):"\ud83d\ude97 Driving would save ".concat(((ot-.21*et)/1e3).toFixed(2),"t")})]})]}),(0,Ag.jsxs)("div",{style:{padding:"12px",background:"#fff",borderRadius:"8px",marginBottom:"16px"},children:[(0,Ag.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px"},children:["\ud83d\ude82 If you took trains for ",et.toLocaleString()," miles instead:"]}),(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Ag.jsxs)("div",{children:[(0,Ag.jsxs)("span",{style:{fontSize:"18px",fontWeight:"bold",color:"#0891b2"},children:[(.041*et/1e3).toFixed(2),"t"]}),(0,Ag.jsx)("span",{style:{fontSize:"12px",color:"#666",marginLeft:"8px"},children:"CO\u2082 by train"})]}),(0,Ag.jsxs)("div",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"12px",background:"#fef3c7",color:"#854d0e"},children:["\ud83d\ude82 Train would save ",((ot-.041*et)/1e3).toFixed(2),"t (",Math.round(100*(1-.041*et/ot)),"% less)"]})]})]}),(0,Ag.jsx)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"12px"},children:"Your breakdown by class:"}),rn.map(e=>{let[t,n]=e;const r="Economy"===t?"#d97706":"Premium Economy"===t?"#16a34a":"Business"===t?"#2563eb":"#ca8a04",i="Economy"===t?"\ud83d\udc14 Chicken":"Premium Economy"===t?"\ud83d\udcba Prem Eco":"Business"===t?"\ud83d\udcbc Business":"\ud83d\udc51 First";return(0,Ag.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",marginBottom:"4px"},children:[(0,Ag.jsx)("span",{children:i}),(0,Ag.jsxs)("span",{children:[(n/1e3).toFixed(2),"t (",Math.round(n/ot*100),"%)"]})]}),(0,Ag.jsx)("div",{style:{height:"6px",background:"#fecaca",borderRadius:"3px"},children:(0,Ag.jsx)("div",{style:{height:"100%",background:r,borderRadius:"3px",width:"".concat(n/ot*100,"%")}})})]},t)}),(0,Ag.jsxs)("div",{style:{fontSize:"11px",color:"#888",marginTop:"16px",borderTop:"1px solid #fecaca",paddingTop:"12px"},children:["\ud83d\udca1 Your share: ~",(ot/st*100).toFixed(1),"% of total aircraft emissions. Premium classes have larger footprints due to increased seat space.",(0,Ag.jsx)("br",{}),(0,Ag.jsx)("span",{style:{color:"#aaa"},children:"Rates: 0.14 kg CO\u2082/mi (flying), 0.21 kg CO\u2082/mi (driving), 0.041 kg CO\u2082/mi (train avg)."})]})]})]})]}),b.length>0&&(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",padding:"12px 16px",background:"#f8fafc",borderRadius:"12px"},children:[(0,Ag.jsx)("h3",{style:{margin:0,fontSize:"16px",fontWeight:"600",color:"#334155"},children:"Your Flights"}),(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Ag.jsx)("span",{style:{fontSize:"12px",color:"#64748b",marginRight:"4px"},children:"Organize by:"}),[{key:"date",label:"Date"},{key:"country",label:"Country"},{key:"continent",label:"Continent"}].map(e=>{let{key:t,label:n}=e;return(0,Ag.jsx)("button",{onClick:()=>ie(t),style:{background:re===t?"#e0e7ff":"#fff",border:re===t?"1px solid #6366f1":"1px solid #e2e8f0",color:re===t?"#4338ca":"#64748b",padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:re===t?"600":"500",cursor:"pointer",transition:"all 0.2s ease"},children:n},t)})]})]}),"date"===re&&(0,Ag.jsx)("div",{style:{display:"grid",gap:"20px"},children:sn.map(e=>{e.flights.some(e=>e.isRoundTrip);const t=e.flights.every(e=>e.isRoundTrip);return(0,Ag.jsxs)("div",{style:{border:"1px solid #eee",borderRadius:"16px",padding:"24px"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:[(0,Ag.jsxs)("div",{children:[(0,Ag.jsxs)("span",{style:{fontSize:"20px",fontWeight:"bold"},children:[e.origin," ",t?"\u21c4":"\u2192"," ",e.destination]}),t&&(0,Ag.jsx)("span",{style:{marginLeft:"10px",fontSize:"11px",color:"#16a34a",background:"#dcfce7",padding:"3px 8px",borderRadius:"10px",fontWeight:"600",verticalAlign:"middle"},children:"Round Trip"}),(0,Ag.jsxs)("div",{style:{color:"#666",fontSize:"14px",marginTop:"4px"},children:[e.originCity," ",t?"\u2194":"to"," ",e.destCity,e.distance&&(0,Ag.jsxs)("span",{style:{marginLeft:"10px",color:"#888"},children:["\u2022 ",(e.distance*(t?2:1)).toLocaleString()," mi",t?" (total)":""]})]})]}),(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(()=>{const t=e.flights.reduce((e,t)=>e+(t.legCount||1)*(t.isRoundTrip?2:1),0);return(0,Ag.jsxs)("span",{style:{fontSize:"12px",color:"#888",background:"#f0f0f0",padding:"4px 8px",borderRadius:"12px"},children:[t," flight",t>1?"s":""]})})(),!t&&(0,Ag.jsx)(qt,{size:16,style:{cursor:"pointer",color:"#666"},title:"Add return flight (reverse route)",onClick:()=>dn(e.flights[0])}),(0,Ag.jsx)(Kt,{size:16,style:{cursor:"pointer",color:"#666"},title:"Copy this route",onClick:()=>un(e.flights[0])})]})]}),e.featuresCrossed&&e.featuresCrossed.length>0&&(0,Ag.jsx)("div",{style:{marginTop:"12px",marginBottom:"16px",display:"flex",flexWrap:"wrap",gap:"8px"},children:e.featuresCrossed.map(e=>(0,Ag.jsxs)("span",{style:{fontSize:"11px",background:"#e0f2f1",color:"#004d40",padding:"4px 8px",borderRadius:"12px",display:"flex",alignItems:"center",gap:"4px",fontWeight:"600"},children:[(0,Ag.jsx)(Dt,{size:10})," ",e]},e))}),(0,Ag.jsx)("div",{style:{borderTop:"1px solid #eee",paddingTop:"12px",marginTop:"8px"},children:e.flights.map((t,n)=>{var r;const i=t.isRoundTrip?2:1,o=$e(t.distance||0,t.serviceClass||"Economy")*i,a=.21*(t.distance||0)*i,s=a-o,l=t.legs&&t.legs.length>1;return(0,Ag.jsxs)("div",{style:{padding:"12px 0",borderBottom:n<e.flights.length-1?"1px solid #f5f5f5":"none"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:l?"10px":"0"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap",flex:1},children:[t.isRoundTrip?(0,Ag.jsxs)("span",{style:{fontWeight:"600",fontSize:"14px",minWidth:"90px"},children:[Zg(t.date)," \u21c4 ",Zg(t.returnDate)]}):(0,Ag.jsx)("span",{style:{fontWeight:"600",fontSize:"14px",minWidth:"90px"},children:Zg(t.date)}),t.isRoundTrip&&(0,Ag.jsx)("span",{style:{fontSize:"10px",color:"#16a34a",background:"#dcfce7",padding:"3px 8px",borderRadius:"10px",fontWeight:"600"},children:"\ud83d\udd04 ROUND TRIP"}),l&&(0,Ag.jsxs)("span",{style:{fontSize:"10px",color:"#6366f1",background:"#eef2ff",padding:"3px 8px",borderRadius:"10px",fontWeight:"600"},children:[t.legs.length," LEGS",t.isRoundTrip?" \xd7 2":""]}),l&&(0,Ag.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[(()=>{const e=t.legs.map(e=>e.serviceClass||"Economy"),n=[...new Set(e)],r=["First","Business","Premium Economy","Economy"].find(e=>n.includes(e))||"Economy";n.length;return(0,Ag.jsxs)("span",{style:{fontSize:"11px",color:"Economy"===r?"#8b6914":"Premium Economy"===r?"#166534":"Business"===r?"#1e40af":"#854d0e",background:"Economy"===r?"#fef3c7":"Premium Economy"===r?"#dcfce7":"Business"===r?"#dbeafe":"#fef9c3",padding:"3px 8px",borderRadius:"6px",fontWeight:"First"===r?"600":"normal"},children:["Economy"===r?"\ud83d\udc14":"Premium Economy"===r?"\ud83d\udcba":"Business"===r?"\ud83d\udcbc":"\ud83d\udc51",n.length>1?" Mixed":" ".concat("Economy"===r?"Chicken class":r)]})})(),(()=>{const e=t.legs.reduce((e,t)=>e+Math.round($e(t.distance||0,t.serviceClass||"Economy")),0),n=.21*t.distance,r=n-e;return(0,Ag.jsxs)("span",{style:{fontSize:"11px",color:"#dc2626",background:"#fef2f2",padding:"3px 8px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"4px"},title:"Flying: ".concat(e," kg CO\u2082 | Driving: ").concat(Math.round(n)," kg CO\u2082"),children:[(0,Ag.jsx)(Ut,{size:10}),e," kg",(0,Ag.jsx)("span",{style:{fontSize:"10px",color:r>0?"#166534":"#854d0e",marginLeft:"2px"},children:r>0?"(\ud83d\ude97+".concat(Math.round(r),")"):"(\ud83d\ude97".concat(Math.round(r),")")})]})})(),t.paymentAmount&&(0,Ag.jsxs)("span",{style:{fontSize:"11px",color:"miles"===t.paymentType?"#2563eb":"#16a34a",background:"miles"===t.paymentType?"#eff6ff":"#f0fdf4",padding:"3px 8px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"3px"},children:["miles"===t.paymentType?"\u2708\ufe0f":"\ud83d\udcb5","miles"===t.paymentType?"".concat(parseInt(t.paymentAmount).toLocaleString()," mi"):"$".concat(parseFloat(t.paymentAmount).toLocaleString())]})]}),!l&&(0,Ag.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[t.airline&&(0,Ag.jsx)("span",{style:{fontSize:"12px",color:"#555",background:"#f5f5f5",padding:"3px 8px",borderRadius:"6px"},children:t.airline}),t.airline&&(()=>{const e=Kg(t.airline),n=Wg[e]||Wg.Independent,r="alliance-".concat(t.id),i=be===r,o=qg[e]||[];return(0,Ag.jsxs)("div",{style:{position:"relative"},children:[(0,Ag.jsxs)("span",{onClick:t=>{t.stopPropagation(),"Independent"!==e&&o.length>0&&xe(i?null:r)},style:{fontSize:"11px",color:n.color,background:n.background,padding:"3px 8px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"4px",fontWeight:"500",cursor:"Independent"!==e?"pointer":"default",border:i?"1px solid ".concat(n.color):"1px solid transparent",transition:"all 0.2s ease"},title:"Independent"!==e?"Click to see all ".concat(e," members"):"Independent airline",children:[(0,Ag.jsx)("span",{style:{fontSize:"10px"},children:n.icon}),e,"Independent"!==e&&(0,Ag.jsx)("span",{style:{fontSize:"8px",marginLeft:"2px",transform:i?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:"\u25bc"})]}),i&&o.length>0&&(0,Ag.jsxs)("div",{style:{position:"absolute",top:"100%",left:"0",marginTop:"4px",background:"#fff",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0,0,0,0.15)",border:"1px solid ".concat(n.color,"20"),zIndex:1e3,minWidth:"220px",maxHeight:"300px",overflowY:"auto"},onClick:e=>e.stopPropagation(),children:[(0,Ag.jsxs)("div",{style:{padding:"12px 16px",borderBottom:"1px solid #eee",background:n.background,borderRadius:"12px 12px 0 0",position:"sticky",top:0},children:[(0,Ag.jsxs)("div",{style:{fontWeight:"600",color:n.color,display:"flex",alignItems:"center",gap:"6px"},children:[(0,Ag.jsx)("span",{children:n.icon}),e]}),(0,Ag.jsxs)("div",{style:{fontSize:"11px",color:"#666",marginTop:"2px"},children:[o.length," member airlines"]})]}),(0,Ag.jsx)("div",{style:{padding:"8px 0"},children:o.map((e,r)=>{const i=Hg(t.airline,e);return(0,Ag.jsxs)("div",{style:{padding:"8px 16px",fontSize:"12px",color:"#333",display:"flex",alignItems:"center",gap:"8px",background:i?n.background:"transparent",fontWeight:i?"600":"normal"},children:[(0,Ag.jsx)("span",{style:{color:n.color},children:"\u2708"}),e,i&&(0,Ag.jsx)("span",{style:{fontSize:"9px",background:n.color,color:"#fff",padding:"2px 6px",borderRadius:"10px",marginLeft:"auto"},children:"YOUR FLIGHT"})]},r)})})]})]})})()]}),(0,Ag.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[t.aircraftType&&"Unknown"!==t.aircraftType&&!l&&(0,Ag.jsx)("span",{style:{fontSize:"12px",color:"#555",background:"#f5f5f5",padding:"3px 8px",borderRadius:"6px"},children:t.aircraftType}),!l&&t.serviceClass&&(0,Ag.jsx)("span",{style:{fontSize:"12px",color:"Economy"===t.serviceClass?"#8b6914":"Premium Economy"===t.serviceClass?"#166534":"Business"===t.serviceClass?"#1e40af":"#854d0e",background:"Economy"===t.serviceClass?"#fef3c7":"Premium Economy"===t.serviceClass?"#dcfce7":"Business"===t.serviceClass?"#dbeafe":"#fef9c3",padding:"3px 8px",borderRadius:"6px",fontWeight:"First"===t.serviceClass?"600":"normal"},children:"Economy"===t.serviceClass?"\ud83d\udc14 Chicken class":"Premium Economy"===t.serviceClass?"\ud83d\udcba Premium Economy":"Business"===t.serviceClass?"\ud83d\udcbc Business":"\ud83d\udc51 First"}),!l&&(0,Ag.jsxs)("span",{style:{fontSize:"11px",color:"#dc2626",background:"#fef2f2",padding:"3px 8px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"4px"},title:"Flying: ".concat(o," kg CO\u2082 | Driving: ").concat(Math.round(a)," kg CO\u2082"),children:[(0,Ag.jsx)(Ut,{size:10}),o," kg",(0,Ag.jsx)("span",{style:{fontSize:"10px",color:s>0?"#166534":"#854d0e",marginLeft:"2px"},children:s>0?"(\ud83d\ude97+".concat(Math.round(s),")"):"(\ud83d\ude97".concat(Math.round(s),")")})]}),!l&&t.paymentAmount&&(0,Ag.jsxs)("span",{style:{fontSize:"11px",color:"miles"===t.paymentType?"#2563eb":"#16a34a",background:"miles"===t.paymentType?"#eff6ff":"#f0fdf4",padding:"3px 8px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"3px"},children:["miles"===t.paymentType?"\u2708\ufe0f":"\ud83d\udcb5","miles"===t.paymentType?"".concat(parseInt(t.paymentAmount).toLocaleString()," mi"):"$".concat(parseFloat(t.paymentAmount).toLocaleString())]})]})]}),(0,Ag.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[(0,Ag.jsx)(qt,{size:14,style:{cursor:"pointer",color:"#888"},title:"Add return flight (reverse route)",onClick:()=>dn(t)}),(0,Ag.jsx)(Kt,{size:14,style:{cursor:"pointer",color:"#888"},title:"Duplicate this flight",onClick:()=>un(t)}),(0,Ag.jsx)(Et,{size:14,style:{cursor:"pointer",color:"#888"},title:"Edit this flight",onClick:()=>hn(t)}),(0,Ag.jsx)(It,{size:14,color:"#e57373",style:{cursor:"pointer"},title:"Delete this flight",onClick:()=>fn(t.id)})]})]}),l&&(0,Ag.jsxs)("div",{style:{marginLeft:"106px",background:"#fafafa",borderRadius:"10px",padding:"12px",border:"1px solid #f0f0f0"},children:[t.legs.map((e,n)=>{var r;const i=e.airline?Kg(e.airline):null,o=i?Wg[i]||Wg.Independent:null,a="alliance-".concat(t.id,"-leg-").concat(n),s=be===a,l=i&&qg[i]||[];return(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"8px 0",borderBottom:n<t.legs.length-1?"1px dashed #e5e5e5":"none"},children:[(0,Ag.jsxs)("span",{style:{fontSize:"10px",color:"#94a3b8",fontWeight:"600",minWidth:"35px"},children:["LEG ",n+1]}),(0,Ag.jsxs)("span",{style:{fontSize:"13px",fontWeight:"600",color:"#374151",minWidth:"100px"},children:[e.origin," \u2192 ",e.destination]}),(0,Ag.jsxs)("span",{style:{fontSize:"11px",color:"#6b7280",minWidth:"70px"},children:[null===(r=e.distance)||void 0===r?void 0:r.toLocaleString()," mi"]}),e.airline&&(0,Ag.jsx)("span",{style:{fontSize:"11px",color:"#555",background:"#fff",padding:"2px 8px",borderRadius:"6px",border:"1px solid #e5e5e5"},children:e.airline}),e.airline&&o&&(0,Ag.jsxs)("div",{style:{position:"relative"},children:[(0,Ag.jsxs)("span",{onClick:e=>{e.stopPropagation(),"Independent"!==i&&l.length>0&&xe(s?null:a)},style:{fontSize:"10px",color:o.color,background:o.background,padding:"2px 6px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"3px",fontWeight:"500",cursor:"Independent"!==i?"pointer":"default",border:s?"1px solid ".concat(o.color):"1px solid transparent"},title:"Independent"!==i?"Click to see all ".concat(i," members"):"Independent airline",children:[(0,Ag.jsx)("span",{style:{fontSize:"9px"},children:o.icon}),i,"Independent"!==i&&(0,Ag.jsx)("span",{style:{fontSize:"7px",marginLeft:"1px"},children:"\u25bc"})]}),s&&l.length>0&&(0,Ag.jsxs)("div",{style:{position:"absolute",top:"100%",left:"0",marginTop:"4px",background:"#fff",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0,0,0,0.15)",border:"1px solid ".concat(o.color,"20"),zIndex:1e3,minWidth:"220px",maxHeight:"250px",overflowY:"auto"},onClick:e=>e.stopPropagation(),children:[(0,Ag.jsx)("div",{style:{padding:"10px 14px",borderBottom:"1px solid #eee",background:o.background,borderRadius:"12px 12px 0 0",position:"sticky",top:0},children:(0,Ag.jsxs)("div",{style:{fontWeight:"600",color:o.color,fontSize:"13px"},children:[o.icon," ",i]})}),(0,Ag.jsx)("div",{style:{padding:"6px 0"},children:l.map((t,n)=>{const r=Hg(e.airline,t);return(0,Ag.jsxs)("div",{style:{padding:"6px 14px",fontSize:"11px",color:"#333",display:"flex",alignItems:"center",gap:"6px",background:r?o.background:"transparent",fontWeight:r?"600":"normal"},children:[(0,Ag.jsx)("span",{style:{color:o.color},children:"\u2708"}),t,r&&(0,Ag.jsx)("span",{style:{fontSize:"9px",background:o.color,color:"#fff",padding:"2px 6px",borderRadius:"10px",marginLeft:"auto"},children:"YOUR FLIGHT"})]},n)})})]})]}),e.aircraftType&&"Unknown"!==e.aircraftType&&(0,Ag.jsx)("span",{style:{fontSize:"10px",color:"#555",background:"#f5f5f5",padding:"2px 6px",borderRadius:"6px"},children:e.aircraftType}),e.serviceClass&&(0,Ag.jsxs)("span",{style:{fontSize:"10px",color:"Economy"===e.serviceClass?"#8b6914":"Premium Economy"===e.serviceClass?"#166534":"Business"===e.serviceClass?"#1e40af":"#854d0e",background:"Economy"===e.serviceClass?"#fef3c7":"Premium Economy"===e.serviceClass?"#dcfce7":"Business"===e.serviceClass?"#dbeafe":"#fef9c3",padding:"2px 6px",borderRadius:"6px",fontWeight:"First"===e.serviceClass?"600":"normal"},children:["Economy"===e.serviceClass?"\ud83d\udc14":"Premium Economy"===e.serviceClass?"\ud83d\udcba":"Business"===e.serviceClass?"\ud83d\udcbc":"\ud83d\udc51"," ","Economy"===e.serviceClass?"Chicken":"Premium Economy"===e.serviceClass?"Prem":"Business"===e.serviceClass?"Biz":"First"]})]},n)}),(0,Ag.jsxs)("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #e5e5e5",fontSize:"11px",color:"#6b7280",display:"flex",justifyContent:"flex-end"},children:["Total: ",null===(r=t.distance)||void 0===r?void 0:r.toLocaleString()," mi"]})]})]},t.id)})})]},"".concat(e.origin,"-").concat(e.destination))})}),"country"===re&&(0,Ag.jsx)("div",{style:{display:"grid",gap:"24px"},children:ln.map(e=>{let{country:t,groups:n}=e;return(0,Ag.jsxs)("div",{children:[(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px",paddingBottom:"12px",borderBottom:"2px solid #fde68a"},children:[(0,Ag.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Ag.jsx)(Ft,{size:20,color:"#fff"})}),(0,Ag.jsxs)("div",{children:[(0,Ag.jsx)("h3",{style:{margin:0,fontSize:"18px",fontWeight:"700",color:"#1e293b"},children:t}),(0,Ag.jsxs)("p",{style:{margin:"2px 0 0 0",fontSize:"12px",color:"#64748b"},children:[n.length," route",n.length>1?"s":""," \u2022 ",n.reduce((e,t)=>e+t.flights.length,0)," flight",n.reduce((e,t)=>e+t.flights.length,0)>1?"s":""]})]})]}),(0,Ag.jsx)("div",{style:{display:"grid",gap:"16px",paddingLeft:"20px"},children:n.map(e=>(0,Ag.jsxs)("div",{style:{border:"1px solid #fde68a",borderRadius:"16px",padding:"20px",background:"#fffbeb"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:[(0,Ag.jsxs)("div",{children:[(0,Ag.jsxs)("span",{style:{fontSize:"18px",fontWeight:"bold"},children:[e.origin," \u2192 ",e.destination]}),(0,Ag.jsxs)("div",{style:{color:"#666",fontSize:"13px",marginTop:"4px"},children:[e.originCity," to ",e.destCity,e.distance&&(0,Ag.jsxs)("span",{style:{marginLeft:"10px",color:"#888"},children:["\u2022 ",e.distance.toLocaleString()," mi"]})]})]}),(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Ag.jsxs)("span",{style:{fontSize:"11px",color:"#92400e",background:"#fef3c7",padding:"4px 8px",borderRadius:"12px"},children:[e.flights.length," flight",e.flights.length>1?"s":""]}),(0,Ag.jsx)(qt,{size:14,style:{cursor:"pointer",color:"#666"},title:"Add return flight",onClick:()=>dn(e.flights[0])}),(0,Ag.jsx)(Kt,{size:14,style:{cursor:"pointer",color:"#666"},title:"Copy route",onClick:()=>un(e.flights[0])})]})]}),e.featuresCrossed&&e.featuresCrossed.length>0&&(0,Ag.jsx)("div",{style:{marginBottom:"12px",display:"flex",flexWrap:"wrap",gap:"6px"},children:e.featuresCrossed.map(e=>(0,Ag.jsxs)("span",{style:{fontSize:"10px",background:"#e0f2f1",color:"#004d40",padding:"3px 6px",borderRadius:"10px",display:"flex",alignItems:"center",gap:"3px",fontWeight:"600"},children:[(0,Ag.jsx)(Dt,{size:8})," ",e]},e))}),(0,Ag.jsx)("div",{style:{borderTop:"1px solid #fde68a",paddingTop:"12px"},children:e.flights.map((t,n)=>{const r=t.isRoundTrip?2:1,i=$e(t.distance||0,t.serviceClass||"Economy")*r,o=t.legs&&t.legs.length>1;return(0,Ag.jsx)("div",{style:{padding:"10px 0",borderBottom:n<e.flights.length-1?"1px solid #fef3c7":"none"},children:(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",flexWrap:"wrap"},children:[t.isRoundTrip?(0,Ag.jsxs)("span",{style:{fontWeight:"600",fontSize:"13px",minWidth:"85px"},children:[Zg(t.date)," \u21c4 ",Zg(t.returnDate)]}):(0,Ag.jsx)("span",{style:{fontWeight:"600",fontSize:"13px",minWidth:"85px"},children:Zg(t.date)}),t.isRoundTrip&&(0,Ag.jsx)("span",{style:{fontSize:"10px",color:"#16a34a",background:"#dcfce7",padding:"2px 6px",borderRadius:"8px",fontWeight:"600"},children:"\ud83d\udd04 R/T"}),o&&(0,Ag.jsxs)("span",{style:{fontSize:"10px",color:"#6366f1",background:"#eef2ff",padding:"2px 6px",borderRadius:"8px",fontWeight:"600"},children:[t.legs.length," LEGS",t.isRoundTrip?" \xd7 2":""]}),t.airline&&(0,Ag.jsx)("span",{style:{fontSize:"11px",color:"#555",background:"#fff",padding:"2px 6px",borderRadius:"6px"},children:t.airline}),t.aircraftType&&(0,Ag.jsx)("span",{style:{fontSize:"11px",color:"#888"},children:t.aircraftType}),(0,Ag.jsxs)("span",{style:{fontSize:"10px",padding:"2px 6px",borderRadius:"6px",background:"Economy"===t.serviceClass?"#fef3c7":"Business"===t.serviceClass?"#dbeafe":"First"===t.serviceClass?"#fef9c3":"#dcfce7",color:"Economy"===t.serviceClass?"#92400e":"Business"===t.serviceClass?"#1e40af":"First"===t.serviceClass?"#854d0e":"#166534"},children:["Economy"===t.serviceClass?"\ud83d\udc14":"Business"===t.serviceClass?"\ud83d\udcbc":"First"===t.serviceClass?"\ud83d\udc51":"\ud83d\udcba"," ","Economy"===t.serviceClass?"Chicken":t.serviceClass]}),(0,Ag.jsxs)("span",{style:{fontSize:"10px",color:"#dc2626",background:"#fef2f2",padding:"2px 6px",borderRadius:"6px"},children:[(0,Ag.jsx)(Ut,{size:10,style:{verticalAlign:"middle"}})," ",Math.round(i)," kg"]}),t.paymentAmount&&(0,Ag.jsx)("span",{style:{fontSize:"10px",color:"miles"===t.paymentType?"#2563eb":"#16a34a",background:"miles"===t.paymentType?"#eff6ff":"#f0fdf4",padding:"2px 6px",borderRadius:"6px"},children:"miles"===t.paymentType?"\u2708\ufe0f ".concat(parseInt(t.paymentAmount).toLocaleString()," mi"):"\ud83d\udcb5 $".concat(parseFloat(t.paymentAmount).toLocaleString())})]}),(0,Ag.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,Ag.jsx)(Et,{size:14,style:{cursor:"pointer",color:"#888"},onClick:()=>hn(t)}),(0,Ag.jsx)(It,{size:14,style:{cursor:"pointer",color:"#ef4444"},onClick:()=>fn(t.id)})]})]})},t.id)})})]},"".concat(e.origin,"-").concat(e.destination)))})]},t)})}),"continent"===re&&(0,Ag.jsx)("div",{style:{display:"grid",gap:"24px"},children:cn.map(e=>{let{continent:t,groups:n}=e;return(0,Ag.jsxs)("div",{children:[(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px",paddingBottom:"12px",borderBottom:"2px solid #bfdbfe"},children:[(0,Ag.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Ag.jsx)(Dt,{size:20,color:"#fff"})}),(0,Ag.jsxs)("div",{children:[(0,Ag.jsx)("h3",{style:{margin:0,fontSize:"18px",fontWeight:"700",color:"#1e293b"},children:t}),(0,Ag.jsxs)("p",{style:{margin:"2px 0 0 0",fontSize:"12px",color:"#64748b"},children:[n.length," route",n.length>1?"s":""," \u2022 ",n.reduce((e,t)=>e+t.flights.length,0)," flight",n.reduce((e,t)=>e+t.flights.length,0)>1?"s":""]})]})]}),(0,Ag.jsx)("div",{style:{display:"grid",gap:"16px",paddingLeft:"20px"},children:n.map(e=>(0,Ag.jsxs)("div",{style:{border:"1px solid #bfdbfe",borderRadius:"16px",padding:"20px",background:"#eff6ff"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:[(0,Ag.jsxs)("div",{children:[(0,Ag.jsxs)("span",{style:{fontSize:"18px",fontWeight:"bold"},children:[e.origin," \u2192 ",e.destination]}),(0,Ag.jsxs)("div",{style:{color:"#666",fontSize:"13px",marginTop:"4px"},children:[e.originCity," to ",e.destCity,e.distance&&(0,Ag.jsxs)("span",{style:{marginLeft:"10px",color:"#888"},children:["\u2022 ",e.distance.toLocaleString()," mi"]})]}),(e.originCountry||e.destCountry)&&(0,Ag.jsxs)("div",{style:{fontSize:"11px",color:"#64748b",marginTop:"4px"},children:["\ud83c\udff3\ufe0f ",[e.originCountry,e.destCountry].filter(Boolean).filter((e,t,n)=>n.indexOf(e)===t).join(" \u2194 ")]})]}),(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Ag.jsxs)("span",{style:{fontSize:"11px",color:"#1e40af",background:"#dbeafe",padding:"4px 8px",borderRadius:"12px"},children:[e.flights.length," flight",e.flights.length>1?"s":""]}),(0,Ag.jsx)(qt,{size:14,style:{cursor:"pointer",color:"#666"},title:"Add return flight",onClick:()=>dn(e.flights[0])}),(0,Ag.jsx)(Kt,{size:14,style:{cursor:"pointer",color:"#666"},title:"Copy route",onClick:()=>un(e.flights[0])})]})]}),e.featuresCrossed&&e.featuresCrossed.length>0&&(0,Ag.jsx)("div",{style:{marginBottom:"12px",display:"flex",flexWrap:"wrap",gap:"6px"},children:e.featuresCrossed.map(e=>(0,Ag.jsxs)("span",{style:{fontSize:"10px",background:"#e0f2f1",color:"#004d40",padding:"3px 6px",borderRadius:"10px",display:"flex",alignItems:"center",gap:"3px",fontWeight:"600"},children:[(0,Ag.jsx)(Dt,{size:8})," ",e]},e))}),(0,Ag.jsx)("div",{style:{borderTop:"1px solid #bfdbfe",paddingTop:"12px"},children:e.flights.map((t,n)=>{const r=t.isRoundTrip?2:1,i=$e(t.distance||0,t.serviceClass||"Economy")*r,o=t.legs&&t.legs.length>1;return(0,Ag.jsx)("div",{style:{padding:"10px 0",borderBottom:n<e.flights.length-1?"1px solid #dbeafe":"none"},children:(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",flexWrap:"wrap"},children:[t.isRoundTrip?(0,Ag.jsxs)("span",{style:{fontWeight:"600",fontSize:"13px",minWidth:"85px"},children:[Zg(t.date)," \u21c4 ",Zg(t.returnDate)]}):(0,Ag.jsx)("span",{style:{fontWeight:"600",fontSize:"13px",minWidth:"85px"},children:Zg(t.date)}),t.isRoundTrip&&(0,Ag.jsx)("span",{style:{fontSize:"10px",color:"#16a34a",background:"#dcfce7",padding:"2px 6px",borderRadius:"8px",fontWeight:"600"},children:"\ud83d\udd04 R/T"}),o&&(0,Ag.jsxs)("span",{style:{fontSize:"10px",color:"#6366f1",background:"#eef2ff",padding:"2px 6px",borderRadius:"8px",fontWeight:"600"},children:[t.legs.length," LEGS",t.isRoundTrip?" \xd7 2":""]}),t.airline&&(0,Ag.jsx)("span",{style:{fontSize:"11px",color:"#555",background:"#fff",padding:"2px 6px",borderRadius:"6px"},children:t.airline}),t.aircraftType&&(0,Ag.jsx)("span",{style:{fontSize:"11px",color:"#888"},children:t.aircraftType}),(0,Ag.jsxs)("span",{style:{fontSize:"10px",padding:"2px 6px",borderRadius:"6px",background:"Economy"===t.serviceClass?"#fef3c7":"Business"===t.serviceClass?"#dbeafe":"First"===t.serviceClass?"#fef9c3":"#dcfce7",color:"Economy"===t.serviceClass?"#92400e":"Business"===t.serviceClass?"#1e40af":"First"===t.serviceClass?"#854d0e":"#166534"},children:["Economy"===t.serviceClass?"\ud83d\udc14":"Business"===t.serviceClass?"\ud83d\udcbc":"First"===t.serviceClass?"\ud83d\udc51":"\ud83d\udcba"," ","Economy"===t.serviceClass?"Chicken":t.serviceClass]}),(0,Ag.jsxs)("span",{style:{fontSize:"10px",color:"#dc2626",background:"#fef2f2",padding:"2px 6px",borderRadius:"6px"},children:[(0,Ag.jsx)(Ut,{size:10,style:{verticalAlign:"middle"}})," ",Math.round(i)," kg"]}),t.paymentAmount&&(0,Ag.jsx)("span",{style:{fontSize:"10px",color:"miles"===t.paymentType?"#2563eb":"#16a34a",background:"miles"===t.paymentType?"#eff6ff":"#f0fdf4",padding:"2px 6px",borderRadius:"6px"},children:"miles"===t.paymentType?"\u2708\ufe0f ".concat(parseInt(t.paymentAmount).toLocaleString()," mi"):"\ud83d\udcb5 $".concat(parseFloat(t.paymentAmount).toLocaleString())})]}),(0,Ag.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,Ag.jsx)(Et,{size:14,style:{cursor:"pointer",color:"#888"},onClick:()=>hn(t)}),(0,Ag.jsx)(It,{size:14,style:{cursor:"pointer",color:"#ef4444"},onClick:()=>fn(t.id)})]})]})},t.id)})})]},"".concat(e.origin,"-").concat(e.destination)))})]},t)})}),w&&(0,Ag.jsx)("div",{style:im,children:(0,Ag.jsxs)("div",{style:ht(ht({},om),{},{maxWidth:"450px",maxHeight:"90vh",overflowY:"auto"}),children:[(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,Ag.jsx)("h2",{style:{margin:0},children:fe?"Edit Flight":"Log Flight"}),(0,Ag.jsx)(bt,{style:{cursor:"pointer"},onClick:()=>{S(!1),pe(null),Ie({origin:"",destination:"",date:"",returnDate:"",aircraftType:"",airline:"",serviceClass:"Economy",checkLandmarks:!1,hasLayover:!1,isRoundTrip:!1,viaAirports:[""],legAirlines:["",""],legAircraftTypes:["",""],legServiceClasses:["Economy","Economy"],paymentType:"money",paymentAmount:""}),Re([]),Pe(null)}})]}),ge?(0,Ag.jsxs)("div",{style:{textAlign:"center",padding:"40px"},children:[(0,Ag.jsx)(kt,{className:"animate-spin",size:40,style:{marginBottom:"20px"}}),(0,Ag.jsx)("div",{children:_e.checkLandmarks?"Analyzing route & landmarks...":"Saving flight..."}),(0,Ag.jsx)("div",{style:{fontSize:"12px",color:"#666",marginTop:"10px"},children:ye})]}):(0,Ag.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),console.log("Form submission - isRoundTrip:",_e.isRoundTrip,"returnDate:",_e.returnDate);const t=ht(ht({},_e),{},{id:fe?fe.id:null});console.log("Data to save:",t.origin,t.destination,"isRoundTrip:",t.isRoundTrip),Qe(t)},style:{display:"grid",gap:"15px"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[(0,Ag.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,Ag.jsx)("input",{placeholder:"From (code or city)",required:!0,value:_e.origin,onChange:e=>{const t=e.target.value.toUpperCase();Ie(ht(ht({},_e),{},{origin:t})),Re(Ug(t)),Pe("origin")},onFocus:()=>{Re(Ug(_e.origin)),Pe("origin")},onBlur:()=>setTimeout(()=>{"origin"===Ne&&Re([])},200),style:ht(ht({},rm),{},{width:"100%",textAlign:"center",fontWeight:"bold"})}),"origin"===Ne&&Oe.length>0&&(0,Ag.jsx)("div",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:100,background:"#fff",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxHeight:"200px",overflowY:"auto"},children:Oe.map(e=>(0,Ag.jsxs)("div",{onClick:()=>{Ie(ht(ht({},_e),{},{origin:e.code})),Re([]),Pe(null)},style:{padding:"10px 12px",cursor:"pointer",borderBottom:"1px solid #f0f0f0",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:e=>e.target.style.background="#f5f5f5",onMouseLeave:e=>e.target.style.background="#fff",children:[(0,Ag.jsxs)("div",{children:[(0,Ag.jsx)("span",{style:{fontWeight:"bold",color:"#333"},children:e.code}),(0,Ag.jsx)("span",{style:{color:"#666",marginLeft:"8px",fontSize:"13px"},children:e.city})]}),(0,Ag.jsx)("span",{style:{fontSize:"11px",color:"#999"},children:e.country})]},e.code))})]}),(0,Ag.jsx)("button",{type:"button",onClick:()=>{Ie(ht(ht({},_e),{},{origin:_e.destination,destination:_e.origin})),Re([]),Pe(null)},title:"Swap origin and destination",style:{background:"#f3f4f6",border:"1px solid #e5e7eb",borderRadius:"8px",width:"42px",height:"42px",minWidth:"42px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="#e5e7eb",e.currentTarget.style.borderColor="#d1d5db"},onMouseLeave:e=>{e.currentTarget.style.background="#f3f4f6",e.currentTarget.style.borderColor="#e5e7eb"},children:(0,Ag.jsx)(qt,{size:18,color:"#6b7280"})}),(0,Ag.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,Ag.jsx)("input",{placeholder:"To (code or city)",required:!0,value:_e.destination,onChange:e=>{const t=e.target.value.toUpperCase();Ie(ht(ht({},_e),{},{destination:t})),Re(Ug(t)),Pe("destination")},onFocus:()=>{Re(Ug(_e.destination)),Pe("destination")},onBlur:()=>setTimeout(()=>{"destination"===Ne&&Re([])},200),style:ht(ht({},rm),{},{width:"100%",textAlign:"center",fontWeight:"bold"})}),"destination"===Ne&&Oe.length>0&&(0,Ag.jsx)("div",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:100,background:"#fff",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxHeight:"200px",overflowY:"auto"},children:Oe.map(e=>(0,Ag.jsxs)("div",{onClick:()=>{Ie(ht(ht({},_e),{},{destination:e.code})),Re([]),Pe(null)},style:{padding:"10px 12px",cursor:"pointer",borderBottom:"1px solid #f0f0f0",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:e=>e.target.style.background="#f5f5f5",onMouseLeave:e=>e.target.style.background="#fff",children:[(0,Ag.jsxs)("div",{children:[(0,Ag.jsx)("span",{style:{fontWeight:"bold",color:"#333"},children:e.code}),(0,Ag.jsx)("span",{style:{color:"#666",marginLeft:"8px",fontSize:"13px"},children:e.city})]}),(0,Ag.jsx)("span",{style:{fontSize:"11px",color:"#999"},children:e.country})]},e.code))})]})]}),(0,Ag.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",fontSize:"14px",color:"#555",padding:"10px 12px",background:_e.hasLayover?"#f0f9ff":"#f9f9f9",borderRadius:"8px",border:_e.hasLayover?"1px solid #3b82f6":"1px solid #eee"},children:[(0,Ag.jsx)("input",{type:"checkbox",checked:_e.hasLayover,onChange:e=>{const t=e.target.checked;Ie(ht(ht({},_e),{},{hasLayover:t,viaAirports:[""],legAirlines:["",""],legAircraftTypes:["",""],legServiceClasses:["Economy","Economy"],airline:t?"":_e.airline}))},style:{width:"18px",height:"18px",cursor:"pointer"}}),(0,Ag.jsx)("span",{children:"Has connection/layover"})]}),_e.hasLayover&&(0,Ag.jsxs)("div",{style:{background:"#f8fafc",padding:"15px",borderRadius:"12px",border:"1px dashed #cbd5e1"},children:[(0,Ag.jsx)("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"12px",fontWeight:"600"},children:"CONNECTION AIRPORTS"}),_e.viaAirports.map((e,t)=>(0,Ag.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"10px",alignItems:"center"},children:[(0,Ag.jsxs)("span",{style:{fontSize:"11px",color:"#94a3b8",minWidth:"50px"},children:["Via ",t+1,":"]}),(0,Ag.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,Ag.jsx)("input",{placeholder:"Connection ".concat(t+1," (code or city)"),value:e,onChange:e=>{const n=e.target.value.toUpperCase(),r=[..._e.viaAirports];r[t]=n;const i=[..._e.legAirlines],o=[..._e.legAircraftTypes],a=[..._e.legServiceClasses];for(;i.length<r.length+1;)i.push(""),o.push(""),a.push("Economy");Ie(ht(ht({},_e),{},{viaAirports:r,legAirlines:i,legAircraftTypes:o,legServiceClasses:a})),Re(Ug(n)),Pe("via-".concat(t))},onFocus:()=>{Re(Ug(e)),Pe("via-".concat(t))},onBlur:()=>setTimeout(()=>{Ne==="via-".concat(t)&&Re([])},200),style:ht(ht({},rm),{},{width:"100%",fontSize:"13px",padding:"10px"})}),Ne==="via-".concat(t)&&Oe.length>0&&(0,Ag.jsx)("div",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:100,background:"#fff",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxHeight:"160px",overflowY:"auto"},children:Oe.map(e=>(0,Ag.jsxs)("div",{onClick:()=>{const n=[..._e.viaAirports];n[t]=e.code,Ie(ht(ht({},_e),{},{viaAirports:n})),Re([]),Pe(null)},style:{padding:"8px 12px",cursor:"pointer",borderBottom:"1px solid #f0f0f0",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"13px"},onMouseEnter:e=>e.target.style.background="#f5f5f5",onMouseLeave:e=>e.target.style.background="#fff",children:[(0,Ag.jsxs)("div",{children:[(0,Ag.jsx)("span",{style:{fontWeight:"bold",color:"#333"},children:e.code}),(0,Ag.jsx)("span",{style:{color:"#666",marginLeft:"6px"},children:e.city})]}),(0,Ag.jsx)("span",{style:{fontSize:"10px",color:"#999"},children:e.country})]},e.code))})]}),_e.viaAirports.length>1&&(0,Ag.jsx)("button",{type:"button",onClick:()=>{const e=_e.viaAirports.filter((e,n)=>n!==t),n=_e.legAirlines.filter((e,n)=>n!==t+1),r=_e.legAircraftTypes.filter((e,n)=>n!==t+1),i=_e.legServiceClasses.filter((e,n)=>n!==t+1);Ie(ht(ht({},_e),{},{viaAirports:e,legAirlines:n,legAircraftTypes:r,legServiceClasses:i}))},style:{background:"#fee2e2",color:"#dc2626",border:"none",borderRadius:"6px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center"},children:(0,Ag.jsx)(It,{size:14})})]},t)),(0,Ag.jsxs)("button",{type:"button",onClick:()=>{Ie(ht(ht({},_e),{},{viaAirports:[..._e.viaAirports,""],legAirlines:[..._e.legAirlines,""],legAircraftTypes:[..._e.legAircraftTypes,""],legServiceClasses:[..._e.legServiceClasses,"Economy"]}))},style:{background:"#e0f2fe",color:"#0369a1",border:"none",borderRadius:"6px",padding:"8px 12px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"6px",marginTop:"5px"},children:[(0,Ag.jsx)(yt,{size:14})," Add another connection"]})]}),_e.hasLayover?(0,Ag.jsxs)("div",{style:{background:"#fefce8",padding:"15px",borderRadius:"12px",border:"1px dashed #fde047"},children:[(0,Ag.jsx)("div",{style:{fontSize:"12px",color:"#a16207",marginBottom:"12px",fontWeight:"600"},children:"FLIGHT DETAILS PER LEG"}),(()=>{const e=_e.viaAirports.filter(e=>e.trim()),t=[_e.origin,...e,_e.destination].filter(e=>e),n=[];for(let r=0;r<t.length-1;r++)t[r]&&t[r+1]&&n.push({from:t[r],to:t[r+1],idx:r});return n.map((e,t)=>(0,Ag.jsxs)("div",{style:{marginBottom:t<n.length-1?"16px":"0",paddingBottom:t<n.length-1?"16px":"0",borderBottom:t<n.length-1?"1px dashed #fde047":"none"},children:[(0,Ag.jsxs)("div",{style:{fontSize:"12px",color:"#92400e",fontWeight:"600",marginBottom:"10px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,Ag.jsxs)("span",{style:{background:"#fbbf24",color:"#78350f",padding:"2px 8px",borderRadius:"10px",fontSize:"10px"},children:["LEG ",t+1]}),e.from," \u2192 ",e.to]}),(0,Ag.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[(0,Ag.jsx)("input",{placeholder:"Airline",value:_e.legAirlines[t]||"",onChange:e=>{const n=[..._e.legAirlines];n[t]=e.target.value,Ie(ht(ht({},_e),{},{legAirlines:n}))},style:ht(ht({},rm),{},{fontSize:"13px",padding:"10px"})}),(0,Ag.jsx)("input",{placeholder:"Aircraft",value:_e.legAircraftTypes[t]||"",onChange:e=>{const n=[..._e.legAircraftTypes];n[t]=e.target.value,Ie(ht(ht({},_e),{},{legAircraftTypes:n}))},style:ht(ht({},rm),{},{fontSize:"13px",padding:"10px"})})]}),(0,Ag.jsx)("div",{style:{marginTop:"8px"},children:(0,Ag.jsx)("select",{value:_e.legServiceClasses[t]||"Economy",onChange:e=>{const n=[..._e.legServiceClasses];n[t]=e.target.value,Ie(ht(ht({},_e),{},{legServiceClasses:n}))},style:ht(ht({},rm),{},{fontSize:"13px",padding:"10px",width:"100%"}),children:Bg.map(e=>(0,Ag.jsx)("option",{value:e,children:"Economy"===e?"\ud83d\udc14 Chicken class":"Premium Economy"===e?"\ud83d\udcba Premium Economy":"Business"===e?"\ud83d\udcbc Business":"\ud83d\udc51 First"},e))})})]},t))})()]}):(0,Ag.jsxs)(Ag.Fragment,{children:[(0,Ag.jsx)("input",{placeholder:"Airline (e.g. United, Delta)",value:_e.airline,onChange:e=>Ie(ht(ht({},_e),{},{airline:e.target.value})),style:rm}),(0,Ag.jsx)("input",{placeholder:"Aircraft (e.g. Boeing 737)",value:_e.aircraftType,onChange:e=>Ie(ht(ht({},_e),{},{aircraftType:e.target.value})),style:rm}),(0,Ag.jsx)("select",{value:_e.serviceClass,onChange:e=>Ie(ht(ht({},_e),{},{serviceClass:e.target.value})),style:rm,children:Bg.map(e=>(0,Ag.jsx)("option",{value:e,children:"Economy"===e?"\ud83d\udc14 Chicken class":"Premium Economy"===e?"\ud83d\udcba Premium Economy":"Business"===e?"\ud83d\udcbc Business":"\ud83d\udc51 First"},e))})]}),(0,Ag.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[(0,Ag.jsxs)("div",{style:{flex:1},children:[(0,Ag.jsx)("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:_e.isRoundTrip?"Departure Date":"Flight Date"}),(0,Ag.jsx)("input",{type:"date",required:!0,value:_e.date,onChange:e=>Ie(ht(ht({},_e),{},{date:e.target.value})),style:rm})]}),_e.isRoundTrip&&(0,Ag.jsxs)("div",{style:{flex:1},children:[(0,Ag.jsx)("div",{style:{fontSize:"11px",color:"#888",marginBottom:"4px"},children:"Return Date"}),(0,Ag.jsx)("input",{type:"date",required:!0,value:_e.returnDate,onChange:e=>Ie(ht(ht({},_e),{},{returnDate:e.target.value})),style:rm})]})]}),(!fe||_e.isRoundTrip)&&(0,Ag.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:fe?"default":"pointer",fontSize:"14px",color:"#555",background:_e.isRoundTrip?"#ecfdf5":"#f8fafc",padding:"10px 12px",borderRadius:"8px",border:_e.isRoundTrip?"1px solid #10b981":"1px solid #e2e8f0",opacity:fe&&_e.isRoundTrip?.8:1},children:[(0,Ag.jsx)("input",{type:"checkbox",checked:_e.isRoundTrip,onChange:e=>Ie(ht(ht({},_e),{},{isRoundTrip:e.target.checked,returnDate:e.target.checked?_e.returnDate:""})),style:{width:"18px",height:"18px",cursor:fe?"default":"pointer"},disabled:fe}),(0,Ag.jsxs)("span",{style:{fontWeight:_e.isRoundTrip?"600":"normal",color:_e.isRoundTrip?"#059669":"#555"},children:["\ud83d\udd04 Round trip ",fe&&_e.isRoundTrip?"(2 flights)":"(adds return flight automatically)"]})]}),(0,Ag.jsxs)("div",{style:{background:"#fafafa",padding:"15px",borderRadius:"12px",border:"1px solid #eee"},children:[(0,Ag.jsx)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"10px",fontWeight:"600"},children:"PAYMENT (optional)"}),(0,Ag.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[(0,Ag.jsxs)("select",{value:_e.paymentType,onChange:e=>Ie(ht(ht({},_e),{},{paymentType:e.target.value})),style:ht(ht({},rm),{},{padding:"10px",fontSize:"13px",minWidth:"100px"}),children:[(0,Ag.jsx)("option",{value:"money",children:"\ud83d\udcb5 Money"}),(0,Ag.jsx)("option",{value:"miles",children:"\u2708\ufe0f Miles"})]}),(0,Ag.jsx)("input",{type:"number",placeholder:"money"===_e.paymentType?"Amount ($)":"Miles used",value:_e.paymentAmount,onChange:e=>Ie(ht(ht({},_e),{},{paymentAmount:e.target.value})),style:ht(ht({},rm),{},{flex:1,padding:"10px",fontSize:"13px"}),min:"0",step:"money"===_e.paymentType?"0.01":"1"})]})]}),(0,Ag.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",fontSize:"14px",color:"#555"},children:[(0,Ag.jsx)("input",{type:"checkbox",checked:_e.checkLandmarks,onChange:e=>Ie(ht(ht({},_e),{},{checkLandmarks:e.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),(0,Ag.jsx)("span",{children:"Detect landmarks along route"})]}),(0,Ag.jsxs)("button",{type:"submit",style:{background:"#000",color:"#fff",padding:"12px",borderRadius:"8px",border:"none",fontWeight:"bold",cursor:"pointer"},children:[fe?_e.isRoundTrip?"Update Round Trip":"Update Flight":_e.isRoundTrip?"Save Round Trip":_e.checkLandmarks?"Save & Analyze":"Save Flight",_e.hasLayover&&_e.viaAirports.filter(e=>e.trim()).length>0&&(0,Ag.jsxs)("span",{style:{marginLeft:"8px",opacity:.8},children:["(",_e.viaAirports.filter(e=>e.trim()).length+1," legs",_e.isRoundTrip?" \xd7 2":"",")"]})]})]})]})})]}):(0,Ag.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"sans-serif",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 50%, #f0fdf4 100%)",padding:"20px"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"40px"},children:[(0,Ag.jsxs)("div",{style:{width:"120px",height:"120px",borderRadius:"30px",background:"linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 20px 60px rgba(16, 185, 129, 0.4)",marginBottom:"24px",position:"relative",overflow:"hidden"},children:[(0,Ag.jsx)("div",{style:{position:"absolute",top:"-20px",left:"-20px",right:"-20px",bottom:"-20px",background:"radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 50%)"}}),(0,Ag.jsx)(mt,{size:56,color:"#fff",style:{transform:"rotate(-30deg)"}})]}),(0,Ag.jsx)("h1",{style:{fontSize:"42px",fontWeight:"800",margin:"0 0 8px 0",background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"FlightLog"}),(0,Ag.jsx)("p",{style:{fontSize:"18px",color:"#64748b",margin:"0 0 8px 0",textAlign:"center"},children:"Track your journeys across the sky"}),(0,Ag.jsx)("span",{style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",color:"#fff",fontSize:"11px",fontWeight:"700",padding:"4px 12px",borderRadius:"20px",textTransform:"uppercase",letterSpacing:"1px"},children:"Beta"})]}),(0,Ag.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"16px",marginBottom:"40px",maxWidth:"600px"},children:[{icon:"\u2708\ufe0f",text:"Log all your flights"},{icon:"\ud83c\udf0d",text:"Track countries & continents"},{icon:"\ud83d\udcca",text:"View travel statistics"},{icon:"\ud83c\udfc6",text:"Compete on leaderboards"},{icon:"\ud83c\udf31",text:"Monitor carbon footprint"},{icon:"\ud83d\udce7",text:"Import from Gmail"}].map((e,t)=>(0,Ag.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"#fff",padding:"10px 16px",borderRadius:"25px",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",fontSize:"14px",color:"#475569"},children:[(0,Ag.jsx)("span",{style:{fontSize:"16px"},children:e.icon}),e.text]},t))}),(0,Ag.jsxs)("button",{onClick:pn,style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",border:"none",padding:"18px 48px",borderRadius:"16px",fontSize:"18px",fontWeight:"700",cursor:"pointer",boxShadow:"0 10px 40px rgba(16, 185, 129, 0.4)",transition:"transform 0.2s ease, box-shadow 0.2s ease",display:"flex",alignItems:"center",gap:"12px"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 14px 50px rgba(16, 185, 129, 0.5)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 10px 40px rgba(16, 185, 129, 0.4)"},children:[(0,Ag.jsx)(yt,{size:22}),"Start Adding Your Flights"]}),(0,Ag.jsxs)("p",{style:{marginTop:"20px",fontSize:"14px",color:"#64748b",display:"flex",alignItems:"center",gap:"6px"},children:[(0,Ag.jsx)(vt,{size:16,color:"#10b981"}),(0,Ag.jsx)("strong",{style:{color:"#10b981"},children:"100% FREE"})," to sign up and track unlimited flights"]}),(0,Ag.jsx)("button",{onClick:()=>{localStorage.setItem("landingDismissed","true"),ae(!1),Ue("login")},style:{background:"transparent",border:"none",color:"#6366f1",fontSize:"14px",cursor:"pointer",marginTop:"16px",textDecoration:"underline"},children:"Already have an account? Log in"}),(0,Ag.jsx)("button",{onClick:()=>{localStorage.setItem("landingDismissed","true"),ae(!1)},style:{background:"transparent",border:"none",color:"#94a3b8",fontSize:"13px",cursor:"pointer",marginTop:"12px"},children:"Continue without account"}),s&&(0,Ag.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,Ag.jsxs)("div",{style:{background:"#fff",borderRadius:"16px",padding:"32px",width:"100%",maxWidth:"400px",margin:"20px",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[(0,Ag.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[(0,Ag.jsx)("h2",{style:{margin:0},children:"login"===c?"Welcome Back":"Create Free Account"}),(0,Ag.jsx)(bt,{style:{cursor:"pointer"},onClick:()=>l(!1)})]}),"signup"===c&&(0,Ag.jsxs)("div",{style:{background:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"8px",padding:"12px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px",fontSize:"13px",color:"#166534"},children:[(0,Ag.jsx)(vt,{size:16}),"Free forever \u2022 Unlimited flights \u2022 Full features"]}),g&&(0,Ag.jsxs)("div",{style:{background:"#fef2f2",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[(0,Ag.jsx)(xt,{size:18}),g]}),(0,Ag.jsxs)("form",{onSubmit:Be,children:[(0,Ag.jsx)("input",{type:"email",placeholder:"Email address",value:d,onChange:e=>h(e.target.value),required:!0,style:{width:"100%",padding:"14px",borderRadius:"10px",border:"1px solid #e2e8f0",marginBottom:"12px",fontSize:"15px",boxSizing:"border-box"}}),(0,Ag.jsxs)("div",{style:{position:"relative"},children:[(0,Ag.jsx)("input",{type:y?"text":"password",placeholder:"Password",value:f,onChange:e=>p(e.target.value),required:!0,style:{width:"100%",padding:"14px",paddingRight:"50px",borderRadius:"10px",border:"1px solid #e2e8f0",marginBottom:"20px",fontSize:"15px",boxSizing:"border-box"}}),(0,Ag.jsx)("button",{type:"button",onClick:()=>v(!y),style:{position:"absolute",right:"14px",top:"14px",background:"none",border:"none",cursor:"pointer",color:"#666"},children:y?(0,Ag.jsx)(wt,{size:20}):(0,Ag.jsx)(St,{size:20})})]}),(0,Ag.jsx)("button",{type:"submit",style:{width:"100%",padding:"14px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",border:"none",borderRadius:"10px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:"login"===c?"Log In":"Create Free Account"})]}),(0,Ag.jsxs)("p",{style:{textAlign:"center",marginTop:"20px",fontSize:"14px",color:"#666"},children:["login"===c?"Don't have an account? ":"Already have an account? ",(0,Ag.jsx)("button",{onClick:()=>u("login"===c?"signup":"login"),style:{background:"none",border:"none",color:"#10b981",cursor:"pointer",fontWeight:"600",fontSize:"14px"},children:"login"===c?"Sign up free":"Log in"})]})]})})]})};ct.createRoot(document.getElementById("root")).render((0,Ag.jsx)(e.StrictMode,{children:(0,Ag.jsx)(am,{})}))})()})();
//# sourceMappingURL=main.b9d6f1ba.js.map