/*! For license information please see main.e0c30f8a.js.LICENSE.txt */
(()=>{"use strict";var e={43(e,t,n){e.exports=n(202)},153(e,t,n){var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},202(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,g(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,k={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,i)&&!C.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:k.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+A(l,0):o,w(a)?(i="",null!=e&&(i=e.replace(_,"$&/")+"/"),I(a,t,i,"",function(e){return e})):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(_,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var u=o+A(s=e[c],c);l+=I(s,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=I(s=s.value,t,i,u=o+A(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},P={transition:null},O={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:P,ReactCurrentOwner:k};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return N(e,function(){t++}),t},toArray:function(e){return N(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=k.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.3.1"},234(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(m=!1,x(e),!g)if(null!==r(c))g=!0,P(S);else{var t=r(u);null!==t&&O(w,t.startTime-e)}}function S(e,n){g=!1,m&&(m=!1,v(T),T=-1),p=!0;var o=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),x(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&O(w,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,C=!1,E=null,T=-1,_=5,A=-1;function I(){return!(t.unstable_now()-A<_)}function N(){if(null!==E){var e=t.unstable_now();A=e;var n=!0;try{n=E(!0,e)}finally{n?k():(C=!1,E=null)}}else C=!1}if("function"===typeof b)k=function(){b(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,L=R.port2;R.port1.onmessage=N,k=function(){L.postMessage(null)}}else k=function(){y(N,0)};function P(e){E=e,C||(C=!0,k())}function O(e,n){T=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,P(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(m?(v(T),T=-1):m=!0,O(w,o-a))):(e.sortIndex=s,n(c,e),g||p||(g=!0,P(S))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391(e,t,n){var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579(e,t,n){e.exports=n(153)},730(e,t,n){var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),_=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var j,M=Object.assign;function F(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case S:return"Portal";case E:return"Profiler";case C:return"StrictMode";case I:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(wo){return e.body}}function J(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,ke=null,Ce=null;function Ee(e){if(e=bi(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=wi(t),Se(e.stateNode,e.type,t))}}function Te(e){ke?Ce?Ce.push(e):Ce=[e]:ke=e}function _e(){if(ke){var e=ke,t=Ce;if(Ce=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ae(e,t){return e(t)}function Ie(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ae(e,t,n)}finally{Ne=!1,(null!==ke||null!==Ce)&&(Ie(),_e())}}function Le(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Pe=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Pe=!1}function De(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var je=!1,Me=null,Fe=!1,ze=null,Ue={onError:function(e){je=!0,Me=e}};function Ve(e,t,n,r,i,o,a,s,l){je=!1,Me=null,De.apply(Ue,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(o(188))}function qe(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),null!==e?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=dt(s):0!==(o&=a)&&(r=dt(o))}else 0!==(a=n&~i)?r=dt(a):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,kt,Ct,Et,Tt=!1,_t=[],At=null,It=null,Nt=null,Rt=new Map,Lt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function jt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Et(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Tt=!1,null!==At&&Ft(At)&&(At=null),null!==It&&Ft(It)&&(It=null),null!==Nt&&Ft(Nt)&&(Nt=null),Rt.forEach(zt),Lt.forEach(zt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Bt(e){function t(t){return Vt(t,e)}if(0<_t.length){Vt(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Vt(At,e),null!==It&&Vt(It,e),null!==Nt&&Vt(Nt,e),Rt.forEach(t),Lt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var Wt=x.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function Kt(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function Gt(e,t,n,r){if(Ht){var i=Jt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=jt(At,e,t,n,r,i),!0;case"dragenter":return It=jt(It,e,t,n,r,i),!0;case"mouseover":return Nt=jt(Nt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Rt.set(o,jt(Rt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Lt.set(o,jt(Lt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&wt(o),null===(o=Jt(e,t,n,r))&&Hr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Jt(e,t,n,r){if(Qt=null,null!==(e=vi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=M({},cn,{view:0,detail:0}),hn=on(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),gn=on(M({},fn,{dataTransfer:0})),mn=on(M({},dn,{relatedTarget:0})),yn=on(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),xn=on(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Cn}var Tn=M({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_n=on(Tn),An=on(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=on(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=on(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=on(Rn),Pn=[9,13,27,32],On=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var jn=u&&"TextEvent"in window&&!Dn,Mn=u&&(!On||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function qn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Fr(e,0)}function Jn(e){if(G(xi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Xn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Jn(Gn)){var t=[];qn(t,Gn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Gn)}function or(e,t){if("click"===e)return Jn(t)}function ar(e,t){if("input"===e||"change"===e)return Jn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Cr={};function Er(e){if(kr[e])return kr[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return kr[e]=n[t];return e}u&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Tr=Er("animationend"),_r=Er("animationiteration"),Ar=Er("animationstart"),Ir=Er("transitionend"),Nr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){Nr.set(e,t),l(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Or=Rr[Pr];Lr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Lr(Tr,"onAnimationEnd"),Lr(_r,"onAnimationIteration"),Lr(Ar,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,c){if(Ve.apply(this,arguments),je){if(!je)throw Error(o(198));var u=Me;je=!1,Me=null,Fe||(Fe=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,s,c),o=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function zr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Vr]){e[Vr]=!0,a.forEach(function(t){"selectionchange"!==t&&(jr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Ur("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Yt(t)){case 1:var i=qt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=vi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Re(function(){var r=o,i=we(n),a=[];e:{var s=Nr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=_n;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Tr:case _r:case Ar:l=yn;break;case Ir:l=Nn;break;case"scroll":l=hn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Le(p,h))&&u.push(qr(p,g,f)))),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:xi(l),f=null==c?s:xi(c),(s=new u(g,p+"leave",l,n,i)).target=d,s.relatedTarget=f,g=null,vi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,g=h;g;g=Gr(g))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Qr(a,s,l,u,!1),null!==c&&null!==d&&Qr(a,d,c,u,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=Yn;else if(Hn(s))if(Xn)m=ar;else{m=ir;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=or);switch(m&&(m=m(e,r))?qn(a,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?xi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(a,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):($t="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Kr(r,b)).length&&(b=new xn(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=jn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Un(e,t)?(e=en(),Zt=$t=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Fr(a,t)})}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Le(e,n))&&r.unshift(qr(e,o,i)),null!=(o=Le(e,t))&&r.push(qr(e,o,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Le(n,o))&&a.unshift(qr(n,l,s)):i||null!=(l=Le(n,o))&&a.push(qr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Jr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Yr,"")}function $r(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,gi="__reactEvents$"+di,mi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wi(e){return e[fi]||null}var Si=[],ki=-1;function Ci(e){return{current:e}}function Ei(e){0>ki||(e.current=Si[ki],Si[ki]=null,ki--)}function Ti(e,t){ki++,Si[ki]=e.current,e.current=t}var _i={},Ai=Ci(_i),Ii=Ci(!1),Ni=_i;function Ri(e,t){var n=e.type.contextTypes;if(!n)return _i;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Li(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ei(Ii),Ei(Ai)}function Oi(e,t,n){if(Ai.current!==_i)throw Error(o(168));Ti(Ai,t),Ti(Ii,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,W(e)||"Unknown",i));return M({},n,r)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_i,Ni=Ai.current,Ti(Ai,e),Ti(Ii,Ii.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Di(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ii),Ei(Ai),Ti(Ai,e)):Ei(Ii),Ti(Ii,n)}var Fi=null,zi=!1,Ui=!1;function Vi(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!Ui&&null!==Fi){Ui=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,zi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Ze,Bi),i}finally{bt=t,Ui=!1}}return null}var Wi=[],Hi=0,qi=null,Ki=0,Gi=[],Qi=0,Ji=null,Yi=1,Xi="";function $i(e,t){Wi[Hi++]=Ki,Wi[Hi++]=qi,qi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Yi,Gi[Qi++]=Xi,Gi[Qi++]=Ji,Ji=e;var r=Yi;e=Xi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Yi=1<<32-at(t)+i|n<<i|r,Xi=o+e}else Yi=1<<o|n<<i|r,Xi=e}function eo(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function to(e){for(;e===qi;)qi=Wi[--Hi],Wi[Hi]=null,Ki=Wi[--Hi],Wi[Hi]=null;for(;e===Ji;)Ji=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null,Yi=Gi[--Qi],Gi[Qi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)ao(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function go(e){null===oo?oo=[e]:oo.push(e)}var mo=x.ReactCurrentBatchConfig;function yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function vo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===L&&bo(o)===t.type)?((r=i(t,n.props)).ref=yo(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=yo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=yo(e,null,t),n.return=e,n;case S:return(t=Fc(t,e.mode,n)).return=e,t;case L:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;vo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case L:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:d(e,t,n,r,null);vo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case L:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,i,null);vo(t,r)}return null}function g(i,o,s,l){for(var c=null,u=null,d=o,g=o=0,m=null;null!==d&&g<s.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=f(i,d,s[g],l);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(i,d),o=a(y,o,g),null===u?c=y:u.sibling=y,u=y,d=m}if(g===s.length)return n(i,d),io&&$i(i,g),c;if(null===d){for(;g<s.length;g++)null!==(d=h(i,s[g],l))&&(o=a(d,o,g),null===u?c=d:u.sibling=d,u=d);return io&&$i(i,g),c}for(d=r(i,d);g<s.length;g++)null!==(m=p(d,i,g,s[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),o=a(m,o,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(i,e)}),io&&$i(i,g),c}function m(i,s,l,c){var u=D(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,g=s,m=s=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(i,g,v.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(i,g),s=a(b,s,m),null===d?u=b:d.sibling=b,d=b,g=y}if(v.done)return n(i,g),io&&$i(i,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=h(i,v.value,c))&&(s=a(v,s,m),null===d?u=v:d.sibling=v,d=v);return io&&$i(i,m),u}for(g=r(i,g);!v.done;m++,v=l.next())null!==(v=p(g,i,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),s=a(v,s,m),null===d?u=v:d.sibling=v,d=v);return e&&g.forEach(function(e){return t(i,e)}),io&&$i(i,m),u}return function e(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(r,u.sibling),(o=i(u,a.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===L&&bo(c)===u.type){n(r,u.sibling),(o=i(u,a.props)).ref=yo(r,u,a),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===k?((o=Dc(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Oc(a.type,a.key,a.props,null,r.mode,l)).ref=yo(r,o,a),l.return=r,r=l)}return s(r);case S:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Fc(a,r.mode,l)).return=r,r=o}return s(r);case L:return e(r,o,(u=a._init)(a._payload),l)}if(te(a))return g(r,o,a,l);if(D(a))return m(r,o,a,l);vo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Mc(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var So=xo(!0),ko=xo(!1),Co=Ci(null),Eo=null,To=null,_o=null;function Ao(){_o=To=Eo=null}function Io(e){var t=Co.current;Ei(Co),e._currentValue=t}function No(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ro(e,t){Eo=e,_o=To=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function Lo(e){var t=e._currentValue;if(_o!==e)if(e={context:e,memoizedValue:t,next:null},null===To){if(null===Eo)throw Error(o(308));To=e,Eo.dependencies={lanes:0,firstContext:e}}else To=To.next=e;return t}var Po=null;function Oo(e){null===Po?Po=[e]:Po.push(e)}function Do(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Oo(t)):(n.next=i.next,i.next=n),t.interleaved=n,jo(e,r)}function jo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mo=!1;function Fo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Uo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,jo(e,n)}return null===(i=r.interleaved)?(t.next=t,Oo(r)):(t.next=i.next,i.next=t),r.interleaved=t,jo(e,n)}function Bo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Wo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ho(e,t,n,r){var i=e.updateQueue;Mo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(a=0,u=c=l=null,s=o;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(h=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Mo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);jl|=a,e.lanes=a,e.memoizedState=d}}function qo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Ko={},Go=Ci(Ko),Qo=Ci(Ko),Jo=Ci(Ko);function Yo(e){if(e===Ko)throw Error(o(174));return e}function Xo(e,t){switch(Ti(Jo,t),Ti(Qo,e),Ti(Go,Ko),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Go),Ti(Go,t)}function $o(){Ei(Go),Ei(Qo),Ei(Jo)}function Zo(e){Yo(Jo.current);var t=Yo(Go.current),n=le(t,e.type);t!==n&&(Ti(Qo,e),Ti(Go,n))}function ea(e){Qo.current===e&&(Ei(Go),Ei(Qo))}var ta=Ci(0);function na(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ra=[];function ia(){for(var e=0;e<ra.length;e++)ra[e]._workInProgressVersionPrimary=null;ra.length=0}var oa=x.ReactCurrentDispatcher,aa=x.ReactCurrentBatchConfig,sa=0,la=null,ca=null,ua=null,da=!1,ha=!1,fa=0,pa=0;function ga(){throw Error(o(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ya(e,t,n,r,i,a){if(sa=a,la=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=null===e||null===e.memoizedState?es:ts,e=n(r,i),ha){a=0;do{if(ha=!1,fa=0,25<=a)throw Error(o(301));a+=1,ua=ca=null,t.updateQueue=null,oa.current=ns,e=n(r,i)}while(ha)}if(oa.current=Za,t=null!==ca&&null!==ca.next,sa=0,ua=ca=la=null,da=!1,t)throw Error(o(300));return e}function va(){var e=0!==fa;return fa=0,e}function ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ua?la.memoizedState=ua=e:ua=ua.next=e,ua}function xa(){if(null===ca){var e=la.alternate;e=null!==e?e.memoizedState:null}else e=ca.next;var t=null===ua?la.memoizedState:ua.next;if(null!==t)ua=t,ca=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ca=e).memoizedState,baseState:ca.baseState,baseQueue:ca.baseQueue,queue:ca.queue,next:null},null===ua?la.memoizedState=ua=e:ua=ua.next=e}return ua}function wa(e,t){return"function"===typeof t?t(e):t}function Sa(e){var t=xa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ca,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((sa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,la.lanes|=d,jl|=d}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(xs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,la.lanes|=a,jl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ka(e){var t=xa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(xs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ca(){}function Ea(e,t){var n=la,r=xa(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,xs=!0),r=r.queue,Ma(Aa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ua&&1&ua.memoizedState.tag){if(n.flags|=2048,La(9,_a.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(o(349));0!==(30&sa)||Ta(n,t,i)}return i}function Ta(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=la.updateQueue)?(t={lastEffect:null,stores:null},la.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _a(e,t,n,r){t.value=n,t.getSnapshot=r,Ia(t)&&Na(e)}function Aa(e,t,n){return n(function(){Ia(t)&&Na(e)})}function Ia(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Na(e){var t=jo(e,1);null!==t&&nc(t,e,1,-1)}function Ra(e){var t=ba();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ja.bind(null,la,e),[t.memoizedState,e]}function La(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=la.updateQueue)?(t={lastEffect:null,stores:null},la.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Pa(){return xa().memoizedState}function Oa(e,t,n,r){var i=ba();la.flags|=e,i.memoizedState=La(1|t,n,void 0,void 0===r?null:r)}function Da(e,t,n,r){var i=xa();r=void 0===r?null:r;var o=void 0;if(null!==ca){var a=ca.memoizedState;if(o=a.destroy,null!==r&&ma(r,a.deps))return void(i.memoizedState=La(t,n,o,r))}la.flags|=e,i.memoizedState=La(1|t,n,o,r)}function ja(e,t){return Oa(8390656,8,e,t)}function Ma(e,t){return Da(2048,8,e,t)}function Fa(e,t){return Da(4,2,e,t)}function za(e,t){return Da(4,4,e,t)}function Ua(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Va(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4,4,Ua.bind(null,t,e),n)}function Ba(){}function Wa(e,t){var n=xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ha(e,t){var n=xa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qa(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(sr(n,t)||(n=gt(),la.lanes|=n,jl|=n,e.baseState=!0),t)}function Ka(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=aa.transition;aa.transition={};try{e(!1),t()}finally{bt=n,aa.transition=r}}function Ga(){return xa().memoizedState}function Qa(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e))Xa(t,n);else if(null!==(n=Do(e,t,n,r))){nc(n,e,r,ec()),$a(n,t,r)}}function Ja(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))Xa(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(i.next=i,Oo(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Do(e,t,i,r))&&(nc(n,e,r,i=ec()),$a(n,t,r))}}function Ya(e){var t=e.alternate;return e===la||null!==t&&t===la}function Xa(e,t){ha=da=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $a(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Za={readContext:Lo,useCallback:ga,useContext:ga,useEffect:ga,useImperativeHandle:ga,useInsertionEffect:ga,useLayoutEffect:ga,useMemo:ga,useReducer:ga,useRef:ga,useState:ga,useDebugValue:ga,useDeferredValue:ga,useTransition:ga,useMutableSource:ga,useSyncExternalStore:ga,useId:ga,unstable_isNewReconciler:!1},es={readContext:Lo,useCallback:function(e,t){return ba().memoizedState=[e,void 0===t?null:t],e},useContext:Lo,useEffect:ja,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4194308,4,Ua.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oa(4,2,e,t)},useMemo:function(e,t){var n=ba();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ba();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qa.bind(null,la,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ba().memoizedState=e},useState:Ra,useDebugValue:Ba,useDeferredValue:function(e){return ba().memoizedState=e},useTransition:function(){var e=Ra(!1),t=e[0];return e=Ka.bind(null,e[1]),ba().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=la,i=ba();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Il)throw Error(o(349));0!==(30&sa)||Ta(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,ja(Aa.bind(null,r,a,e),[e]),r.flags|=2048,La(9,_a.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ba(),t=Il.identifierPrefix;if(io){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-at(Yi)-1)).toString(32)+n),0<(n=fa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ts={readContext:Lo,useCallback:Wa,useContext:Lo,useEffect:Ma,useImperativeHandle:Va,useInsertionEffect:Fa,useLayoutEffect:za,useMemo:Ha,useReducer:Sa,useRef:Pa,useState:function(){return Sa(wa)},useDebugValue:Ba,useDeferredValue:function(e){return qa(xa(),ca.memoizedState,e)},useTransition:function(){return[Sa(wa)[0],xa().memoizedState]},useMutableSource:Ca,useSyncExternalStore:Ea,useId:Ga,unstable_isNewReconciler:!1},ns={readContext:Lo,useCallback:Wa,useContext:Lo,useEffect:Ma,useImperativeHandle:Va,useInsertionEffect:Fa,useLayoutEffect:za,useMemo:Ha,useReducer:ka,useRef:Pa,useState:function(){return ka(wa)},useDebugValue:Ba,useDeferredValue:function(e){var t=xa();return null===ca?t.memoizedState=e:qa(t,ca.memoizedState,e)},useTransition:function(){return[ka(wa)[0],xa().memoizedState]},useMutableSource:Ca,useSyncExternalStore:Ea,useId:Ga,unstable_isNewReconciler:!1};function rs(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function is(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var os={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Uo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Vo(e,o,i))&&(nc(t,e,i,r),Bo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Uo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Vo(e,o,i))&&(nc(t,e,i,r),Bo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Uo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Vo(e,i,r))&&(nc(t,e,r,n),Bo(t,e,r))}};function as(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function ss(e,t,n){var r=!1,i=_i,o=t.contextType;return"object"===typeof o&&null!==o?o=Lo(o):(i=Li(t)?Ni:Ai.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):_i),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=os,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ls(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&os.enqueueReplaceState(t,t.state,null)}function cs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Fo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Lo(o):(o=Li(t)?Ni:Ai.current,i.context=Ri(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(is(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&os.enqueueReplaceState(i,i.state,null),Ho(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function us(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Uo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,ql=r),hs(0,t)},n}function gs(e,t,n){(n=Uo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Uo(-1,1)).tag=2,Vo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bs=x.ReactCurrentOwner,xs=!1;function ws(e,t,n,r){t.child=null===e?ko(t,null,n,r):So(t,e.child,n,r)}function Ss(e,t,n,r,i){n=n.render;var o=t.ref;return Ro(t,i),r=ya(e,t,n,r,o,i),n=va(),null===e||xs?(io&&n&&eo(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function ks(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Lc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Cs(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Pc(o,r)).ref=t.ref,e.return=t,t.child=e}function Cs(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(xs=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(xs=!0)}}return _s(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Pl,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Pl,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ti(Pl,Ll),Ll|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ti(Pl,Ll),Ll|=r;return ws(e,t,i,n),t.child}function Ts(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _s(e,t,n,r,i){var o=Li(n)?Ni:Ai.current;return o=Ri(t,o),Ro(t,i),n=ya(e,t,n,r,o,i),r=va(),null===e||xs?(io&&r&&eo(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function As(e,t,n,r,i){if(Li(n)){var o=!0;ji(t)}else o=!1;if(Ro(t,i),null===t.stateNode)Ws(e,t),ss(t,n,r),cs(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Lo(c):c=Ri(t,c=Li(n)?Ni:Ai.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&ls(t,a,r,c),Mo=!1;var h=t.memoizedState;a.state=h,Ho(t,r,a,i),l=t.memoizedState,s!==r||h!==l||Ii.current||Mo?("function"===typeof u&&(is(t,n,u,r),l=t.memoizedState),(s=Mo||as(t,n,s,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,zo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:rs(t.type,s),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Lo(l):l=Ri(t,l=Li(n)?Ni:Ai.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&ls(t,a,r,l),Mo=!1,h=t.memoizedState,a.state=h,Ho(t,r,a,i);var p=t.memoizedState;s!==d||h!==p||Ii.current||Mo?("function"===typeof f&&(is(t,n,f,r),p=t.memoizedState),(c=Mo||as(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Is(e,t,n,r,o,i)}function Is(e,t,n,r,i,o){Ts(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Mi(t,n,!1),Hs(e,t,o);r=t.stateNode,bs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=So(t,e.child,null,o),t.child=So(t,null,s,o)):ws(e,t,s,o),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Ns(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Xo(e,t.containerInfo)}function Rs(e,t,n,r,i){return po(),go(i),t.flags|=256,ws(e,t,n,r),t.child}var Ls,Ps,Os,Ds={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ms(e,t,n){var r,i=t.pendingProps,a=ta.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ti(ta,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=jc(l,i,0,null),e=Dc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=Ds,e):Fs(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,zs(e,t,s,r=ds(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=jc({mode:"visible",children:r.children},i,0,null),(a=Dc(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&So(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Ds,a);if(0===(1&t.mode))return zs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,zs(e,t,s,r=ds(a=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),xs||l){if(null!==(r=Il)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,jo(e,i),nc(r,e,i,-1))}return gc(),zs(e,t,s,r=ds(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Gi[Qi++]=Yi,Gi[Qi++]=Xi,Gi[Qi++]=Ji,Yi=e.id,Xi=e.overflow,Ji=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Pc(r,s):(s=Dc(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?js(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ds,i}return e=(s=e.child).sibling,i=Pc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,r){return null!==r&&go(r),So(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),No(e.return,t,n)}function Vs(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Bs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=ta.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(ta,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===na(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vs(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===na(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vs(t,!0,n,null,o);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ws(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qs(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Li(t.type)&&Pi(),Ks(t),null;case 3:return r=t.stateNode,$o(),Ei(Ii),Ei(Ai),ia(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Ks(t),null;case 5:ea(t);var i=Yo(Jo.current);if(n=t.type,null!==e&&null!=t.stateNode)Ps(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ks(t),null}if(e=Yo(Go.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)zr(Dr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Y(r,a),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},zr("invalid",r);break;case"textarea":ie(r,a),zr("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":K(r),Z(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Ls(e,t),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)zr(Dr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":Y(e,r),i=J(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(a in ve(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&zr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)Os(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Yo(Jo.current),Yo(Go.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ks(t),null;case 13:if(Ei(ta),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ta.current)?0===Ol&&(Ol=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return $o(),null===e&&Br(t.stateNode.containerInfo),Ks(t),null;case 10:return Io(t.type._context),Ks(t),null;case 19:if(Ei(ta),null===(a=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)qs(a,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=na(e))){for(t.flags|=128,qs(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(ta,1&ta.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Bl&&(t.flags|=128,r=!0,qs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=na(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return Ks(t),null}else 2*Xe()-a.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,qs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=ta.current,Ti(ta,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Qs(e,t){switch(to(t),t.tag){case 1:return Li(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $o(),Ei(Ii),Ei(Ai),ia(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ea(t),null;case 13:if(Ei(ta),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(ta),null;case 4:return $o(),null;case 10:return Io(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ls=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ps=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Yo(Go.current);var o,a=null;switch(n){case"input":i=J(e,i),r=J(e,r),a=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Os=function(e,t,n,r){n!==r&&(t.flags|=4)};var Js=!1,Ys=!1,Xs="function"===typeof WeakSet?WeakSet:Set,$s=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[gi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ys||Zs(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,t,a),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Ys&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Cc(n,t,s)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,hl(e,t,n),Ys=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach(function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));fl(a,s,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Cc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){Cc(e,e.return,m)}try{nl(5,e,e.return)}catch(m){Cc(e,e.return,m)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Cc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(i,a),be(l,s);var u=be(l,a);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?me(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":$(i,a);break;case"textarea":oe(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(m){Cc(e,e.return,m)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){Cc(e,e.return,m)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Cc(e,e.return,m)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Xe())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(u=Ys)||d,gl(t,e),Ys=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for($s=e,d=e.child;null!==d;){for(h=$s=d;null!==$s;){switch(p=(f=$s).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zs(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Cc(r,n,m)}}break;case 5:Zs(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==p?(p.return=f,$s=p):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",s))}catch(m){Cc(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Cc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,sl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(s){Cc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){$s=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==$s;){var i=$s,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Js;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ys;s=Js;var c=Ys;if(Js=a,(Ys=l)&&!c)for($s=i;null!==$s;)l=(a=$s).child,22===a.tag&&null!==a.memoizedState?Sl(i):null!==l?(l.return=a,$s=l):Sl(i);for(;null!==o;)$s=o,bl(o,t,n),o=o.sibling;$s=i,Js=s,Ys=c}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,$s=o):xl(e)}}function xl(e){for(;null!==$s;){var t=$s;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:rs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&qo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(o(163))}Ys||512&t.flags&&il(t)}catch(f){Cc(t,t.return,f)}}if(t===e){$s=null;break}if(null!==(n=t.sibling)){n.return=t.return,$s=n;break}$s=t.return}}function wl(e){for(;null!==$s;){var t=$s;if(t===e){$s=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$s=n;break}$s=t.return}}function Sl(e){for(;null!==$s;){var t=$s;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Cc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Cc(t,i,l)}}var o=t.return;try{il(t)}catch(l){Cc(t,o,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Cc(t,a,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){$s=null;break}var s=t.sibling;if(null!==s){s.return=t.return,$s=s;break}$s=t.return}}var kl,Cl=Math.ceil,El=x.ReactCurrentDispatcher,Tl=x.ReactCurrentOwner,_l=x.ReactCurrentBatchConfig,Al=0,Il=null,Nl=null,Rl=0,Ll=0,Pl=Ci(0),Ol=0,Dl=null,jl=0,Ml=0,Fl=0,zl=null,Ul=null,Vl=0,Bl=1/0,Wl=null,Hl=!1,ql=null,Kl=null,Gl=!1,Ql=null,Jl=0,Yl=0,Xl=null,$l=-1,Zl=0;function ec(){return 0!==(6&Al)?Xe():-1!==$l?$l:$l=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Rl?Rl&-Rl:null!==mo.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Yl)throw Yl=0,Xl=null,Error(o(185));yt(e,n,r),0!==(2&Al)&&e===Il||(e===Il&&(0===(2&Al)&&(Ml|=n),4===Ol&&sc(e,Rl)),rc(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Bl=Xe()+500,zi&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=ft(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ht(e,e===Il?Rl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){zi=!0,Vi(e)}(lc.bind(null,e)):Vi(lc.bind(null,e)),ai(function(){0===(6&Al)&&Bi()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if($l=-1,Zl=0,0!==(6&Al))throw Error(o(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Al;Al|=2;var a=pc();for(Il===e&&Rl===t||(Wl=null,Bl=Xe()+500,hc(e,t));;)try{vc();break}catch(l){fc(e,l)}Ao(),El.current=a,Al=i,null!==Nl?t=0:(Il=null,Rl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Dl,hc(e,0),sc(e,r),rc(e,Xe()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(a=pt(e))&&(r=a,t=oc(e,a))),1===t))throw n=Dl,hc(e,0),sc(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:wc(e,Ul,Wl);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Vl+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Ul,Wl),t);break}wc(e,Ul,Wl);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Ul,Wl),r);break}wc(e,Ul,Wl);break;default:throw Error(o(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function sc(e,t){for(t&=~Fl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Al))throw Error(o(327));Sc();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Dl,hc(e,0),sc(e,t),rc(e,Xe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,Wl),rc(e,Xe()),null}function cc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Bl=Xe()+500,zi&&Bi())}}function uc(e){null!==Ql&&0===Ql.tag&&0===(6&Al)&&Sc();var t=Al;Al|=1;var n=_l.transition,r=bt;try{if(_l.transition=null,bt=1,e)return e()}finally{bt=r,_l.transition=n,0===(6&(Al=t))&&Bi()}}function dc(){Ll=Pl.current,Ei(Pl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nl)for(n=Nl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:$o(),Ei(Ii),Ei(Ai),ia();break;case 5:ea(r);break;case 4:$o();break;case 13:case 19:Ei(ta);break;case 10:Io(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Il=e,Nl=e=Pc(e.current,null),Rl=Ll=t,Ol=0,Dl=null,Fl=Ml=jl=0,Ul=zl=null,null!==Po){for(t=0;t<Po.length;t++)if(null!==(r=(n=Po[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Po=null}return e}function fc(e,t){for(;;){var n=Nl;try{if(Ao(),oa.current=Za,da){for(var r=la.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}da=!1}if(sa=0,ua=ca=la=null,ha=!1,fa=0,Tl.current=null,null===n||null===n.return){Ol=1,Dl=t,Nl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ys(s);if(null!==p){p.flags&=-257,vs(p,s,l,0,t),1&p.mode&&ms(a,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ms(a,u,t),gc();break e}c=Error(o(426))}else if(io&&1&l.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),vs(y,s,l,0,t),go(us(c,l));break e}}a=c=us(c,l),4!==Ol&&(Ol=2),null===zl?zl=[a]:zl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Wo(a,ps(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Wo(a,gs(a,l,t));break e}}a=a.return}while(null!==a)}xc(n)}catch(x){t=x,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function pc(){var e=El.current;return El.current=Za,null===e?Za:e}function gc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Il||0===(268435455&jl)&&0===(268435455&Ml)||sc(Il,Rl)}function mc(e,t){var n=Al;Al|=2;var r=pc();for(Il===e&&Rl===t||(Wl=null,hc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(Ao(),Al=n,El.current=r,null!==Nl)throw Error(o(261));return Il=null,Rl=0,Ol}function yc(){for(;null!==Nl;)bc(Nl)}function vc(){for(;null!==Nl&&!Je();)bc(Nl)}function bc(e){var t=kl(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?xc(e):Nl=t,Tl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gs(n,t,Ll)))return void(Nl=n)}else{if(null!==(n=Qs(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Ol=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Ol&&(Ol=5)}function wc(e,t,n){var r=bt,i=_l.transition;try{_l.transition=null,bt=1,function(e,t,n,r){do{Sc()}while(null!==Ql);if(0!==(6&Al))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Il&&(Nl=Il=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Ic(tt,function(){return Sc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=_l.transition,_l.transition=null;var s=bt;bt=1;var l=Al;Al|=4,Tl.current=null,function(e,t){if(ei=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==a||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=s),f===a&&++d===r&&(c=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,$s=t;null!==$s;)if(e=(t=$s).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$s=e;else for(;null!==$s;){t=$s;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:rs(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(w){Cc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,$s=e;break}$s=t.return}g=tl,tl=!1}(e,n),ml(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Ye(),Al=l,bt=s,_l.transition=a}else e.current=n;if(Gl&&(Gl=!1,Ql=e,Jl=i),a=e.pendingLanes,0===a&&(Kl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=ql,ql=null,e;0!==(1&Jl)&&0!==e.tag&&Sc(),a=e.pendingLanes,0!==(1&a)?e===Xl?Yl++:(Yl=0,Xl=e):Yl=0,Bi()}(e,t,n,r)}finally{_l.transition=i,bt=r}return null}function Sc(){if(null!==Ql){var e=xt(Jl),t=_l.transition,n=bt;try{if(_l.transition=null,bt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Jl=0,0!==(6&Al))throw Error(o(331));var i=Al;for(Al|=4,$s=e.current;null!==$s;){var a=$s,s=a.child;if(0!==(16&$s.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($s=u;null!==$s;){var d=$s;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,$s=h;else for(;null!==$s;){var f=(d=$s).sibling,p=d.return;if(ol(d),d===u){$s=null;break}if(null!==f){f.return=p,$s=f;break}$s=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}$s=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,$s=s;else e:for(;null!==$s;){if(0!==(2048&(a=$s).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,$s=v;break e}$s=a.return}}var b=e.current;for($s=b;null!==$s;){var x=(s=$s).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,$s=x;else e:for(s=b;null!==$s;){if(0!==(2048&(l=$s).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(S){Cc(l,l.return,S)}if(l===s){$s=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,$s=w;break e}$s=l.return}}if(Al=i,Bi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{bt=n,_l.transition=t}}return!1}function kc(e,t,n){e=Vo(e,t=ps(0,t=us(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Cc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Vo(t,e=gs(t,e=us(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Rl&n)===n&&(4===Ol||3===Ol&&(130023424&Rl)===Rl&&500>Xe()-Vl?hc(e,0):Fl|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=jo(e,t))&&(yt(e,t,n),rc(e,n))}function _c(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Tc(e,n)}function Ic(e,t){return Ge(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Nc(e,t,n,r)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Lc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return Dc(n.children,i,a,t);case C:s=8,i|=8;break;case E:return(e=Rc(12,n,t,2|i)).elementType=E,e.lanes=a,e;case I:return(e=Rc(13,n,t,i)).elementType=I,e.lanes=a,e;case N:return(e=Rc(19,n,t,i)).elementType=N,e.lanes=a,e;case P:return jc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case _:s=9;break e;case A:s=11;break e;case R:s=14;break e;case L:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Rc(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Dc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,o,a,s,l){return e=new zc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Rc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fo(o),e}function Vc(e){if(!e)return _i;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Li(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Li(n))return Di(e,n,t)}return t}function Bc(e,t,n,r,i,o,a,s,l){return(e=Uc(n,r,!0,e,0,o,0,s,l)).context=Vc(null),n=e.current,(o=Uo(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Vo(n,o,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,o=ec(),a=tc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Uo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Vo(i,t,a))&&(nc(e,i,a,o),Bo(e,i,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:Ns(t),po();break;case 5:Zo(t);break;case 1:Li(t.type)&&ji(t);break;case 4:Xo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(Co,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(ta,1&ta.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ms(e,t,n):(Ti(ta,1&ta.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ti(ta,1&ta.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ta,ta.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Hs(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,io&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ws(e,t),e=t.pendingProps;var i=Ri(t,Ai.current);Ro(t,n),i=ya(null,t,r,e,i,n);var a=va();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Li(r)?(a=!0,ji(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Fo(t),i.updater=os,t.stateNode=i,i._reactInternals=t,cs(t,r,e,n),t=Is(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ws(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===R)return 14}return 2}(r),e=rs(r,e),i){case 0:t=_s(null,t,r,e,n);break e;case 1:t=As(null,t,r,e,n);break e;case 11:t=Ss(null,t,r,e,n);break e;case 14:t=ks(null,t,r,rs(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:rs(r,i),n);case 1:return r=t.type,i=t.pendingProps,As(e,t,r,i=t.elementType===r?i:rs(r,i),n);case 3:e:{if(Ns(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,zo(e,t),Ho(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Rs(e,t,r,n,i=us(Error(o(423)),t));break e}if(r!==i){t=Rs(e,t,r,n,i=us(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=ko(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Hs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return Zo(t),null===e&&co(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Ts(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return Ms(e,t,n);case 4:return Xo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=So(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ss(e,t,r,i=t.elementType===r?i:rs(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ti(Co,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ii.current){t=Hs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Uo(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),No(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),No(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ro(t,n),r=r(i=Lo(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=rs(r=t.type,t.pendingProps),ks(e,t,r,i=rs(r.type,i),n);case 15:return Cs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:rs(r,i),Ws(e,t),t.tag=1,Li(r)?(e=!0,ji(t)):e=!1,Ro(t,n),ss(t,r,i),cs(t,r,i,n),Is(null,t,r,!0,e,n);case 19:return Bs(e,t,n);case 22:return Es(e,t,n)}throw Error(o(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function Zc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Hc(a);s.call(e)}}Wc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Hc(a);o.call(e)}}var a=Bc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=a,e[pi]=a.current,Br(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hc(l);s.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),uc(function(){Wc(t,l,n,r)}),l}(n,t,e,i,r);return Hc(a)}Jc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Wc(e,t,null,null)},Jc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Wc(null,e,null,null)}),t[pi]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Xe()),0===(6&Al)&&(Bl=Xe()+500,Bi()))}break;case 13:uc(function(){var t=jo(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Kc(e,1)}},St=function(e){if(13===e.tag){var t=jo(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=jo(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},Ct=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(o(90));G(r),$(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,Ie=uc;var eu={usingClientEntryPoint:!1,Events:[bi,xi,wi,Te,_e,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(o(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(o(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,a,s),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(o(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853(e,t,n){e.exports=n(234)},950(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),i=n(391);function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function l(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const h=["color","size","strokeWidth","absoluteStrokeWidth","children"];var f=(e,t)=>{const n=(0,r.forwardRef)((n,i)=>{let{color:a="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:c,children:f}=n,p=o(n,h);return(0,r.createElement)("svg",u(u({ref:i},d),{},{width:s,height:s,stroke:a,strokeWidth:c?24*Number(l)/Number(s):l,className:"lucide lucide-".concat((g=e,g.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},p),[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...(Array.isArray(f)?f:[f])||[]]);var g});return n.displayName="".concat(e),n};const p=f("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]),g=f("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),m=f("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),y=f("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),v=f("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),b=f("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),x=f("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),w=f("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),S=f("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),k=f("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),C=f("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),E=f("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),T=f("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),_=f("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),A=f("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),I=f("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),N=f("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),R=f("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),L=f("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),P=f("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),O=f("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),D=f("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),j=f("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),M=f("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),F=f("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]),z=f("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),U=f("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),V=f("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]),B=f("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]),W=f("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),H=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},q={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,a=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;s||(h=64,o||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(H(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const s=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==a||null==s)throw new K;const l=t<<2|o>>4;if(r.push(l),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==s){const e=a<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class K extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const G=function(e){return function(e){const t=H(e);return q.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Q=function(e){try{return q.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const J=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Y=()=>{try{return J()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/LogBook",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Q(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},X=e=>{var t,n;return null===(n=null===(t=Y())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},$=()=>{var e;return null===(e=Y())||void 0===e?void 0:e.config},Z=e=>{var t;return null===(t=Y())||void 0===t?void 0:t["_".concat(e)]};class ee{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function te(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ne(){return!function(){var e;const t=null===(e=Y())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function re(){try{return"object"===typeof indexedDB}catch(e){return!1}}class ie extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oe.prototype.create)}}class oe{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ae,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new ie(n,o,t)}}const ae=/\{\$([^}]+)}/g;function se(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(le(n)&&le(o)){if(!se(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function le(e){return null!==e&&"object"===typeof e}function ce(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ue(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function de(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class he{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=fe),void 0===r.error&&(r.error=fe),void 0===r.complete&&(r.complete=fe);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fe(){}function pe(e){return e&&e._delegate?e._delegate:e}class ge{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const me="[DEFAULT]";class ye{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new ee;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:me})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===me?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me;return this.component?this.component.multipleInstances?e:me:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ve{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ye(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const be=[];var xe;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(xe||(xe={}));const we={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},Se=xe.INFO,ke={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},Ce=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ke[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class Ee{constructor(e){this.name=e,this._logLevel=Se,this._logHandler=Ce,this._userLogHandler=null,be.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?we[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...t),this._logHandler(this,xe.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...t),this._logHandler(this,xe.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xe.INFO,...t),this._logHandler(this,xe.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xe.WARN,...t),this._logHandler(this,xe.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...t),this._logHandler(this,xe.ERROR,...t)}}let Te,_e;const Ae=new WeakMap,Ie=new WeakMap,Ne=new WeakMap,Re=new WeakMap,Le=new WeakMap;let Pe={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ie.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ne.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return je(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Oe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(_e||(_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Me(this),n),je(Ae.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return je(e.apply(Me(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Me(this),t,...r);return Ne.set(o,t.sort?t.sort():[t]),je(o)}}function De(e){return"function"===typeof e?Oe(e):(e instanceof IDBTransaction&&function(e){if(Ie.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});Ie.set(e,t)}(e),t=e,(Te||(Te=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Pe):e);var t}function je(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(je(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&Ae.set(t,e)}).catch(()=>{}),Le.set(t,e),t}(e);if(Re.has(e))return Re.get(e);const t=De(e);return t!==e&&(Re.set(e,t),Le.set(t,e)),t}const Me=e=>Le.get(e);const Fe=["get","getKey","getAll","getAllKeys","count"],ze=["put","add","delete","clear"],Ue=new Map;function Ve(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ue.get(t))return Ue.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ze.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Fe.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&t.done]))[0]};return Ue.set(t,o),o}Pe=(e=>u(u({},e),{},{get:(t,n,r)=>Ve(t,n)||e.get(t,n,r),has:(t,n)=>!!Ve(t,n)||e.has(t,n)}))(Pe);class Be{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const We="@firebase/app",He="0.10.13",qe=new Ee("@firebase/app"),Ke="@firebase/app-compat",Ge="@firebase/analytics-compat",Qe="@firebase/analytics",Je="@firebase/app-check-compat",Ye="@firebase/app-check",Xe="@firebase/auth",$e="@firebase/auth-compat",Ze="@firebase/database",et="@firebase/data-connect",tt="@firebase/database-compat",nt="@firebase/functions",rt="@firebase/functions-compat",it="@firebase/installations",ot="@firebase/installations-compat",at="@firebase/messaging",st="@firebase/messaging-compat",lt="@firebase/performance",ct="@firebase/performance-compat",ut="@firebase/remote-config",dt="@firebase/remote-config-compat",ht="@firebase/storage",ft="@firebase/storage-compat",pt="@firebase/firestore",gt="@firebase/vertexai-preview",mt="@firebase/firestore-compat",yt="firebase",vt="[DEFAULT]",bt={[We]:"fire-core",[Ke]:"fire-core-compat",[Qe]:"fire-analytics",[Ge]:"fire-analytics-compat",[Ye]:"fire-app-check",[Je]:"fire-app-check-compat",[Xe]:"fire-auth",[$e]:"fire-auth-compat",[Ze]:"fire-rtdb",[et]:"fire-data-connect",[tt]:"fire-rtdb-compat",[nt]:"fire-fn",[rt]:"fire-fn-compat",[it]:"fire-iid",[ot]:"fire-iid-compat",[at]:"fire-fcm",[st]:"fire-fcm-compat",[lt]:"fire-perf",[ct]:"fire-perf-compat",[ut]:"fire-rc",[dt]:"fire-rc-compat",[ht]:"fire-gcs",[ft]:"fire-gcs-compat",[pt]:"fire-fst",[mt]:"fire-fst-compat",[gt]:"fire-vertex","fire-js":"fire-js",[yt]:"fire-js-all"},xt=new Map,wt=new Map,St=new Map;function kt(e,t){try{e.container.addComponent(t)}catch(n){qe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ct(e){const t=e.name;if(St.has(t))return qe.debug("There were multiple attempts to register component ".concat(t,".")),!1;St.set(t,e);for(const n of xt.values())kt(n,e);for(const n of wt.values())kt(n,e);return!0}function Et(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Tt(e){return void 0!==e.settings}const _t=new oe("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class At{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ge("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _t.create("app-deleted",{appName:this._name})}}const It="10.14.1";function Nt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:vt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw _t.create("bad-app-name",{appName:String(i)});if(n||(n=$()),!n)throw _t.create("no-options");const o=xt.get(i);if(o){if(se(n,o.options)&&se(r,o.config))return o;throw _t.create("duplicate-app",{appName:i})}const a=new ve(i);for(const l of St.values())a.addComponent(l);const s=new At(n,r,a);return xt.set(i,s),s}function Rt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt;const t=xt.get(e);if(!t&&e===vt&&$())return Nt();if(!t)throw _t.create("no-app",{appName:e});return t}function Lt(e,t,n){var r;let i=null!==(r=bt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void qe.warn(e.join(" "))}Ct(new ge("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Pt="firebase-heartbeat-store";let Ot=null;function Dt(){return Ot||(Ot=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=je(a);return r&&a.addEventListener("upgradeneeded",e=>{r(je(a.result),e.oldVersion,e.newVersion,je(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Pt)}catch(n){console.warn(n)}}}).catch(e=>{throw _t.create("idb-open",{originalErrorMessage:e.message})})),Ot}async function jt(e,t){try{const n=(await Dt()).transaction(Pt,"readwrite"),r=n.objectStore(Pt);await r.put(t,Mt(e)),await n.done}catch(n){if(n instanceof ie)qe.warn(n.message);else{const e=_t.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});qe.warn(e.message)}}}function Mt(e){return"".concat(e.name,"!").concat(e.options.appId)}class Ft{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ut(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=zt();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(n){qe.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=zt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Vt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Vt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=G(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return qe.warn(t),""}}}function zt(){return(new Date).toISOString().substring(0,10)}class Ut{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!re()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Dt()).transaction(Pt),n=await t.objectStore(Pt).get(Mt(e));return await t.done,n}catch(t){if(t instanceof ie)qe.warn(t.message);else{const e=_t.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});qe.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return jt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return jt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Vt(e){return G(JSON.stringify({version:2,heartbeats:e})).length}var Bt;Bt="",Ct(new ge("platform-logger",e=>new Be(e),"PRIVATE")),Ct(new ge("heartbeat",e=>new Ft(e),"PRIVATE")),Lt(We,He,Bt),Lt(We,He,"esm2017"),Lt("fire-js","");Lt("firebase","10.14.1","app");function Wt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Ht(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qt=Ht,Kt=new oe("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Gt=new Ee("@firebase/auth");function Qt(e){if(Gt.logLevel<=xe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Gt.error("Auth (".concat(It,"): ").concat(e),...n)}}function Jt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw en(e,...n)}function Yt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return en(e,...n)}function Xt(e,t,n){const r=Object.assign(Object.assign({},qt()),{[t]:n});return new oe("auth","Firebase",r).create(t,{appName:e.name})}function $t(e){return Xt(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zt(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Jt(e,"argument-error"),Xt(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function en(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Kt.create(e,...n)}function tn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw en(t,...r)}}function nn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Qt(t),new Error(t)}function rn(e,t){e||nn(t)}function on(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function an(){return"http:"===sn()||"https:"===sn()}function sn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function ln(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(an()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class cn{constructor(e,t){this.shortDelay=e,this.longDelay=t,rn(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(te())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return ln()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function un(e,t){rn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class dn{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void nn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void nn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void nn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const hn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},fn=new cn(3e4,6e4);function pn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function gn(e,t,n,r){return mn(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=ce(Object.assign({key:e.config.apiKey},o)).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:s},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),dn.fetch()(vn(e,e.config.apiHost,n,a),l)})}async function mn(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},hn),t);try{const t=new xn(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw wn(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw wn(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw wn(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw wn(e,"user-disabled",o);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Xt(e,s,a);Jt(e,s)}}catch(i){if(i instanceof ie)throw i;Jt(e,"network-request-failed",{message:String(i)})}}async function yn(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await gn(e,t,n,r,i);return"mfaPendingCredential"in o&&Jt(e,"multi-factor-auth-required",{_serverResponse:o}),o}function vn(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?un(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function bn(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xn{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Yt(this.auth,"network-request-failed")),fn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function wn(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Yt(e,t,r);return i.customData._tokenResponse=n,i}function Sn(e){return void 0!==e&&void 0!==e.enterprise}class kn{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return bn(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Cn(e,t){return gn(e,"GET","/v2/recaptchaConfig",pn(e,t))}async function En(e,t){return gn(e,"POST","/v1/accounts:lookup",t)}function Tn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function _n(e){return 1e3*Number(e)}function An(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Qt("JWT malformed, contained fewer than 3 sections"),null;try{const e=Q(n);return e?JSON.parse(e):(Qt("Failed to decode base64 JWT payload"),null)}catch(i){return Qt("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function In(e){const t=An(e);return tn(t,"internal-error"),tn("undefined"!==typeof t.exp,"internal-error"),tn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Nn(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof ie&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Rn{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Ln{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tn(this.lastLoginAt),this.creationTime=Tn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Pn(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Nn(e,En(n,{idToken:r}));tn(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?On(o.providerUserInfo):[],s=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),h=!!u&&d,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Ln(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function On(e){return e.map(e=>{var{providerId:t}=e,n=Wt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Dn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tn(e.idToken,"internal-error"),tn("undefined"!==typeof e.idToken,"internal-error"),tn("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):In(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){tn(0!==e.length,"internal-error");const t=In(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(tn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await mn(e,{},async()=>{const n=ce({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=vn(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",dn.fetch()(o,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Dn;return n&&(tn("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(tn("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(tn("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Dn,this.toJSON())}_performRefresh(){return nn("not implemented")}}function jn(e,t){tn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Mn{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Wt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ln(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Nn(this,this.stsTokenManager.getToken(this.auth,e));return tn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=pe(e),r=await n.getIdToken(t),i=An(r);tn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Tn(_n(i.auth_time)),issuedAtTime:Tn(_n(i.iat)),expirationTime:Tn(_n(i.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=pe(e);await Pn(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(tn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Mn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){tn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Pn(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tt(this.auth.app))return Promise.reject($t(this.auth));const e=await this.getIdToken();return await Nn(this,async function(e,t){return gn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,a,s,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:S}=t;tn(v&&S,e,"internal-error");const k=Dn.fromJSON(this.name,S);tn("string"===typeof v,e,"internal-error"),jn(u,e.name),jn(d,e.name),tn("boolean"===typeof b,e,"internal-error"),tn("boolean"===typeof x,e,"internal-error"),jn(h,e.name),jn(f,e.name),jn(p,e.name),jn(g,e.name),jn(m,e.name),jn(y,e.name);const C=new Mn({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:m,lastLoginAt:y});return w&&Array.isArray(w)&&(C.providerData=w.map(e=>Object.assign({},e))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Dn;r.updateFromServerResponse(t);const i=new Mn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Pn(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];tn(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?On(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new Dn;a.updateFromIdToken(n);const s=new Mn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Ln(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(s,l),s}}const Fn=new Map;function zn(e){rn(e instanceof Function,"Expected a class definition");let t=Fn.get(e);return t?(rn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Fn.set(e,t),t)}class Un{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Un.type="NONE";const Vn=Un;function Bn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Wn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Bn(this.userKey,r.apiKey,i),this.fullPersistenceKey=Bn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Mn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Wn(zn(Vn),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||zn(Vn);const o=Bn(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(o);if(t){const n=Mn._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const s=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(l){}})),new Wn(i,e,n)):new Wn(i,e,n)}}function Hn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Qn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(qn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Yn(t))return"Blackberry";if(Xn(t))return"Webos";if(Kn(t))return"Safari";if((t.includes("chrome/")||Gn(t))&&!t.includes("edge/"))return"Chrome";if(Jn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function qn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te();return/firefox\//i.test(e)}function Kn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:te()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Gn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te();return/crios\//i.test(e)}function Qn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te();return/iemobile/i.test(e)}function Jn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te();return/android/i.test(e)}function Yn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te();return/blackberry/i.test(e)}function Xn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te();return/webos/i.test(e)}function $n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Zn(){return function(){const e=te();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function er(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te();return $n(e)||Jn(e)||Xn(e)||Yn(e)||/windows phone/i.test(e)||Qn(e)}function tr(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Hn(te());break;case"Worker":t="".concat(Hn(te()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(It,"/").concat(r)}class nr{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class rr{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(o=s.containsNumericCharacter)||void 0===o||o),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class ir{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ar(this),this.idTokenSubscription=new ar(this),this.beforeStateQueue=new nr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Kt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zn(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Wn.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await En(this,{idToken:e}),n=await Mn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Tt(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==o||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return tn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Pn(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tt(this.app))return Promise.reject($t(this));const t=e?pe(e):null;return t&&tn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&tn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tt(this.app)?Promise.reject($t(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tt(this.app)?Promise.reject($t(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zn(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return gn(e,"GET","/v2/passwordPolicy",pn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new rr(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new oe("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return gn(e,"POST","/v2/accounts:revokeToken",pn(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&zn(e)||this._popupRedirectResolver;tn(t,this,"argument-error"),this.redirectPersistenceManager=await Wn.create(this,[zn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(tn(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Gt.logLevel<=xe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Gt.warn("Auth (".concat(It,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function or(e){return pe(e)}class ar{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new he(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return tn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let sr={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lr(e){return sr.loadJS(e)}function cr(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class ur{constructor(e){this.type="recaptcha-enterprise",this.auth=or(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Sn(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Cn(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new kn(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Sn(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=sr.recaptchaEnterpriseScript;0!==t.length&&(t+=i),lr(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function dr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new ur(e);let o;try{o=await i.verify(n)}catch(s){o=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function hr(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await dr(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await dr(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}function fr(e,t,n){const r=or(e);tn(r._canInitEmulator,r,"emulator-config-failed"),tn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=pr(t),{host:a,port:s}=function(e){const t=pr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:gr(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:gr(t)}}}(t),l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(o,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function pr(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function gr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class mr{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return nn("not implemented")}_getIdTokenResponse(e){return nn("not implemented")}_linkToIdToken(e,t){return nn("not implemented")}_getReauthenticationResolver(e){return nn("not implemented")}}async function yr(e,t){return gn(e,"POST","/v1/accounts:signUp",t)}async function vr(e,t){return yn(e,"POST","/v1/accounts:signInWithPassword",pn(e,t))}class br extends mr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new br(e,t,"password")}static _fromEmailAndCode(e,t){return new br(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return hr(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",vr);case"emailLink":return async function(e,t){return yn(e,"POST","/v1/accounts:signInWithEmailLink",pn(e,t))}(e,{email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return hr(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yr);case"emailLink":return async function(e,t){return yn(e,"POST","/v1/accounts:signInWithEmailLink",pn(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function xr(e,t){return yn(e,"POST","/v1/accounts:signInWithIdp",pn(e,t))}class wr extends mr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Jt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Wt(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new wr(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return xr(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,xr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xr(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ce(t)}return e}}const Sr={USER_NOT_FOUND:"user-not-found"};class kr extends mr{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new kr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new kr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return yn(e,"POST","/v1/accounts:signInWithPhoneNumber",pn(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await yn(e,"POST","/v1/accounts:signInWithPhoneNumber",pn(e,t));if(n.temporaryProof)throw wn(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return yn(e,"POST","/v1/accounts:signInWithPhoneNumber",pn(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Sr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new kr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Cr{constructor(e){var t,n,r,i,o,a;const s=ue(de(e)),l=null!==(t=s.apiKey)&&void 0!==t?t:null,c=null!==(n=s.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);tn(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=s.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=ue(de(e)).link,n=t?ue(de(t)).deep_link_id:null,r=ue(de(e)).deep_link_id;return(r?ue(de(r)).link:null)||r||n||t||e}(e);try{return new Cr(t)}catch(n){return null}}}class Er{constructor(){this.providerId=Er.PROVIDER_ID}static credential(e,t){return br._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Cr.parseLink(t);return tn(n,"argument-error"),br._fromEmailAndCode(e,n.code,n.tenantId)}}Er.PROVIDER_ID="password",Er.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Er.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Tr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class _r extends Tr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ar extends _r{constructor(){super("facebook.com")}static credential(e){return wr._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ar.credential(t.oauthAccessToken)}catch(n){return null}}}Ar.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ar.PROVIDER_ID="facebook.com";class Ir extends _r{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wr._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ir.credential(n,r)}catch(i){return null}}}Ir.GOOGLE_SIGN_IN_METHOD="google.com",Ir.PROVIDER_ID="google.com";class Nr extends _r{constructor(){super("github.com")}static credential(e){return wr._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Nr.credential(t.oauthAccessToken)}catch(n){return null}}}Nr.GITHUB_SIGN_IN_METHOD="github.com",Nr.PROVIDER_ID="github.com";class Rr extends _r{constructor(){super("twitter.com")}static credential(e,t){return wr._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Rr.credential(n,r)}catch(i){return null}}}async function Lr(e,t){return yn(e,"POST","/v1/accounts:signUp",pn(e,t))}Rr.TWITTER_SIGN_IN_METHOD="twitter.com",Rr.PROVIDER_ID="twitter.com";class Pr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Mn._fromIdTokenResponse(e,n,r),o=Or(n);return new Pr({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Or(n);return new Pr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Or(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Dr extends ie{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Dr.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Dr(e,t,n,r)}}function jr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Dr._fromErrorAndOperation(e,n,t,r);throw n})}async function Mr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Nn(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Pr._forOperation(e,"link",r)}async function Fr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Tt(r.app))return Promise.reject($t(r));const i="reauthenticate";try{const o=await Nn(e,jr(r,i,t,e),n);tn(o.idToken,r,"internal-error");const a=An(o.idToken);tn(a,r,"internal-error");const{sub:s}=a;return tn(e.uid===s,r,"user-mismatch"),Pr._forOperation(e,i,o)}catch(o){throw(null===o||void 0===o?void 0:o.code)==="auth/".concat("user-not-found")&&Jt(r,"user-mismatch"),o}}async function zr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Tt(e.app))return Promise.reject($t(e));const r="signIn",i=await jr(e,r,t),o=await Pr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function Ur(e,t){return zr(or(e),t)}async function Vr(e){const t=or(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}new WeakMap;const Br="__sak";class Wr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Br,"1"),this.storage.removeItem(Br),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Hr extends Wr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=er(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Zn()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Hr.type="LOCAL";const qr=Hr;class Kr extends Wr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Kr.type="SESSION";const Gr=Kr;class Qr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Qr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map(async e=>e(t.origin,i)),s=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Jr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Qr.receivers=[];class Yr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,s)=>{const l=Jr("",20);r.port1.start();const c=setTimeout(()=>{s(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Xr(){return window}function $r(){return"undefined"!==typeof Xr().WorkerGlobalScope&&"function"===typeof Xr().importScripts}const Zr="firebaseLocalStorageDb",ei="firebaseLocalStorage",ti="fbase_key";class ni{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ri(e,t){return e.transaction([ei],t?"readwrite":"readonly").objectStore(ei)}function ii(){const e=indexedDB.open(Zr,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(ei,{keyPath:ti})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(ei)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Zr);return new ni(e).toPromise()}(),t(await ii()))})})}async function oi(e,t,n){const r=ri(e,!0).put({[ti]:t,value:n});return new ni(r).toPromise()}function ai(e,t){const n=ri(e,!0).delete(t);return new ni(n).toPromise()}class si{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ii()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $r()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qr._getInstance($r()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Yr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ii();return await oi(e,Br,"1"),await ai(e,Br),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>oi(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=ri(e,!1).get(t),r=await new ni(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ai(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=ri(e,!1).getAll();return new ni(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}si.type="LOCAL";const li=si;cr("rcb"),new cn(3e4,6e4);const ci="recaptcha";async function ui(e,t,n){var r;const i=await n.verify();try{let o;if(tn("string"===typeof i,e,"argument-error"),tn(n.type===ci,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){tn("enroll"===t.type,e,"internal-error");const n=await function(e,t){return gn(e,"POST","/v2/accounts/mfaEnrollment:start",pn(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{tn("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;tn(n,e,"missing-multi-factor-info");const a=await function(e,t){return gn(e,"POST","/v2/accounts/mfaSignIn:start",pn(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return gn(e,"POST","/v1/accounts:sendVerificationCode",pn(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class di{constructor(e){this.providerId=di.PROVIDER_ID,this.auth=or(e)}verifyPhoneNumber(e,t){return ui(this.auth,e,pe(t))}static credential(e,t){return kr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return di.credentialFromTaggedObject(t)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?kr._fromTokenResponse(n,r):null}}function hi(e,t){return t?zn(t):(tn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}di.PROVIDER_ID="phone",di.PHONE_SIGN_IN_METHOD="phone";class fi extends mr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function pi(e){return zr(e.auth,new fi(e),e.bypassAuthState)}function gi(e){const{auth:t,user:n}=e;return tn(n,t,"internal-error"),Fr(n,new fi(e),e.bypassAuthState)}async function mi(e){const{auth:t,user:n}=e;return tn(n,t,"internal-error"),Mr(n,new fi(e),e.bypassAuthState)}class yi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pi;case"linkViaPopup":case"linkViaRedirect":return mi;case"reauthViaPopup":case"reauthViaRedirect":return gi;default:Jt(this.auth,"internal-error")}}resolve(e){rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vi=new cn(2e3,1e4);class bi extends yi{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,bi.currentPopupAction&&bi.currentPopupAction.cancel(),bi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tn(e,this.auth,"internal-error"),e}async onExecution(){rn(1===this.filter.length,"Popup operations only handle one event");const e=Jr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Yt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Yt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yt(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,vi.get())};e()}}bi.currentPopupAction=null;const xi=new Map;class wi extends yi{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=xi.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ci(t),r=ki(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}xi.set(this.auth._key(),e)}return this.bypassAuthState||xi.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Si(e,t){xi.set(e._key(),t)}function ki(e){return zn(e._redirectPersistence)}function Ci(e){return Bn("pendingRedirect",e.config.apiKey,e.name)}async function Ei(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Tt(e.app))return Promise.reject($t(e));const r=or(e),i=hi(r,t),o=new wi(r,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Ti{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ai(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ai(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Yt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_i(e))}saveEventToCache(e){this.cachedEventUids.add(_i(e)),this.lastProcessedEventTime=Date.now()}}function _i(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Ai(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Ii=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ni=/^https?/;async function Ri(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return gn(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Li(r))return}catch(n){}Jt(e,"unauthorized-domain")}function Li(e){const t=on(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ni.test(n))return!1;if(Ii.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Pi=new cn(3e4,6e4);function Oi(){const e=Xr().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Di(e){return new Promise((t,n)=>{var r,i,o;function a(){Oi(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Oi(),n(Yt(e,"network-request-failed"))},timeout:Pi.get()})}if(null===(i=null===(r=Xr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=Xr().gapi)||void 0===o?void 0:o.load)){const t=cr("iframefcb");return Xr()[t]=()=>{gapi.load?a():n(Yt(e,"network-request-failed"))},lr("".concat(sr.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw ji=null,e})}let ji=null;const Mi=new cn(5e3,15e3),Fi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ui(e){const t=e.config;tn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?un(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:It},i=zi.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(ce(r).slice(1))}async function Vi(e){const t=await function(e){return ji=ji||Di(e),ji}(e),n=Xr().gapi;return tn(n,e,"internal-error"),t.open({where:document.body,url:Ui(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fi,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Yt(e,"network-request-failed"),o=Xr().setTimeout(()=>{r(i)},Mi.get());function a(){Xr().clearTimeout(o),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const Bi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Wi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Hi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=Object.assign(Object.assign({},Bi),{width:r.toString(),height:i.toString(),top:o,left:a}),c=te().toLowerCase();n&&(s=Gn(c)?"_blank":n),qn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return $n(arguments.length>0&&void 0!==arguments[0]?arguments[0]:te())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new Wi(null);const d=window.open(t||"",s,u);tn(d,e,"popup-blocked");try{d.focus()}catch(h){}return new Wi(d)}const qi="__/auth/handler",Ki="emulator/auth/handler",Gi=encodeURIComponent("fac");async function Qi(e,t,n,r,i,o){tn(e.config.authDomain,e,"auth-domain-config-required"),tn(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:It,eventId:i};if(t instanceof Tr){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))a[e]=t}if(t instanceof _r){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const u of Object.keys(s))void 0===s[u]&&delete s[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Gi,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(qi);return un(t,Ki)}(e),"?").concat(ce(s).slice(1)).concat(c)}const Ji="webStorageSupport";const Yi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gr,this._completeRedirectFn=Ei,this._overrideRedirectResult=Si}async _openPopup(e,t,n,r){var i;rn(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Hi(e,await Qi(e,t,n,on(),r),Jr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Xr().location.href=e}(await Qi(e,t,n,on(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(rn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Vi(e),n=new Ti(e);return t.register("authEvent",t=>{tn(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ji,{type:Ji},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Ji];void 0!==i&&t(!!i),Jt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ri(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return er()||Kn()||$n()}};var Xi="@firebase/auth",$i="1.7.9";class Zi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){tn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const eo=Z("authIdTokenMaxAge")||300;let to=null;var no;sr={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Yt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},no="Browser",Ct(new ge("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;tn(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:s,clientPlatform:no,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tr(no)},c=new ir(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Ct(new ge("auth-internal",e=>(e=>new Zi(e))(or(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Lt(Xi,$i,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(no)),Lt(Xi,$i,"esm2017");var ro,io,oo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},ao={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],a=t+(o^n&(i^o))+r[0]+3614090360&4294967295;a=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(a<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((o=(t=n+((a=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=o+((a=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,o=this.h,a=0;a<t;){if(0==o)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[o++]=e.charCodeAt(a++),o==this.blockSize){n(this,i),o=0;break}}else for(;a<t;)if(i[o++]=e[a++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function o(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return s;if(0>e)return h(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var s=o(0),l=o(1),c=o(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(s,s);if(d(e))return t=m(h(e),t),new g(h(t.g),h(t.h));if(d(t))return t=m(e,h(t)),new g(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),o=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=o.add(r);0>=c.l(e)&&(i=i.add(n),o=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new g(i,t)}for(i=s;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(o=a(n)).j(t);d(c)||0<c.l(e);)c=(o=a(n-=r)).j(t);u(o)&&(o=l),i=i.add(o),e=f(e,c)}return new g(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,o=[],a=0;a<i;a++)o[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,o=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,o=0;o<=t;o++){var a=i+(65535&this.i(o))+(65535&e.i(o)),s=(a>>>16)+(this.i(o)>>>16)+(e.i(o)>>>16);i=s>>>16,a&=65535,s&=65535,n[o]=s<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return s;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var o=0;o<e.g.length;o++){var l=this.i(i)>>>16,f=65535&this.i(i),g=e.i(o)>>>16,m=65535&e.i(o);n[2*i+2*o]+=f*m,p(n,2*i+2*o),n[2*i+2*o+1]+=l*m,p(n,2*i+2*o+1),n[2*i+2*o+1]+=f*g,p(n,2*i+2*o+1),n[2*i+2*o+2]+=l*g,p(n,2*i+2*o+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,io=ao.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=s,o=0;o<t.length;o+=8){var l=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(c))):i=(i=i.j(r)).add(a(c))}return i},ro=ao.Integer=r}).apply("undefined"!==typeof oo?oo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var so,lo,co,uo,ho,fo,po,go,mo="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},yo={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof mo&&mo];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in i))break e;i=i[a]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function o(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?s:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(o(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){i.setTimeout(()=>{throw e},0)}function C(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let _,A=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},N=()=>{const e=i.Promise.resolve(void 0);_=()=>{e.then(R)}};var R=()=>{for(var e;e=C();){try{e.h.call(e.g)}catch(n){k(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}A=!1};function L(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function D(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:j[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&D.aa.h.call(this)}}d(D,P);var j={2:"touch",3:"pen",4:"mouse"};D.prototype.h=function(){D.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function z(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function W(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}V.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=W(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new z(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),q={};function K(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)K(e,t[o],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=a(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new V(e)),(n=l.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Q(e,t[o],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function J(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)J(e,t[o],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=W(o=e.g[t],n,r,i))&&(U(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=W(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[H]=null)):U(e)}}}function X(e){return e in q?q[e]:q[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new D(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){L.call(this),this.i=new V(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var i=t;w(t=new P(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ie(a=t.g=n[o],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.da&&a.capture==n){var s=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),i=!1!==s.call(l,r)&&i}}return i&&!r.defaultPrevented}function oe(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=oe(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,L),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){J(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class se extends L{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){L.call(this),this.h=e,this.g={}}d(le,L);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){P.call(this,"d")}function be(){P.call(this,"c")}d(ve,P),d(be,P);var xe={},we=null;function Se(){return we=we||new ne}function ke(e){P.call(this,xe.La,e)}function Ce(e){const t=Se();re(t,new ke(t))}function Ee(e,t){P.call(this,xe.STAT_EVENT,e),this.stat=t}function Te(e){const t=Se();re(t,new Ee(t,e))}function _e(e,t){P.call(this,xe.Ma,e),this.size=t}function Ae(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ie(){this.g=!0}function Ne(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return de(n)}catch(s){return t}}(e,n)+(r?" "+r:"")})}xe.La="serverreachability",d(ke,P),xe.STAT_EVENT="statevent",d(Ee,P),xe.Ma="timingevent",d(_e,P),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var Re,Le={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function De(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new je}function je(){this.i=null,this.g="",this.h=!1}d(Oe,pe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},Re=new Oe;var Me={},Fe={};function ze(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),We(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new je,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new se(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var o=0;o<i.length;o++){var a=K(n,i[o],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ce(),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o)for(var a="",s=o.split("&"),l=0;l<s.length;l++){var c=s[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function We(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ae(c(e.ba,e),t)}function qe(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||ln(e.j,e)}function Ge(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;sn(n),Yt(n)}rn(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ae(c(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&sn(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(et(o,o.h),o.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var s=a,l=r.L;l&&(s.I=l),s.B&&(qe(s),We(s)),r.g=a}else nn(r);0<n.i.length&&$t(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Jt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ce()}catch(u){}}De.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==qt(e)?t.j():this.Y(e)},De.prototype.Y=function(e){try{if(e==this.g)e:{const h=qt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Kt(this.g)))){this.J||4!=h||7==t||Ce(),qe(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var r=Kt(this.g);e="";var o=r.length,a=4==qt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var s="";break t}this.h.i=new i.TextDecoder}for(t=0;t<o;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==o-1)});r.length=0,this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,o,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Te(12),Ge(this),Ke(this);break e}Ne(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<s.length;){if(e=Be(this,s),e==Fe){4==h&&(this.s=4,Te(14),n=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Te(15),Ne(this.i,this.l,s,"[Invalid Chunk]"),n=!1;break}Ne(this.i,this.l,e,null),Qe(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=s.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<s.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),on(d),d.M=!0,Te(11))}}else Ne(this.i,this.l,s,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else Ne(this.i,this.l,s,null),Qe(this,s);4==h&&Ge(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,We(this)))}else(function(e){const t={};e=(e.g&&2<=qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=S(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Ge(this),Ke(this)}}}catch(vo){}},De.prototype.cancel=function(){this.J=!0,Ge(this)},De.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ce(),Te(17)),Ge(this),this.s=2,Ke(this)):He(this,this.S-e)};var Je=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(o(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(o(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(o(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ot(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ot){this.h=e.h,st(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,st(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function at(e){return new ot(e)}function st(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(St(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(kt(this,t),Et(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ot.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,xt)),e.join("")};var gt,mt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,bt=/[#\?@]/g,xt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function St(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function kt(e,t){St(e),t=Tt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ct(e,t){return St(e),t=Tt(e,t),e.g.has(t)}function Et(e,t,n){kt(e,t),0<n.length&&(e.i=null,e.g.set(Tt(e,t),h(n)),e.h+=n.length)}function Tt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function _t(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(o){}}function At(){this.g=new fe}function It(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;a(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Nt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Lt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Pt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Dt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function jt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Dt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){St(this),this.i=null,e=Tt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){St(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){St(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){St(this);let t=[];if("string"===typeof e)Ct(this,e)&&(t=t.concat(this.g.get(Tt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return St(this),this.i=null,Ct(this,e=Tt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=o;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},d(Nt,pe),Nt.prototype.g=function(){return new Rt(this.l,this.j)},Nt.prototype.i=(gt={},function(){return gt}),d(Rt,ne),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pt(this):Ot(this),3==this.readyState&&Lt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Pt(this))},e.Qa=function(e){this.g&&(this.response=e,Pt(this))},e.ga=function(){this.g&&Pt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Ft=/^https?$/i,zt=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Vt(e),Wt(e)}function Vt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=qt(e)||2!=e.Z()))if(e.u&&4==qt(e))oe(e.Ea,0,e);else if(re(e,"readystatechange"),4==qt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var o;if(o=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),o=!Ft.test(a?a.toLowerCase():"")}n=o}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var s=2<qt(e)?e.g.statusText:""}catch(l){s=""}e.l=s+" ["+e.Z()+"]",Vt(e)}}finally{Wt(e)}}}function Wt(e,t){if(e.g){Ht(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Ht(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function qt(e){return e.g?e.g.readyState:0}function Kt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(wo){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new At,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Jt(e){if(Xt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new De(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),We(t)}dn(e)}function Yt(e){e.g&&(on(e),e.g.cancel(),e.g=null)}function Xt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),sn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function $t(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;_||N(),A||(_(),A=!0),I.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&jt(r,e.m,e.o),n=new De(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),ze(n,r,t)}function en(e,t){e.H&&v(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const s=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{It(s,e,"req"+n+"_")}catch(vo){r&&r(s)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;_||N(),A||(_(),A=!0),I.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ae(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function on(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function an(e){e.g=new De(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&jt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Ue(n,e)}function sn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){sn(e),on(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Se(),new _e(r,n)),$t(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ae(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new ot(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||st(r,"https"),dt(r),t?function(e,t){const n=new Ie;if(i.Image){const r=new Image;r.onload=u(_t,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(_t,n,"TestLoadImage: error",!1,t,r),r.onabort=u(_t,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(_t,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout(()=>{n.abort(),_t(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?_t(0,0,!0,t):_t(0,0,!1,t)}).catch(()=>{clearTimeout(r),_t(0,0,!1,t)})}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),dn(e),Xt(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof ot?at(n):new ot(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var o=i.location;r=o.protocol,t=t?t+"."+o.hostname:o.hostname,o=+o.port;var a=new ot(null);r&&st(a,r),t&&(a.g=t),o&&lt(a,o),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new Nt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function pn(){}function gn(){}function mn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?ge(this.o):ge(Re),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Ut(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),o=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(zt,t,void 0))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,s]of n)this.g.setRequestHeader(i,s);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Ut(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Wt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch(gt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(gt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),$t(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new De(this,this.j,e);let o=this.o;if(this.S&&(o?(o=b(o),w(o,this.S)):o=this.S),null!==this.m||this.O||(i.H=o,o=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Dt(o)))+"&"+t:this.m&&jt(n,this.m,o)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,ze(i,n,null)):ze(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Xe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ae(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Yt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},gn.prototype.g=function(e,t){return new mn(e,t)},d(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Jt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Je(t.Ya++,e)),3==t.G&&$t(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Jt(this.g),delete this.g,mn.aa.N.call(this)},d(yn,ve),d(vn,be),d(bn,pn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new yn(e))},bn.prototype.sa=function(e){re(this.g,new vn)},bn.prototype.ra=function(){re(this.g,"b")},gn.prototype.createWebChannel=gn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,go=yo.createWebChannelTransport=function(){return new gn},po=yo.getStatEventTarget=function(){return Se()},fo=yo.Event=xe,ho=yo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Le.NO_ERROR=0,Le.TIMEOUT=8,Le.HTTP_ERROR=6,uo=yo.ErrorCode=Le,Pe.COMPLETE="complete",co=yo.EventType=Pe,me.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,lo=yo.WebChannel=me,yo.FetchXmlHttpFactory=Nt,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,so=yo.XhrIo=Mt}).apply("undefined"!==typeof mo?mo:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const vo="@firebase/firestore";class bo{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bo.UNAUTHENTICATED=new bo(null),bo.GOOGLE_CREDENTIALS=new bo("google-credentials-uid"),bo.FIRST_PARTY=new bo("first-party-uid"),bo.MOCK_USER=new bo("mock-user");let xo="10.14.0";const wo=new Ee("@firebase/firestore");function So(){return wo.logLevel}function ko(e){if(wo.logLevel<=xe.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(To);wo.debug("Firestore (".concat(xo,"): ").concat(e),...i)}}function Co(e){if(wo.logLevel<=xe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(To);wo.error("Firestore (".concat(xo,"): ").concat(e),...i)}}function Eo(e){if(wo.logLevel<=xe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(To);wo.warn("Firestore (".concat(xo,"): ").concat(e),...i)}}function To(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function _o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(xo,") INTERNAL ASSERTION FAILED: ")+e;throw Co(t),new Error(t)}function Ao(e,t){e||_o()}function Io(e,t){return e}const No={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ro extends ie{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Lo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Po{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Oo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bo.UNAUTHENTICATED))}shutdown(){}}class Do{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class jo{constructor(e){this.t=e,this.currentUser=bo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ao(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Lo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Lo,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{ko("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(ko("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Lo)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(ko("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ao("string"==typeof t.accessToken),new Po(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ao(null===e||"string"==typeof e),new bo(e)}}class Mo{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=bo.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Fo{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Mo(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(bo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Uo{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ao(void 0===this.o);const n=e=>{null!=e.error&&ko("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,ko("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{ko("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):ko("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ao("string"==typeof e.token),this.R=e.token,new zo(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Vo(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Bo{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Vo(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Wo(e,t){return e<t?-1:e>t?1:0}function Ho(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class qo{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ro(No.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ro(No.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ro(No.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ro(No.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qo.fromMillis(Date.now())}static fromDate(e){return qo.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new qo(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wo(this.nanoseconds,e.nanoseconds):Wo(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ko{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ko(e)}static min(){return new Ko(new qo(0,0))}static max(){return new Ko(new qo(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Go{constructor(e,t,n){void 0===t?t=0:t>e.length&&_o(),void 0===n?n=e.length-t:n>e.length-t&&_o(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Go.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Go?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qo extends Go{construct(e,t,n){return new Qo(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Ro(No.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new Qo(e)}static emptyPath(){return new Qo([])}}const Jo=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yo extends Go{construct(e,t,n){return new Yo(e,t,n)}static isValidIdentifier(e){return Jo.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yo.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Yo(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ro(No.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ro(No.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ro(No.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new Ro(No.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yo(t)}static emptyPath(){return new Yo([])}}class Xo{constructor(e){this.path=e}static fromPath(e){return new Xo(Qo.fromString(e))}static fromName(e){return new Xo(Qo.fromString(e).popFirst(5))}static empty(){return new Xo(Qo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qo.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qo.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xo(new Qo(e.slice()))}}class $o{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}$o.UNKNOWN_ID=-1;function Zo(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ko.fromTimestamp(1e9===r?new qo(n+1,0):new qo(n,r));return new ta(i,Xo.empty(),t)}function ea(e){return new ta(e.readTime,e.key,-1)}class ta{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ta(Ko.min(),Xo.empty(),-1)}static max(){return new ta(Ko.max(),Xo.empty(),-1)}}function na(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Xo.comparator(e.documentKey,t.documentKey),0!==n?n:Wo(e.largestBatchId,t.largestBatchId))}const ra="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ia{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function oa(e){if(e.code!==No.FAILED_PRECONDITION||e.message!==ra)throw e;ko("LocalStore","Unexpectedly lost primary lease")}class aa{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_o(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new aa((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof aa?t:aa.resolve(t)}catch(e){return aa.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):aa.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):aa.reject(t)}static resolve(e){return new aa((t,n)=>{t(e)})}static reject(e){return new aa((t,n)=>{n(e)})}static waitFor(e){return new aa((t,n)=>{let r=0,i=0,o=!1;e.forEach(e=>{++r,e.next(()=>{++i,o&&i===r&&t()},e=>n(e))}),o=!0,i===r&&t()})}static or(e){let t=aa.resolve(!1);for(const n of e)t=t.next(e=>e?aa.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new aa((n,r)=>{const i=e.length,o=new Array(i);let a=0;for(let s=0;s<i;s++){const l=s;t(e[l]).next(e=>{o[l]=e,++a,a===i&&n(o)},e=>r(e))}})}static doWhile(e,t){return new aa((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function sa(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function la(e){return"IndexedDbTransactionError"===e.name}class ca{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function ua(e){return null==e}function da(e){return 0===e&&1/e==-1/0}function ha(e){return"number"==typeof e&&Number.isInteger(e)&&!da(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}ca.oe=-1;const fa=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pa=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ga=pa,ma=[...ga,"indexConfiguration","indexState","indexEntries"];function ya(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function va(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ba(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class xa{constructor(e,t){this.comparator=e,this.root=t||Sa.EMPTY}insert(e,t){return new xa(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sa.BLACK,null,null))}remove(e){return new xa(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sa.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wa(this.root,e,this.comparator,!1)}getReverseIterator(){return new wa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wa(this.root,e,this.comparator,!0)}}class wa{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sa{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Sa.RED,this.left=null!=r?r:Sa.EMPTY,this.right=null!=i?i:Sa.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Sa(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Sa.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Sa.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sa.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _o();if(this.right.isRed())throw _o();const e=this.left.check();if(e!==this.right.check())throw _o();return e+(this.isRed()?0:1)}}Sa.EMPTY=null,Sa.RED=!0,Sa.BLACK=!1,Sa.EMPTY=new class{constructor(){this.size=0}get key(){throw _o()}get value(){throw _o()}get color(){throw _o()}get left(){throw _o()}get right(){throw _o()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Sa(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ka{constructor(e){this.comparator=e,this.data=new xa(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ca(this.data.getIterator())}getIteratorFrom(e){return new Ca(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof ka))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ka(this.comparator);return t.data=e,t}}class Ca{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ea{constructor(e){this.fields=e,e.sort(Yo.comparator)}static empty(){return new Ea([])}unionWith(e){let t=new ka(Yo.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ea(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ho(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Ta extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _a{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ta("Invalid base64 string: "+e):e}}(e);return new _a(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new _a(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wo(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_a.EMPTY_BYTE_STRING=new _a("");const Aa=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ia(e){if(Ao(!!e),"string"==typeof e){let t=0;const n=Aa.exec(e);if(Ao(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Na(e.seconds),nanos:Na(e.nanos)}}function Na(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ra(e){return"string"==typeof e?_a.fromBase64String(e):_a.fromUint8Array(e)}function La(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Pa(e){const t=e.mapValue.fields.__previous_value__;return La(t)?Pa(t):t}function Oa(e){const t=Ia(e.mapValue.fields.__local_write_time__.timestampValue);return new qo(t.seconds,t.nanos)}class Da{constructor(e,t,n,r,i,o,a,s,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=l}}class ja{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ja("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ja&&e.projectId===this.projectId&&e.database===this.database}}const Ma={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Fa(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?La(e)?4:Za(e)?9007199254740991:Xa(e)?10:11:_o()}function za(e,t){if(e===t)return!0;const n=Fa(e);if(n!==Fa(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Oa(e).isEqual(Oa(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ia(e.timestampValue),r=Ia(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ra(e.bytesValue).isEqual(Ra(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Na(e.geoPointValue.latitude)===Na(t.geoPointValue.latitude)&&Na(e.geoPointValue.longitude)===Na(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Na(e.integerValue)===Na(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Na(e.doubleValue),r=Na(t.doubleValue);return n===r?da(n)===da(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ho(e.arrayValue.values||[],t.arrayValue.values||[],za);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ya(n)!==ya(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!za(n[i],r[i])))return!1;return!0}(e,t);default:return _o()}}function Ua(e,t){return void 0!==(e.values||[]).find(e=>za(e,t))}function Va(e,t){if(e===t)return 0;const n=Fa(e),r=Fa(t);if(n!==r)return Wo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Wo(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Na(e.integerValue||e.doubleValue),r=Na(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ba(e.timestampValue,t.timestampValue);case 4:return Ba(Oa(e),Oa(t));case 5:return Wo(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ra(e),r=Ra(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Wo(n[i],r[i]);if(0!==e)return e}return Wo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Wo(Na(e.latitude),Na(t.latitude));return 0!==n?n:Wo(Na(e.longitude),Na(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Wa(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,o;const a=e.fields||{},s=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=s.value)||void 0===r?void 0:r.arrayValue,u=Wo((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(o=null==c?void 0:c.values)||void 0===o?void 0:o.length)||0);return 0!==u?u:Wa(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ma.mapValue&&t===Ma.mapValue)return 0;if(e===Ma.mapValue)return 1;if(t===Ma.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let a=0;a<r.length&&a<o.length;++a){const e=Wo(r[a],o[a]);if(0!==e)return e;const t=Va(n[r[a]],i[o[a]]);if(0!==t)return t}return Wo(r.length,o.length)}(e.mapValue,t.mapValue);default:throw _o()}}function Ba(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Wo(e,t);const n=Ia(e),r=Ia(t),i=Wo(n.seconds,r.seconds);return 0!==i?i:Wo(n.nanos,r.nanos)}function Wa(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Va(n[i],r[i]);if(e)return e}return Wo(n.length,r.length)}function Ha(e){return qa(e)}function qa(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ia(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ra(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Xo.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=qa(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(qa(e.fields[i]));return n+"}"}(e.mapValue):_o()}function Ka(e){return!!e&&"integerValue"in e}function Ga(e){return!!e&&"arrayValue"in e}function Qa(e){return!!e&&"nullValue"in e}function Ja(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ya(e){return!!e&&"mapValue"in e}function Xa(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function $a(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return va(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=$a(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=$a(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Za(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class es{constructor(e){this.value=e}static empty(){return new es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ya(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$a(t)}setAll(e){let t=Yo.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=$a(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ya(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return za(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ya(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){va(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new es($a(this.value))}}function ts(e){const t=[];return va(e.fields,(e,n)=>{const r=new Yo([e]);if(Ya(n)){const e=ts(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Ea(t)}class ns{constructor(e,t,n,r,i,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ns(e,0,Ko.min(),Ko.min(),Ko.min(),es.empty(),0)}static newFoundDocument(e,t,n,r){return new ns(e,1,t,Ko.min(),n,r,0)}static newNoDocument(e,t){return new ns(e,2,t,Ko.min(),Ko.min(),es.empty(),0)}static newUnknownDocument(e,t){return new ns(e,3,t,Ko.min(),Ko.min(),es.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ko.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ko.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ns&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ns(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class rs{constructor(e,t){this.position=e,this.inclusive=t}}function is(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],a=e.position[i];if(r=o.field.isKeyField()?Xo.comparator(Xo.fromName(a.referenceValue),n.key):Va(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function os(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!za(e.position[n],t.position[n]))return!1;return!0}class as{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ss(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ls{}class cs extends ls{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ys(e,t,n):"array-contains"===t?new ws(e,n):"in"===t?new Ss(e,n):"not-in"===t?new ks(e,n):"array-contains-any"===t?new Cs(e,n):new cs(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new vs(e,n):new bs(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Va(t,this.value)):null!==t&&Fa(this.value)===Fa(t)&&this.matchesComparison(Va(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return _o()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class us extends ls{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new us(e,t)}matches(e){return ds(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ds(e){return"and"===e.op}function hs(e){return fs(e)&&ds(e)}function fs(e){for(const t of e.filters)if(t instanceof us)return!1;return!0}function ps(e){if(e instanceof cs)return e.field.canonicalString()+e.op.toString()+Ha(e.value);if(hs(e))return e.filters.map(e=>ps(e)).join(",");{const t=e.filters.map(e=>ps(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function gs(e,t){return e instanceof cs?function(e,t){return t instanceof cs&&e.op===t.op&&e.field.isEqual(t.field)&&za(e.value,t.value)}(e,t):e instanceof us?function(e,t){return t instanceof us&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&gs(n,t.filters[r]),!0)}(e,t):void _o()}function ms(e){return e instanceof cs?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ha(e.value))}(e):e instanceof us?function(e){return e.op.toString()+" {"+e.getFilters().map(ms).join(" ,")+"}"}(e):"Filter"}class ys extends cs{constructor(e,t,n){super(e,t,n),this.key=Xo.fromName(n.referenceValue)}matches(e){const t=Xo.comparator(e.key,this.key);return this.matchesComparison(t)}}class vs extends cs{constructor(e,t){super(e,"in",t),this.keys=xs("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class bs extends cs{constructor(e,t){super(e,"not-in",t),this.keys=xs("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function xs(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Xo.fromName(e.referenceValue))}class ws extends cs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ga(t)&&Ua(t.arrayValue,this.value)}}class Ss extends cs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ua(this.value.arrayValue,t)}}class ks extends cs{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ua(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ua(this.value.arrayValue,t)}}class Cs extends cs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ga(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ua(this.value.arrayValue,e))}}class Es{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function Ts(e){return new Es(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function _s(e){const t=Io(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>ps(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),ua(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Ha(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Ha(e)).join(",")),t.ue=e}return t.ue}function As(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ss(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!gs(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!os(e.startAt,t.startAt)&&os(e.endAt,t.endAt)}function Is(e){return Xo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ns{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Rs(e,t,n,r,i,o,a,s){return new Ns(e,t,n,r,i,o,a,s)}function Ls(e){return new Ns(e)}function Ps(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Os(e){return null!==e.collectionGroup}function Ds(e){const t=Io(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new ka(Yo.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new as(r,n))}),e.has(Yo.keyField().canonicalString())||t.ce.push(new as(Yo.keyField(),n))}return t.ce}function js(e){const t=Io(e);return t.le||(t.le=Ms(t,Ds(e))),t.le}function Ms(e,t){if("F"===e.limitType)return Ts(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new as(e.field,t)});const n=e.endAt?new rs(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new rs(e.startAt.position,e.startAt.inclusive):null;return Ts(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Fs(e,t,n){return new Ns(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function zs(e,t){return As(js(e),js(t))&&e.limitType===t.limitType}function Us(e){return"".concat(_s(js(e)),"|lt:").concat(e.limitType)}function Vs(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>ms(e)).join(", "),"]")),ua(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Ha(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Ha(e)).join(",")),"Target(".concat(t,")")}(js(e)),"; limitType=").concat(e.limitType,")")}function Bs(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Xo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ds(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=is(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ds(e),t))&&!(e.endAt&&!function(e,t,n){const r=is(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ds(e),t))}(e,t)}function Ws(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Hs(e){return(t,n)=>{let r=!1;for(const i of Ds(e)){const e=qs(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function qs(e,t,n){const r=e.field.isKeyField()?Xo.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Va(r,i):_o()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return _o()}}class Ks{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){va(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return ba(this.inner)}size(){return this.innerSize}}const Gs=new xa(Xo.comparator);function Qs(){return Gs}const Js=new xa(Xo.comparator);function Ys(){let e=Js;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Xs(e){let t=Js;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function $s(){return el()}function Zs(){return el()}function el(){return new Ks(e=>e.toString(),(e,t)=>e.isEqual(t))}const tl=new xa(Xo.comparator),nl=new ka(Xo.comparator);function rl(){let e=nl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const il=new ka(Wo);function ol(){return il}function al(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:da(t)?"-0":t}}function sl(e){return{integerValue:""+e}}function ll(e,t){return ha(t)?sl(t):al(e,t)}class cl{constructor(){this._=void 0}}function ul(e,t,n){return e instanceof fl?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&La(t)&&(t=Pa(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof pl?gl(e,t):e instanceof ml?yl(e,t):function(e,t){const n=hl(e,t),r=bl(n)+bl(e.Pe);return Ka(n)&&Ka(e.Pe)?sl(r):al(e.serializer,r)}(e,t)}function dl(e,t,n){return e instanceof pl?gl(e,t):e instanceof ml?yl(e,t):n}function hl(e,t){return e instanceof vl?function(e){return Ka(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class fl extends cl{}class pl extends cl{constructor(e){super(),this.elements=e}}function gl(e,t){const n=xl(t);for(const r of e.elements)n.some(e=>za(e,r))||n.push(r);return{arrayValue:{values:n}}}class ml extends cl{constructor(e){super(),this.elements=e}}function yl(e,t){let n=xl(t);for(const r of e.elements)n=n.filter(e=>!za(e,r));return{arrayValue:{values:n}}}class vl extends cl{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function bl(e){return Na(e.integerValue||e.doubleValue)}function xl(e){return Ga(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class wl{constructor(e,t){this.version=e,this.transformResults=t}}class Sl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Sl}static exists(e){return new Sl(void 0,e)}static updateTime(e){return new Sl(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Cl{}function El(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Dl(e.key,Sl.none()):new Nl(e.key,e.data,Sl.none());{const n=e.data,r=es.empty();let i=new ka(Yo.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Rl(e.key,r,new Ea(i.toArray()),Sl.none())}}function Tl(e,t,n){e instanceof Nl?function(e,t,n){const r=e.value.clone(),i=Pl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Rl?function(e,t,n){if(!kl(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Pl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ll(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function _l(e,t,n,r){return e instanceof Nl?function(e,t,n,r){if(!kl(e.precondition,t))return n;const i=e.value.clone(),o=Ol(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Rl?function(e,t,n,r){if(!kl(e.precondition,t))return n;const i=Ol(e.fieldTransforms,r,t),o=t.data;return o.setAll(Ll(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return kl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Al(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=hl(r.transform,e||null);null!=i&&(null===n&&(n=es.empty()),n.set(r.field,i))}return n||null}function Il(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ho(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof pl&&t instanceof pl||e instanceof ml&&t instanceof ml?Ho(e.elements,t.elements,za):e instanceof vl&&t instanceof vl?za(e.Pe,t.Pe):e instanceof fl&&t instanceof fl}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Nl extends Cl{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Rl extends Cl{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ll(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Pl(e,t,n){const r=new Map;Ao(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,dl(a,s,n[i]))}return r}function Ol(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,ul(e,o,t))}return r}class Dl extends Cl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jl extends Cl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ml{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Tl(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=_l(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=_l(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Zs();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const s=El(o,a);null!==s&&n.set(r.key,s),o.isValidDocument()||o.convertToNoDocument(Ko.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),rl())}isEqual(e){return this.batchId===e.batchId&&Ho(this.mutations,e.mutations,(e,t)=>Il(e,t))&&Ho(this.baseMutations,e.baseMutations,(e,t)=>Il(e,t))}}class Fl{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ao(e.mutations.length===n.length);let r=tl;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Fl(e,t,n,r)}}class zl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Ul{constructor(e,t){this.count=e,this.unchangedNames=t}}var Vl,Bl;function Wl(e){switch(e){default:return _o();case No.CANCELLED:case No.UNKNOWN:case No.DEADLINE_EXCEEDED:case No.RESOURCE_EXHAUSTED:case No.INTERNAL:case No.UNAVAILABLE:case No.UNAUTHENTICATED:return!1;case No.INVALID_ARGUMENT:case No.NOT_FOUND:case No.ALREADY_EXISTS:case No.PERMISSION_DENIED:case No.FAILED_PRECONDITION:case No.ABORTED:case No.OUT_OF_RANGE:case No.UNIMPLEMENTED:case No.DATA_LOSS:return!0}}function Hl(e){if(void 0===e)return Co("GRPC error has no .code"),No.UNKNOWN;switch(e){case Vl.OK:return No.OK;case Vl.CANCELLED:return No.CANCELLED;case Vl.UNKNOWN:return No.UNKNOWN;case Vl.DEADLINE_EXCEEDED:return No.DEADLINE_EXCEEDED;case Vl.RESOURCE_EXHAUSTED:return No.RESOURCE_EXHAUSTED;case Vl.INTERNAL:return No.INTERNAL;case Vl.UNAVAILABLE:return No.UNAVAILABLE;case Vl.UNAUTHENTICATED:return No.UNAUTHENTICATED;case Vl.INVALID_ARGUMENT:return No.INVALID_ARGUMENT;case Vl.NOT_FOUND:return No.NOT_FOUND;case Vl.ALREADY_EXISTS:return No.ALREADY_EXISTS;case Vl.PERMISSION_DENIED:return No.PERMISSION_DENIED;case Vl.FAILED_PRECONDITION:return No.FAILED_PRECONDITION;case Vl.ABORTED:return No.ABORTED;case Vl.OUT_OF_RANGE:return No.OUT_OF_RANGE;case Vl.UNIMPLEMENTED:return No.UNIMPLEMENTED;case Vl.DATA_LOSS:return No.DATA_LOSS;default:return _o()}}(Bl=Vl||(Vl={}))[Bl.OK=0]="OK",Bl[Bl.CANCELLED=1]="CANCELLED",Bl[Bl.UNKNOWN=2]="UNKNOWN",Bl[Bl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bl[Bl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bl[Bl.NOT_FOUND=5]="NOT_FOUND",Bl[Bl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bl[Bl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bl[Bl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bl[Bl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bl[Bl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bl[Bl.ABORTED=10]="ABORTED",Bl[Bl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bl[Bl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bl[Bl.INTERNAL=13]="INTERNAL",Bl[Bl.UNAVAILABLE=14]="UNAVAILABLE",Bl[Bl.DATA_LOSS=15]="DATA_LOSS";let ql=null;function Kl(){return new TextEncoder}const Gl=new ro([4294967295,4294967295],0);function Ql(e){const t=Kl().encode(e),n=new io;return n.update(t),new Uint8Array(n.digest())}function Jl(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new ro([n,r],0),new ro([i,o],0)]}class Yl{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Xl("Invalid padding: ".concat(t));if(n<0)throw new Xl("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Xl("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Xl("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=ro.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(ro.fromNumber(n)));return 1===r.compare(Gl)&&(r=new ro([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Ql(e),[n,r]=Jl(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Yl(i,r,t);return n.forEach(e=>o.insert(e)),o}insert(e){if(0===this.Ie)return;const t=Ql(e),[n,r]=Jl(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Xl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class $l{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Zl.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new $l(Ko.min(),r,new xa(Wo),Qs(),rl())}}class Zl{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Zl(n,t,rl(),rl(),rl())}}class ec{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class tc{constructor(e,t){this.targetId=e,this.me=t}}class nc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_a.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class rc{constructor(){this.fe=0,this.ge=ac(),this.pe=_a.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=rl(),t=rl(),n=rl();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:_o()}}),new Zl(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=ac()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ao(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ic{constructor(e){this.Le=e,this.Be=new Map,this.ke=Qs(),this.qe=oc(),this.Qe=new xa(Wo)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:_o()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Is(i))if(0===n){const e=new Xo(i.path);this.Ue(t,e,ns.newNoDocument(e,Ko.min()))}else Ao(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==ql||ql.et(function(e,t,n,r,i){var o,a,s,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(o=null==h?void 0:h.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(s=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===s?void 0:s.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=Ra(n).toUint8Array()}catch(e){if(e instanceof Ta)return Eo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Yl(o,r,i)}catch(e){return Eo(e instanceof Xl?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Le.tt(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Is(i.target)){const t=new Xo(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,ns.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=rl();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new $l(e,t,this.Qe,this.ke,n);return this.ke=Qs(),this.qe=oc(),this.Qe=new xa(Wo),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new rc,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ka(Wo),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||ko("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new rc),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function oc(){return new xa(Xo.comparator)}function ac(){return new xa(Xo.comparator)}const sc={asc:"ASCENDING",desc:"DESCENDING"},lc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cc={and:"AND",or:"OR"};class uc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function dc(e,t){return e.useProto3Json||ua(t)?t:{value:t}}function hc(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function fc(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function pc(e,t){return hc(e,t.toTimestamp())}function gc(e){return Ao(!!e),Ko.fromTimestamp(function(e){const t=Ia(e);return new qo(t.seconds,t.nanos)}(e))}function mc(e,t){return yc(e,t).canonicalString()}function yc(e,t){const n=function(e){return new Qo(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function vc(e){const t=Qo.fromString(e);return Ao(Fc(t)),t}function bc(e,t){return mc(e.databaseId,t.path)}function xc(e,t){const n=vc(t);if(n.get(1)!==e.databaseId.projectId)throw new Ro(No.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ro(No.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Xo(Cc(n))}function wc(e,t){return mc(e.databaseId,t)}function Sc(e){const t=vc(e);return 4===t.length?Qo.emptyPath():Cc(t)}function kc(e){return new Qo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Cc(e){return Ao(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ec(e,t,n){return{name:bc(e,t),fields:n.value.mapValue.fields}}function Tc(e,t){let n;if(t instanceof Nl)n={update:Ec(e,t.key,t.value)};else if(t instanceof Dl)n={delete:bc(e,t.key)};else if(t instanceof Rl)n={update:Ec(e,t.key,t.data),updateMask:Mc(t.fieldMask)};else{if(!(t instanceof jl))return _o();n={verify:bc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof fl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof pl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ml)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof vl)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw _o()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:pc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:_o()}(e,t.precondition)),n}function _c(e,t){return{documents:[wc(e,t.path)]}}function Ac(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=wc(e,i);const o=function(e){if(0!==e.length)return jc(us.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Oc(e.field),direction:Rc(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const s=dc(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Ic(e){let t=Sc(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ao(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Nc(e);return t instanceof us&&hs(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new as(Dc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,ua(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new rs(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new rs(n,t)}(n.endAt)),Rs(t,i,a,o,s,"F",l,c)}function Nc(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Dc(e.unaryFilter.field);return cs.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Dc(e.unaryFilter.field);return cs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Dc(e.unaryFilter.field);return cs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Dc(e.unaryFilter.field);return cs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return _o()}}(e):void 0!==e.fieldFilter?function(e){return cs.create(Dc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _o()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return us.create(e.compositeFilter.filters.map(e=>Nc(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return _o()}}(e.compositeFilter.op))}(e):_o()}function Rc(e){return sc[e]}function Lc(e){return lc[e]}function Pc(e){return cc[e]}function Oc(e){return{fieldPath:e.canonicalString()}}function Dc(e){return Yo.fromServerFormat(e.fieldPath)}function jc(e){return e instanceof cs?function(e){if("=="===e.op){if(Ja(e.value))return{unaryFilter:{field:Oc(e.field),op:"IS_NAN"}};if(Qa(e.value))return{unaryFilter:{field:Oc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ja(e.value))return{unaryFilter:{field:Oc(e.field),op:"IS_NOT_NAN"}};if(Qa(e.value))return{unaryFilter:{field:Oc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oc(e.field),op:Lc(e.op),value:e.value}}}(e):e instanceof us?function(e){const t=e.getFilters().map(e=>jc(e));return 1===t.length?t[0]:{compositeFilter:{op:Pc(e.op),filters:t}}}(e):_o()}function Mc(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Fc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class zc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ko.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ko.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:_a.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new zc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Uc{constructor(e){this.ct=e}}function Vc(e){const t=Ic({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Fs(t,t.limit,"L"):t}class Bc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Na(e.integerValue));else if("doubleValue"in e){const n=Na(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),da(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Ia(n)),t.Rt("".concat(n.seconds||"")),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ra(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?Za(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Xa(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):_o()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const o="value",a=(null===(r=null===(n=i[o].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Na(a)),this.Vt(o,t),this.Tt(i[o],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),Xo.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Bc.vt=new Bc;class Wc{constructor(){this.un=new Hc}addToCollectionParentIndex(e,t){return this.un.add(t),aa.resolve()}getCollectionParents(e,t){return aa.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return aa.resolve()}deleteFieldIndex(e,t){return aa.resolve()}deleteAllFieldIndexes(e){return aa.resolve()}createTargetIndexes(e,t){return aa.resolve()}getDocumentsMatchingTarget(e,t){return aa.resolve(null)}getIndexType(e,t){return aa.resolve(0)}getFieldIndexes(e,t){return aa.resolve([])}getNextCollectionGroupToUpdate(e){return aa.resolve(null)}getMinOffset(e,t){return aa.resolve(ta.min())}getMinOffsetFromCollectionGroup(e,t){return aa.resolve(ta.min())}updateCollectionGroup(e,t,n){return aa.resolve()}updateIndexEntries(e,t){return aa.resolve()}}class Hc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ka(Qo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ka(Qo.comparator)).toArray()}}new Uint8Array(0);class qc{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new qc(e,qc.DEFAULT_COLLECTION_PERCENTILE,qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}qc.DEFAULT_COLLECTION_PERCENTILE=10,qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qc.DEFAULT=new qc(41943040,qc.DEFAULT_COLLECTION_PERCENTILE,qc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qc.DISABLED=new qc(-1,0,0);class Kc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Kc(0)}static kn(){return new Kc(-1)}}class Gc{constructor(){this.changes=new Ks(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ns.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?aa.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Qc{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Jc{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&_l(n.mutation,e,Ea.empty(),qo.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,rl()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rl();const r=$s();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Ys();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=$s();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,rl()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Qs();const o=el(),a=el();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Rl)?i=i.insert(t.key,t):void 0!==a?(o.set(t.key,a.mutation.getFieldMask()),_l(a.mutation,t,a.mutation.getFieldMask(),qo.now())):o.set(t.key,Ea.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Qc(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=el();let r=new xa((e,t)=>e-t),i=rl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let a=n.get(e)||Ea.empty();a=i.applyToLocalView(o,a),n.set(e,a);const s=(r.get(i.batchId)||rl()).add(e);r=r.insert(i.batchId,s)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,c=Zs();l.forEach(e=>{if(!i.has(e)){const r=El(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,s,c))}return aa.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Xo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Os(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):aa.resolve($s());let a=-1,s=i;return o.next(t=>aa.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?aa.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{s=s.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,s,t,rl())).next(e=>({batchId:a,changes:Xs(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xo(t)).next(e=>{let t=Ys();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Ys();return this.indexManager.getCollectionParents(e,i).next(a=>aa.forEach(a,a=>{const s=function(e,t){return new Ns(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next(e=>{e.forEach((e,t)=>{o=o.insert(e,t)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ns.newInvalidDocument(r)))});let n=Ys();return e.forEach((e,r)=>{const o=i.get(e);void 0!==o&&_l(o.mutation,r,Ea.empty(),qo.now()),Bs(t,r)&&(n=n.insert(e,r))}),n})}}class Yc{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return aa.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:gc(e.createTime)}}(t)),aa.resolve()}getNamedQuery(e,t){return aa.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Vc(e.bundledQuery),readTime:gc(e.readTime)}}(t)),aa.resolve()}}class Xc{constructor(){this.overlays=new xa(Xo.comparator),this.Ir=new Map}getOverlay(e,t){return aa.resolve(this.overlays.get(t))}getOverlays(e,t){const n=$s();return aa.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),aa.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),aa.resolve()}getOverlaysForCollection(e,t,n){const r=$s(),i=t.length+1,o=new Xo(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const e=a.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return aa.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new xa((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=$s(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=$s(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return aa.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new zl(t,n));let i=this.Ir.get(t);void 0===i&&(i=rl(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class $c{constructor(){this.sessionToken=_a.EMPTY_BYTE_STRING}getSessionToken(e){return aa.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,aa.resolve()}}class Zc{constructor(){this.Tr=new ka(eu.Er),this.dr=new ka(eu.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new eu(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new eu(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new Xo(new Qo([])),n=new eu(t,e),r=new eu(t,e+1),i=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),i.push(e.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Xo(new Qo([])),n=new eu(t,e),r=new eu(t,e+1);let i=rl();return this.dr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new eu(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class eu{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Xo.comparator(e.key,t.key)||Wo(e.wr,t.wr)}static Ar(e,t){return Wo(e.wr,t.wr)||Xo.comparator(e.key,t.key)}}class tu{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ka(eu.Er)}checkEmpty(e){return aa.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Ml(i,t,n,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new eu(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return aa.resolve(o)}lookupMutationBatch(e,t){return aa.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return aa.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return aa.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return aa.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new eu(t,0),r=new eu(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);i.push(t)}),aa.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ka(Wo);return t.forEach(e=>{const t=new eu(e,0),r=new eu(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),aa.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Xo.isDocumentKey(i)||(i=i.child(""));const o=new eu(new Xo(i),0);let a=new ka(Wo);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},o),aa.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ao(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return aa.forEach(t.mutations,r=>{const i=new eu(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new eu(t,0),r=this.br.firstAfterOrEqual(n);return aa.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,aa.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class nu{constructor(e){this.Mr=e,this.docs=new xa(Xo.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return aa.resolve(n?n.document.mutableCopy():ns.newInvalidDocument(t))}getEntries(e,t){let n=Qs();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ns.newInvalidDocument(e))}),aa.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Qs();const o=t.path,a=new Xo(o.child("")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||na(ea(a),n)<=0||(r.has(a.key)||Bs(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return aa.resolve(i)}getAllFromCollectionGroup(e,t,n,r){_o()}Or(e,t){return aa.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new ru(this)}getSize(e){return aa.resolve(this.size)}}class ru extends Gc{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),aa.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class iu{constructor(e){this.persistence=e,this.Nr=new Ks(e=>_s(e),As),this.lastRemoteSnapshotVersion=Ko.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Zc,this.targetCount=0,this.kr=Kc.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),aa.resolve()}getLastRemoteSnapshotVersion(e){return aa.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return aa.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),aa.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),aa.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Kc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,aa.resolve()}updateTargetData(e,t){return this.Kn(t),aa.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,aa.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),aa.waitFor(i).next(()=>r)}getTargetCount(e){return aa.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return aa.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),aa.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),aa.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),aa.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return aa.resolve(n)}containsKey(e,t){return aa.resolve(this.Br.containsKey(t))}}class ou{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ca(0),this.Kr=!1,this.Kr=!0,this.$r=new $c,this.referenceDelegate=e(this),this.Ur=new iu(this),this.indexManager=new Wc,this.remoteDocumentCache=function(e){return new nu(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new Uc(t),this.Gr=new Yc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Xc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new tu(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){ko("MemoryPersistence","Starting transaction:",e);const r=new au(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return aa.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class au extends ia{constructor(e){super(),this.currentSequenceNumber=e}}class su{constructor(e){this.persistence=e,this.Jr=new Zc,this.Yr=null}static Zr(e){return new su(e)}get Xr(){if(this.Yr)return this.Yr;throw _o()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),aa.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),aa.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),aa.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return aa.forEach(this.Xr,n=>{const r=Xo.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,Ko.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return aa.or([()=>aa.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class lu{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=rl(),r=rl();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new lu(e,t.fromCache,n,r)}}class cu{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class uu{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=ne()?8:sa(te())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.Zi(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new cu;return this.Xi(e,t,n).next(r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>i.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(So()<=xe.DEBUG&&ko("QueryEngine","SDK will not create cache indexes for query:",Vs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),aa.resolve()):(So()<=xe.DEBUG&&ko("QueryEngine","Query:",Vs(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(So()<=xe.DEBUG&&ko("QueryEngine","The SDK decides to create cache indexes for query:",Vs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,js(t))):aa.resolve())}Yi(e,t){if(Ps(t))return aa.resolve(null);let n=js(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Fs(t,null,"F"),n=js(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=rl(...r);return this.Ji.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.ts(t,r);return this.ns(t,o,i,n.readTime)?this.Yi(e,Fs(t,null,"F")):this.rs(e,o,t,n)}))})))}Zi(e,t,n,r){return Ps(t)||r.isEqual(Ko.min())?aa.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const o=this.ts(t,i);return this.ns(t,o,n,r)?aa.resolve(null):(So()<=xe.DEBUG&&ko("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Vs(t)),this.rs(e,o,t,Zo(r,-1)).next(e=>e))})}ts(e,t){let n=new ka(Hs(e));return t.forEach((t,r)=>{Bs(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return So()<=xe.DEBUG&&ko("QueryEngine","Using full collection scan to execute query:",Vs(t)),this.Ji.getDocumentsMatchingQuery(e,t,ta.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class du{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new xa(Wo),this._s=new Ks(e=>_s(e),As),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Jc(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function hu(e,t,n,r){return new du(e,t,n,r)}async function fu(e,t){const n=Io(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],o=[];let a=rl();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:i,addedBatchIds:o}))})})}function pu(e){const t=Io(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function gu(e,t,n){let r=rl(),i=rl();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Qs();return n.forEach((n,o)=>{const a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(Ko.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):ko("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),{Ps:r,Is:i}})}function mu(e,t){const n=Io(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function yu(e,t){const n=Io(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(i=>i?(r=i,aa.resolve(r)):n.Ur.allocateTargetId(e).next(i=>(r=new zc(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function vu(e,t,n){const r=Io(e),i=r.os.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!la(e))throw e;ko("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.os=r.os.remove(t),r._s.delete(i.target)}function bu(e,t,n){const r=Io(e);let i=Ko.min(),o=rl();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Io(e),i=r._s.get(n);return void 0!==i?aa.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,js(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{o=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:Ko.min(),n?o:rl())).next(e=>(xu(r,Ws(t),e),{documents:e,Ts:o})))}function xu(e,t,n){let r=e.us.get(t)||Ko.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class wu{constructor(){this.activeTargetIds=ol()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Su{constructor(){this.so=new wu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new wu,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ku{_o(e){}shutdown(){}}class Cu{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ko("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ko("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Eu=null;function Tu(){return null===Eu?Eu=268435456+Math.round(2147483648*Math.random()):Eu++,"0x"+Eu.toString(16)}const _u={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Au{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Iu="WebChannelConnection";class Nu extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo="projects/".concat(n,"/databases/").concat(r),this.Co="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Fo(){return!1}Mo(e,t,n,r,i){const o=Tu(),a=this.xo(e,t.toUriEncodedString());ko("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),a,n);const s={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(s,r,i),this.No(e,a,s,n).then(t=>(ko("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t),t=>{throw Eo("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,i,o){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+xo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=_u[e];return"".concat(this.Do,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=Tu();return new Promise((o,a)=>{const s=new so;s.setWithCredentials(!0),s.listenOnce(co.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case uo.NO_ERROR:const t=s.getResponseJson();ko(Iu,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case uo.TIMEOUT:ko(Iu,"RPC '".concat(e,"' ").concat(i," timed out")),a(new Ro(No.DEADLINE_EXCEEDED,"Request time out"));break;case uo.HTTP_ERROR:const n=s.getStatus();if(ko(Iu,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(No).indexOf(t)>=0?t:No.UNKNOWN}(t.status);a(new Ro(e,t.message))}else a(new Ro(No.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new Ro(No.UNAVAILABLE,"Connection failed."));break;default:_o()}}finally{ko(Iu,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);ko(Iu,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=Tu(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=go(),a=po(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Oo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const c=i.join("");ko(Iu,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);const u=o.createWebChannel(c,s);let d=!1,h=!1;const f=new Au({Io:t=>{h?ko(Iu,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(ko(Iu,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),ko(Iu,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},To:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,lo.EventType.OPEN,()=>{h||(ko(Iu,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.yo())}),p(u,lo.EventType.CLOSE,()=>{h||(h=!0,ko(Iu,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.So())}),p(u,lo.EventType.ERROR,t=>{h||(h=!0,Eo(Iu,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.So(new Ro(No.UNAVAILABLE,"The operation could not be completed")))}),p(u,lo.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];Ao(!!i);const o=i,a=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){ko(Iu,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Vl[e];if(void 0!==t)return Hl(t)}(t),i=a.message;void 0===n&&(n=No.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.So(new Ro(n,i)),u.close()}else ko(Iu,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.bo(i)}}),p(a,fo.STAT_EVENT,t=>{t.stat===ho.PROXY?ko(Iu,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===ho.NOPROXY&&ko(Iu,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.wo()},0),f}}function Ru(){return"undefined"!=typeof document?document:null}function Lu(e){return new uc(e,!0)}class Pu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&ko("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Ou{constructor(e,t,n,r,i,o,a,s){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Pu(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===No.RESOURCE_EXHAUSTED?(Co(t.toString()),Co("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===No.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new Ro(No.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ko("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ko("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Du extends Ou{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:_o()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Ao(void 0===t||"string"==typeof t),_a.fromBase64String(t||"")):(Ao(void 0===t||t instanceof Buffer||t instanceof Uint8Array),_a.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?No.UNKNOWN:Hl(e.code);return new Ro(t,e.message||"")}(a);n=new nc(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=xc(e,r.document.name),o=gc(r.document.updateTime),a=r.document.createTime?gc(r.document.createTime):Ko.min(),s=new es({mapValue:{fields:r.document.fields}}),l=ns.newFoundDocument(i,o,a,s),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ec(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=xc(e,r.document),o=r.readTime?gc(r.readTime):Ko.min(),a=ns.newNoDocument(i,o),s=r.removedTargetIds||[];n=new ec([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=xc(e,r.document),o=r.removedTargetIds||[];n=new ec([],o,i,null)}else{if(!("filter"in t))return _o();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Ul(r,i),a=e.targetId;n=new tc(a,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ko.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ko.min():t.readTime?gc(t.readTime):Ko.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=kc(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Is(r)?{documents:_c(e,r)}:{query:Ac(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=fc(e,t.resumeToken);const r=dc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ko.min())>0){n.readTime=hc(e,t.snapshotVersion.toTimestamp());const r=dc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _o()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=kc(this.serializer),t.removeTarget=e,this.a_(t)}}class ju extends Ou{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ao(!!e.streamToken),this.lastStreamToken=e.streamToken,Ao(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Ao(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(Ao(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?gc(e.updateTime):gc(t);return n.isEqual(Ko.min())&&(n=gc(t)),new wl(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=gc(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=kc(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Tc(this.serializer,e))};this.a_(t)}}class Mu extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Ro(No.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,a]=i;return this.connection.Mo(e,yc(t,n),r,o,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===No.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ro(No.UNKNOWN,e.toString())})}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(o=>{let[a,s]=o;return this.connection.Lo(e,yc(t,n),r,a,s,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===No.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ro(No.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Fu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.D_?(Co(t),this.D_=!1):ko("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class zu{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(e=>{n.enqueueAndForget(async()=>{Qu(this)&&(ko("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Io(e);t.L_.add(4),await Vu(t),t.q_.set("Unknown"),t.L_.delete(4),await Uu(t)}(this))})}),this.q_=new Fu(n,r)}}async function Uu(e){if(Qu(e))for(const t of e.B_)await t(!0)}async function Vu(e){for(const t of e.B_)await t(!1)}function Bu(e,t){const n=Io(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Gu(n)?Ku(n):fd(n).r_()&&Hu(n,t))}function Wu(e,t){const n=Io(e),r=fd(n);n.N_.delete(t),r.r_()&&qu(n,t),0===n.N_.size&&(r.r_()?r.o_():Qu(n)&&n.q_.set("Unknown"))}function Hu(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ko.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}fd(e).A_(t)}function qu(e,t){e.Q_.xe(t),fd(e).R_(t)}function Ku(e){e.Q_=new ic({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),fd(e).start(),e.q_.v_()}function Gu(e){return Qu(e)&&!fd(e).n_()&&e.N_.size>0}function Qu(e){return 0===Io(e).L_.size}function Ju(e){e.Q_=void 0}async function Yu(e){e.q_.set("Online")}async function Xu(e){e.N_.forEach((t,n)=>{Hu(e,t)})}async function $u(e,t){Ju(e),Gu(e)?(e.q_.M_(t),Ku(e)):e.q_.set("Unknown")}async function Zu(e,t,n){if(e.q_.set("Online"),t instanceof nc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){ko("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ed(e,n)}else if(t instanceof ec?e.Q_.Ke(t):t instanceof tc?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Ko.min()))try{const t=await pu(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(_a.EMPTY_BYTE_STRING,r.snapshotVersion)),qu(e,t);const i=new zc(r.target,t,n,r.sequenceNumber);Hu(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ko("RemoteStore","Failed to raise snapshot:",t),await ed(e,t)}}async function ed(e,t,n){if(!la(t))throw t;e.L_.add(1),await Vu(e),e.q_.set("Offline"),n||(n=()=>pu(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ko("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Uu(e)})}function td(e,t){return t().catch(n=>ed(e,n,t))}async function nd(e){const t=Io(e),n=pd(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;rd(t);)try{const e=await mu(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,id(t,e)}catch(e){await ed(t,e)}od(t)&&ad(t)}function rd(e){return Qu(e)&&e.O_.length<10}function id(e,t){e.O_.push(t);const n=pd(e);n.r_()&&n.V_&&n.m_(t.mutations)}function od(e){return Qu(e)&&!pd(e).n_()&&e.O_.length>0}function ad(e){pd(e).start()}async function sd(e){pd(e).p_()}async function ld(e){const t=pd(e);for(const n of e.O_)t.m_(n.mutations)}async function cd(e,t,n){const r=e.O_.shift(),i=Fl.from(r,t,n);await td(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await nd(e)}async function ud(e,t){t&&pd(e).V_&&await async function(e,t){if(function(e){return Wl(e)&&e!==No.ABORTED}(t.code)){const n=e.O_.shift();pd(e).s_(),await td(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await nd(e)}}(e,t),od(e)&&ad(e)}async function dd(e,t){const n=Io(e);n.asyncQueue.verifyOperationInProgress(),ko("RemoteStore","RemoteStore received new credentials");const r=Qu(n);n.L_.add(3),await Vu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Uu(n)}async function hd(e,t){const n=Io(e);t?(n.L_.delete(2),await Uu(n)):t||(n.L_.add(2),await Vu(n),n.q_.set("Unknown"))}function fd(e){return e.K_||(e.K_=function(e,t,n){const r=Io(e);return r.w_(),new Du(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:Yu.bind(null,e),Ro:Xu.bind(null,e),mo:$u.bind(null,e),d_:Zu.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Gu(e)?Ku(e):e.q_.set("Unknown")):(await e.K_.stop(),Ju(e))})),e.K_}function pd(e){return e.U_||(e.U_=function(e,t,n){const r=Io(e);return r.w_(),new ju(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:sd.bind(null,e),mo:ud.bind(null,e),f_:ld.bind(null,e),g_:cd.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await nd(e)):(await e.U_.stop(),e.O_.length>0&&(ko("RemoteStore","Stopping write stream with ".concat(e.O_.length," pending writes")),e.O_=[]))})),e.U_}class gd{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Lo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,a=new gd(e,t,o,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ro(No.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function md(e,t){if(Co("AsyncQueue","".concat(t,": ").concat(e)),la(e))return new Ro(No.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class yd{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Xo.comparator(t.key,n.key):(e,t)=>Xo.comparator(e.key,t.key),this.keyedMap=Ys(),this.sortedSet=new xa(this.comparator)}static emptySet(e){return new yd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yd))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new yd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class vd{constructor(){this.W_=new xa(Xo.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):_o():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class bd{constructor(e,t,n,r,i,o,a,s,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach(e=>{o.push({type:0,doc:e})}),new bd(e,t,yd.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class xd{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class wd{constructor(){this.queries=Sd(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Io(e),r=n.queries;n.queries=Sd(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new Ro(No.ABORTED,"Firestore shutting down"))}}function Sd(){return new Ks(e=>Us(e),zs)}async function kd(e,t){const n=Io(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.H_()&&t.J_()&&(r=2):(o=new xd,r=t.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=md(e,"Initialization of query '".concat(Vs(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.j_.push(t),t.Z_(n.onlineState),o.z_&&t.X_(o.z_)&&_d(n)}async function Cd(e,t){const n=Io(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.j_.indexOf(t);e>=0&&(o.j_.splice(e,1),0===o.j_.length?i=t.J_()?0:1:!o.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ed(e,t){const n=Io(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&_d(n)}function Td(e,t,n){const r=Io(e),i=r.queries.get(t);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(t)}function _d(e){e.Y_.forEach(e=>{e.next()})}var Ad,Id;(Id=Ad||(Ad={})).ea="default",Id.Cache="cache";class Nd{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new bd(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=bd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ad.Cache}}class Rd{constructor(e){this.key=e}}class Ld{constructor(e){this.key=e}}class Pd{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=rl(),this.mutatedKeys=rl(),this.Aa=Hs(e),this.Ra=new yd(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new vd,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Bs(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(s&&this.Aa(u,s)>0||l&&this.Aa(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(s||l)&&(a=!0)),f&&(u?(o=o.add(u),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:o,fa:n,ns:a,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _o()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],s=0===this.da.size&&this.current&&!r?1:0,l=s!==this.Ea;return this.Ea=s,0!==o.length||l?{snapshot:new bd(this.query,e.Ra,i,o,e.mutatedKeys,0===s,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new vd,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=rl(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new Ld(e))}),this.da.forEach(n=>{e.has(n)||t.push(new Rd(n))}),t}ba(e){this.Ta=e.Ts,this.da=rl();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return bd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Od{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Dd{constructor(e){this.key=e,this.va=!1}}class jd{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ks(e=>Us(e),zs),this.Ma=new Map,this.xa=new Set,this.Oa=new xa(Xo.comparator),this.Na=new Map,this.La=new Zc,this.Ba={},this.ka=new Map,this.qa=Kc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Md(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=ih(e);let i;const o=r.Fa.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await zd(r,t,n,!0),i}async function Fd(e,t){const n=ih(e);await zd(n,t,!0,!1)}async function zd(e,t,n,r){const i=await yu(e.localStore,js(t)),o=i.targetId,a=e.sharedClientState.addLocalQueryTarget(o,n);let s;return r&&(s=await Ud(e,t,o,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&Bu(e.remoteStore,i),s}async function Ud(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await bu(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,i)}));const o=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o,a);return $d(e,t.targetId,s.wa),s.snapshot}(e,t,n,r);const o=await bu(e.localStore,t,!0),a=new Pd(t,o.Ts),s=a.ma(o.documents),l=Zl.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(s,e.isPrimaryClient,l);$d(e,n,c.wa);const u=new Od(t,n,a);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function Vd(e,t,n){const r=Io(e),i=r.Fa.get(t),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(e=>!zs(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await vu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Wu(r.remoteStore,i.targetId),Yd(r,i.targetId)}).catch(oa)):(Yd(r,i.targetId),await vu(r.localStore,i.targetId,!0))}async function Bd(e,t){const n=Io(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Wu(n.remoteStore,r.targetId))}async function Wd(e,t){const n=Io(e);try{const e=await function(e,t){const n=Io(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];t.targetChanges.forEach((o,s)=>{const l=i.get(s);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,o.removedDocuments,s).next(()=>n.Ur.addMatchingKeys(e,o.addedDocuments,s)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(_a.EMPTY_BYTE_STRING,Ko.min()).withLastLimboFreeSnapshotVersion(Ko.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,o)&&a.push(n.Ur.updateTargetData(e,c))});let s=Qs(),l=rl();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(gu(e,o,t.documentUpdates).next(e=>{s=e.Ps,l=e.Is})),!r.isEqual(Ko.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return aa.waitFor(a).next(()=>o.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,s,l)).next(()=>s)}).then(e=>(n.os=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(Ao(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?Ao(r.va):e.removedDocuments.size>0&&(Ao(r.va),r.va=!1))}),await th(n,e,t)}catch(e){await oa(e)}}function Hd(e,t,n){const r=Io(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Io(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)}),r&&_d(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function qd(e,t,n){const r=Io(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),o=i&&i.key;if(o){let e=new xa(Xo.comparator);e=e.insert(o,ns.newNoDocument(o,Ko.min()));const n=rl().add(o),i=new $l(Ko.min(),new Map,new xa(Wo),e,n);await Wd(r,i),r.Oa=r.Oa.remove(o),r.Na.delete(t),eh(r)}else await vu(r.localStore,t,!1).then(()=>Yd(r,t,n)).catch(oa)}async function Kd(e,t){const n=Io(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Io(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let a=aa.resolve();return o.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const o=n.docVersions.get(e);Ao(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=rl();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Jd(n,r,null),Qd(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await th(n,e)}catch(e){await oa(e)}}async function Gd(e,t,n){const r=Io(e);try{const e=await function(e,t){const n=Io(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Ao(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Jd(r,t,n),Qd(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await th(r,e)}catch(n){await oa(n)}}function Qd(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function Jd(e,t,n){const r=Io(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function Yd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||Xd(e,t)})}function Xd(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Wu(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),eh(e))}function $d(e,t,n){for(const r of n)r instanceof Rd?(e.La.addReference(r.key,t),Zd(e,r)):r instanceof Ld?(ko("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||Xd(e,r.key)):_o()}function Zd(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(ko("SyncEngine","New document in limbo: "+n),e.xa.add(r),eh(e))}function eh(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Xo(Qo.fromString(t)),r=e.qa.next();e.Na.set(r,new Dd(n)),e.Oa=e.Oa.insert(n,r),Bu(e.remoteStore,new zc(js(Ls(n.path)),r,"TargetPurposeLimboResolution",ca.oe))}}async function th(e,t,n){const r=Io(e),i=[],o=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,s)=>{a.push(r.Ka(s,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(s.targetId,i?"current":"not-current")}if(e){i.push(e);const t=lu.Wi(s.targetId,e);o.push(t)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(e,t){const n=Io(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>aa.forEach(t,t=>aa.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>aa.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!la(e))throw e;ko("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,o))}async function nh(e,t){const n=Io(e);if(!n.currentUser.isEqual(t)){ko("SyncEngine","User change. New user:",t.toKey());const e=await fu(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new Ro(No.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await th(n,e.hs)}}function rh(e,t){const n=Io(e),r=n.Na.get(t);if(r&&r.va)return rl().add(r.key);{let e=rl();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function ih(e){const t=Io(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Wd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=rh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=qd.bind(null,t),t.Ca.d_=Ed.bind(null,t.eventManager),t.Ca.$a=Td.bind(null,t.eventManager),t}function oh(e){const t=Io(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Kd.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Gd.bind(null,t),t}class ah{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return hu(this.persistence,new uu,e.initialUser,this.serializer)}Ga(e){return new ou(su.Zr,this.serializer)}Wa(e){return new Su}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ah.provider={build:()=>new ah};class sh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Hd(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=nh.bind(null,this.syncEngine),await hd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new wd}createDatastore(e){const t=Lu(e.databaseInfo.databaseId),n=function(e){return new Nu(e)}(e.databaseInfo);return function(e,t,n,r){return new Mu(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new zu(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Hd(this.syncEngine,e,0),Cu.D()?new Cu:new ku)}createSyncEngine(e,t){return function(e,t,n,r,i,o,a){const s=new jd(e,t,n,r,i,o);return a&&(s.Qa=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Io(e);ko("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Vu(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}sh.provider={build:()=>new sh};class lh{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Co("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class ch{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=bo.UNAUTHENTICATED,this.clientId=Bo.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{ko("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(ko("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Lo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=md(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function uh(e,t){e.asyncQueue.verifyOperationInProgress(),ko("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await fu(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function dh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await hh(e);ko("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>dd(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>dd(t.remoteStore,n)),e._onlineComponents=t}async function hh(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ko("FirestoreClient","Using user provided OfflineComponentProvider");try{await uh(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===No.FAILED_PRECONDITION||e.code===No.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Eo("Error using user provided cache. Falling back to memory cache: "+n),await uh(e,new ah)}}else ko("FirestoreClient","Using default OfflineComponentProvider"),await uh(e,new ah);return e._offlineComponents}async function fh(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ko("FirestoreClient","Using user provided OnlineComponentProvider"),await dh(e,e._uninitializedComponentsProvider._online)):(ko("FirestoreClient","Using default OnlineComponentProvider"),await dh(e,new sh))),e._onlineComponents}function ph(e){return fh(e).then(e=>e.syncEngine)}async function gh(e){const t=await fh(e),n=t.eventManager;return n.onListen=Md.bind(null,t.syncEngine),n.onUnlisten=Vd.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Fd.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Bd.bind(null,t.syncEngine),n}function mh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Lo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new lh({next:s=>{o.Za(),t.enqueueAndForget(()=>Cd(e,a));const l=s.docs.has(n);!l&&s.fromCache?i.reject(new Ro(No.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&s.fromCache&&r&&"server"===r.source?i.reject(new Ro(No.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),a=new Nd(Ls(n.path),o,{includeMetadataChanges:!0,_a:!0});return kd(e,a)}(await gh(e),e.asyncQueue,t,n,r)),r.promise}function yh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Lo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new lh({next:n=>{o.Za(),t.enqueueAndForget(()=>Cd(e,a)),n.fromCache&&"server"===r.source?i.reject(new Ro(No.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Nd(n,o,{includeMetadataChanges:!0,_a:!0});return kd(e,a)}(await gh(e),e.asyncQueue,t,n,r)),r.promise}function vh(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const bh=new Map;function xh(e,t,n){if(!n)throw new Ro(No.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function wh(e){if(!Xo.isDocumentKey(e))throw new Ro(No.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Sh(e){if(Xo.isDocumentKey(e))throw new Ro(No.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function kh(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":_o()}function Ch(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ro(No.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kh(e);throw new Ro(No.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Eh{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ro(No.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ro(No.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Ro(No.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vh(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ro(No.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Ro(No.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Ro(No.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Th{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Eh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ro(No.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ro(No.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Eh(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Oo;switch(e.type){case"firstParty":return new Fo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ro(No.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=bh.get(e);t&&(ko("ComponentProvider","Removing Datastore"),bh.delete(e),t.terminate())}(this),Promise.resolve()}}function _h(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=Ch(e,Th))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==a&&Eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=bo.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[G(JSON.stringify({alg:"none",type:"JWT"})),G(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Ro(No.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new bo(o)}e._authCredentials=new Do(new Po(t,n))}}class Ah{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ah(this.firestore,e,this._query)}}class Ih{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ih(this.firestore,e,this._key)}}class Nh extends Ah{constructor(e,t,n){super(e,t,Ls(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ih(this.firestore,null,new Xo(e))}withConverter(e){return new Nh(this.firestore,e,this._path)}}function Rh(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=pe(e),1===arguments.length&&(t=Bo.newId()),xh("doc","path",t),e instanceof Th){const n=Qo.fromString(t,...r);return wh(n),new Ih(e,null,new Xo(n))}{if(!(e instanceof Ih||e instanceof Nh))throw new Ro(No.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Qo.fromString(t,...r));return wh(n),new Ih(e.firestore,e instanceof Nh?e.converter:null,new Xo(n))}}class Lh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Pu(this,"async_queue_retry"),this.Vu=()=>{const e=Ru();e&&ko("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Ru();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Ru();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Lo;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!la(e))throw e;ko("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Co("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=gd.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&_o()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Ph extends Th{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Lh,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lh(e),this._firestoreClient=void 0,await e}}}function Oh(e){if(e._terminated)throw new Ro(No.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Dh(e),e._firestoreClient}function Dh(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new Da(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,vh(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new ch(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class jh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jh(_a.fromBase64String(e))}catch(e){throw new Ro(No.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new jh(_a.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Mh{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Ro(No.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yo(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fh{constructor(e){this._methodName=e}}class zh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ro(No.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ro(No.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wo(this._lat,e._lat)||Wo(this._long,e._long)}}class Uh{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Vh=/^__.*__$/;class Bh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Rl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nl(e,this.data,t,this.fieldTransforms)}}class Wh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Rl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Hh(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _o()}}class qh{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new qh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return af(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Hh(this.Cu)&&Vh.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Kh{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Lu(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new qh({Cu:e,methodName:t,qu:n,path:Yo.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gh(e){const t=e._freezeSettings(),n=Lu(e._databaseId);return new Kh(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Qh(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(o.merge||o.mergeFields?2:0,t,n,i);tf("Data must be an object, but it was:",a,r);const s=Zh(r,a);let l,c;if(o.merge)l=new Ea(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=nf(t,r,n);if(!a.contains(i))throw new Ro(No.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));sf(e,i)||e.push(i)}l=new Ea(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Bh(new es(s),l,c)}class Jh extends Fh{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Bu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jh}}function Yh(e,t,n,r){const i=e.Qu(1,t,n);tf("Data must be an object, but it was:",i,r);const o=[],a=es.empty();va(r,(e,r)=>{const s=of(t,e,n);r=pe(r);const l=i.Nu(s);if(r instanceof Jh)o.push(s);else{const e=$h(r,l);null!=e&&(o.push(s),a.set(s,e))}});const s=new Ea(o);return new Wh(a,s,i.fieldTransforms)}function Xh(e,t,n,r,i,o){const a=e.Qu(1,t,n),s=[nf(t,r,n)],l=[i];if(o.length%2!=0)throw new Ro(No.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<o.length;h+=2)s.push(nf(t,o[h])),l.push(o[h+1]);const c=[],u=es.empty();for(let h=s.length-1;h>=0;--h)if(!sf(c,s[h])){const e=s[h];let t=l[h];t=pe(t);const n=a.Nu(e);if(t instanceof Jh)c.push(e);else{const r=$h(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Ea(c);return new Wh(u,d,a.fieldTransforms)}function $h(e,t){if(ef(e=pe(e)))return tf("Unsupported field value:",t,e),Zh(e,t);if(e instanceof Fh)return function(e,t){if(!Hh(t.Cu))throw t.Bu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Bu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=$h(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=pe(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ll(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=qo.fromDate(e);return{timestampValue:hc(t.serializer,n)}}if(e instanceof qo){const n=new qo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:hc(t.serializer,n)}}if(e instanceof zh)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof jh)return{bytesValue:fc(t.serializer,e._byteString)};if(e instanceof Ih){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:mc(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Uh)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return al(t.serializer,e)})}}}}}}(e,t);throw t.Bu("Unsupported field value: ".concat(kh(e)))}(e,t)}function Zh(e,t){const n={};return ba(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):va(e,(e,r)=>{const i=$h(r,t.Mu(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function ef(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof qo||e instanceof zh||e instanceof jh||e instanceof Ih||e instanceof Fh||e instanceof Uh)}function tf(e,t,n){if(!ef(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=kh(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function nf(e,t,n){if((t=pe(t))instanceof Mh)return t._internalPath;if("string"==typeof t)return of(e,t);throw af("Field path arguments must be of type string or ",e,!1,void 0,n)}const rf=new RegExp("[~\\*/\\[\\]]");function of(e,t,n){if(t.search(rf)>=0)throw af("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Mh(...t.split("."))._internalPath}catch(r){throw af("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function af(e,t,n,r,i){const o=r&&!r.isEmpty(),a=void 0!==i;let s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new Ro(No.INVALID_ARGUMENT,s+e+l)}function sf(e,t){return e.some(e=>e.isEqual(t))}class lf{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ih(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new cf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(uf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class cf extends lf{data(){return super.data()}}function uf(e,t){return"string"==typeof t?of(e,t):t instanceof Mh?t._internalPath:t._delegate._internalPath}function df(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ro(No.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hf{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Na(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ra(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _o()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return va(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Na(e.doubleValue));return new Uh(i)}convertGeoPoint(e){return new zh(Na(e.latitude),Na(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Pa(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Oa(e));default:return null}}convertTimestamp(e){const t=Ia(e);return new qo(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Qo.fromString(e);Ao(Fc(n));const r=new ja(n.get(1),n.get(3)),i=new Xo(n.popFirst(5));return r.isEqual(t)||Co("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function ff(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class pf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gf extends lf{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new mf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(uf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class mf extends gf{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class yf{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new pf(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new mf(this._firestore,this._userDataWriter,n.key,n,new pf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ro(No.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new mf(e._firestore,e._userDataWriter,n.doc.key,n.doc,new pf(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new mf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new pf(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:vf(t.type),doc:r,oldIndex:i,newIndex:o}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function vf(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _o()}}class bf extends hf{constructor(e){super(),this.firestore=e}convertBytes(e){return new jh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ih(this.firestore,null,t)}}function xf(e,t,n){e=Ch(e,Ih);const r=Ch(e.firestore,Ph),i=ff(e.converter,t,n);return Sf(r,[Qh(Gh(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Sl.none())])}function wf(e,t,n){e=Ch(e,Ih);const r=Ch(e.firestore,Ph),i=Gh(r);let o;for(var a=arguments.length,s=new Array(a>3?a-3:0),l=3;l<a;l++)s[l-3]=arguments[l];return o="string"==typeof(t=pe(t))||t instanceof Mh?Xh(i,"updateDoc",e._key,t,n,s):Yh(i,"updateDoc",e._key,t),Sf(r,[o.toMutation(e._key,Sl.exists(!0))])}function Sf(e,t){return function(e,t){const n=new Lo;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=oh(e);try{const e=await function(e,t){const n=Io(e),r=qo.now(),i=t.reduce((e,t)=>e.add(t.key),rl());let o,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let s=Qs(),l=rl();return n.cs.getEntries(e,i).next(e=>{s=e,s.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,s)).next(i=>{o=i;const a=[];for(const e of t){const t=Al(e,o.get(e.key).overlayedDocument);null!=t&&a.push(new Rl(e.key,t,ts(t.value.mapValue),Sl.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Xs(o)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new xa(Wo)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await th(r,e.changes),await nd(r.remoteStore)}catch(e){const t=md(e,"Failed to persist write");n.reject(t)}}(await ph(e),t,n)),n.promise}(Oh(e),t)}function kf(e,t,n){const r=n.docs.get(t._key),i=new bf(e);return new gf(e,i,t._key,r,new pf(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){xo=e}(It),Ct(new ge("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),a=new Ph(new jo(e.getProvider("auth-internal")),new Uo(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ro(No.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ja(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Lt(vo,"4.7.3",e),Lt(vo,"4.7.3","esm2017")}();var Cf=n(579);const Ef=["checkLandmarks","hasLayover","viaAirports","legAirlines","legAircraftTypes","legServiceClasses"],Tf=Nt({apiKey:"AIzaSyBN3khxqaQpC8Ws9EQ7syvnPC_rLasMOL0",authDomain:"flightlog-82a3c.firebaseapp.com",projectId:"flightlog-82a3c",storageBucket:"flightlog-82a3c.firebasestorage.app",messagingSenderId:"959347389178",appId:"1:959347389178:web:f175b4aac3b755b71d8f43",measurementId:"G-CDV75B04DY"}),_f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt();const t=Et(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Et(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(se(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Jt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Yi,persistence:[li,qr,Gr]}),r=Z("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>eo)return;const r=null===t||void 0===t?void 0:t.token;to!==r&&(to=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){pe(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){pe(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const o=X("auth");return o&&fr(n,"http://".concat(o)),n}(Tf),Af=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Et("object"==typeof e?e:Rt(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=X(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&_h(r,...e)}return r}(Tf),If=new Ir,Nf="AIzaSyArv6AbTjFIM_nuCm4VKZAZTdfP_y2G0ag",Rf=["https://www.googleapis.com/discovery/v1/apis/gmail/v1/rest"],Lf=[{code:"JFK",name:"John F. Kennedy Intl",city:"New York",country:"USA",lat:40.6413,lon:-73.7781},{code:"LGA",name:"LaGuardia",city:"New York",country:"USA",lat:40.7769,lon:-73.874},{code:"EWR",name:"Newark Liberty Intl",city:"Newark",country:"USA",lat:40.6895,lon:-74.1745},{code:"LAX",name:"Los Angeles Intl",city:"Los Angeles",country:"USA",lat:33.9416,lon:-118.4085},{code:"SFO",name:"San Francisco Intl",city:"San Francisco",country:"USA",lat:37.6188,lon:-122.3749},{code:"ORD",name:"O'Hare Intl",city:"Chicago",country:"USA",lat:41.9742,lon:-87.9073},{code:"MDW",name:"Midway Intl",city:"Chicago",country:"USA",lat:41.7868,lon:-87.7522},{code:"ATL",name:"Hartsfield-Jackson Atlanta",city:"Atlanta",country:"USA",lat:33.6407,lon:-84.4277},{code:"DFW",name:"Dallas/Fort Worth Intl",city:"Dallas",country:"USA",lat:32.8998,lon:-97.0403},{code:"DEN",name:"Denver Intl",city:"Denver",country:"USA",lat:39.8561,lon:-104.6737},{code:"SEA",name:"Seattle-Tacoma Intl",city:"Seattle",country:"USA",lat:47.4502,lon:-122.3088},{code:"PHX",name:"Phoenix Sky Harbor",city:"Phoenix",country:"USA",lat:33.4373,lon:-112.0078},{code:"MIA",name:"Miami Intl",city:"Miami",country:"USA",lat:25.7959,lon:-80.287},{code:"FLL",name:"Fort Lauderdale-Hollywood",city:"Fort Lauderdale",country:"USA",lat:26.0742,lon:-80.1506},{code:"MCO",name:"Orlando Intl",city:"Orlando",country:"USA",lat:28.4312,lon:-81.3081},{code:"BOS",name:"Logan Intl",city:"Boston",country:"USA",lat:42.3656,lon:-71.0096},{code:"IAD",name:"Dulles Intl",city:"Washington",country:"USA",lat:38.9531,lon:-77.4565},{code:"DCA",name:"Reagan National",city:"Washington",country:"USA",lat:38.8512,lon:-77.0402},{code:"BWI",name:"Baltimore-Washington",city:"Baltimore",country:"USA",lat:39.1774,lon:-76.6684},{code:"PHL",name:"Philadelphia Intl",city:"Philadelphia",country:"USA",lat:39.8729,lon:-75.2437},{code:"MSP",name:"Minneapolis-St Paul",city:"Minneapolis",country:"USA",lat:44.8848,lon:-93.2223},{code:"DTW",name:"Detroit Metro",city:"Detroit",country:"USA",lat:42.2162,lon:-83.3554},{code:"CLT",name:"Charlotte Douglas",city:"Charlotte",country:"USA",lat:35.214,lon:-80.9431},{code:"LAS",name:"Harry Reid Intl",city:"Las Vegas",country:"USA",lat:36.084,lon:-115.1537},{code:"SAN",name:"San Diego Intl",city:"San Diego",country:"USA",lat:32.7338,lon:-117.1933},{code:"SJC",name:"San Jose Intl",city:"San Jose",country:"USA",lat:37.3626,lon:-121.929},{code:"OAK",name:"Oakland Intl",city:"Oakland",country:"USA",lat:37.7213,lon:-122.2208},{code:"PDX",name:"Portland Intl",city:"Portland",country:"USA",lat:45.5898,lon:-122.5951},{code:"IAH",name:"George Bush Intercontinental",city:"Houston",country:"USA",lat:29.9902,lon:-95.3368},{code:"HOU",name:"Hobby",city:"Houston",country:"USA",lat:29.6454,lon:-95.2789},{code:"AUS",name:"Austin-Bergstrom",city:"Austin",country:"USA",lat:30.1975,lon:-97.6664},{code:"SLC",name:"Salt Lake City Intl",city:"Salt Lake City",country:"USA",lat:40.7899,lon:-111.9791},{code:"TPA",name:"Tampa Intl",city:"Tampa",country:"USA",lat:27.9755,lon:-82.5332},{code:"HNL",name:"Daniel K. Inouye Intl",city:"Honolulu",country:"USA",lat:21.3245,lon:-157.9251},{code:"ANC",name:"Ted Stevens Anchorage",city:"Anchorage",country:"USA",lat:61.1743,lon:-149.9962},{code:"YYZ",name:"Toronto Pearson",city:"Toronto",country:"Canada",lat:43.6777,lon:-79.6248},{code:"YVR",name:"Vancouver Intl",city:"Vancouver",country:"Canada",lat:49.1967,lon:-123.1815},{code:"YUL",name:"Montr\xe9al-Trudeau",city:"Montreal",country:"Canada",lat:45.4657,lon:-73.7455},{code:"YYC",name:"Calgary Intl",city:"Calgary",country:"Canada",lat:51.1215,lon:-114.0076},{code:"MEX",name:"Benito Ju\xe1rez Intl",city:"Mexico City",country:"Mexico",lat:19.4363,lon:-99.0721},{code:"CUN",name:"Canc\xfan Intl",city:"Cancun",country:"Mexico",lat:21.0365,lon:-86.8771},{code:"LHR",name:"London Heathrow",city:"London",country:"UK",lat:51.47,lon:-.4543},{code:"LGW",name:"London Gatwick",city:"London",country:"UK",lat:51.1537,lon:-.1821},{code:"STN",name:"London Stansted",city:"London",country:"UK",lat:51.886,lon:.2389},{code:"LTN",name:"London Luton",city:"London",country:"UK",lat:51.8763,lon:-.3717},{code:"MAN",name:"Manchester",city:"Manchester",country:"UK",lat:53.3537,lon:-2.275},{code:"EDI",name:"Edinburgh",city:"Edinburgh",country:"UK",lat:55.9508,lon:-3.3615},{code:"CDG",name:"Paris Charles de Gaulle",city:"Paris",country:"France",lat:49.0097,lon:2.5479},{code:"ORY",name:"Paris Orly",city:"Paris",country:"France",lat:48.7233,lon:2.3795},{code:"NCE",name:"Nice C\xf4te d'Azur",city:"Nice",country:"France",lat:43.6584,lon:7.2159},{code:"FRA",name:"Frankfurt am Main",city:"Frankfurt",country:"Germany",lat:50.0379,lon:8.5622},{code:"MUC",name:"Munich",city:"Munich",country:"Germany",lat:48.3537,lon:11.775},{code:"BER",name:"Berlin Brandenburg",city:"Berlin",country:"Germany",lat:52.3667,lon:13.5033},{code:"DUS",name:"D\xfcsseldorf",city:"Dusseldorf",country:"Germany",lat:51.2895,lon:6.7668},{code:"HAM",name:"Hamburg",city:"Hamburg",country:"Germany",lat:53.6304,lon:10.0065},{code:"AMS",name:"Amsterdam Schiphol",city:"Amsterdam",country:"Netherlands",lat:52.3105,lon:4.7683},{code:"BRU",name:"Brussels",city:"Brussels",country:"Belgium",lat:50.901,lon:4.4856},{code:"ZRH",name:"Z\xfcrich",city:"Zurich",country:"Switzerland",lat:47.4647,lon:8.5492},{code:"GVA",name:"Geneva",city:"Geneva",country:"Switzerland",lat:46.237,lon:6.1092},{code:"VIE",name:"Vienna Intl",city:"Vienna",country:"Austria",lat:48.1103,lon:16.5697},{code:"PRG",name:"V\xe1clav Havel Prague",city:"Prague",country:"Czechia",lat:50.1008,lon:14.26},{code:"WAW",name:"Warsaw Chopin",city:"Warsaw",country:"Poland",lat:52.1657,lon:20.9671},{code:"KRK",name:"John Paul II Krak\xf3w",city:"Krakow",country:"Poland",lat:50.0777,lon:19.7848},{code:"BUD",name:"Budapest Ferenc Liszt",city:"Budapest",country:"Hungary",lat:47.4298,lon:19.2611},{code:"FCO",name:"Rome Fiumicino",city:"Rome",country:"Italy",lat:41.8003,lon:12.2389},{code:"MXP",name:"Milan Malpensa",city:"Milan",country:"Italy",lat:45.6306,lon:8.7281},{code:"LIN",name:"Milan Linate",city:"Milan",country:"Italy",lat:45.4555,lon:9.2765},{code:"VCE",name:"Venice Marco Polo",city:"Venice",country:"Italy",lat:45.5053,lon:12.3519},{code:"NAP",name:"Naples Intl",city:"Naples",country:"Italy",lat:40.886,lon:14.2908},{code:"MAD",name:"Madrid Barajas",city:"Madrid",country:"Spain",lat:40.4936,lon:-3.5668},{code:"BCN",name:"Barcelona El Prat",city:"Barcelona",country:"Spain",lat:41.2974,lon:2.0833},{code:"PMI",name:"Palma de Mallorca",city:"Palma",country:"Spain",lat:39.5517,lon:2.7388},{code:"AGP",name:"M\xe1laga",city:"Malaga",country:"Spain",lat:36.6749,lon:-4.4991},{code:"LIS",name:"Lisbon Humberto Delgado",city:"Lisbon",country:"Portugal",lat:38.7756,lon:-9.1354},{code:"OPO",name:"Porto Francisco S\xe1 Carneiro",city:"Porto",country:"Portugal",lat:41.2481,lon:-8.6814},{code:"ATH",name:"Athens Eleftherios Venizelos",city:"Athens",country:"Greece",lat:37.9364,lon:23.9445},{code:"IST",name:"Istanbul Airport",city:"Istanbul",country:"Turkey",lat:41.2753,lon:28.7519},{code:"SAW",name:"Istanbul Sabiha G\xf6k\xe7en",city:"Istanbul",country:"Turkey",lat:40.8986,lon:29.3092},{code:"DUB",name:"Dublin",city:"Dublin",country:"Ireland",lat:53.4264,lon:-6.2499},{code:"CPH",name:"Copenhagen Kastrup",city:"Copenhagen",country:"Denmark",lat:55.618,lon:12.6508},{code:"OSL",name:"Oslo Gardermoen",city:"Oslo",country:"Norway",lat:60.1976,lon:11.0004},{code:"ARN",name:"Stockholm Arlanda",city:"Stockholm",country:"Sweden",lat:59.6498,lon:17.9238},{code:"HEL",name:"Helsinki-Vantaa",city:"Helsinki",country:"Finland",lat:60.3172,lon:24.9633},{code:"SVO",name:"Moscow Sheremetyevo",city:"Moscow",country:"Russia",lat:55.9726,lon:37.4146},{code:"LED",name:"St Petersburg Pulkovo",city:"St Petersburg",country:"Russia",lat:59.8003,lon:30.2625},{code:"DXB",name:"Dubai Intl",city:"Dubai",country:"UAE",lat:25.2532,lon:55.3657},{code:"AUH",name:"Abu Dhabi Intl",city:"Abu Dhabi",country:"UAE",lat:24.433,lon:54.6511},{code:"DOH",name:"Hamad Intl",city:"Doha",country:"Qatar",lat:25.2609,lon:51.6138},{code:"TLV",name:"Ben Gurion",city:"Tel Aviv",country:"Israel",lat:32.0055,lon:34.8854},{code:"CAI",name:"Cairo Intl",city:"Cairo",country:"Egypt",lat:30.1219,lon:31.4056},{code:"AMM",name:"Queen Alia Intl",city:"Amman",country:"Jordan",lat:31.7226,lon:35.9932},{code:"RUH",name:"King Khalid Intl",city:"Riyadh",country:"Saudi Arabia",lat:24.9578,lon:46.6989},{code:"JED",name:"King Abdulaziz Intl",city:"Jeddah",country:"Saudi Arabia",lat:21.6796,lon:39.1565},{code:"SIN",name:"Singapore Changi",city:"Singapore",country:"Singapore",lat:1.3644,lon:103.9915},{code:"HKG",name:"Hong Kong Intl",city:"Hong Kong",country:"Hong Kong",lat:22.308,lon:113.9185},{code:"NRT",name:"Tokyo Narita",city:"Tokyo",country:"Japan",lat:35.772,lon:140.3929},{code:"HND",name:"Tokyo Haneda",city:"Tokyo",country:"Japan",lat:35.5494,lon:139.7798},{code:"KIX",name:"Osaka Kansai",city:"Osaka",country:"Japan",lat:34.4347,lon:135.2441},{code:"ICN",name:"Seoul Incheon",city:"Seoul",country:"South Korea",lat:37.4602,lon:126.4407},{code:"GMP",name:"Seoul Gimpo",city:"Seoul",country:"South Korea",lat:37.5583,lon:126.7906},{code:"PEK",name:"Beijing Capital",city:"Beijing",country:"China",lat:40.0799,lon:116.6031},{code:"PKX",name:"Beijing Daxing",city:"Beijing",country:"China",lat:39.5098,lon:116.4105},{code:"PVG",name:"Shanghai Pudong",city:"Shanghai",country:"China",lat:31.1443,lon:121.8083},{code:"SHA",name:"Shanghai Hongqiao",city:"Shanghai",country:"China",lat:31.1979,lon:121.3363},{code:"CAN",name:"Guangzhou Baiyun",city:"Guangzhou",country:"China",lat:23.3959,lon:113.308},{code:"HAN",name:"Noi Bai Intl",city:"Hanoi",country:"Vietnam",lat:21.2212,lon:105.8072},{code:"SGN",name:"Tan Son Nhat",city:"Ho Chi Minh City",country:"Vietnam",lat:10.8188,lon:106.652},{code:"BKK",name:"Suvarnabhumi",city:"Bangkok",country:"Thailand",lat:13.69,lon:100.7501},{code:"DMK",name:"Don Mueang",city:"Bangkok",country:"Thailand",lat:13.9126,lon:100.6068},{code:"KUL",name:"Kuala Lumpur Intl",city:"Kuala Lumpur",country:"Malaysia",lat:2.7456,lon:101.7072},{code:"CGK",name:"Soekarno-Hatta",city:"Jakarta",country:"Indonesia",lat:-6.1256,lon:106.6558},{code:"DPS",name:"Ngurah Rai",city:"Bali",country:"Indonesia",lat:-8.7482,lon:115.1672},{code:"MNL",name:"Ninoy Aquino Intl",city:"Manila",country:"Philippines",lat:14.5086,lon:121.0198},{code:"DEL",name:"Indira Gandhi Intl",city:"Delhi",country:"India",lat:28.5562,lon:77.1},{code:"BOM",name:"Chhatrapati Shivaji",city:"Mumbai",country:"India",lat:19.0896,lon:72.8656},{code:"BLR",name:"Kempegowda Intl",city:"Bangalore",country:"India",lat:13.1986,lon:77.7066},{code:"MAA",name:"Chennai Intl",city:"Chennai",country:"India",lat:12.9941,lon:80.1709},{code:"TPE",name:"Taiwan Taoyuan",city:"Taipei",country:"Taiwan",lat:25.0797,lon:121.2342},{code:"SYD",name:"Sydney Kingsford Smith",city:"Sydney",country:"Australia",lat:-33.9399,lon:151.1753},{code:"MEL",name:"Melbourne Tullamarine",city:"Melbourne",country:"Australia",lat:-37.669,lon:144.841},{code:"BNE",name:"Brisbane",city:"Brisbane",country:"Australia",lat:-27.3942,lon:153.1218},{code:"PER",name:"Perth",city:"Perth",country:"Australia",lat:-31.9385,lon:115.9672},{code:"AKL",name:"Auckland",city:"Auckland",country:"New Zealand",lat:-37.0082,lon:174.785},{code:"CHC",name:"Christchurch",city:"Christchurch",country:"New Zealand",lat:-43.4894,lon:172.5322},{code:"WLG",name:"Wellington",city:"Wellington",country:"New Zealand",lat:-41.3272,lon:174.805},{code:"GRU",name:"S\xe3o Paulo Guarulhos",city:"Sao Paulo",country:"Brazil",lat:-23.4356,lon:-46.4731},{code:"GIG",name:"Rio de Janeiro Gale\xe3o",city:"Rio de Janeiro",country:"Brazil",lat:-22.81,lon:-43.2506},{code:"EZE",name:"Buenos Aires Ezeiza",city:"Buenos Aires",country:"Argentina",lat:-34.8222,lon:-58.5358},{code:"SCL",name:"Santiago Arturo Merino",city:"Santiago",country:"Chile",lat:-33.393,lon:-70.7858},{code:"LIM",name:"Lima Jorge Ch\xe1vez",city:"Lima",country:"Peru",lat:-12.0219,lon:-77.1143},{code:"BOG",name:"Bogot\xe1 El Dorado",city:"Bogota",country:"Colombia",lat:4.7016,lon:-74.1469},{code:"JNB",name:"O.R. Tambo Intl",city:"Johannesburg",country:"South Africa",lat:-26.1392,lon:28.246},{code:"CPT",name:"Cape Town Intl",city:"Cape Town",country:"South Africa",lat:-33.9715,lon:18.6021},{code:"NBO",name:"Jomo Kenyatta Intl",city:"Nairobi",country:"Kenya",lat:-1.3192,lon:36.9278},{code:"ADD",name:"Addis Ababa Bole",city:"Addis Ababa",country:"Ethiopia",lat:8.9779,lon:38.7993},{code:"CMN",name:"Mohammed V Intl",city:"Casablanca",country:"Morocco",lat:33.3675,lon:-7.5898},{code:"LOS",name:"Murtala Muhammed",city:"Lagos",country:"Nigeria",lat:6.5774,lon:3.3212}],Pf={USA:"North America",Canada:"North America",Mexico:"North America",UK:"Europe",France:"Europe",Germany:"Europe",Netherlands:"Europe",Belgium:"Europe",Switzerland:"Europe",Austria:"Europe",Czechia:"Europe",Poland:"Europe",Hungary:"Europe",Italy:"Europe",Spain:"Europe",Portugal:"Europe",Greece:"Europe",Turkey:"Europe",Ireland:"Europe",Denmark:"Europe",Norway:"Europe",Sweden:"Europe",Finland:"Europe",Russia:"Europe",UAE:"Middle East",Qatar:"Middle East",Israel:"Middle East",Egypt:"Africa",Jordan:"Middle East","Saudi Arabia":"Middle East",Singapore:"Asia","Hong Kong":"Asia",Japan:"Asia","South Korea":"Asia",China:"Asia",Vietnam:"Asia",Thailand:"Asia",Malaysia:"Asia",Indonesia:"Asia",Philippines:"Asia",India:"Asia",Taiwan:"Asia",Australia:"Oceania","New Zealand":"Oceania",Brazil:"South America",Argentina:"South America",Chile:"South America",Peru:"South America",Colombia:"South America","South Africa":"Africa",Kenya:"Africa",Ethiopia:"Africa",Morocco:"Africa",Nigeria:"Africa"},Of=e=>Pf[e]||"Unknown",Df=e=>{if(!e||e.length<2)return[];const t=e.toLowerCase().trim();return Lf.filter(e=>e.code.toLowerCase().includes(t)||e.city.toLowerCase().includes(t)||e.name.toLowerCase().includes(t)||e.country&&e.country.toLowerCase().includes(t)).slice(0,8)},jf=["Economy","Premium Economy","Business","First"],Mf={"Star Alliance":["Aegean Airlines","Aegean","Air Canada","Air China","Air India","Air New Zealand","ANA","All Nippon Airways","All Nippon","Asiana Airlines","Asiana","Austrian","Austrian Airlines","Avianca","Brussels Airlines","Brussels","Copa Airlines","Copa","Croatia Airlines","Croatia","EgyptAir","Egypt Air","Egyptair","Ethiopian Airlines","Ethiopian","EVA Air","EVA","LOT Polish Airlines","LOT","Polish Airlines","Lufthansa","Scandinavian Airlines","SAS","Scandinavian","Shenzhen Airlines","Shenzhen","Singapore Airlines","Singapore","South African Airways","South African","Swiss","Swiss International","SWISS","TAP Air Portugal","TAP Portugal","TAP","Thai Airways","Thai","THAI","Turkish Airlines","Turkish","THY","United","United Airlines"],SkyTeam:["Aeroflot","Aerol\xedneas Argentinas","Aerolineas Argentinas","Aerol\xedneas","Aerom\xe9xico","Aeromexico","AeroMexico","Air Europa","Air France","AirFrance","China Airlines","China Eastern","China Eastern Airlines","Czech Airlines","CSA","Delta","Delta Air Lines","Delta Airlines","Garuda Indonesia","Garuda","ITA Airways","ITA","Alitalia","Kenya Airways","Kenya","KLM","KLM Royal Dutch","Royal Dutch Airlines","Korean Air","Korean","Middle East Airlines","MEA","Saudia","Saudi Arabian Airlines","Saudi Arabian","TAROM","Vietnam Airlines","Vietnam","Virgin Atlantic","Virgin","XiamenAir","Xiamen Airlines","Xiamen"],Oneworld:["Alaska Airlines","Alaska","American Airlines","American","AA","British Airways","BA","Cathay Pacific","Cathay","Finnair","Iberia","Japan Airlines","JAL","Malaysia Airlines","Malaysia","Qantas","Qatar Airways","Qatar","Royal Air Maroc","RAM","Royal Jordanian","SriLankan Airlines","SriLankan"]},Ff={"Star Alliance":{color:"#1e3a5f",background:"#e8f4fd",icon:"\u2b50",fullName:"Star Alliance"},SkyTeam:{color:"#0f4c81",background:"#e3f2fd",icon:"\ud83c\udf10",fullName:"SkyTeam"},Oneworld:{color:"#b91c1c",background:"#fee2e2",icon:"\ud83c\udf0d",fullName:"Oneworld"},Independent:{color:"#6b7280",background:"#f3f4f6",icon:"\u2708\ufe0f",fullName:"Independent"}},zf=(e,t)=>{var n,r;if(!e||!t)return!1;const i=e.toLowerCase().trim(),o=t.toLowerCase().trim();if(i===o)return!0;const a=o.replace(/\s*\([^)]*\)\s*/g,"").trim(),s=(null===(n=o.match(/\(([^)]+)\)/))||void 0===n||null===(r=n[1])||void 0===r?void 0:r.toLowerCase())||"";if(i===a)return!0;if(s&&i===s)return!0;const l=i.split(/\s+/),c=a.split(/\s+/);if(1===l.length){if(c[0]===l[0])return!0;if(s&&s.split(/\s+/)[0]===l[0])return!0}if(a.startsWith(i))return!0;if(s&&s.startsWith(i))return!0;const u=a.replace(/\s*(airlines?|airways?|air lines?)\s*$/i,"").trim();return i===u||i.replace(/\s*(airlines?|airways?|air lines?)\s*$/i,"").trim()===u},Uf={"Star Alliance":["Aegean Airlines","Air Canada","Air China","Air India","Air New Zealand","ANA (All Nippon Airways)","Asiana Airlines","Austrian Airlines","Avianca","Brussels Airlines","Copa Airlines","Croatia Airlines","EgyptAir","Ethiopian Airlines","EVA Air","LOT Polish Airlines","Lufthansa","Scandinavian Airlines (SAS)","Shenzhen Airlines","Singapore Airlines","South African Airways","Swiss International","TAP Air Portugal","Thai Airways","Turkish Airlines","United Airlines"],SkyTeam:["Aeroflot","Aerol\xedneas Argentinas","Aerom\xe9xico","Air Europa","Air France","China Airlines","China Eastern Airlines","Czech Airlines","Delta Air Lines","Garuda Indonesia","ITA Airways","Kenya Airways","KLM Royal Dutch Airlines","Korean Air","Middle East Airlines","Saudia","TAROM","Vietnam Airlines","Virgin Atlantic","XiamenAir"],Oneworld:["Alaska Airlines","American Airlines","British Airways","Cathay Pacific","Finnair","Iberia","Japan Airlines (JAL)","Malaysia Airlines","Qantas","Qatar Airways","Royal Air Maroc","Royal Jordanian","SriLankan Airlines"]},Vf=e=>{if(!e)return null;const t=e.trim().toLowerCase();for(const[n,r]of Object.entries(Mf))for(const e of r)if(t.includes(e.toLowerCase())||e.toLowerCase().includes(t))return n;return"Independent"},Bf=e=>e*Math.PI/180,Wf=e=>180*e/Math.PI,Hf=(e,t,n,r)=>{const i=Bf(n-e),o=Bf(r-t),a=Math.sin(i/2)*Math.sin(i/2)+Math.cos(Bf(e))*Math.cos(Bf(n))*Math.sin(o/2)*Math.sin(o/2),s=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return Math.round(3958.8*s)},qf=(e,t,n,r,i)=>{const o=Bf(e),a=Bf(t),s=Bf(n),l=Bf(r),c=Math.pow(Math.sin((s-o)/2),2),u=Math.pow(Math.sin((l-a)/2),2),d=c+Math.cos(o)*Math.cos(s)*u,h=Math.min(1,Math.max(0,d)),f=2*Math.asin(Math.sqrt(h));if(0===f)return{lat:e,lon:t};const p=Math.sin((1-i)*f)/Math.sin(f),g=Math.sin(i*f)/Math.sin(f),m=p*Math.cos(o)*Math.cos(a)+g*Math.cos(s)*Math.cos(l),y=p*Math.cos(o)*Math.sin(a)+g*Math.cos(s)*Math.sin(l),v=p*Math.sin(o)+g*Math.sin(s);return{lat:Wf(Math.atan2(v,Math.sqrt(m*m+y*y))),lon:Wf(Math.atan2(y,m))}},Kf=[{name:"Grand Canyon National Park",lat:36.0544,lon:-112.1401,radius:40},{name:"Joshua Tree National Park",lat:33.8734,lon:-115.901,radius:35},{name:"Death Valley National Park",lat:36.5054,lon:-117.0794,radius:50},{name:"Yosemite National Park",lat:37.8651,lon:-119.5383,radius:35},{name:"Sequoia National Park",lat:36.4864,lon:-118.5658,radius:25},{name:"Kings Canyon National Park",lat:36.8879,lon:-118.5551,radius:25},{name:"Zion National Park",lat:37.2982,lon:-113.0263,radius:25},{name:"Bryce Canyon National Park",lat:37.593,lon:-112.1871,radius:20},{name:"Arches National Park",lat:38.7331,lon:-109.5925,radius:20},{name:"Canyonlands National Park",lat:38.3269,lon:-109.8783,radius:35},{name:"Capitol Reef National Park",lat:38.2833,lon:-111.2471,radius:30},{name:"Mesa Verde National Park",lat:37.2309,lon:-108.4618,radius:20},{name:"Petrified Forest National Park",lat:34.91,lon:-109.8068,radius:25},{name:"Saguaro National Park",lat:32.2967,lon:-111.1666,radius:20},{name:"Carlsbad Caverns National Park",lat:32.1479,lon:-104.5567,radius:20},{name:"Big Bend National Park",lat:29.25,lon:-103.2502,radius:40},{name:"Guadalupe Mountains National Park",lat:31.9231,lon:-104.8645,radius:20},{name:"White Sands National Park",lat:32.7872,lon:-106.3257,radius:25},{name:"Redwood National Park",lat:41.2132,lon:-124.0046,radius:25},{name:"Crater Lake National Park",lat:42.8684,lon:-122.1685,radius:20},{name:"Olympic National Park",lat:47.8021,lon:-123.6044,radius:35},{name:"Mount Rainier National Park",lat:46.88,lon:-121.7269,radius:30},{name:"North Cascades National Park",lat:48.7718,lon:-121.2985,radius:30},{name:"Lassen Volcanic National Park",lat:40.4977,lon:-121.508,radius:20},{name:"Channel Islands National Park",lat:34.0069,lon:-119.7785,radius:25},{name:"Pinnacles National Park",lat:36.4906,lon:-121.1825,radius:15},{name:"Yellowstone National Park",lat:44.428,lon:-110.5885,radius:50},{name:"Grand Teton National Park",lat:43.7904,lon:-110.6818,radius:30},{name:"Glacier National Park",lat:48.7596,lon:-113.787,radius:40},{name:"Rocky Mountain National Park",lat:40.3428,lon:-105.6836,radius:30},{name:"Great Sand Dunes National Park",lat:37.7916,lon:-105.5943,radius:20},{name:"Black Canyon of the Gunnison",lat:38.5754,lon:-107.7416,radius:15},{name:"Badlands National Park",lat:43.8554,lon:-102.3397,radius:30},{name:"Theodore Roosevelt National Park",lat:46.979,lon:-103.459,radius:25},{name:"Wind Cave National Park",lat:43.5724,lon:-103.4213,radius:15},{name:"Voyageurs National Park",lat:48.4839,lon:-92.8318,radius:25},{name:"Isle Royale National Park",lat:48,lon:-88.8269,radius:25},{name:"Mammoth Cave National Park",lat:37.1862,lon:-86.0996,radius:20},{name:"Great Smoky Mountains National Park",lat:35.6532,lon:-83.507,radius:35},{name:"Shenandoah National Park",lat:38.4755,lon:-78.4535,radius:30},{name:"Acadia National Park",lat:44.3386,lon:-68.2733,radius:20},{name:"Cuyahoga Valley National Park",lat:41.2808,lon:-81.5678,radius:15},{name:"Indiana Dunes National Park",lat:41.6533,lon:-87.0524,radius:15},{name:"Everglades National Park",lat:25.2866,lon:-80.8987,radius:50},{name:"Biscayne National Park",lat:25.4824,lon:-80.2083,radius:20},{name:"Dry Tortugas National Park",lat:24.6285,lon:-82.8732,radius:20},{name:"Congaree National Park",lat:33.7948,lon:-80.7821,radius:15},{name:"Hot Springs National Park",lat:34.5217,lon:-93.0424,radius:10},{name:"Great Lakes Region",lat:44,lon:-84.5,radius:150},{name:"Lake Superior",lat:47.5,lon:-88,radius:100},{name:"Lake Michigan",lat:43.5,lon:-87,radius:80},{name:"Lake Erie",lat:42.2,lon:-81.2,radius:60},{name:"Mississippi River Delta",lat:29.5,lon:-89.5,radius:40},{name:"Appalachian Mountains",lat:37,lon:-81,radius:80},{name:"Ozark Mountains",lat:36,lon:-93,radius:60},{name:"Sierra Nevada",lat:37.5,lon:-119.5,radius:60},{name:"Cascade Range",lat:44,lon:-121.5,radius:50},{name:"Colorado Plateau",lat:37,lon:-110.5,radius:100},{name:"Mojave Desert",lat:35,lon:-116,radius:70},{name:"Sonoran Desert",lat:32,lon:-112,radius:80},{name:"Chihuahuan Desert",lat:31,lon:-106,radius:70},{name:"Great Basin",lat:39.5,lon:-117,radius:100},{name:"Monument Valley",lat:36.9983,lon:-110.0985,radius:25},{name:"Sedona Red Rocks",lat:34.8697,lon:-111.761,radius:20},{name:"Lake Tahoe",lat:39.0968,lon:-120.0324,radius:20},{name:"Lake Powell",lat:37.0683,lon:-111.2433,radius:30},{name:"Lake Mead",lat:36.146,lon:-114.3901,radius:30},{name:"Hoover Dam",lat:36.0161,lon:-114.7377,radius:10},{name:"Mount Whitney",lat:36.5785,lon:-118.292,radius:15},{name:"Mount Shasta",lat:41.4092,lon:-122.1949,radius:20},{name:"Denali (Mount McKinley)",lat:63.0695,lon:-151.0074,radius:40},{name:"Canadian Rockies",lat:51.5,lon:-116,radius:80},{name:"Banff National Park",lat:51.4968,lon:-115.9281,radius:40},{name:"Niagara Falls",lat:43.0962,lon:-79.0377,radius:15},{name:"Alps",lat:46.5,lon:9.5,radius:150},{name:"Pyrenees",lat:42.6,lon:1,radius:80},{name:"Scottish Highlands",lat:57,lon:-5,radius:60},{name:"English Channel",lat:50.2,lon:-1,radius:40},{name:"Amazon Rainforest",lat:-3,lon:-60,radius:500},{name:"Sahara Desert",lat:23,lon:12,radius:800},{name:"Himalayas",lat:28,lon:84,radius:200},{name:"Great Barrier Reef",lat:-18.2871,lon:147.6992,radius:150},{name:"Uluru (Ayers Rock)",lat:-25.3444,lon:131.0369,radius:20},{name:"Mount Fuji",lat:35.3606,lon:138.7274,radius:30},{name:"Gobi Desert",lat:42.5,lon:103,radius:300},{name:"Siberian Taiga",lat:60,lon:100,radius:500}],Gf=[{name:"North Atlantic Ocean",bounds:{minLat:10,maxLat:60,minLon:-80,maxLon:-5},center:{lat:35,lon:-40}},{name:"South Atlantic Ocean",bounds:{minLat:-60,maxLat:0,minLon:-70,maxLon:20},center:{lat:-25,lon:-15}},{name:"North Pacific Ocean",bounds:{minLat:10,maxLat:60,minLon:-180,maxLon:-125},center:{lat:35,lon:-155}},{name:"South Pacific Ocean",bounds:{minLat:-60,maxLat:0,minLon:-180,maxLon:-70},center:{lat:-30,lon:-130}},{name:"Indian Ocean",bounds:{minLat:-60,maxLat:25,minLon:20,maxLon:120},center:{lat:-10,lon:80}},{name:"Arctic Ocean",bounds:{minLat:66,maxLat:90,minLon:-180,maxLon:180},center:{lat:85,lon:0}},{name:"Caribbean Sea",bounds:{minLat:9,maxLat:23,minLon:-88,maxLon:-60},center:{lat:15,lon:-75}},{name:"Mediterranean Sea",bounds:{minLat:30,maxLat:46,minLon:-6,maxLon:36},center:{lat:35,lon:18}},{name:"Gulf of Mexico",bounds:{minLat:18,maxLat:30.5,minLon:-98,maxLon:-81},center:{lat:25,lon:-90}},{name:"Bering Sea",bounds:{minLat:51,maxLat:66,minLon:162,maxLon:-157},center:{lat:58,lon:-175}},{name:"Sea of Japan",bounds:{minLat:33,maxLat:52,minLon:127,maxLon:142},center:{lat:40,lon:135}},{name:"South China Sea",bounds:{minLat:0,maxLat:25,minLon:99,maxLon:121},center:{lat:12,lon:113}},{name:"Bay of Bengal",bounds:{minLat:5,maxLat:22,minLon:80,maxLon:95},center:{lat:15,lon:88}},{name:"Arabian Sea",bounds:{minLat:5,maxLat:25,minLon:50,maxLon:77},center:{lat:15,lon:65}},{name:"Red Sea",bounds:{minLat:12,maxLat:30,minLon:32,maxLon:44},center:{lat:20,lon:38}},{name:"Persian Gulf",bounds:{minLat:24,maxLat:30,minLon:48,maxLon:56},center:{lat:27,lon:51}},{name:"Tasman Sea",bounds:{minLat:-47,maxLat:-28,minLon:147,maxLon:175},center:{lat:-38,lon:160}},{name:"Coral Sea",bounds:{minLat:-28,maxLat:-10,minLon:143,maxLon:165},center:{lat:-18,lon:155}}],Qf=e=>{if(!e)return"";const[t,n,r]=e.split("-"),i=parseInt(n,10)-1;return"".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][i]," ").concat(parseInt(r,10),", ").concat(t)},Jf={padding:"24px",border:"1px solid #eee",borderRadius:"16px",textAlign:"center"},Yf={fontSize:"28px",fontWeight:"bold",margin:"10px 0 5px"},Xf={fontSize:"12px",color:"#888",textTransform:"uppercase"},$f={padding:"12px",borderRadius:"8px",border:"1px solid #ddd"},Zf={position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},ep={background:"#fff",padding:"30px",borderRadius:"20px",width:"400px"},tp=()=>{const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(null),[a,s]=(0,r.useState)(!0),[l,c]=(0,r.useState)(!1),[d,h]=(0,r.useState)("login"),[f,H]=(0,r.useState)(""),[q,K]=(0,r.useState)(""),[G,Q]=(0,r.useState)(""),[J,Y]=(0,r.useState)(!1),[X,$]=(0,r.useState)([]),[Z,ee]=(0,r.useState)(!1),[te,ne]=(0,r.useState)(!1),[re,ie]=(0,r.useState)(!1),[oe,ae]=(0,r.useState)([]),[se,le]=(0,r.useState)(!1),[ce,ue]=(0,r.useState)(!1),[de,he]=(0,r.useState)([]),[fe,ge]=(0,r.useState)(!1),[me,ye]=(0,r.useState)(!1),[ve,be]=(0,r.useState)(""),[xe,we]=(0,r.useState)(!1),[Se,ke]=(0,r.useState)(""),[Ce,Ee]=(0,r.useState)(()=>{const e=localStorage.getItem("statsExpanded");return null===e||JSON.parse(e)}),[Te,_e]=(0,r.useState)(()=>{const e=localStorage.getItem("chartsExpanded");return null===e||JSON.parse(e)}),[Ae,Ie]=(0,r.useState)(()=>{const e=localStorage.getItem("visibleStats");return e?JSON.parse(e):{flights:!0,miles:!0,routes:!0,countries:!0,continents:!0,airports:!0,co2:!0,alliance:!0,moon:!0,money:!0,milesSpent:!0}}),[Ne,Re]=(0,r.useState)(!1),[Le,Pe]=(0,r.useState)(()=>localStorage.getItem("flightSortMode")||"date"),[Oe,De]=(0,r.useState)(()=>!localStorage.getItem("landingDismissed")),[je,Me]=(0,r.useState)({show:!1,phase:"searching",currentQuery:0,totalQueries:9,currentEmail:0,totalEmails:0,foundFlights:0,currentQueryText:""}),[Fe,ze]=(0,r.useState)(!1),[Ue,Ve]=(0,r.useState)(null),[Be,We]=(0,r.useState)(null),[He,qe]=(0,r.useState)(!1),[Ke,Ge]=(0,r.useState)(""),[Qe,Je]=(0,r.useState)(null),[Ye,Xe]=(0,r.useState)(!1),[$e,Ze]=(0,r.useState)({current:0,total:0}),et=(()=>{const e=new Date;return e.setFullYear(e.getFullYear()-3),e.toISOString().split("T")[0]})(),tt=(new Date).toISOString().split("T")[0],nt=(0,r.useRef)(null),[rt,it]=(0,r.useState)({origin:"",destination:"",date:"",aircraftType:"",airline:"",serviceClass:"Economy",checkLandmarks:!1,hasLayover:!1,viaAirports:[""],legAirlines:["",""],legAircraftTypes:["",""],legServiceClasses:["Economy","Economy"],paymentType:"money",paymentAmount:""}),[ot,at]=(0,r.useState)([]),[st,lt]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=function(e,t,n,r){return pe(e).onAuthStateChanged(t,n,r)}(_f,async e=>{if(s(!0),e){i(e);const t=Rh(Af,"users",e.uid),n=await function(e){e=Ch(e,Ih);const t=Ch(e.firestore,Ph);return mh(Oh(t),e._key).then(n=>kf(t,e,n))}(t);n.exists()?($(n.data().flights||[]),le(n.data().contestOptIn||!1),be(n.data().nickname||"")):(await xf(t,{flights:[],createdAt:(new Date).toISOString(),contestOptIn:!1,nickname:""}),$([]),le(!1),be(""))}else{i(null),le(!1),be("");const e=localStorage.getItem("flights-data");$(e?JSON.parse(e):[])}s(!1)});return()=>e()},[]),(0,r.useEffect)(()=>{if(n&&!a){wf(Rh(Af,"users",n.uid),{flights:X}).catch(console.error)}else n||a||localStorage.setItem("flights-data",JSON.stringify(X))},[X,n,a]);const ct=e=>{const t=e.reduce((e,t)=>e+(t.distance||0),0),n=e.reduce((e,t)=>e+(t.legs&&t.legs.length>1?t.legs.length:1),0);return{totalMiles:t,totalFlights:n,uniqueCountries:[...new Set(e.flatMap(e=>[e.originCountry,e.destCountry].filter(Boolean)))].length,uniqueAirports:[...new Set(e.flatMap(e=>[e.origin,e.destination]))].length}};(0,r.useEffect)(()=>{(async()=>{if(n&&se&&!a&&!ce){const r=ct(X),i=Rh(Af,"publicStats",n.uid);try{var e;await xf(i,u(u({displayName:ve||n.displayName||(null===(e=n.email)||void 0===e?void 0:e.split("@")[0])||"Anonymous Flyer",email:n.email},r),{},{updatedAt:(new Date).toISOString()}))}catch(t){console.error("Error updating public stats:",t)}}})()},[X,se,n,a,ce,ve]);const ut=async e=>{if(!n||ce)return;ue(!0);const t=Rh(Af,"users",n.uid);try{await wf(t,{contestOptIn:e});const i=Rh(Af,"publicStats",n.uid);if(e){var r;const e=ct(X);await xf(i,u(u({displayName:ve||n.displayName||(null===(r=n.email)||void 0===r?void 0:r.split("@")[0])||"Anonymous Flyer",email:n.email},e),{},{updatedAt:(new Date).toISOString()}))}else await xf(i,{optedOut:!0,updatedAt:(new Date).toISOString()});le(e)}catch(i){console.error("Error updating contest opt-in:",i),alert("Failed to update contest preference. Please check your connection and try again.")}finally{ue(!1)}},dt=async()=>{ge(!0);try{const e=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=pe(e),xh("collection","path",t),e instanceof Th){const n=Qo.fromString(t,...r);return Sh(n),new Nh(e,null,n)}{if(!(e instanceof Ih||e instanceof Nh))throw new Ro(No.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Qo.fromString(t,...r));return Sh(n),new Nh(e.firestore,null,n)}}(Af,"publicStats"),t=await function(e){e=Ch(e,Ah);const t=Ch(e.firestore,Ph),n=Oh(t),r=new bf(t);return df(e._query),yh(n,e._query).then(n=>new yf(t,r,e,n))}(e),r=[];console.log("Fetching leaderboard, found documents:",t.size),t.forEach(e=>{const t=e.data();console.log("Document:",e.id,t);const i=!0===t.optedOut,o=void 0!==t.totalMiles&&null!==t.totalMiles;!i&&o&&r.push(u(u({id:e.id},t),{},{totalMiles:t.totalMiles||0,totalFlights:t.totalFlights||0,uniqueCountries:t.uniqueCountries||0,uniqueAirports:t.uniqueAirports||0,isCurrentUser:n&&e.id===n.uid}))}),console.log("Filtered leaderboard entries:",r.length),r.sort((e,t)=>(t.totalMiles||0)-(e.totalMiles||0)),he(r)}catch(e){console.error("Error fetching leaderboard:",e),alert("Error loading leaderboard: "+e.message)}finally{ge(!1)}};(0,r.useEffect)(()=>{me&&dt()},[me,n]);const ht=async()=>{if(!n)return;const e=Se.trim(),t=Rh(Af,"users",n.uid);try{if(await wf(t,{nickname:e}),be(e),we(!1),se){var r;const t=Rh(Af,"publicStats",n.uid),i=ct(X);await xf(t,u(u({displayName:e||n.displayName||(null===(r=n.email)||void 0===r?void 0:r.split("@")[0])||"Anonymous Flyer",email:n.email},i),{},{updatedAt:(new Date).toISOString()}))}}catch(i){console.error("Error saving nickname:",i),alert("Failed to save nickname. Please try again.")}};(0,r.useEffect)(()=>{const e=localStorage.getItem("user-profile");if(e&&t(JSON.parse(e)),document.querySelector('script[src*="apis.google.com"]'))window.gapi&&window.gapi.client&&ze(!0);else{const e=document.createElement("script");e.src="https://apis.google.com/js/api.js",e.onload=()=>{window.gapi.load("client",async()=>{await window.gapi.client.init({apiKey:Nf,discoveryDocs:Rf}),ze(!0)})},document.body.appendChild(e)}if(!document.querySelector('script[src*="accounts.google.com"]')){const e=document.createElement("script");e.src="https://accounts.google.com/gsi/client",e.onload=()=>{const e=window.google.accounts.oauth2.initTokenClient({client_id:"870884007039-9got7ia77t611u2fugedlq6j7kftf51p.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/gmail.readonly",callback:"",ux_mode:"popup"});Ve(e)},document.body.appendChild(e)}const n="google-maps-script";if(window.initFlightMaps=()=>{window.google&&window.google.maps&&(nt.current=new window.google.maps.Geocoder)},document.getElementById(n))window.google&&window.google.maps&&window.google.maps.Geocoder&&(nt.current=new window.google.maps.Geocoder);else{const e=document.createElement("script");e.id=n,e.src="https://maps.googleapis.com/maps/api/js?key=".concat(Nf,"&libraries=places&loading=async&callback=initFlightMaps"),e.async=!0,e.defer=!0,document.body.appendChild(e)}},[]),(0,r.useEffect)(()=>{const e=()=>{Qe&&Je(null)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[Qe]);const ft=async e=>{e.preventDefault(),Q("");try{await async function(e,t,n){if(Tt(e.app))return Promise.reject($t(e));const r=or(e),i=hr(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Lr),o=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Vr(e),t}),a=await Pr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}(_f,f,q),c(!1),H(""),K("")}catch(t){switch(t.code){case"auth/email-already-in-use":Q("This email is already registered. Try logging in.");break;case"auth/weak-password":Q("Password should be at least 6 characters.");break;case"auth/invalid-email":Q("Please enter a valid email address.");break;default:Q(t.message)}}},pt=async e=>{e.preventDefault(),Q("");try{await function(e,t,n){return Tt(e.app)?Promise.reject($t(e)):Ur(pe(e),Er.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Vr(e),t})}(_f,f,q),c(!1),H(""),K("")}catch(t){switch(t.code){case"auth/user-not-found":Q("No account found with this email.");break;case"auth/wrong-password":Q("Incorrect password.");break;case"auth/invalid-email":Q("Please enter a valid email address.");break;case"auth/too-many-requests":Q("Too many failed attempts. Please try again later.");break;default:Q("Invalid email or password.")}}},gt=e=>{h(e),Q(""),H(""),K(""),c(!0)},mt=e=>{"signup"===d?ft(e):pt(e)},yt=e=>!e.originCountry||!e.destCountry||(!e.originContinent||!e.destContinent||(!e.schemaVersion||e.schemaVersion<2)),vt=()=>X.filter(e=>yt(e)),bt=(e,t)=>Hf(e.lat,e.lon,t.lat,t.lon)<=t.radius,xt=async(e,t)=>{const n=new Set,r=[];for(let o=1;o<20;o++){const r=qf(e.lat,e.lon,t.lat,t.lon,o/20);!r||isNaN(r.lat)||isNaN(r.lon)||Kf.forEach(e=>{bt(r,e)&&n.add(e.name)})}if(nt.current){const o=[.1,.25,.4,.5,.6,.75,.9];for(let a of o){const o=qf(e.lat,e.lon,t.lat,t.lon,a);if(o&&!isNaN(o.lat)&&!isNaN(o.lon)){Ge("Scanning point ".concat(Math.round(100*a),"%..."));try{await new Promise(e=>setTimeout(e,300));const e={lat:o.lat,lng:o.lon},t=await new Promise(t=>{nt.current.geocode({location:e},(e,n)=>t({res:e,status:n}))});"OK"===t.status&&t.res&&t.res.length>0?(r.push(o),t.res.forEach(e=>{const t=e.types||[];var r;(t.includes("natural_feature")||t.includes("park")||t.includes("establishment"))&&(null===(r=e.address_components)||void 0===r||r.forEach(e=>{const t=e.types||[];if(t.includes("country")||t.includes("administrative_area_level_1")||t.includes("administrative_area_level_2")||t.includes("locality"))return;const r=e.long_name;(r.includes("National Park")||r.includes("National Forest")||r.includes("National Monument")||r.includes("Wilderness")||r.includes("Mountain")||r.includes("Lake")||r.includes("River")||r.includes("Canyon")||r.includes("Desert")||r.includes("Valley"))&&n.add(r)}))})):"ZERO_RESULTS"===t.status&&wt(o,n)}catch(i){console.warn("Geocoding skip:",i)}}}}return Ge(""),Array.from(n)},wt=(e,t)=>{Gf.forEach(n=>{((e,t)=>{const{minLat:n,maxLat:r,minLon:i,maxLon:o}=t.bounds;return i>o?e.lat>=n&&e.lat<=r&&(e.lon>=i||e.lon<=o):e.lat>=n&&e.lat<=r&&e.lon>=i&&e.lon<=o})(e,n)&&t.add(n.name)})},St=e=>{var t,n,r,i;const o=e.payload.headers,a=(null===(t=o.find(e=>"Subject"===e.name))||void 0===t?void 0:t.value)||"",s=(null===(n=o.find(e=>"From"===e.name))||void 0===n?void 0:n.value)||"",l=(null===(r=o.find(e=>"Date"===e.name))||void 0===r?void 0:r.value)||"",c=(e=>{let t="";const n=e=>{if(e)for(const i of e)if(i.parts&&n(i.parts),"text/html"===i.mimeType&&i.body&&i.body.data)try{t+=atob(i.body.data.replace(/-/g,"+").replace(/_/g,"/"))}catch(r){}};if(e.parts)n(e.parts);else if("text/html"===e.mimeType&&e.body&&e.body.data)try{t=atob(e.body.data.replace(/-/g,"+").replace(/_/g,"/"))}catch(r){}return t})(e.payload),u=(e=>{let t="",n="";const r=e=>{if(e)for(const o of e)if(o.parts&&r(o.parts),o.body&&o.body.data)try{const e=atob(o.body.data.replace(/-/g,"+").replace(/_/g,"/"));"text/plain"===o.mimeType?t+=e+" ":"text/html"===o.mimeType&&(n+=e.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"").replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"").replace(/<[^>]+>/g," ").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#(\d+);/g,(e,t)=>String.fromCharCode(t))+" ")}catch(i){}};if(e.parts)r(e.parts);else if(e.body&&e.body.data)try{const r=atob(e.body.data.replace(/-/g,"+").replace(/_/g,"/"));"text/html"===e.mimeType?n=r.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"").replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"").replace(/<[^>]+>/g," ").replace(/&nbsp;/g," "):t=r}catch(i){}return(t+" "+n).replace(/\s+/g," ").trim()})(e.payload),d=[];try{const t=/<script[^>]*type\s*=\s*["']application\/ld\+json["'][^>]*>([\s\S]*?)<\/script>/gi;let n;for(;null!==(n=t.exec(c));)try{const t=n[1].trim(),r=JSON.parse(t),i=Array.isArray(r)?r:[r];for(const n of i){if("FlightReservation"===n["@type"]&&n.reservationFor){const t=n.reservationFor,r=t.departureAirport,i=t.arrivalAirport;var h,f,p,g,m,y;if(null!==r&&void 0!==r&&r.iataCode&&null!==i&&void 0!==i&&i.iataCode)d.push({id:"".concat(e.id,"-").concat(d.length),origin:r.iataCode.toUpperCase(),destination:i.iataCode.toUpperCase(),date:t.departureTime?t.departureTime.split("T")[0]:"",flightNumber:((null===(h=t.airline)||void 0===h?void 0:h.iataCode)||"")+(t.flightNumber||""),airline:(null===(f=t.airline)||void 0===f?void 0:f.name)||"",aircraftType:(null===(p=t.aircraft)||void 0===p?void 0:p.name)||(null===(g=t.aircraft)||void 0===g?void 0:g.model)||"Unknown",serviceClass:(null===(m=n.reservedTicket)||void 0===m||null===(y=m.ticketedSeat)||void 0===y?void 0:y.seatingType)||"Economy",confirmationNumber:n.reservationNumber||"",snippet:"".concat(r.name||r.iataCode," \u2192 ").concat(i.name||i.iataCode),source:"json-ld"})}if("Flight"===n["@type"]){const t=n.departureAirport,r=n.arrivalAirport;var v,b,x;if(null!==t&&void 0!==t&&t.iataCode&&null!==r&&void 0!==r&&r.iataCode)d.push({id:"".concat(e.id,"-").concat(d.length),origin:t.iataCode.toUpperCase(),destination:r.iataCode.toUpperCase(),date:n.departureTime?n.departureTime.split("T")[0]:"",flightNumber:((null===(v=n.airline)||void 0===v?void 0:v.iataCode)||"")+(n.flightNumber||""),airline:(null===(b=n.airline)||void 0===b?void 0:b.name)||"",aircraftType:(null===(x=n.aircraft)||void 0===x?void 0:x.name)||"Unknown",serviceClass:"Economy",confirmationNumber:"",snippet:"".concat(t.name||t.iataCode," \u2192 ").concat(r.name||r.iataCode),source:"json-ld"})}}}catch(U){console.log("JSON-LD parse error:",U.message)}}catch(V){console.log("JSON-LD extraction error:",V.message)}if(d.length>0)return console.log("Found ".concat(d.length," flight(s) via JSON-LD in email:"),a),d;const w=(a+" "+u).replace(/\s+/g," "),S={"united.com":{name:"United Airlines",code:"UA"},"delta.com":{name:"Delta Air Lines",code:"DL"},"aa.com":{name:"American Airlines",code:"AA"},"southwest.com":{name:"Southwest Airlines",code:"WN"},"jetblue.com":{name:"JetBlue",code:"B6"},"alaskaair.com":{name:"Alaska Airlines",code:"AS"},"britishairways.com":{name:"British Airways",code:"BA"},"lufthansa.com":{name:"Lufthansa",code:"LH"},"airfrance.com":{name:"Air France",code:"AF"},"klm.com":{name:"KLM",code:"KL"},"emirates.com":{name:"Emirates",code:"EK"},"qatarairways.com":{name:"Qatar Airways",code:"QR"},"singaporeair.com":{name:"Singapore Airlines",code:"SQ"},"cathaypacific.com":{name:"Cathay Pacific",code:"CX"},"turkishairlines.com":{name:"Turkish Airlines",code:"TK"},"aircanada.com":{name:"Air Canada",code:"AC"},"qantas.com":{name:"Qantas",code:"QF"},"iberia.com":{name:"Iberia",code:"IB"},"vueling.com":{name:"Vueling",code:"VY"},"tap.pt":{name:"TAP Air Portugal",code:"TP"},"ana.co.jp":{name:"ANA",code:"NH"},"jal.com":{name:"Japan Airlines",code:"JL"},"thaiairways.com":{name:"Thai Airways",code:"TG"},"koreanair.com":{name:"Korean Air",code:"KE"},"evaair.com":{name:"EVA Air",code:"BR"},"virginatlantic.com":{name:"Virgin Atlantic",code:"VS"},"swiss.com":{name:"Swiss",code:"LX"},"austrian.com":{name:"Austrian",code:"OS"},"finnair.com":{name:"Finnair",code:"AY"},"sas.se":{name:"SAS",code:"SK"},"ryanair.com":{name:"Ryanair",code:"FR"},"easyjet.com":{name:"easyJet",code:"U2"},"wizzair.com":{name:"Wizz Air",code:"W6"},"spirit.com":{name:"Spirit Airlines",code:"NK"},"flyfrontier.com":{name:"Frontier Airlines",code:"F9"},"norwegian.com":{name:"Norwegian",code:"DY"},"expedia.com":{name:"",code:""},"booking.com":{name:"",code:""},"kayak.com":{name:"",code:""}};let k=!1,C="",E="";for(const[B,W]of Object.entries(S)){const e=B.replace(".","\\.");if(new RegExp("[.@]".concat(e),"i").test(s)||s.toLowerCase().includes(B)){k=!0,C=W.name,E=W.code;break}}const T=/\b(e-?ticket|itinerary|boarding\s*pass|flight\s*confirm|booking\s*confirm|trip\s*confirm|check-?in|your\s*flight|your\s*trip|reservation|confirmation)\b/i.test(a+" "+w);if(!k&&!T)return null;const _=new Set(["JFK","LGA","EWR","LAX","SFO","ORD","MDW","ATL","DFW","DEN","SEA","PHX","MIA","FLL","MCO","BOS","IAD","DCA","BWI","PHL","MSP","DTW","CLT","LAS","SAN","SJC","OAK","PDX","IAH","HOU","AUS","SLC","TPA","HNL","ANC","YYZ","YVR","YUL","YYC","YEG","YOW","MEX","CUN","GDL","SJD","LHR","LGW","STN","LTN","MAN","EDI","DUB","CDG","ORY","NCE","LYS","FRA","MUC","BER","TXL","SXF","DUS","HAM","AMS","BRU","ZRH","GVA","VIE","PRG","WAW","KRK","BUD","OTP","SOF","FCO","MXP","VCE","NAP","BCN","MAD","PMI","AGP","LIS","OPO","ATH","SKG","IST","SAW","OSL","ARN","CPH","HEL","RIX","TLL","VNO","DXB","AUH","DOH","KWI","BAH","MCT","AMM","TLV","CAI","JED","RUH","SIN","KUL","BKK","DMK","SGN","HAN","CGK","MNL","HKG","TPE","NRT","HND","KIX","ICN","GMP","PEK","PVG","CAN","HGH","CTU","XIY","SZX","DEL","BOM","BLR","MAA","CCU","SYD","MEL","BNE","PER","AKL","WLG","CHC","GRU","GIG","BSB","EZE","AEP","SCL","LIM","BOG","MDE","UIO","GYE","CCS","PTY","JNB","CPT","NBO","ADD","CAI","CMN","LOS","ACC","REC","FOR","SSA","POA","CWB","VCP","CNF","MAO","BEL","NAT"]),A=[/(?:flight|flying|from|depart|route)\s+(?:from\s+)?([A-Z]{3})\s+(?:to|\u2192|->|\u2013|-)\s+([A-Z]{3})/gi,/(?:departure|depart|origin)\s*[:\s]+([A-Z]{3})[\s\S]{0,150}?(?:arrival|arrive|destination)\s*[:\s]+([A-Z]{3})/gi,/\b([A-Z]{3})\s*(?:\u2192|->|=>|\u2794|\xbb)\s*([A-Z]{3})\b/g,/(?:flight|route|itinerary).{0,30}?\b([A-Z]{3})\s*[-\u2013]\s*([A-Z]{3})\b/gi,/\b[A-Z]{2}\d{1,4}\s+([A-Z]{3})\s*[-\u2013\/]\s*([A-Z]{3})\b/g,/\b\w+\s*\(([A-Z]{3})\)\s*(?:to|\u2192|->|\u2013|-)\s*\w+\s*\(([A-Z]{3})\)/gi,/\b[A-Za-z\s,]+\(([A-Z]{3})\)\s+to\s+[A-Za-z\s,]+\(([A-Z]{3})\)/gi,/\b([A-Z]{3})\b[^A-Z]{0,30}(?:Newark|New York|Los Angeles|Chicago|Dallas|Houston|Miami|Boston|Denver|Seattle|Phoenix|Atlanta|San Francisco|Washington|Philadelphia|Detroit|Minneapolis|Charlotte|Orlando|Tampa|Austin|San Diego|Portland|Las Vegas|Baltimore|Fort Lauderdale|Salt Lake|Honolulu|Fort Worth|Cleveland|St\.? Louis|Pittsburgh|Indianapolis|Kansas City|Columbus|Cincinnati|Milwaukee|Nashville|Raleigh|San Antonio|Sacramento)[^A-Z]{0,200}?\b([A-Z]{3})\b/gi];let I="",N="";for(const B of A){B.lastIndex=0;const e=[...w.matchAll(B)];for(const t of e){var R,L;const e=null===(R=t[1])||void 0===R?void 0:R.toUpperCase(),n=null===(L=t[2])||void 0===L?void 0:L.toUpperCase();if(e&&n&&_.has(e)&&_.has(n)&&e!==n){I=e,N=n;break}}if(I&&N)break}const P=(e=>{const t=[],n=/((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)[a-z]*,?\s*\d{1,2}[A-Z]{3}\d{2,4})[^<>]{0,500}?([A-Z]{2}\d{2,4})[^<>]{0,300}?\(([A-Z]{3})\)[^<>]{0,200}?\(([A-Z]{3})\)/gi;let r;for(;null!==(r=n.exec(e));){const e=r[1],n=r[2],i=r[3].toUpperCase(),o=r[4].toUpperCase();_.has(i)&&_.has(o)&&i!==o&&t.push({date:e,flightNumber:n,origin:i,destination:o})}if(0===t.length){const n=[],r=/\(([A-Z]{3})\)/g;let i;for(;null!==(i=r.exec(e));){const e=i[1];_.has(e)&&n.push(e)}for(let e=0;e<n.length-1;e++){const r=n[e],i=n[e+1];r===i||t.some(e=>e.origin===r&&e.destination===i)||t.push({date:"",flightNumber:"",origin:r,destination:i})}}return t})(w);if(P.length>0){console.log("Found ".concat(P.length," flight segment(s) in multi-segment itinerary"));return P.map((t,n)=>{let r="";const i=t.date.match(/(\d{1,2})([A-Z]{3})(\d{2,4})/i);if(i){const e=i[1].padStart(2,"0"),t=i[2].toLowerCase(),n=2===i[3].length?"20"+i[3]:i[3];r="".concat(n,"-").concat(D[t]||"01","-").concat(e)}return{id:"".concat(e.id,"-seg").concat(n),origin:t.origin,destination:t.destination,date:r||O||new Date(l).toISOString().split("T")[0],flightNumber:t.flightNumber,airline:C,aircraftType:"Unknown",serviceClass:"Economy",confirmationNumber:F,snippet:"".concat(t.origin," \u2192 ").concat(t.destination),source:"multi-segment"}})}if(!I||!N){const e=(e=>{const t=[...e.matchAll(/([A-Z][A-Za-z\s,]+?)(?:<BR\s*\/?>|\n)\s*\(([A-Z]{3})\)/gi)],n=[];for(const r of t){const e=r[2].toUpperCase();_.has(e)&&!n.includes(e)&&n.push(e)}return n})(c||w);e.length>=2&&(I=e[0],N=e[e.length-1],console.log("Found codes via United-style HTML: ".concat(I," \u2192 ").concat(N)))}if(!I||!N){const e=(e=>{const t=[...e.matchAll(/\b([A-Z]{3})\b[\s\n]{0,20}(Newark|New York|JFK|LaGuardia|Los Angeles|LAX|Chicago|O'Hare|Midway|Dallas|Fort Worth|DFW|Houston|Hobby|Bush|Miami|Boston|Logan|Denver|Seattle|Tacoma|Phoenix|Atlanta|Hartsfield|San Francisco|SFO|Washington|Dulles|Reagan|National|Philadelphia|Detroit|Minneapolis|St\.? Paul|Charlotte|Douglas|Orlando|Tampa|Austin|San Diego|Portland|Las Vegas|McCarran|Baltimore|BWI|Fort Lauderdale|Hollywood|Salt Lake|Honolulu|Cleveland|Hopkins|St\.? Louis|Lambert|Pittsburgh|Indianapolis|Kansas City|Columbus|Cincinnati|Milwaukee|Nashville|Raleigh|Durham|San Antonio|Sacramento|Anchorage|Toronto|Pearson|Vancouver|Montreal|Trudeau|Mexico City|Cancun|London|Heathrow|Gatwick|Paris|CDG|Orly|Frankfurt|Munich|Berlin|Amsterdam|Schiphol|Brussels|Zurich|Geneva|Vienna|Prague|Warsaw|Budapest|Rome|Fiumicino|Milan|Malpensa|Barcelona|Madrid|Barajas|Lisbon|Athens|Istanbul|Dubai|Doha|Singapore|Changi|Kuala Lumpur|Bangkok|Hong Kong|Tokyo|Narita|Haneda|Seoul|Incheon|Beijing|Shanghai|Pudong|Sydney|Melbourne|Auckland|Hanoi|Buenos Aires|Sao Paulo|Guarulhos)/gi)],n=[];for(const r of t){const e=r[1].toUpperCase();_.has(e)&&!n.includes(e)&&n.push(e)}return n})(w);e.length>=2&&(I=e[0],N=e[1],console.log("Found codes via city context: ".concat(I," \u2192 ").concat(N)))}if(!I||!N){const e=/(?:flight|depart|arrive|from|to|origin|destination|airport).{0,40}?\b([A-Z]{3})\b/gi,t=[...w.matchAll(e)],n=[];for(const r of t){const e=r[1].toUpperCase();_.has(e)&&!n.includes(e)&&n.push(e)}n.length>=2&&(I=n[0],N=n[1])}if((!I||!N)&&k){const e=/\b([A-Z]{3})\b/g,t=[...w.matchAll(e)],n=[],r=new Set(["THE","AND","FOR","ARE","BUT","NOT","YOU","ALL","CAN","HAS","WAS","ONE","OUR","OUT","DAY","GET","HIM","HIS","HOW","ITS","MAY","NEW","NOW","OLD","SEE","TWO","WHO","FRI","SAT","SUN","MON","TUE","WED","THU","JAN","FEB","MAR","APR","JUN","JUL","AUG","SEP","OCT","NOV","DEC","USD","EUR","GBP","CAD","PDF","APP","WWW","COM","ORG","NET","GOV","EST","PST","CST","MST","GMT","UTC","INC","LLC","LTD","USA"]);for(const i of t){const e=i[1].toUpperCase();!_.has(e)||r.has(e)||n.includes(e)||n.push(e)}n.length>=2&&(I=n[0],N=n[1],console.log("Found codes from airline email (last resort): ".concat(I," \u2192 ").concat(N)))}if(!I||!N)return null;let O="";const D={jan:"01",feb:"02",mar:"03",apr:"04",may:"05",jun:"06",jul:"07",aug:"08",sep:"09",oct:"10",nov:"11",dec:"12",january:"01",february:"02",march:"03",april:"04",june:"06",july:"07",august:"08",september:"09",october:"10",november:"11",december:"12"},j=[{regex:/\b(\d{4})-(\d{2})-(\d{2})\b/,parse:e=>e[0]},{regex:/(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday),?\s+(January|February|March|April|May|June|July|August|September|October|November|December)\s+(\d{1,2}),?\s+(\d{4})/i,parse:e=>"".concat(e[3],"-").concat(D[e[1].toLowerCase()],"-").concat(e[2].padStart(2,"0"))},{regex:/(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)[a-z]*,?\s*(\d{1,2})([A-Z]{3})(\d{2})\b/i,parse:e=>{const t=e[1].padStart(2,"0"),n=e[2].toLowerCase(),r=parseInt(e[3])>50?"19"+e[3]:"20"+e[3];return"".concat(r,"-").concat(D[n]||"01","-").concat(t)}},{regex:/\b(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]*\s+(\d{1,2}),?\s+(\d{4})\b/i,parse:e=>"".concat(e[3],"-").concat(D[e[1].toLowerCase().substring(0,3)],"-").concat(e[2].padStart(2,"0"))},{regex:/\b(\d{1,2})\s+(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)[a-z]*\s+(\d{4})\b/i,parse:e=>"".concat(e[3],"-").concat(D[e[2].toLowerCase().substring(0,3)],"-").concat(e[1].padStart(2,"0"))},{regex:/\b(\d{1,2})([A-Z]{3})(\d{4})\b/i,parse:e=>"".concat(e[3],"-").concat(D[e[2].toLowerCase()]||"01","-").concat(e[1].padStart(2,"0"))},{regex:/\b(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})\b/,parse:e=>"".concat(e[3],"-").concat(e[1].padStart(2,"0"),"-").concat(e[2].padStart(2,"0"))}];for(const{regex:B,parse:W}of j){const e=w.match(B);if(e)try{O=W(e);const t=new Date(O);if(t.getFullYear()>=2020&&t.getFullYear()<=2030)break;O=""}catch(V){O=""}}if(!O)try{O=new Date(l).toISOString().split("T")[0]}catch(V){O=(new Date).toISOString().split("T")[0]}if(!C){const e=[[/\bunited\s*(airlines?)?\b/i,"United Airlines"],[/\bdelta\s*(air\s*lines?)?\b/i,"Delta Air Lines"],[/\bamerican\s*airlines?\b/i,"American Airlines"],[/\bsouthwest\b/i,"Southwest Airlines"],[/\bjetblue\b/i,"JetBlue"],[/\bbritish\s*airways?\b/i,"British Airways"],[/\blufthansa\b/i,"Lufthansa"],[/\bair\s*france\b/i,"Air France"],[/\bklm\b/i,"KLM"],[/\bemirates\b/i,"Emirates"],[/\bqatar\b/i,"Qatar Airways"],[/\bsingapore\s*air/i,"Singapore Airlines"],[/\bturkish\b/i,"Turkish Airlines"],[/\biberia\b/i,"Iberia"],[/\btap\s*(portugal)?\b/i,"TAP"],[/\bswiss\b/i,"Swiss"],[/\bryanair\b/i,"Ryanair"],[/\beasyjet\b/i,"easyJet"],[/\blatam\b/i,"LATAM"],[/\bgol\b/i,"GOL"],[/\bazul\b/i,"Azul"],[/\bavianca\b/i,"Avianca"]];for(const[t,n]of e)if(t.test(w)){C=n;break}}let M="";if(E){const e=w.match(new RegExp("\\b".concat(E,"\\s?(\\d{1,4})\\b"),"i"));e&&(M=E+e[1])}if(!M){const e=w.match(/\b([A-Z]{2})\s?(\d{3,4})\b/);e&&(M=e[1]+e[2])}let F="";const z=w.match(/(?:confirm|booking|pnr|locator|reference)\s*(?:number|code|#)?\s*[:\s]*([A-Z0-9]{5,8})\b/i);return z&&(F=z[1].toUpperCase()),console.log("Regex fallback found: ".concat(I," \u2192 ").concat(N," (").concat(C||"unknown",")")),[{id:e.id,origin:I,destination:N,date:O,flightNumber:M,airline:C,aircraftType:"Unknown",serviceClass:"Economy",confirmationNumber:F,snippet:(null===(i=e.snippet)||void 0===i?void 0:i.substring(0,80))+"...",source:"regex-fallback"}]},kt=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.isRoundTrip&&t){qe(!0),Ge("Adding outbound flight...");try{const t=e.outboundFlight,n=Date.now();await Ct(u(u({},t),{},{id:n}),!0,!0),await new Promise(e=>setTimeout(e,50)),Ge("Adding return flight...");const r=e.returnFlight,i=Date.now();await Ct(u(u({},r),{},{id:i}),!0,!0),ae(t=>t.filter(t=>t.id!==e.id)),qe(!1),Ge("")}catch(n){console.error("Error adding round trip:",n),qe(!1),Ge(""),alert("Error adding round trip. Check console for details.")}}else await Ct(e,t,!1)},Ct=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];qe(!0),Ge("Verifying Airports...");try{const n=await Et(e.origin),r=await Et(e.destination);if(!n||!r||isNaN(n.lat)||isNaN(n.lon)||isNaN(r.lat)||isNaN(r.lon))return alert("Could not verify airports: ".concat(e.origin," or ").concat(e.destination,". Please check the codes.")),qe(!1),void Ge("");let i=[],a=0,s=[];if(e.hasLayover&&e.viaAirports&&e.viaAirports.some(e=>e.trim())){const t=e.viaAirports.filter(e=>e.trim()),o=[];for(let e=0;e<t.length;e++){Ge("Verifying connection ".concat(e+1,": ").concat(t[e],"..."));const n=await Et(t[e]);if(!n||isNaN(n.lat)||isNaN(n.lon))return alert("Could not verify connection airport: ".concat(t[e],". Please check the code.")),qe(!1),void Ge("");o.push(n)}const l=[n,...o,r],c=e.legAirlines||[],u=e.legAircraftTypes||[],d=e.legServiceClasses||[];for(let n=0;n<l.length-1;n++){const t=l[n],r=l[n+1],o=Hf(t.lat,t.lon,r.lat,r.lon);a+=o;let h=[];e.checkLandmarks&&(Ge("Analyzing leg ".concat(n+1,": ").concat(t.code," \u2192 ").concat(r.code,"...")),h=await xt(t,r),s=[...new Set([...s,...h])]),i.push({origin:t.code,destination:r.code,originCity:t.city,destCity:r.city,originCountry:t.country||"",destCountry:r.country||"",originContinent:Of(t.country),destContinent:Of(r.country),airline:c[n]||e.airline||"",aircraftType:u[n]||e.aircraftType||"",serviceClass:d[n]||e.serviceClass||"Economy",distance:o,featuresCrossed:h})}}else{let t,o;if(Be&&Be.origin===e.origin&&Be.destination===e.destination&&!Be.legs)t=Be.distance,o=Be.featuresCrossed||[],Ge("Route unchanged, keeping landmarks...");else if(t=Hf(n.lat,n.lon,r.lat,r.lon),e.checkLandmarks)o=await xt(n,r);else{const t=X.filter(t=>t.origin===e.origin&&t.destination===e.destination);t.length>0&&t[0].featuresCrossed?(o=t[0].featuresCrossed,Ge("Copied landmarks from existing route...")):o=[]}a=t,s=o,i.push({origin:e.origin,destination:e.destination,originCity:n.city,destCity:r.city,originCountry:n.country||"",destCountry:r.country||"",originContinent:Of(n.country),destContinent:Of(r.country),airline:e.airline||"",aircraftType:e.aircraftType||"",serviceClass:e.serviceClass||"Economy",distance:t,featuresCrossed:o})}const l=_t(e.aircraftType),{checkLandmarks:c,hasLayover:d,viaAirports:h,legAirlines:f,legAircraftTypes:p,legServiceClasses:g}=e,m=u(u({},o(e,Ef)),{},{id:e.id||Date.now(),distance:a,originCity:n.city,destCity:r.city,originCountry:n.country||"",destCountry:r.country||"",originContinent:Of(n.country),destContinent:Of(r.country),featuresCrossed:s,passengerCount:l,legs:i,legCount:i.length,schemaVersion:2}),y=t?[m,...X]:Be?X.map(e=>e.id===Be.id?m:e):[m,...X];$(y),localStorage.setItem("flights-data",JSON.stringify(y)),t&&ae(t=>t.filter(t=>t.id!==e.id)),ee(!1),We(null),it({origin:"",destination:"",date:"",aircraftType:"",airline:"",serviceClass:"Economy",checkLandmarks:!1,hasLayover:!1,viaAirports:[""],legAirlines:["",""],legAircraftTypes:["",""],legServiceClasses:["Economy","Economy"],paymentType:"money",paymentAmount:""}),at([]),lt(null)}catch(r){if(console.error(r),n)throw r;alert("Error saving flight. Check console for details.")}finally{n||(qe(!1),Ge(""))}},Et=async e=>{const t=e.trim().toUpperCase(),n=Lf.find(e=>e.code===t);if(n)return n;try{const e=await fetch("https://raw.githubusercontent.com/jpatokal/openflights/master/data/airports.dat"),n=(await e.text()).split("\n");for(let r of n)if(r.includes('"'.concat(t,'"'))){const e=r.split(","),n=parseFloat(e[e.length-8]),i=parseFloat(e[e.length-7]);if(!isNaN(n)&&!isNaN(i))return{code:t,city:e[2].replace(/"/g,""),lat:n,lon:i}}}catch(r){console.error(r)}return null},_t=e=>{const t=(e||"").toUpperCase();let n=150;return t.includes("380")?n=500:t.includes("747")?n=416:t.includes("777")||t.includes("350")?n=350:t.includes("787")||t.includes("330")?n=250:t.includes("767")?n=220:(t.includes("CRJ")||t.includes("ERJ")||t.includes("EMB"))&&(n=70),Math.round(.82*n)},At=(e,t)=>{const n={Economy:1,"Premium Economy":1.5,Business:2.5,First:4}[t]||1;return Math.round(.14*e*n)},It=X.reduce((e,t)=>e+(t.legCount||1),0),Nt=X.reduce((e,t)=>e+(t.distance||0),0),Rt=(X.reduce((e,t)=>e+(t.passengerCount||0),0),[...new Set(X.flatMap(e=>{const t=[];return e.originCountry&&t.push(e.originCountry),e.destCountry&&t.push(e.destCountry),e.legs&&e.legs.forEach(e=>{e.originCountry&&t.push(e.originCountry),e.destCountry&&t.push(e.destCountry)}),t}).filter(Boolean))]),Lt=[...new Set(X.flatMap(e=>{const t=[];return e.originContinent&&t.push(e.originContinent),e.destContinent&&t.push(e.destContinent),e.originCountry&&t.push(Of(e.originCountry)),e.destCountry&&t.push(Of(e.destCountry)),t}).filter(e=>e&&"Unknown"!==e))],Pt=[...new Set(X.flatMap(e=>{const t=[e.origin,e.destination];return e.legs&&e.legs.forEach(e=>{t.push(e.origin,e.destination)}),t}).filter(Boolean))];(0,r.useEffect)(()=>{localStorage.setItem("statsExpanded",JSON.stringify(Ce))},[Ce]),(0,r.useEffect)(()=>{localStorage.setItem("chartsExpanded",JSON.stringify(Te))},[Te]),(0,r.useEffect)(()=>{localStorage.setItem("visibleStats",JSON.stringify(Ae))},[Ae]),(0,r.useEffect)(()=>{localStorage.setItem("flightSortMode",Le)},[Le]);const Ot=X.reduce((e,t)=>t.legs&&t.legs.length>1?e+t.legs.reduce((e,t)=>e+At(t.distance||0,t.serviceClass||"Economy"),0):e+At(t.distance||0,t.serviceClass||"Economy"),0),Dt=(Ot/1e3).toFixed(2),jt=X.reduce((e,t)=>{const n=t.passengerCount||_t(t.aircraftType);return e+.14*(t.distance||0)*n},0),Mt=(jt/1e3).toFixed(1),Ft={};X.forEach(e=>{e.featuresCrossed&&e.featuresCrossed.forEach(e=>{Ft[e]=(Ft[e]||0)+1})});const zt=Object.entries(Ft).sort((e,t)=>t[1]-e[1]).slice(0,5),Ut={};X.forEach(e=>{e.legs&&e.legs.length>1?e.legs.forEach(e=>{e.airline&&(Ut[e.airline]=(Ut[e.airline]||0)+1)}):e.airline&&(Ut[e.airline]=(Ut[e.airline]||0)+1)});const Vt=Object.entries(Ut).sort((e,t)=>t[1]-e[1]).slice(0,5),Bt={};X.forEach(e=>{e.legs&&e.legs.length>1?e.legs.forEach(e=>{e.aircraftType&&"Unknown"!==e.aircraftType&&(Bt[e.aircraftType]=(Bt[e.aircraftType]||0)+1)}):e.aircraftType&&"Unknown"!==e.aircraftType&&(Bt[e.aircraftType]=(Bt[e.aircraftType]||0)+1)});const Wt=Object.entries(Bt).sort((e,t)=>t[1]-e[1]).slice(0,5),Ht={};let qt=0;X.forEach(e=>{if(e.legs&&e.legs.length>1)e.legs.forEach(e=>{if(e.airline){const t=Vf(e.airline);Ht[t]=(Ht[t]||0)+1,qt++}});else if(e.airline){const t=Vf(e.airline);Ht[t]=(Ht[t]||0)+1,qt++}});const Kt=Object.entries(Ht).sort((e,t)=>t[1]-e[1]),Gt=Kt.length>0?Kt[0][0]:null,Qt={};X.forEach(e=>{e.legs&&e.legs.length>1?e.legs.forEach(e=>{const t=e.serviceClass||"Economy";Qt[t]=(Qt[t]||0)+1}):e.serviceClass&&(Qt[e.serviceClass]=(Qt[e.serviceClass]||0)+1)});const Jt=["First","Business","Premium Economy","Economy"],Xt=Object.entries(Qt).sort((e,t)=>Jt.indexOf(e[0])-Jt.indexOf(t[0])),en={};X.forEach(e=>{if(e.legs&&e.legs.length>1)e.legs.forEach(e=>{const t=e.serviceClass||"Economy",n=At(e.distance||0,t);en[t]=(en[t]||0)+n});else{const t=e.serviceClass||"Economy",n=At(e.distance||0,t);en[t]=(en[t]||0)+n}});const tn=Object.entries(en).sort((e,t)=>t[1]-e[1]),nn=X.reduce((e,t)=>{if(t.paymentAmount&&!isNaN(parseFloat(t.paymentAmount))){const n=parseFloat(t.paymentAmount);"miles"===t.paymentType?(e.totalMilesSpent+=n,e.milesFlightCount+=1):(e.totalMoneySpent+=n,e.moneyFlightCount+=1)}return e},{totalMilesSpent:0,totalMoneySpent:0,milesFlightCount:0,moneyFlightCount:0}),rn=X.reduce((e,t)=>{const n="".concat(t.origin,"-").concat(t.destination);return e[n]||(e[n]={origin:t.origin,destination:t.destination,originCity:t.originCity,destCity:t.destCity,originCountry:t.originCountry,destCountry:t.destCountry,originContinent:t.originContinent||Of(t.originCountry),destContinent:t.destContinent||Of(t.destCountry),featuresCrossed:t.featuresCrossed,distance:t.distance,flights:[]}),e[n].flights.push(t),e},{});Object.values(rn).forEach(e=>{e.flights.sort((e,t)=>new Date(t.date)-new Date(e.date))});const on=Object.values(rn).sort((e,t)=>{const n=new Date(e.flights[0].date);return new Date(t.flights[0].date)-n}),an="country"===Le?(()=>{const e={};return Object.values(rn).forEach(t=>{[...new Set([t.originCountry,t.destCountry].filter(Boolean))].forEach(n=>{e[n]||(e[n]={country:n,groups:[]}),e[n].groups.find(e=>e.origin===t.origin&&e.destination===t.destination)||e[n].groups.push(t)})}),Object.values(e).sort((e,t)=>e.country.localeCompare(t.country))})():[],sn="continent"===Le?(()=>{const e={};Object.values(rn).forEach(t=>{[...new Set([t.originContinent,t.destContinent].filter(e=>e&&"Unknown"!==e))].forEach(n=>{e[n]||(e[n]={continent:n,groups:[]}),e[n].groups.find(e=>e.origin===t.origin&&e.destination===t.destination)||e[n].groups.push(t)})});const t=["North America","South America","Europe","Africa","Middle East","Asia","Oceania"];return Object.values(e).sort((e,n)=>{const r=t.indexOf(e.continent),i=t.indexOf(n.continent);return(-1===r?999:r)-(-1===i?999:i)})})():[],ln=e=>{We(null);if(e.legs&&e.legs.length>1){const t=e.legs.slice(1,-1).map(e=>e.origin),n=e.legs.map(e=>e.airline||""),r=e.legs.map(e=>e.aircraftType||""),i=e.legs.map(e=>e.serviceClass||"Economy");it({origin:e.origin,destination:e.destination,airline:"",aircraftType:"",serviceClass:"Economy",date:"",checkLandmarks:!1,hasLayover:!0,viaAirports:t.length>0?t:[""],legAirlines:n,legAircraftTypes:r,legServiceClasses:i})}else{const t=e.legs&&e.legs[0];it({origin:e.origin,destination:e.destination,airline:e.airline||(t?t.airline:"")||"",aircraftType:e.aircraftType||(t?t.aircraftType:"")||"",serviceClass:e.serviceClass||(t?t.serviceClass:"")||"Economy",date:"",checkLandmarks:!1,hasLayover:!1,viaAirports:[""],legAirlines:["",""],legAircraftTypes:["",""],legServiceClasses:["Economy","Economy"],paymentType:"money",paymentAmount:""})}ee(!0)},cn=e=>{We(null);if(e.legs&&e.legs.length>1){const t=[...e.legs].reverse(),n=t.slice(1,-1).map(e=>e.destination),r=t.map(e=>e.airline||""),i=t.map(e=>e.aircraftType||""),o=t.map(e=>e.serviceClass||"Economy");it({origin:e.destination,destination:e.origin,airline:"",aircraftType:"",serviceClass:"Economy",date:"",checkLandmarks:!1,hasLayover:!0,viaAirports:n.length>0?n:[""],legAirlines:r,legAircraftTypes:i,legServiceClasses:o,paymentType:"money",paymentAmount:""})}else{const t=e.legs&&e.legs[0];it({origin:e.destination,destination:e.origin,airline:e.airline||(t?t.airline:"")||"",aircraftType:e.aircraftType||(t?t.aircraftType:"")||"",serviceClass:e.serviceClass||(t?t.serviceClass:"")||"Economy",date:"",checkLandmarks:!1,hasLayover:!1,viaAirports:[""],legAirlines:["",""],legAircraftTypes:["",""],legServiceClasses:["Economy","Economy"],paymentType:"money",paymentAmount:""})}ee(!0)},un=()=>{localStorage.setItem("landingDismissed","true"),De(!1),n||gt("signup")};return!Oe||n||a?(0,Cf.jsxs)("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"40px 20px",fontFamily:"sans-serif"},children:[(0,Cf.jsxs)("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px",flexWrap:"wrap",gap:"15px"},children:[(0,Cf.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,Cf.jsx)("h1",{style:{margin:0},children:"FlightLog"}),(0,Cf.jsx)("span",{style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",color:"#fff",fontSize:"10px",fontWeight:"700",padding:"3px 8px",borderRadius:"6px",textTransform:"uppercase",letterSpacing:"0.5px",boxShadow:"0 2px 4px rgba(99, 102, 241, 0.3)"},children:"Beta"})]}),(0,Cf.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"},children:[a?(0,Cf.jsx)(w,{className:"animate-spin",size:20,style:{color:"#888"}}):n?(0,Cf.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[xe?(0,Cf.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 8px",background:"#f0fdf4",borderRadius:"20px"},children:[(0,Cf.jsx)("input",{type:"text",value:Se,onChange:e=>ke(e.target.value),placeholder:"Enter nickname",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&ht(),"Escape"===e.key&&(we(!1),ke(ve))},style:{border:"1px solid #d1d5db",borderRadius:"6px",padding:"4px 8px",fontSize:"13px",width:"120px",outline:"none"}}),(0,Cf.jsx)("button",{onClick:ht,style:{background:"#10b981",color:"#fff",border:"none",borderRadius:"6px",padding:"4px 8px",cursor:"pointer",fontSize:"12px"},children:"Save"}),(0,Cf.jsx)("button",{onClick:()=>{we(!1),ke(ve)},style:{background:"#f3f4f6",color:"#666",border:"1px solid #d1d5db",borderRadius:"6px",padding:"4px 8px",cursor:"pointer",fontSize:"12px"},children:"Cancel"})]}):(0,Cf.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",background:"#f0fdf4",borderRadius:"20px",fontSize:"13px",color:"#166534",cursor:"pointer"},onClick:()=>{ke(ve||""),we(!0)},title:"Click to edit nickname",children:[(0,Cf.jsx)(S,{size:16}),(0,Cf.jsx)("span",{style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:ve||(null!==n&&void 0!==n&&n.displayName?n.displayName:null!==n&&void 0!==n&&n.email?n.email.split("@")[0]:"User")}),(0,Cf.jsx)(k,{size:12,style:{opacity:.6}})]}),(0,Cf.jsxs)("button",{onClick:async()=>{try{await function(e){return pe(e).signOut()}(_f)}catch(e){console.error("Logout error:",e)}},style:{background:"transparent",border:"1px solid #ddd",padding:"8px 12px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",color:"#666"},children:[(0,Cf.jsx)(C,{size:18})," Sign Out"]})]}):(0,Cf.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,Cf.jsxs)("button",{onClick:()=>gt("login"),style:{background:"transparent",border:"1px solid #ddd",padding:"8px 16px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"13px"},children:[(0,Cf.jsx)(E,{size:16})," Log In"]}),(0,Cf.jsxs)("button",{onClick:()=>gt("signup"),style:{background:"#10b981",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"13px",fontWeight:"600"},children:[(0,Cf.jsx)(S,{size:16})," Sign Up"]})]}),(0,Cf.jsxs)("button",{onClick:()=>{ie(!0),Ue.callback=async e=>{if(e.error)return ie(!1),Me(e=>u(u({},e),{},{show:!1})),void alert("Auth failed.");const t=await new Promise(e=>{const t=document.createElement("div");t.style.cssText="position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;z-index:10000;";const n=document.createElement("div");n.style.cssText="background:#fff;padding:30px;border-radius:16px;box-shadow:0 10px 40px rgba(0,0,0,0.2);max-width:400px;width:90%;",n.innerHTML='\n            <h2 style="margin:0 0 20px 0;font-size:20px;font-weight:600;">Select Date Range</h2>\n            <div style="margin-bottom:15px;">\n              <label style="display:block;margin-bottom:5px;font-size:13px;font-weight:600;">From:</label>\n              <input type="date" id="dateFrom" value="'.concat(et,'" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;font-size:14px;"/>\n            </div>\n            <div style="margin-bottom:20px;">\n              <label style="display:block;margin-bottom:5px;font-size:13px;font-weight:600;">To:</label>\n              <input type="date" id="dateTo" value="').concat(tt,'" style="width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;font-size:14px;"/>\n            </div>\n            <div style="display:flex;gap:10px;justify-content:flex-end;">\n              <button id="cancelBtn" style="padding:10px 20px;border:1px solid #ddd;background:#fff;border-radius:8px;cursor:pointer;font-weight:600;">Cancel</button>\n              <button id="searchBtn" style="padding:10px 20px;border:none;background:#4285F4;color:#fff;border-radius:8px;cursor:pointer;font-weight:600;">Search</button>\n            </div>\n          '),t.appendChild(n),document.body.appendChild(t),document.getElementById("cancelBtn").onclick=()=>{document.body.removeChild(t),e(null)},document.getElementById("searchBtn").onclick=()=>{const n=document.getElementById("dateFrom").value,r=document.getElementById("dateTo").value;n&&r?new Date(n)>new Date(r)?alert("Start date must be before end date."):(console.log("Date range selected - From:",n,"To:",r),document.body.removeChild(t),e({from:n,to:r})):alert("Please select both start and end dates.")}});if(t){console.log("User selected date range:",t),Me({show:!0,phase:"searching",currentQuery:0,totalQueries:9,currentEmail:0,totalEmails:0,foundFlights:0,currentQueryText:"Initializing..."});try{const e=e=>e.replace(/-/g,"/"),r=e(t.from),i=e(t.to);console.log("Gmail date range - After:",r,"Before:",i);const o=["category:reservations after:".concat(r," before:").concat(i),'subject:(itinerary OR "flight confirmation" OR "booking confirmation" OR "e-ticket" OR eticket OR "boarding pass") after:'.concat(r," before:").concat(i),'subject:("check-in" OR "your trip" OR "your flight" OR "trip confirmation") after:'.concat(r," before:").concat(i),"from:(united.com OR delta.com OR aa.com OR southwest.com OR jetblue.com OR alaskaair.com OR email.aa.com OR email.united.com OR email.delta.com) after:".concat(r," before:").concat(i),"from:(britishairways.com OR lufthansa.com OR airfrance.com OR klm.com OR iberia.com OR vueling.com OR tap.pt OR swiss.com) after:".concat(r," before:").concat(i),"from:(emirates.com OR qatarairways.com OR singaporeair.com OR cathaypacific.com OR turkishairlines.com OR thaiairways.com) after:".concat(r," before:").concat(i),"from:(aircanada.com OR qantas.com OR ana.co.jp OR jal.com OR koreanair.com OR evaair.com) after:".concat(r," before:").concat(i),"from:(ryanair.com OR easyjet.com OR wizzair.com OR norwegian.com OR spirit.com OR flyfrontier.com) after:".concat(r," before:").concat(i),"from:(expedia.com OR booking.com OR kayak.com OR priceline.com OR orbitz.com OR travelocity.com OR tripadvisor.com) after:".concat(r," before:").concat(i)],a=["Gmail Reservations","Flight Confirmations","Check-in & Trip Emails","US Airlines","European Airlines","Middle East & Asian Airlines","Other Major Airlines","Low-cost Carriers","Travel Booking Sites"],s=new Set,l=[];for(let t=0;t<o.length;t++){const e=o[t];Me(e=>u(u({},e),{},{phase:"searching",currentQuery:t+1,totalQueries:o.length,currentQueryText:a[t]}));try{console.log("Search ".concat(t+1,"/").concat(o.length,": ").concat(e.substring(0,60),"..."));const n=(await window.gapi.client.gmail.users.messages.list({userId:"me",q:e,maxResults:50})).result.messages||[];console.log("  \u2192 Found ".concat(n.length," emails"));for(const e of n)s.has(e.id)||(s.add(e.id),l.push(e))}catch(n){console.log("  \u2192 Search failed:",n.message)}}console.log("\nTotal unique emails to process: ".concat(l.length)),Me(e=>u(u({},e),{},{phase:"processing",currentEmail:0,totalEmails:l.length,currentQueryText:"Analyzing emails..."}));const c=[],d=new Set;let h=0,f=0;const p=e=>{if(!e||e.length<2)return e;const t=[],n=new Set;for(let r=0;r<e.length;r++){if(n.has(r))continue;const i=e[r];let o=null,a=-1;for(let t=r+1;t<e.length;t++){if(n.has(t))continue;const r=e[t],s=i.confirmationNumber&&i.confirmationNumber===r.confirmationNumber,l=i.origin===r.destination&&i.destination===r.origin,c=!i.date||!r.date||new Date(r.date)>=new Date(i.date);if((s||l)&&l&&c){o=r,a=t;break}}o?(n.add(r),n.add(a),t.push(u(u({},i),{},{id:"".concat(i.id,"-rt"),isRoundTrip:!0,outboundFlight:i,returnFlight:o,snippet:"".concat(i.origin," \u21c4 ").concat(i.destination," (Round Trip)"),returnDate:o.date}))):t.push(i)}return t};for(let t=0;t<l.length;t++){const e=l[t];Me(e=>u(u({},e),{},{currentEmail:t+1,foundFlights:c.length}));try{t%10===0&&console.log("Processing email ".concat(t+1,"/").concat(l.length,"..."));const n=await window.gapi.client.gmail.users.messages.get({userId:"me",id:e.id,format:"full"});let r=St(n.result);r&&Array.isArray(r)&&r.length>=2&&(r=p(r)),r&&Array.isArray(r)&&r.forEach(e=>{const t=e.isRoundTrip?"".concat(e.origin,"-").concat(e.destination,"-RT-").concat(e.date):"".concat(e.origin,"-").concat(e.destination,"-").concat(e.date);d.has(t)||(d.add(t),c.push(e),"json-ld"===e.source?h++:f++,e.isRoundTrip?console.log("\u2713 Found Round Trip: ".concat(e.origin," \u21c4 ").concat(e.destination," | ").concat(e.date," - ").concat(e.returnDate," | ").concat(e.airline||"Unknown"," | ").concat(e.source)):console.log("\u2713 Found: ".concat(e.origin," \u2192 ").concat(e.destination," | ").concat(e.date," | ").concat(e.airline||"Unknown"," | ").concat(e.source)))})}catch(n){}}c.sort((e,t)=>new Date(t.date)-new Date(e.date)),console.log("\n=== RESULTS ==="),console.log("Total flights: ".concat(c.length," (").concat(h," from JSON-LD, ").concat(f," from regex)")),Me(e=>u(u({},e),{},{show:!1})),ae(c),ne(!0)}catch(r){console.error("Gmail Import Error:",r),Me(e=>u(u({},e),{},{show:!1})),alert("An error occurred while scanning emails.")}finally{ie(!1)}}else ie(!1)},null===window.gapi.client.getToken()?Ue.requestAccessToken({prompt:"consent"}):Ue.requestAccessToken({prompt:""})},disabled:!Fe||re,style:{background:"#4285F4",color:"#fff",border:"none",padding:"12px 20px",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",display:"flex",gap:"8px",alignItems:"center"},children:[re?(0,Cf.jsx)(w,{className:"animate-spin",size:18}):(0,Cf.jsx)(T,{size:18}),re?"Scanning...":"Sync Gmail"]}),(0,Cf.jsx)("button",{onClick:()=>{We(null),it({origin:"",destination:"",date:"",aircraftType:"",airline:"",serviceClass:"Economy",checkLandmarks:!1,hasLayover:!1,viaAirports:[""],legAirlines:["",""],legAircraftTypes:["",""],legServiceClasses:["Economy","Economy"],paymentType:"money",paymentAmount:""}),at([]),lt(null),ee(!0)},style:{background:"#000",color:"#fff",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontWeight:"bold"},children:"+ Manual Add"})]})]}),l&&(0,Cf.jsx)("div",{style:Zf,children:(0,Cf.jsxs)("div",{style:u(u({},ep),{},{maxWidth:"400px"}),children:[(0,Cf.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,Cf.jsx)("h2",{style:{margin:0},children:"login"===d?"Welcome Back":"Create Account"}),(0,Cf.jsx)(y,{style:{cursor:"pointer"},onClick:()=>c(!1)})]}),G&&(0,Cf.jsxs)("div",{style:{background:"#fef2f2",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"15px",fontSize:"13px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,Cf.jsx)(v,{size:16}),G]}),(0,Cf.jsxs)("form",{onSubmit:"login"===d?pt:ft,style:{display:"grid",gap:"15px"},children:[(0,Cf.jsx)("input",{type:"email",placeholder:"Email address",required:!0,value:f,onChange:e=>H(e.target.value),style:$f}),(0,Cf.jsxs)("div",{style:{position:"relative"},children:[(0,Cf.jsx)("input",{type:J?"text":"password",placeholder:"Password",required:!0,value:q,onChange:e=>K(e.target.value),style:u(u({},$f),{},{paddingRight:"45px"})}),(0,Cf.jsx)("button",{type:"button",onClick:()=>Y(!J),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",cursor:"pointer",color:"#888"},children:J?(0,Cf.jsx)(b,{size:18}):(0,Cf.jsx)(x,{size:18})})]}),(0,Cf.jsx)("button",{type:"submit",style:{background:"login"===d?"#000":"#10b981",color:"#fff",padding:"12px",borderRadius:"8px",border:"none",fontWeight:"bold",cursor:"pointer"},children:"login"===d?"Log In":"Create Account"})]}),(0,Cf.jsxs)("div",{style:{display:"flex",alignItems:"center",margin:"20px 0",gap:"10px"},children:[(0,Cf.jsx)("div",{style:{flex:1,height:"1px",background:"#ddd"}}),(0,Cf.jsx)("span",{style:{color:"#888",fontSize:"12px"},children:"or"}),(0,Cf.jsx)("div",{style:{flex:1,height:"1px",background:"#ddd"}})]}),(0,Cf.jsxs)("button",{onClick:async()=>{Q("");try{await async function(e,t,n){if(Tt(e.app))return Promise.reject(Yt(e,"operation-not-supported-in-this-environment"));const r=or(e);Zt(e,t,Tr);const i=hi(r,n);return new bi(r,"signInViaPopup",t,i).executeNotNull()}(_f,If),c(!1)}catch(e){"auth/popup-closed-by-user"!==e.code&&Q("Google sign-in failed. Please try again.")}},style:{width:"100%",background:"#fff",border:"1px solid #ddd",padding:"12px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",fontSize:"14px"},children:[(0,Cf.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[(0,Cf.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,Cf.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,Cf.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,Cf.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),(0,Cf.jsx)("p",{style:{textAlign:"center",marginTop:"20px",fontSize:"13px",color:"#666"},children:"login"===d?(0,Cf.jsxs)(Cf.Fragment,{children:["Don't have an account? ",(0,Cf.jsx)("button",{onClick:()=>h("signup"),style:{background:"none",border:"none",color:"#10b981",cursor:"pointer",fontWeight:"600"},children:"Sign up"})]}):(0,Cf.jsxs)(Cf.Fragment,{children:["Already have an account? ",(0,Cf.jsx)("button",{onClick:()=>h("login"),style:{background:"none",border:"none",color:"#000",cursor:"pointer",fontWeight:"600"},children:"Log in"})]})})]})}),!a&&!n&&(0,Cf.jsxs)("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"12px",padding:"16px",marginBottom:"30px",display:"flex",alignItems:"center",gap:"12px",flexWrap:"wrap"},children:[(0,Cf.jsx)(v,{size:20,color:"#d97706"}),(0,Cf.jsxs)("div",{style:{flex:1,minWidth:"200px"},children:[(0,Cf.jsx)("strong",{style:{color:"#92400e"},children:"Your data is stored locally."}),(0,Cf.jsx)("span",{style:{color:"#a16207",marginLeft:"8px"},children:"Sign up to sync your flights across devices and never lose your data."})]}),(0,Cf.jsx)("button",{onClick:()=>gt("signup"),style:{background:"#f59e0b",color:"#fff",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontWeight:"600",whiteSpace:"nowrap"},children:"Sign Up Free"})]}),je.show&&(0,Cf.jsx)("div",{style:Zf,children:(0,Cf.jsxs)("div",{style:u(u({},ep),{},{maxWidth:"450px",textAlign:"center"}),children:[(0,Cf.jsxs)("div",{style:{marginBottom:"25px"},children:[(0,Cf.jsx)("div",{style:{width:"60px",height:"60px",margin:"0 auto 20px",borderRadius:"50%",background:"linear-gradient(135deg, #4285F4 0%, #34A853 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 0 0 0 rgba(66, 133, 244, 0.4)"},children:(0,Cf.jsx)(w,{size:28,color:"#fff",className:"animate-spin"})}),(0,Cf.jsx)("h2",{style:{margin:"0 0 8px 0",fontSize:"20px",fontWeight:"600"},children:"searching"===je.phase?"Searching Gmail...":"Analyzing Emails..."}),(0,Cf.jsx)("p",{style:{margin:0,color:"#666",fontSize:"14px"},children:je.currentQueryText})]}),(0,Cf.jsx)("div",{style:{background:"#f0f0f0",borderRadius:"10px",height:"12px",overflow:"hidden",marginBottom:"15px"},children:(0,Cf.jsx)("div",{style:{background:"linear-gradient(90deg, #4285F4 0%, #34A853 100%)",height:"100%",borderRadius:"10px",transition:"width 0.3s ease",width:"searching"===je.phase?"".concat(je.currentQuery/je.totalQueries*100,"%"):"".concat(je.totalEmails>0?je.currentEmail/je.totalEmails*100:0,"%")}})}),(0,Cf.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[(0,Cf.jsxs)("div",{style:{background:"#f8f9fa",padding:"12px",borderRadius:"10px"},children:[(0,Cf.jsx)("div",{style:{fontSize:"24px",fontWeight:"700",color:"#4285F4"},children:"searching"===je.phase?"".concat(je.currentQuery,"/").concat(je.totalQueries):"".concat(je.currentEmail,"/").concat(je.totalEmails)}),(0,Cf.jsx)("div",{style:{fontSize:"11px",color:"#666",marginTop:"4px"},children:"searching"===je.phase?"Queries":"Emails"})]}),(0,Cf.jsxs)("div",{style:{background:"#f0fdf4",padding:"12px",borderRadius:"10px"},children:[(0,Cf.jsx)("div",{style:{fontSize:"24px",fontWeight:"700",color:"#16a34a"},children:je.foundFlights}),(0,Cf.jsx)("div",{style:{fontSize:"11px",color:"#666",marginTop:"4px"},children:"Flights Found"})]})]}),(0,Cf.jsx)("div",{style:{fontSize:"13px",color:"#999"},children:"searching"===je.phase?"".concat(Math.round(je.currentQuery/je.totalQueries*100),"% complete"):je.totalEmails>0?"".concat(Math.round(je.currentEmail/je.totalEmails*100),"% complete"):"Starting..."})]})}),te&&(0,Cf.jsx)("div",{style:Zf,children:(0,Cf.jsxs)("div",{style:u(u({},ep),{},{maxWidth:"650px"}),children:[(0,Cf.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,Cf.jsxs)("h2",{style:{margin:0},children:["Flights Found (",oe.length,")"]}),(0,Cf.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[oe.length>0&&(0,Cf.jsx)(Cf.Fragment,{children:(0,Cf.jsx)("button",{onClick:()=>ae([]),style:{padding:"6px 12px",border:"1px solid #fecaca",background:"#fff",color:"#dc2626",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"500"},children:"Clear All"})}),(0,Cf.jsx)(y,{style:{cursor:"pointer"},onClick:()=>ne(!1)})]})]}),0===oe.length?(0,Cf.jsxs)("div",{style:{textAlign:"center",padding:"30px",color:"#666"},children:[(0,Cf.jsx)(v,{size:40,style:{marginBottom:"15px",color:"#ccc"}}),(0,Cf.jsx)("p",{style:{fontWeight:"500",marginBottom:"10px"},children:"No flight emails found"}),(0,Cf.jsxs)("p",{style:{fontSize:"13px",color:"#999",lineHeight:"1.5"},children:["We searched your Gmail using multiple queries:",(0,Cf.jsx)("br",{}),"\u2022 Gmail's reservation category",(0,Cf.jsx)("br",{}),"\u2022 Flight confirmation keywords",(0,Cf.jsx)("br",{}),"\u2022 Emails from known airline domains",(0,Cf.jsx)("br",{}),(0,Cf.jsx)("br",{}),(0,Cf.jsx)("strong",{children:"Tip:"})," Open browser console (F12) to see detailed search logs."]})]}):(0,Cf.jsx)("div",{style:{maxHeight:"450px",overflowY:"auto"},children:oe.map(e=>(0,Cf.jsxs)("div",{style:{padding:"15px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"12px",background:e.isRoundTrip?"#f0fdf4":"transparent"},children:[(0,Cf.jsxs)("div",{style:{flex:1},children:[(0,Cf.jsx)("div",{style:{fontWeight:"bold",fontSize:"16px",marginBottom:"4px",display:"flex",alignItems:"center",gap:"8px"},children:e.isRoundTrip?(0,Cf.jsxs)(Cf.Fragment,{children:[e.origin," \u21c4 ",e.destination,(0,Cf.jsx)("span",{style:{fontSize:"10px",background:"#16a34a",color:"#fff",padding:"2px 8px",borderRadius:"10px",fontWeight:"600"},children:"Round Trip"})]}):(0,Cf.jsxs)(Cf.Fragment,{children:[e.origin," \u2192 ",e.destination]})}),(0,Cf.jsxs)("div",{style:{fontSize:"13px",color:"#555",marginBottom:"6px"},children:[e.isRoundTrip?(0,Cf.jsxs)(Cf.Fragment,{children:[(0,Cf.jsxs)("span",{children:["Outbound: ",Qf(e.date)]}),(0,Cf.jsxs)("span",{style:{marginLeft:"12px"},children:["Return: ",Qf(e.returnDate)]})]}):Qf(e.date),e.flightNumber&&!e.isRoundTrip&&(0,Cf.jsxs)("span",{style:{marginLeft:"10px",fontWeight:"500"},children:["\u2708 ",e.flightNumber]})]}),(0,Cf.jsxs)("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",alignItems:"center"},children:[e.airline&&(0,Cf.jsx)("span",{style:{fontSize:"11px",background:"#e8f4fd",color:"#1e3a5f",padding:"2px 8px",borderRadius:"10px"},children:e.airline}),e.confirmationNumber&&(0,Cf.jsxs)("span",{style:{fontSize:"11px",background:"#fef2f2",color:"#991b1b",padding:"2px 8px",borderRadius:"10px"},children:["PNR: ",e.confirmationNumber]}),"json-ld"===e.source&&(0,Cf.jsx)("span",{style:{fontSize:"10px",background:"#dcfce7",color:"#166534",padding:"2px 6px",borderRadius:"8px"},children:"\u2713 Verified"})]})]}),(0,Cf.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[(0,Cf.jsx)("button",{onClick:()=>{return t=e.id,void ae(e=>e.filter(e=>e.id!==t));var t},title:"Remove from list",style:{background:"#fff",color:"#dc2626",border:"1px solid #fecaca",padding:"8px 10px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",transition:"all 0.15s ease"},onMouseOver:e=>{e.currentTarget.style.background="#fef2f2",e.currentTarget.style.borderColor="#dc2626"},onMouseOut:e=>{e.currentTarget.style.background="#fff",e.currentTarget.style.borderColor="#fecaca"},children:(0,Cf.jsx)(_,{size:16})}),(0,Cf.jsxs)("button",{onClick:()=>kt(e,!0),style:{background:e.isRoundTrip?"#16a34a":"#00C851",color:"#fff",border:"none",padding:"10px 16px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontWeight:"500",whiteSpace:"nowrap"},children:[(0,Cf.jsx)(m,{size:16})," ",e.isRoundTrip?"Add Both":"Add"]})]})]},e.id))}),(0,Cf.jsx)("div",{style:{marginTop:"15px",paddingTop:"15px",borderTop:"1px solid #eee",fontSize:"11px",color:"#999",textAlign:"center"},children:'Searched using multiple Gmail queries. "Verified" = extracted from structured email data (JSON-LD).'})]})}),n&&(0,Cf.jsxs)("div",{style:{background:se?"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)":"#f8fafc",border:se?"1px solid #f59e0b":"1px solid #e2e8f0",borderRadius:"16px",padding:"20px 24px",marginBottom:"30px",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"16px"},children:[(0,Cf.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",flex:1,minWidth:"280px"},children:[(0,Cf.jsx)("div",{style:{width:"48px",height:"48px",borderRadius:"12px",background:se?"#f59e0b":"#94a3b8",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Cf.jsx)(A,{size:24,color:"#fff"})}),(0,Cf.jsxs)("div",{children:[(0,Cf.jsx)("h3",{style:{margin:0,fontSize:"16px",fontWeight:"600",color:"#1e293b"},children:"Global Travel Contest"}),(0,Cf.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"13px",color:"#64748b"},children:se?"You're competing! Your stats are visible on the leaderboard.":"Join to compare your travel stats with other explorers worldwide."})]})]}),(0,Cf.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,Cf.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:ce?"wait":"pointer",padding:"10px 16px",background:se?"#fff":"#f1f5f9",borderRadius:"10px",border:se?"2px solid #f59e0b":"2px solid transparent",transition:"all 0.2s ease",opacity:ce?.7:1},children:[ce?(0,Cf.jsx)(w,{className:"animate-spin",size:20,style:{color:"#f59e0b"}}):(0,Cf.jsx)("input",{type:"checkbox",checked:se,onChange:e=>ut(e.target.checked),style:{width:"20px",height:"20px",cursor:"pointer",accentColor:"#f59e0b"}}),(0,Cf.jsx)("span",{style:{fontWeight:"600",fontSize:"14px",color:se?"#92400e":"#475569"},children:ce?"Updating...":se?"Opted In":"Opt In"})]}),(0,Cf.jsxs)("button",{onClick:()=>ye(!0),style:{background:"#000",color:"#fff",border:"none",padding:"12px 20px",borderRadius:"10px",cursor:"pointer",fontWeight:"600",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,Cf.jsx)(I,{size:18}),"View Leaderboard"]})]})]}),me&&(0,Cf.jsx)("div",{style:Zf,children:(0,Cf.jsxs)("div",{style:u(u({},ep),{},{maxWidth:"600px",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"}),children:[(0,Cf.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid #eee"},children:[(0,Cf.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Cf.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Cf.jsx)(A,{size:20,color:"#fff"})}),(0,Cf.jsxs)("div",{children:[(0,Cf.jsx)("h2",{style:{margin:0,fontSize:"20px"},children:"Global Leaderboard"}),(0,Cf.jsxs)("p",{style:{margin:"2px 0 0 0",fontSize:"12px",color:"#888"},children:[de.length," explorer",1!==de.length?"s":""," competing"]})]})]}),(0,Cf.jsx)(y,{style:{cursor:"pointer"},onClick:()=>ye(!1)})]}),fe?(0,Cf.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",color:"#888"},children:[(0,Cf.jsx)(w,{className:"animate-spin",size:32,style:{marginBottom:"12px"}}),(0,Cf.jsx)("span",{children:"Loading leaderboard..."})]}):0===de.length?(0,Cf.jsxs)("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:[(0,Cf.jsx)(I,{size:48,style:{marginBottom:"16px",color:"#ccc"}}),(0,Cf.jsx)("h3",{style:{margin:"0 0 8px 0"},children:"No competitors yet"}),(0,Cf.jsx)("p",{style:{fontSize:"14px",color:"#888",margin:0},children:"Be the first to opt in and claim the top spot!"})]}):(0,Cf.jsx)("div",{style:{flex:1,overflowY:"auto",marginRight:"-10px",paddingRight:"10px"},children:(0,Cf.jsxs)("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:"0 6px"},children:[(0,Cf.jsx)("thead",{children:(0,Cf.jsxs)("tr",{style:{background:"#f8fafc",fontSize:"11px",fontWeight:"600",color:"#64748b",textTransform:"uppercase"},children:[(0,Cf.jsx)("th",{style:{padding:"10px 12px",textAlign:"center",borderRadius:"8px 0 0 8px",width:"60px"},children:"Rank"}),(0,Cf.jsx)("th",{style:{padding:"10px 12px",textAlign:"left"},children:"Explorer"}),(0,Cf.jsx)("th",{style:{padding:"10px 12px",textAlign:"right",width:"100px"},children:"Miles"}),(0,Cf.jsx)("th",{style:{padding:"10px 12px",textAlign:"right",width:"70px"},children:"Flights"}),(0,Cf.jsx)("th",{style:{padding:"10px 12px",textAlign:"right",borderRadius:"0 8px 8px 0",width:"80px"},children:"Countries"})]})}),(0,Cf.jsx)("tbody",{children:de.map((e,t)=>{var n,r;const i=t+1,o=i<=3;return(0,Cf.jsxs)("tr",{style:{background:e.isCurrentUser?"linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%)":o?"#fffbeb":"#fff",boxShadow:e.isCurrentUser?"inset 0 0 0 2px #10b981":o?"inset 0 0 0 1px #fde68a":"inset 0 0 0 1px #f1f5f9",borderRadius:"10px"},children:[(0,Cf.jsx)("td",{style:{padding:"14px 12px",textAlign:"center",borderRadius:"10px 0 0 10px"},children:o?(0,Cf.jsx)("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:["#fbbf24","#9ca3af","#cd7f32"][i-1],display:"inline-flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"700",fontSize:"12px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:i}):(0,Cf.jsx)("span",{style:{fontWeight:"600",color:"#64748b",fontSize:"14px"},children:i})}),(0,Cf.jsx)("td",{style:{padding:"14px 12px"},children:(0,Cf.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,Cf.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",background:e.isCurrentUser?"#10b981":"#e2e8f0",display:"flex",alignItems:"center",justifyContent:"center",color:e.isCurrentUser?"#fff":"#64748b",fontWeight:"600",fontSize:"13px",flexShrink:0},children:(null===(n=e.displayName)||void 0===n?void 0:n.charAt(0).toUpperCase())||"?"}),(0,Cf.jsxs)("div",{style:{fontWeight:"600",fontSize:"14px",color:e.isCurrentUser?"#059669":"#1e293b",display:"flex",alignItems:"center",gap:"6px"},children:[e.displayName,e.isCurrentUser&&(0,Cf.jsx)("span",{style:{fontSize:"10px",background:"#10b981",color:"#fff",padding:"2px 6px",borderRadius:"4px"},children:"YOU"})]})]})}),(0,Cf.jsx)("td",{style:{padding:"14px 12px",textAlign:"right",fontWeight:"700",fontSize:"14px",color:o?"#b45309":"#1e293b",fontVariantNumeric:"tabular-nums"},children:(null===(r=e.totalMiles)||void 0===r?void 0:r.toLocaleString())||0}),(0,Cf.jsx)("td",{style:{padding:"14px 12px",textAlign:"right",fontSize:"14px",color:"#64748b",fontVariantNumeric:"tabular-nums"},children:e.totalFlights||0}),(0,Cf.jsx)("td",{style:{padding:"14px 12px",textAlign:"right",fontSize:"14px",color:"#64748b",borderRadius:"0 10px 10px 0",fontVariantNumeric:"tabular-nums"},children:e.uniqueCountries||0})]},e.id)})})]})}),!se&&n&&!ce&&(0,Cf.jsxs)("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:"1px solid #eee",textAlign:"center"},children:[(0,Cf.jsx)("p",{style:{fontSize:"14px",color:"#64748b",margin:"0 0 12px 0"},children:"Want to join the competition?"}),(0,Cf.jsxs)("button",{onClick:async()=>{await ut(!0),dt()},disabled:ce,style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"#fff",border:"none",padding:"12px 24px",borderRadius:"10px",cursor:ce?"wait":"pointer",fontWeight:"600",fontSize:"14px",display:"inline-flex",alignItems:"center",gap:"8px"},children:[(0,Cf.jsx)(A,{size:18}),"Opt In Now"]})]})]})}),X.length>0&&vt().length>0&&(0,Cf.jsxs)("div",{style:{background:"linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)",border:"1px solid #f59e0b",borderRadius:"12px",padding:"16px 20px",marginBottom:"24px",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"12px"},children:[(0,Cf.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,Cf.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"#f59e0b",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Cf.jsx)(v,{size:20,color:"#fff"})}),(0,Cf.jsxs)("div",{children:[(0,Cf.jsx)("div",{style:{fontWeight:"600",color:"#92400e",fontSize:"14px"},children:"New features available for your flights!"}),(0,Cf.jsxs)("div",{style:{fontSize:"12px",color:"#a16207",marginTop:"2px"},children:[vt().length," flight",vt().length>1?"s":""," can be updated with country & continent data"]})]})]}),(0,Cf.jsx)("button",{onClick:async()=>{const e=vt();if(0!==e.length){Xe(!0),Ze({current:0,total:e.length});try{const t=X.map((e,t)=>yt(e)?(Ze(e=>u(u({},e),{},{current:e.current+1})),(e=>{const t=Lf.find(t=>t.code===e.origin),n=Lf.find(t=>t.code===e.destination),r=u(u({},e),{},{originCountry:e.originCountry||(null===t||void 0===t?void 0:t.country)||"",destCountry:e.destCountry||(null===n||void 0===n?void 0:n.country)||"",originContinent:e.originContinent||Of(null===t||void 0===t?void 0:t.country),destContinent:e.destContinent||Of(null===n||void 0===n?void 0:n.country),schemaVersion:2});return r.legs&&r.legs.length>0&&(r.legs=r.legs.map(e=>{const t=Lf.find(t=>t.code===e.origin),n=Lf.find(t=>t.code===e.destination);return u(u({},e),{},{originCountry:e.originCountry||(null===t||void 0===t?void 0:t.country)||"",destCountry:e.destCountry||(null===n||void 0===n?void 0:n.country)||"",originContinent:e.originContinent||Of(null===t||void 0===t?void 0:t.country),destContinent:e.destContinent||Of(null===n||void 0===n?void 0:n.country)})})),r})(e)):e);if($(t),localStorage.setItem("flights-data",JSON.stringify(t)),n){const e=Rh(Af,"users",n.uid);await wf(e,{flights:t})}alert("Successfully updated ".concat(e.length," flight").concat(e.length>1?"s":""," with new data!"))}catch(t){console.error("Error reprocessing database:",t),alert("Error updating flights. Please try again.")}finally{Xe(!1),Ze({current:0,total:0})}}},disabled:Ye,style:{background:Ye?"#d97706":"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"8px",fontWeight:"600",fontSize:"13px",cursor:Ye?"wait":"pointer",display:"flex",alignItems:"center",gap:"8px",boxShadow:"0 2px 8px rgba(245, 158, 11, 0.3)"},children:Ye?(0,Cf.jsxs)(Cf.Fragment,{children:[(0,Cf.jsx)(w,{className:"animate-spin",size:16}),"Updating... ",$e.current,"/",$e.total]}):(0,Cf.jsxs)(Cf.Fragment,{children:[(0,Cf.jsx)(m,{size:16}),"Update All Flights"]})})]}),(0,Cf.jsxs)("div",{style:{marginBottom:"40px"},children:[(0,Cf.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:Ce?"20px":"0",padding:"12px 16px",background:"#f8fafc",borderRadius:"12px",cursor:"pointer"},children:[(0,Cf.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",flex:1},onClick:()=>Ee(!Ce),children:[(0,Cf.jsx)(N,{size:20,color:"#6366f1"}),(0,Cf.jsx)("h3",{style:{margin:0,fontSize:"16px",fontWeight:"600",color:"#334155"},children:"Travel Statistics"}),Ce?(0,Cf.jsx)(R,{size:18,color:"#64748b"}):(0,Cf.jsx)(L,{size:18,color:"#64748b"}),!Ce&&(0,Cf.jsxs)("span",{style:{fontSize:"13px",color:"#64748b",marginLeft:"10px"},children:[It," flights \u2022 ",Nt.toLocaleString()," mi \u2022 ",Rt.length," countries"]})]}),(0,Cf.jsx)("button",{onClick:e=>{e.stopPropagation(),Re(!Ne)},style:{background:Ne?"#e0e7ff":"transparent",border:"1px solid #e2e8f0",borderRadius:"8px",padding:"6px 10px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",color:"#64748b"},title:"Customize visible stats",children:(0,Cf.jsx)(P,{size:14})})]}),Ne&&(0,Cf.jsxs)("div",{style:{background:"#fff",border:"1px solid #e2e8f0",borderRadius:"12px",padding:"16px",marginBottom:"16px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1)"},children:[(0,Cf.jsx)("div",{style:{fontSize:"13px",fontWeight:"600",color:"#334155",marginBottom:"12px"},children:"Choose which stats to display:"}),(0,Cf.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:[{key:"flights",label:"\u2708\ufe0f Flights"},{key:"miles",label:"\ud83c\udf0d Miles"},{key:"routes",label:"\ud83d\uddfa\ufe0f Routes"},{key:"countries",label:"\ud83c\udff3\ufe0f Countries"},{key:"continents",label:"\ud83c\udf0e Continents"},{key:"airports",label:"\ud83d\udccd Airports"},{key:"co2",label:"\u2601\ufe0f CO\u2082"},{key:"alliance",label:"\u2b50 Alliance"},{key:"moon",label:"\ud83c\udf19 Moon %"},{key:"money",label:"\ud83d\udcb5 Money"},{key:"milesSpent",label:"\ud83d\udcb3 Miles Spent"}].map(e=>{let{key:t,label:n}=e;return(0,Cf.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:Ae[t]?"#e0e7ff":"#f1f5f9",borderRadius:"20px",cursor:"pointer",fontSize:"12px",color:Ae[t]?"#4338ca":"#64748b",transition:"all 0.2s ease"},children:[(0,Cf.jsx)("input",{type:"checkbox",checked:Ae[t],onChange:e=>Ie(u(u({},Ae),{},{[t]:e.target.checked})),style:{display:"none"}}),n]},t)})})]}),Ce&&(0,Cf.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"16px"},children:[Ae.flights&&(0,Cf.jsxs)("div",{style:Jf,children:[(0,Cf.jsx)(p,{size:20}),(0,Cf.jsx)("div",{style:Yf,children:It}),(0,Cf.jsx)("div",{style:Xf,children:"Total Flights"}),X.length!==It&&(0,Cf.jsxs)("div",{style:{fontSize:"10px",color:"#888",marginTop:"4px"},children:["(",X.length," trips)"]})]}),Ae.miles&&(0,Cf.jsxs)("div",{style:Jf,children:[(0,Cf.jsx)(O,{size:20}),(0,Cf.jsx)("div",{style:Yf,children:Nt.toLocaleString()}),(0,Cf.jsx)("div",{style:Xf,children:"Total Miles"})]}),Ae.routes&&(0,Cf.jsxs)("div",{style:Jf,children:[(0,Cf.jsx)(D,{size:20}),(0,Cf.jsx)("div",{style:Yf,children:Object.keys(rn).length}),(0,Cf.jsx)("div",{style:Xf,children:"Unique Routes"})]}),Ae.countries&&(0,Cf.jsxs)("div",{style:u(u({},Jf),{},{background:"#fef3c7",borderColor:"#f59e0b"}),children:[(0,Cf.jsx)(j,{size:20,color:"#d97706"}),(0,Cf.jsx)("div",{style:u(u({},Yf),{},{color:"#b45309"}),children:Rt.length}),(0,Cf.jsx)("div",{style:Xf,children:"Countries"}),Rt.length>0&&(0,Cf.jsxs)("div",{style:{fontSize:"9px",color:"#92400e",marginTop:"4px",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:Rt.join(", "),children:[Rt.slice(0,3).join(", "),Rt.length>3?"...":""]})]}),Ae.continents&&(0,Cf.jsxs)("div",{style:u(u({},Jf),{},{background:"#dbeafe",borderColor:"#3b82f6"}),children:[(0,Cf.jsx)(O,{size:20,color:"#2563eb"}),(0,Cf.jsx)("div",{style:u(u({},Yf),{},{color:"#1d4ed8"}),children:Lt.length}),(0,Cf.jsx)("div",{style:Xf,children:"Continents"}),Lt.length>0&&(0,Cf.jsx)("div",{style:{fontSize:"9px",color:"#1e40af",marginTop:"4px"},children:Lt.join(", ")})]}),Ae.airports&&(0,Cf.jsxs)("div",{style:u(u({},Jf),{},{background:"#f0fdf4",borderColor:"#22c55e"}),children:[(0,Cf.jsx)(M,{size:20,color:"#16a34a"}),(0,Cf.jsx)("div",{style:u(u({},Yf),{},{color:"#15803d"}),children:Pt.length}),(0,Cf.jsx)("div",{style:Xf,children:"Airports"})]}),Ae.co2&&(0,Cf.jsxs)("div",{style:Jf,children:[(0,Cf.jsx)(F,{size:20,color:"#dc2626"}),(0,Cf.jsx)("div",{style:Yf,children:Dt}),(0,Cf.jsx)("div",{style:Xf,children:"Your CO\u2082 (tons)"})]}),Ae.alliance&&Gt&&"Independent"!==Gt&&(0,Cf.jsxs)("div",{style:u(u({},Jf),{},{background:Ff[Gt].background,borderColor:Ff[Gt].color}),children:[(0,Cf.jsx)("span",{style:{fontSize:"20px"},children:Ff[Gt].icon}),(0,Cf.jsx)("div",{style:u(u({},Yf),{},{color:Ff[Gt].color,fontSize:"18px"}),children:Gt}),(0,Cf.jsx)("div",{style:Xf,children:"Top Alliance"})]}),Ae.moon&&(0,Cf.jsxs)("div",{style:Jf,children:[(0,Cf.jsx)(A,{size:20}),(0,Cf.jsxs)("div",{style:Yf,children:[(Nt/238855*100).toFixed(2),"%"]}),(0,Cf.jsx)("div",{style:Xf,children:"To the Moon"})]}),Ae.money&&nn.totalMoneySpent>0&&(0,Cf.jsxs)("div",{style:u(u({},Jf),{},{background:"#f0fdf4",borderColor:"#22c55e"}),children:[(0,Cf.jsx)(z,{size:20,color:"#22c55e"}),(0,Cf.jsxs)("div",{style:u(u({},Yf),{},{color:"#16a34a"}),children:["$",nn.totalMoneySpent.toLocaleString()]}),(0,Cf.jsx)("div",{style:Xf,children:"Money Spent"}),(0,Cf.jsxs)("div",{style:{fontSize:"10px",color:"#888",marginTop:"4px"},children:["(",nn.moneyFlightCount," trip",nn.moneyFlightCount>1?"s":"",")"]})]}),Ae.milesSpent&&nn.totalMilesSpent>0&&(0,Cf.jsxs)("div",{style:u(u({},Jf),{},{background:"#eff6ff",borderColor:"#3b82f6"}),children:[(0,Cf.jsx)(U,{size:20,color:"#3b82f6"}),(0,Cf.jsx)("div",{style:u(u({},Yf),{},{color:"#2563eb"}),children:nn.totalMilesSpent.toLocaleString()}),(0,Cf.jsx)("div",{style:Xf,children:"Miles Redeemed"}),(0,Cf.jsxs)("div",{style:{fontSize:"10px",color:"#888",marginTop:"4px"},children:["(",nn.milesFlightCount," trip",nn.milesFlightCount>1?"s":"",")"]})]})]})]}),X.length>0&&(0,Cf.jsxs)("div",{style:{marginBottom:"40px"},children:[(0,Cf.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:Te?"20px":"0",padding:"12px 16px",background:"#f8fafc",borderRadius:"12px",cursor:"pointer"},onClick:()=>_e(!Te),children:(0,Cf.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,Cf.jsx)(A,{size:20,color:"#f59e0b"}),(0,Cf.jsx)("h3",{style:{margin:0,fontSize:"16px",fontWeight:"600",color:"#334155"},children:"Detailed Breakdown"}),Te?(0,Cf.jsx)(R,{size:18,color:"#64748b"}):(0,Cf.jsx)(L,{size:18,color:"#64748b"}),!Te&&(0,Cf.jsxs)("span",{style:{fontSize:"13px",color:"#64748b",marginLeft:"10px"},children:[Vt.length," airlines \u2022 ",Wt.length," aircraft \u2022 ",Kt.length," alliances"]})]})}),Te&&(0,Cf.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:[Vt.length>0&&(0,Cf.jsxs)("div",{style:{background:"#f9f9f9",padding:"24px",borderRadius:"16px"},children:[(0,Cf.jsxs)("h3",{style:{marginTop:0},children:[(0,Cf.jsx)(p,{size:18,style:{verticalAlign:"middle",marginRight:"8px"}})," Top Airlines"]}),Vt.map(e=>{let[t,n]=e;return(0,Cf.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,Cf.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",marginBottom:"5px"},children:[(0,Cf.jsx)("span",{children:t}),(0,Cf.jsxs)("span",{children:[n," flight",n>1?"s":""]})]}),(0,Cf.jsx)("div",{style:{height:"8px",background:"#eee",borderRadius:"4px"},children:(0,Cf.jsx)("div",{style:{height:"100%",background:"#4285F4",borderRadius:"4px",width:"".concat(n/It*100,"%")}})})]},t)})]}),Wt.length>0&&(0,Cf.jsxs)("div",{style:{background:"#f9f9f9",padding:"24px",borderRadius:"16px"},children:[(0,Cf.jsxs)("h3",{style:{marginTop:0},children:[(0,Cf.jsx)(N,{size:18,style:{verticalAlign:"middle",marginRight:"8px"}})," Top Aircraft"]}),Wt.map(e=>{let[t,n]=e;return(0,Cf.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,Cf.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",marginBottom:"5px"},children:[(0,Cf.jsx)("span",{children:t}),(0,Cf.jsxs)("span",{children:[n," flights"]})]}),(0,Cf.jsx)("div",{style:{height:"8px",background:"#eee",borderRadius:"4px"},children:(0,Cf.jsx)("div",{style:{height:"100%",background:"#f97316",borderRadius:"4px",width:"".concat(n/X.length*100,"%")}})})]},t)})]}),Xt.length>0&&(0,Cf.jsxs)("div",{style:{background:"#f9f9f9",padding:"24px",borderRadius:"16px"},children:[(0,Cf.jsxs)("h3",{style:{marginTop:0},children:[(0,Cf.jsx)(A,{size:18,style:{verticalAlign:"middle",marginRight:"8px"}})," Class of Service"]}),Xt.map(e=>{let[t,n]=e;const r="Economy"===t?"#d97706":"Premium Economy"===t?"#16a34a":"Business"===t?"#2563eb":"#ca8a04",i="Economy"===t?"\ud83d\udc14 Chicken class":"Premium Economy"===t?"\ud83d\udcba Premium Economy":"Business"===t?"\ud83d\udcbc Business":"\ud83d\udc51 First";return(0,Cf.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,Cf.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",marginBottom:"5px"},children:[(0,Cf.jsx)("span",{children:i}),(0,Cf.jsxs)("span",{children:[n," flight",n>1?"s":""]})]}),(0,Cf.jsx)("div",{style:{height:"8px",background:"#eee",borderRadius:"4px"},children:(0,Cf.jsx)("div",{style:{height:"100%",background:r,borderRadius:"4px",width:"".concat(n/It*100,"%")}})})]},t)})]}),Kt.length>0&&(0,Cf.jsxs)("div",{style:{background:"#f9f9f9",padding:"24px",borderRadius:"16px"},children:[(0,Cf.jsxs)("h3",{style:{marginTop:0},children:[(0,Cf.jsx)(I,{size:18,style:{verticalAlign:"middle",marginRight:"8px"}})," Airline Alliances"]}),Kt.map(e=>{let[t,n]=e;const r=Ff[t]||Ff.Independent,i="chart-alliance-".concat(t),o=Qe===i,a=Uf[t]||[],s="Independent"!==t&&a.length>0;return(0,Cf.jsxs)("div",{style:{marginBottom:"15px",position:"relative"},children:[(0,Cf.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",marginBottom:"5px"},children:[(0,Cf.jsxs)("span",{onClick:e=>{s&&(e.stopPropagation(),Je(o?null:i))},style:{display:"flex",alignItems:"center",gap:"6px",cursor:s?"pointer":"default",padding:"4px 8px",marginLeft:"-8px",borderRadius:"6px",background:o?r.background:"transparent",transition:"background 0.2s ease"},title:s?"Click to see all ".concat(t," members"):"",children:[(0,Cf.jsx)("span",{children:r.icon}),t,s&&(0,Cf.jsx)("span",{style:{fontSize:"10px",color:"#888",transform:o?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:"\u25bc"})]}),(0,Cf.jsxs)("span",{children:[n," flights (",Math.round(n/qt*100),"%)"]})]}),(0,Cf.jsx)("div",{style:{height:"8px",background:"#eee",borderRadius:"4px"},children:(0,Cf.jsx)("div",{style:{height:"100%",background:r.color,borderRadius:"4px",width:"".concat(n/qt*100,"%")}})}),o&&a.length>0&&(0,Cf.jsxs)("div",{style:{position:"absolute",top:"100%",left:"0",marginTop:"8px",background:"#fff",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0,0,0,0.15)",border:"1px solid ".concat(r.color,"20"),zIndex:1e3,minWidth:"260px",maxHeight:"350px",overflowY:"auto"},onClick:e=>e.stopPropagation(),children:[(0,Cf.jsxs)("div",{style:{padding:"14px 18px",borderBottom:"1px solid #eee",background:r.background,borderRadius:"12px 12px 0 0",position:"sticky",top:0},children:[(0,Cf.jsxs)("div",{style:{fontWeight:"600",color:r.color,display:"flex",alignItems:"center",gap:"8px",fontSize:"15px"},children:[(0,Cf.jsx)("span",{children:r.icon}),t]}),(0,Cf.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:[a.length," member airlines worldwide"]})]}),(0,Cf.jsx)("div",{style:{padding:"8px 0"},children:a.map((e,t)=>{const n=X.some(t=>!(!t.airline||!zf(t.airline,e))||!!(t.legs&&t.legs.length>0)&&t.legs.some(t=>t.airline&&zf(t.airline,e)));return(0,Cf.jsxs)("div",{style:{padding:"10px 18px",fontSize:"13px",color:n?r.color:"#555",display:"flex",alignItems:"center",gap:"10px",background:n?r.background:"transparent",fontWeight:n?"600":"normal",borderLeft:n?"3px solid ".concat(r.color):"3px solid transparent"},children:[(0,Cf.jsx)("span",{style:{color:n?r.color:"#999"},children:"\u2708"}),e,n&&(0,Cf.jsx)("span",{style:{fontSize:"9px",background:r.color,color:"#fff",padding:"2px 8px",borderRadius:"10px",marginLeft:"auto"},children:"FLOWN"})]},t)})})]})]},t)}),Gt&&"Independent"!==Gt&&(0,Cf.jsxs)("div",{style:{marginTop:"15px",padding:"12px",background:Ff[Gt].background,borderRadius:"8px",fontSize:"13px",color:Ff[Gt].color,textAlign:"center"},children:[Ff[Gt].icon," You're a ",(0,Cf.jsx)("strong",{children:Gt})," loyalist!"]})]}),(0,Cf.jsxs)("div",{style:{background:"#f9f9f9",padding:"24px",borderRadius:"16px"},children:[(0,Cf.jsxs)("h3",{style:{marginTop:0},children:[(0,Cf.jsx)(V,{size:18,style:{verticalAlign:"middle",marginRight:"8px"}})," Top Landmarks"]}),0===zt.length?(0,Cf.jsx)("p",{style:{color:"#666",fontSize:"13px"},children:"No landmarks detected yet."}):zt.map(e=>{let[t,n]=e;return(0,Cf.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,Cf.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px",marginBottom:"5px"},children:[(0,Cf.jsx)("span",{children:t}),(0,Cf.jsxs)("span",{children:[n," times"]})]}),(0,Cf.jsx)("div",{style:{height:"8px",background:"#eee",borderRadius:"4px"},children:(0,Cf.jsx)("div",{style:{height:"100%",background:"#008080",borderRadius:"4px",width:"".concat(n/X.length*100,"%")}})})]},t)})]}),Ot>0&&(0,Cf.jsxs)("div",{style:{background:"#fef2f2",padding:"24px",borderRadius:"16px"},children:[(0,Cf.jsxs)("h3",{style:{marginTop:0,color:"#991b1b"},children:[(0,Cf.jsx)(F,{size:18,style:{verticalAlign:"middle",marginRight:"8px"}})," Your Carbon Footprint"]}),(0,Cf.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"16px"},children:[(0,Cf.jsxs)("div",{style:{padding:"12px",background:"#fff",borderRadius:"8px",textAlign:"center"},children:[(0,Cf.jsxs)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#dc2626"},children:[Dt,"t"]}),(0,Cf.jsx)("div",{style:{fontSize:"11px",color:"#666",marginTop:"4px"},children:"Your emissions"})]}),(0,Cf.jsxs)("div",{style:{padding:"12px",background:"#fff",borderRadius:"8px",textAlign:"center"},children:[(0,Cf.jsxs)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#9ca3af"},children:[Mt,"t"]}),(0,Cf.jsx)("div",{style:{fontSize:"11px",color:"#666",marginTop:"4px"},children:"Total flights' emissions"})]})]}),(0,Cf.jsxs)("div",{style:{padding:"12px",background:"#fff",borderRadius:"8px",marginBottom:"12px"},children:[(0,Cf.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px"},children:["\ud83d\ude97 If you drove ",Nt.toLocaleString()," miles instead:"]}),(0,Cf.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Cf.jsxs)("div",{children:[(0,Cf.jsxs)("span",{style:{fontSize:"18px",fontWeight:"bold",color:"#059669"},children:[(.21*Nt/1e3).toFixed(2),"t"]}),(0,Cf.jsx)("span",{style:{fontSize:"12px",color:"#666",marginLeft:"8px"},children:"CO\u2082 by car"})]}),(0,Cf.jsx)("div",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"12px",background:Ot<.21*Nt?"#dcfce7":"#fef3c7",color:Ot<.21*Nt?"#166534":"#854d0e"},children:Ot<.21*Nt?"\u2708\ufe0f Flying saved ".concat(((.21*Nt-Ot)/1e3).toFixed(2),"t"):"\ud83d\ude97 Driving would save ".concat(((Ot-.21*Nt)/1e3).toFixed(2),"t")})]})]}),(0,Cf.jsxs)("div",{style:{padding:"12px",background:"#fff",borderRadius:"8px",marginBottom:"16px"},children:[(0,Cf.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px"},children:["\ud83d\ude82 If you took trains for ",Nt.toLocaleString()," miles instead:"]}),(0,Cf.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Cf.jsxs)("div",{children:[(0,Cf.jsxs)("span",{style:{fontSize:"18px",fontWeight:"bold",color:"#0891b2"},children:[(.041*Nt/1e3).toFixed(2),"t"]}),(0,Cf.jsx)("span",{style:{fontSize:"12px",color:"#666",marginLeft:"8px"},children:"CO\u2082 by train"})]}),(0,Cf.jsxs)("div",{style:{fontSize:"12px",padding:"4px 8px",borderRadius:"12px",background:"#fef3c7",color:"#854d0e"},children:["\ud83d\ude82 Train would save ",((Ot-.041*Nt)/1e3).toFixed(2),"t (",Math.round(100*(1-.041*Nt/Ot)),"% less)"]})]})]}),(0,Cf.jsx)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"12px"},children:"Your breakdown by class:"}),tn.map(e=>{let[t,n]=e;const r="Economy"===t?"#d97706":"Premium Economy"===t?"#16a34a":"Business"===t?"#2563eb":"#ca8a04",i="Economy"===t?"\ud83d\udc14 Chicken":"Premium Economy"===t?"\ud83d\udcba Prem Eco":"Business"===t?"\ud83d\udcbc Business":"\ud83d\udc51 First";return(0,Cf.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,Cf.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",marginBottom:"4px"},children:[(0,Cf.jsx)("span",{children:i}),(0,Cf.jsxs)("span",{children:[(n/1e3).toFixed(2),"t (",Math.round(n/Ot*100),"%)"]})]}),(0,Cf.jsx)("div",{style:{height:"6px",background:"#fecaca",borderRadius:"3px"},children:(0,Cf.jsx)("div",{style:{height:"100%",background:r,borderRadius:"3px",width:"".concat(n/Ot*100,"%")}})})]},t)}),(0,Cf.jsxs)("div",{style:{fontSize:"11px",color:"#888",marginTop:"16px",borderTop:"1px solid #fecaca",paddingTop:"12px"},children:["\ud83d\udca1 Your share: ~",(Ot/jt*100).toFixed(1),"% of total aircraft emissions. Premium classes have larger footprints due to increased seat space.",(0,Cf.jsx)("br",{}),(0,Cf.jsx)("span",{style:{color:"#aaa"},children:"Rates: 0.14 kg CO\u2082/mi (flying), 0.21 kg CO\u2082/mi (driving), 0.041 kg CO\u2082/mi (train avg)."})]})]})]})]}),X.length>0&&(0,Cf.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",padding:"12px 16px",background:"#f8fafc",borderRadius:"12px"},children:[(0,Cf.jsx)("h3",{style:{margin:0,fontSize:"16px",fontWeight:"600",color:"#334155"},children:"Your Flights"}),(0,Cf.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,Cf.jsx)("span",{style:{fontSize:"12px",color:"#64748b",marginRight:"4px"},children:"Organize by:"}),[{key:"date",label:"\ud83d\udcc5 Date",icon:null},{key:"country",label:"\ud83c\udff3\ufe0f Country",icon:null},{key:"continent",label:"\ud83c\udf0d Continent",icon:null}].map(e=>{let{key:t,label:n}=e;return(0,Cf.jsx)("button",{onClick:()=>Pe(t),style:{background:Le===t?"#e0e7ff":"#fff",border:Le===t?"1px solid #6366f1":"1px solid #e2e8f0",color:Le===t?"#4338ca":"#64748b",padding:"6px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:Le===t?"600":"500",cursor:"pointer",transition:"all 0.2s ease"},children:n},t)})]})]}),"date"===Le&&(0,Cf.jsx)("div",{style:{display:"grid",gap:"20px"},children:on.map(e=>(0,Cf.jsxs)("div",{style:{border:"1px solid #eee",borderRadius:"16px",padding:"24px"},children:[(0,Cf.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:[(0,Cf.jsxs)("div",{children:[(0,Cf.jsxs)("span",{style:{fontSize:"20px",fontWeight:"bold"},children:[e.origin," \u2192 ",e.destination]}),(0,Cf.jsxs)("div",{style:{color:"#666",fontSize:"14px",marginTop:"4px"},children:[e.originCity," to ",e.destCity,e.distance&&(0,Cf.jsxs)("span",{style:{marginLeft:"10px",color:"#888"},children:["\u2022 ",e.distance.toLocaleString()," mi"]})]})]}),(0,Cf.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(()=>{const t=e.flights.reduce((e,t)=>e+(t.legCount||1),0);return(0,Cf.jsxs)("span",{style:{fontSize:"12px",color:"#888",background:"#f0f0f0",padding:"4px 8px",borderRadius:"12px"},children:[t," flight",t>1?"s":""]})})(),(0,Cf.jsx)(B,{size:16,style:{cursor:"pointer",color:"#666"},title:"Add return flight (reverse route)",onClick:()=>cn(e.flights[0])}),(0,Cf.jsx)(W,{size:16,style:{cursor:"pointer",color:"#666"},title:"Copy this route",onClick:()=>ln(e.flights[0])})]})]}),e.featuresCrossed&&e.featuresCrossed.length>0&&(0,Cf.jsx)("div",{style:{marginTop:"12px",marginBottom:"16px",display:"flex",flexWrap:"wrap",gap:"8px"},children:e.featuresCrossed.map(e=>(0,Cf.jsxs)("span",{style:{fontSize:"11px",background:"#e0f2f1",color:"#004d40",padding:"4px 8px",borderRadius:"12px",display:"flex",alignItems:"center",gap:"4px",fontWeight:"600"},children:[(0,Cf.jsx)(O,{size:10})," ",e]},e))}),(0,Cf.jsx)("div",{style:{borderTop:"1px solid #eee",paddingTop:"12px",marginTop:"8px"},children:e.flights.map((t,n)=>{var r;const i=At(t.distance||0,t.serviceClass||"Economy"),o=.21*(t.distance||0),a=o-i,s=t.legs&&t.legs.length>1;return(0,Cf.jsxs)("div",{style:{padding:"12px 0",borderBottom:n<e.flights.length-1?"1px solid #f5f5f5":"none"},children:[(0,Cf.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:s?"10px":"0"},children:[(0,Cf.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",flexWrap:"wrap",flex:1},children:[(0,Cf.jsx)("span",{style:{fontWeight:"600",fontSize:"14px",minWidth:"90px"},children:Qf(t.date)}),s&&(0,Cf.jsxs)("span",{style:{fontSize:"10px",color:"#6366f1",background:"#eef2ff",padding:"3px 8px",borderRadius:"10px",fontWeight:"600"},children:[t.legs.length," LEGS"]}),s&&(0,Cf.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[(()=>{const e=t.legs.map(e=>e.serviceClass||"Economy"),n=[...new Set(e)],r=["First","Business","Premium Economy","Economy"].find(e=>n.includes(e))||"Economy";n.length;return(0,Cf.jsxs)("span",{style:{fontSize:"11px",color:"Economy"===r?"#8b6914":"Premium Economy"===r?"#166534":"Business"===r?"#1e40af":"#854d0e",background:"Economy"===r?"#fef3c7":"Premium Economy"===r?"#dcfce7":"Business"===r?"#dbeafe":"#fef9c3",padding:"3px 8px",borderRadius:"6px",fontWeight:"First"===r?"600":"normal"},children:["Economy"===r?"\ud83d\udc14":"Premium Economy"===r?"\ud83d\udcba":"Business"===r?"\ud83d\udcbc":"\ud83d\udc51",n.length>1?" Mixed":" ".concat("Economy"===r?"Chicken class":r)]})})(),(()=>{const e=t.legs.reduce((e,t)=>e+Math.round(At(t.distance||0,t.serviceClass||"Economy")),0),n=.21*t.distance,r=n-e;return(0,Cf.jsxs)("span",{style:{fontSize:"11px",color:"#dc2626",background:"#fef2f2",padding:"3px 8px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"4px"},title:"Flying: ".concat(e," kg CO\u2082 | Driving: ").concat(Math.round(n)," kg CO\u2082"),children:[(0,Cf.jsx)(F,{size:10}),e," kg",(0,Cf.jsx)("span",{style:{fontSize:"10px",color:r>0?"#166534":"#854d0e",marginLeft:"2px"},children:r>0?"(\ud83d\ude97+".concat(Math.round(r),")"):"(\ud83d\ude97".concat(Math.round(r),")")})]})})(),t.paymentAmount&&(0,Cf.jsxs)("span",{style:{fontSize:"11px",color:"miles"===t.paymentType?"#2563eb":"#16a34a",background:"miles"===t.paymentType?"#eff6ff":"#f0fdf4",padding:"3px 8px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"3px"},children:["miles"===t.paymentType?"\u2708\ufe0f":"\ud83d\udcb5","miles"===t.paymentType?"".concat(parseInt(t.paymentAmount).toLocaleString()," mi"):"$".concat(parseFloat(t.paymentAmount).toLocaleString())]})]}),!s&&(0,Cf.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[t.airline&&(0,Cf.jsx)("span",{style:{fontSize:"12px",color:"#555",background:"#f5f5f5",padding:"3px 8px",borderRadius:"6px"},children:t.airline}),t.airline&&(()=>{const e=Vf(t.airline),n=Ff[e]||Ff.Independent,r="alliance-".concat(t.id),i=Qe===r,o=Uf[e]||[];return(0,Cf.jsxs)("div",{style:{position:"relative"},children:[(0,Cf.jsxs)("span",{onClick:t=>{t.stopPropagation(),"Independent"!==e&&o.length>0&&Je(i?null:r)},style:{fontSize:"11px",color:n.color,background:n.background,padding:"3px 8px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"4px",fontWeight:"500",cursor:"Independent"!==e?"pointer":"default",border:i?"1px solid ".concat(n.color):"1px solid transparent",transition:"all 0.2s ease"},title:"Independent"!==e?"Click to see all ".concat(e," members"):"Independent airline",children:[(0,Cf.jsx)("span",{style:{fontSize:"10px"},children:n.icon}),e,"Independent"!==e&&(0,Cf.jsx)("span",{style:{fontSize:"8px",marginLeft:"2px",transform:i?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:"\u25bc"})]}),i&&o.length>0&&(0,Cf.jsxs)("div",{style:{position:"absolute",top:"100%",left:"0",marginTop:"4px",background:"#fff",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0,0,0,0.15)",border:"1px solid ".concat(n.color,"20"),zIndex:1e3,minWidth:"220px",maxHeight:"300px",overflowY:"auto"},onClick:e=>e.stopPropagation(),children:[(0,Cf.jsxs)("div",{style:{padding:"12px 16px",borderBottom:"1px solid #eee",background:n.background,borderRadius:"12px 12px 0 0",position:"sticky",top:0},children:[(0,Cf.jsxs)("div",{style:{fontWeight:"600",color:n.color,display:"flex",alignItems:"center",gap:"6px"},children:[(0,Cf.jsx)("span",{children:n.icon}),e]}),(0,Cf.jsxs)("div",{style:{fontSize:"11px",color:"#666",marginTop:"2px"},children:[o.length," member airlines"]})]}),(0,Cf.jsx)("div",{style:{padding:"8px 0"},children:o.map((e,r)=>{const i=zf(t.airline,e);return(0,Cf.jsxs)("div",{style:{padding:"8px 16px",fontSize:"12px",color:"#333",display:"flex",alignItems:"center",gap:"8px",background:i?n.background:"transparent",fontWeight:i?"600":"normal"},children:[(0,Cf.jsx)("span",{style:{color:n.color},children:"\u2708"}),e,i&&(0,Cf.jsx)("span",{style:{fontSize:"9px",background:n.color,color:"#fff",padding:"2px 6px",borderRadius:"10px",marginLeft:"auto"},children:"YOUR FLIGHT"})]},r)})})]})]})})()]}),(0,Cf.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[t.aircraftType&&"Unknown"!==t.aircraftType&&(0,Cf.jsx)("span",{style:{fontSize:"12px",color:"#555",background:"#f5f5f5",padding:"3px 8px",borderRadius:"6px"},children:t.aircraftType}),!s&&t.serviceClass&&(0,Cf.jsx)("span",{style:{fontSize:"12px",color:"Economy"===t.serviceClass?"#8b6914":"Premium Economy"===t.serviceClass?"#166534":"Business"===t.serviceClass?"#1e40af":"#854d0e",background:"Economy"===t.serviceClass?"#fef3c7":"Premium Economy"===t.serviceClass?"#dcfce7":"Business"===t.serviceClass?"#dbeafe":"#fef9c3",padding:"3px 8px",borderRadius:"6px",fontWeight:"First"===t.serviceClass?"600":"normal"},children:"Economy"===t.serviceClass?"\ud83d\udc14 Chicken class":"Premium Economy"===t.serviceClass?"\ud83d\udcba Premium Economy":"Business"===t.serviceClass?"\ud83d\udcbc Business":"\ud83d\udc51 First"}),(0,Cf.jsxs)("span",{style:{fontSize:"11px",color:"#dc2626",background:"#fef2f2",padding:"3px 8px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"4px"},title:"Flying: ".concat(i," kg CO\u2082 | Driving: ").concat(Math.round(o)," kg CO\u2082"),children:[(0,Cf.jsx)(F,{size:10}),i," kg",(0,Cf.jsx)("span",{style:{fontSize:"10px",color:a>0?"#166534":"#854d0e",marginLeft:"2px"},children:a>0?"(\ud83d\ude97+".concat(Math.round(a),")"):"(\ud83d\ude97".concat(Math.round(a),")")})]}),t.paymentAmount&&(0,Cf.jsxs)("span",{style:{fontSize:"11px",color:"miles"===t.paymentType?"#2563eb":"#16a34a",background:"miles"===t.paymentType?"#eff6ff":"#f0fdf4",padding:"3px 8px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"3px"},children:["miles"===t.paymentType?"\u2708\ufe0f":"\ud83d\udcb5","miles"===t.paymentType?"".concat(parseInt(t.paymentAmount).toLocaleString()," mi"):"$".concat(parseFloat(t.paymentAmount).toLocaleString())]})]})]}),(0,Cf.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[(0,Cf.jsx)(B,{size:14,style:{cursor:"pointer",color:"#888"},title:"Add return flight (reverse route)",onClick:()=>cn(t)}),(0,Cf.jsx)(W,{size:14,style:{cursor:"pointer",color:"#888"},title:"Duplicate this flight",onClick:()=>ln(t)}),(0,Cf.jsx)(k,{size:14,style:{cursor:"pointer",color:"#888"},title:"Edit this flight",onClick:()=>(e=>{if(We(e),e.legs&&e.legs.length>1){const t=[];for(let o=1;o<e.legs.length;o++)t.push(e.legs[o].origin);const n=e.legs.map(e=>e.airline||""),r=e.legs.map(e=>e.aircraftType||""),i=e.legs.map(e=>e.serviceClass||"Economy");it({origin:e.origin,destination:e.destination,airline:"",aircraftType:"",serviceClass:"Economy",date:e.date||"",checkLandmarks:!1,hasLayover:!0,viaAirports:t.length>0?t:[""],legAirlines:n,legAircraftTypes:r,legServiceClasses:i,paymentType:e.paymentType||"money",paymentAmount:e.paymentAmount||""})}else{const t=e.legs&&e.legs[0];it({origin:e.origin,destination:e.destination,airline:e.airline||(t?t.airline:"")||"",aircraftType:e.aircraftType||(t?t.aircraftType:"")||"",serviceClass:e.serviceClass||(t?t.serviceClass:"")||"Economy",date:e.date||"",checkLandmarks:!1,hasLayover:!1,viaAirports:[""],legAirlines:["",""],legAircraftTypes:["",""],legServiceClasses:["Economy","Economy"],paymentType:e.paymentType||"money",paymentAmount:e.paymentAmount||""})}ee(!0)})(t)}),(0,Cf.jsx)(_,{size:14,color:"#e57373",style:{cursor:"pointer"},title:"Delete this flight",onClick:()=>(e=>{const t=X.filter(t=>t.id!==e);$(t),localStorage.setItem("flights-data",JSON.stringify(t))})(t.id)})]})]}),s&&(0,Cf.jsxs)("div",{style:{marginLeft:"106px",background:"#fafafa",borderRadius:"10px",padding:"12px",border:"1px solid #f0f0f0"},children:[t.legs.map((e,n)=>{var r;const i=e.airline?Vf(e.airline):null,o=i?Ff[i]||Ff.Independent:null,a="alliance-".concat(t.id,"-leg-").concat(n),s=Qe===a,l=i&&Uf[i]||[];return(0,Cf.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"8px 0",borderBottom:n<t.legs.length-1?"1px dashed #e5e5e5":"none"},children:[(0,Cf.jsxs)("span",{style:{fontSize:"10px",color:"#94a3b8",fontWeight:"600",minWidth:"35px"},children:["LEG ",n+1]}),(0,Cf.jsxs)("span",{style:{fontSize:"13px",fontWeight:"600",color:"#374151",minWidth:"100px"},children:[e.origin," \u2192 ",e.destination]}),(0,Cf.jsxs)("span",{style:{fontSize:"11px",color:"#6b7280",minWidth:"70px"},children:[null===(r=e.distance)||void 0===r?void 0:r.toLocaleString()," mi"]}),e.airline&&(0,Cf.jsx)("span",{style:{fontSize:"11px",color:"#555",background:"#fff",padding:"2px 8px",borderRadius:"6px",border:"1px solid #e5e5e5"},children:e.airline}),e.airline&&o&&(0,Cf.jsxs)("div",{style:{position:"relative"},children:[(0,Cf.jsxs)("span",{onClick:e=>{e.stopPropagation(),"Independent"!==i&&l.length>0&&Je(s?null:a)},style:{fontSize:"10px",color:o.color,background:o.background,padding:"2px 6px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"3px",fontWeight:"500",cursor:"Independent"!==i?"pointer":"default",border:s?"1px solid ".concat(o.color):"1px solid transparent"},title:"Independent"!==i?"Click to see all ".concat(i," members"):"Independent airline",children:[(0,Cf.jsx)("span",{style:{fontSize:"9px"},children:o.icon}),i,"Independent"!==i&&(0,Cf.jsx)("span",{style:{fontSize:"7px",marginLeft:"1px"},children:"\u25bc"})]}),s&&l.length>0&&(0,Cf.jsxs)("div",{style:{position:"absolute",top:"100%",left:"0",marginTop:"4px",background:"#fff",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0,0,0,0.15)",border:"1px solid ".concat(o.color,"20"),zIndex:1e3,minWidth:"220px",maxHeight:"250px",overflowY:"auto"},onClick:e=>e.stopPropagation(),children:[(0,Cf.jsx)("div",{style:{padding:"10px 14px",borderBottom:"1px solid #eee",background:o.background,borderRadius:"12px 12px 0 0",position:"sticky",top:0},children:(0,Cf.jsxs)("div",{style:{fontWeight:"600",color:o.color,fontSize:"13px"},children:[o.icon," ",i]})}),(0,Cf.jsx)("div",{style:{padding:"6px 0"},children:l.map((t,n)=>{const r=zf(e.airline,t);return(0,Cf.jsxs)("div",{style:{padding:"6px 14px",fontSize:"11px",color:"#333",display:"flex",alignItems:"center",gap:"6px",background:r?o.background:"transparent",fontWeight:r?"600":"normal"},children:[(0,Cf.jsx)("span",{style:{color:o.color},children:"\u2708"}),t,r&&(0,Cf.jsx)("span",{style:{fontSize:"9px",background:o.color,color:"#fff",padding:"2px 6px",borderRadius:"10px",marginLeft:"auto"},children:"YOUR FLIGHT"})]},n)})})]})]}),e.aircraftType&&"Unknown"!==e.aircraftType&&(0,Cf.jsx)("span",{style:{fontSize:"10px",color:"#555",background:"#f5f5f5",padding:"2px 6px",borderRadius:"6px"},children:e.aircraftType}),e.serviceClass&&(0,Cf.jsxs)("span",{style:{fontSize:"10px",color:"Economy"===e.serviceClass?"#8b6914":"Premium Economy"===e.serviceClass?"#166534":"Business"===e.serviceClass?"#1e40af":"#854d0e",background:"Economy"===e.serviceClass?"#fef3c7":"Premium Economy"===e.serviceClass?"#dcfce7":"Business"===e.serviceClass?"#dbeafe":"#fef9c3",padding:"2px 6px",borderRadius:"6px",fontWeight:"First"===e.serviceClass?"600":"normal"},children:["Economy"===e.serviceClass?"\ud83d\udc14":"Premium Economy"===e.serviceClass?"\ud83d\udcba":"Business"===e.serviceClass?"\ud83d\udcbc":"\ud83d\udc51"," ","Economy"===e.serviceClass?"Chicken":"Premium Economy"===e.serviceClass?"Prem":"Business"===e.serviceClass?"Biz":"First"]})]},n)}),(0,Cf.jsxs)("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #e5e5e5",fontSize:"11px",color:"#6b7280",display:"flex",justifyContent:"flex-end"},children:["Total: ",null===(r=t.distance)||void 0===r?void 0:r.toLocaleString()," mi"]})]})]},t.id)})})]},"".concat(e.origin,"-").concat(e.destination)))}),"country"===Le&&(0,Cf.jsx)("div",{style:{display:"grid",gap:"24px"},children:an.map(e=>{let{country:t,groups:n}=e;return(0,Cf.jsxs)("div",{children:[(0,Cf.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px",paddingBottom:"12px",borderBottom:"2px solid #fde68a"},children:[(0,Cf.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Cf.jsx)(j,{size:20,color:"#fff"})}),(0,Cf.jsxs)("div",{children:[(0,Cf.jsx)("h3",{style:{margin:0,fontSize:"18px",fontWeight:"700",color:"#1e293b"},children:t}),(0,Cf.jsxs)("p",{style:{margin:"2px 0 0 0",fontSize:"12px",color:"#64748b"},children:[n.length," route",n.length>1?"s":""," \u2022 ",n.reduce((e,t)=>e+t.flights.length,0)," flight",n.reduce((e,t)=>e+t.flights.length,0)>1?"s":""]})]})]}),(0,Cf.jsx)("div",{style:{display:"grid",gap:"16px",paddingLeft:"20px"},children:n.map(e=>(0,Cf.jsx)("div",{style:{border:"1px solid #eee",borderRadius:"12px",padding:"16px",background:"#fefce8"},children:(0,Cf.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Cf.jsxs)("div",{children:[(0,Cf.jsxs)("span",{style:{fontSize:"16px",fontWeight:"600"},children:[e.origin," \u2192 ",e.destination]}),(0,Cf.jsxs)("div",{style:{color:"#666",fontSize:"12px",marginTop:"2px"},children:[e.originCity," to ",e.destCity,e.distance&&(0,Cf.jsxs)("span",{style:{marginLeft:"8px",color:"#888"},children:["\u2022 ",e.distance.toLocaleString()," mi"]})]})]}),(0,Cf.jsxs)("span",{style:{fontSize:"11px",color:"#888",background:"#fff",padding:"4px 8px",borderRadius:"12px"},children:[e.flights.length," flight",e.flights.length>1?"s":""]})]})},"".concat(e.origin,"-").concat(e.destination)))})]},t)})}),"continent"===Le&&(0,Cf.jsx)("div",{style:{display:"grid",gap:"24px"},children:sn.map(e=>{let{continent:t,groups:n}=e;return(0,Cf.jsxs)("div",{children:[(0,Cf.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px",paddingBottom:"12px",borderBottom:"2px solid #bfdbfe"},children:[(0,Cf.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Cf.jsx)(O,{size:20,color:"#fff"})}),(0,Cf.jsxs)("div",{children:[(0,Cf.jsx)("h3",{style:{margin:0,fontSize:"18px",fontWeight:"700",color:"#1e293b"},children:t}),(0,Cf.jsxs)("p",{style:{margin:"2px 0 0 0",fontSize:"12px",color:"#64748b"},children:[n.length," route",n.length>1?"s":""," \u2022 ",n.reduce((e,t)=>e+t.flights.length,0)," flight",n.reduce((e,t)=>e+t.flights.length,0)>1?"s":""]})]})]}),(0,Cf.jsx)("div",{style:{display:"grid",gap:"16px",paddingLeft:"20px"},children:n.map(e=>(0,Cf.jsx)("div",{style:{border:"1px solid #eee",borderRadius:"12px",padding:"16px",background:"#eff6ff"},children:(0,Cf.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Cf.jsxs)("div",{children:[(0,Cf.jsxs)("span",{style:{fontSize:"16px",fontWeight:"600"},children:[e.origin," \u2192 ",e.destination]}),(0,Cf.jsxs)("div",{style:{color:"#666",fontSize:"12px",marginTop:"2px"},children:[e.originCity," to ",e.destCity,e.distance&&(0,Cf.jsxs)("span",{style:{marginLeft:"8px",color:"#888"},children:["\u2022 ",e.distance.toLocaleString()," mi"]})]}),(e.originCountry||e.destCountry)&&(0,Cf.jsxs)("div",{style:{fontSize:"11px",color:"#64748b",marginTop:"4px"},children:["\ud83c\udff3\ufe0f ",[e.originCountry,e.destCountry].filter(Boolean).filter((e,t,n)=>n.indexOf(e)===t).join(" \u2194 ")]})]}),(0,Cf.jsxs)("span",{style:{fontSize:"11px",color:"#888",background:"#fff",padding:"4px 8px",borderRadius:"12px"},children:[e.flights.length," flight",e.flights.length>1?"s":""]})]})},"".concat(e.origin,"-").concat(e.destination)))})]},t)})}),Z&&(0,Cf.jsx)("div",{style:Zf,children:(0,Cf.jsxs)("div",{style:u(u({},ep),{},{maxWidth:"450px",maxHeight:"90vh",overflowY:"auto"}),children:[(0,Cf.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,Cf.jsx)("h2",{style:{margin:0},children:Be?"Edit Flight":"Log Flight"}),(0,Cf.jsx)(y,{style:{cursor:"pointer"},onClick:()=>{ee(!1),We(null),it({origin:"",destination:"",date:"",aircraftType:"",airline:"",serviceClass:"Economy",checkLandmarks:!1,hasLayover:!1,viaAirports:[""],legAirlines:["",""],legAircraftTypes:["",""],legServiceClasses:["Economy","Economy"],paymentType:"money",paymentAmount:""}),at([]),lt(null)}})]}),He?(0,Cf.jsxs)("div",{style:{textAlign:"center",padding:"40px"},children:[(0,Cf.jsx)(w,{className:"animate-spin",size:40,style:{marginBottom:"20px"}}),(0,Cf.jsx)("div",{children:rt.checkLandmarks?"Analyzing route & landmarks...":"Saving flight..."}),(0,Cf.jsx)("div",{style:{fontSize:"12px",color:"#666",marginTop:"10px"},children:Ke})]}):(0,Cf.jsxs)("form",{onSubmit:e=>{e.preventDefault(),kt(u(u({},rt),{},{id:Be?Be.id:null}))},style:{display:"grid",gap:"15px"},children:[(0,Cf.jsxs)("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[(0,Cf.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,Cf.jsx)("input",{placeholder:"From (code or city)",required:!0,value:rt.origin,onChange:e=>{const t=e.target.value.toUpperCase();it(u(u({},rt),{},{origin:t})),at(Df(t)),lt("origin")},onFocus:()=>{at(Df(rt.origin)),lt("origin")},onBlur:()=>setTimeout(()=>{"origin"===st&&at([])},200),style:u(u({},$f),{},{width:"100%",textAlign:"center",fontWeight:"bold"})}),"origin"===st&&ot.length>0&&(0,Cf.jsx)("div",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:100,background:"#fff",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxHeight:"200px",overflowY:"auto"},children:ot.map(e=>(0,Cf.jsxs)("div",{onClick:()=>{it(u(u({},rt),{},{origin:e.code})),at([]),lt(null)},style:{padding:"10px 12px",cursor:"pointer",borderBottom:"1px solid #f0f0f0",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:e=>e.target.style.background="#f5f5f5",onMouseLeave:e=>e.target.style.background="#fff",children:[(0,Cf.jsxs)("div",{children:[(0,Cf.jsx)("span",{style:{fontWeight:"bold",color:"#333"},children:e.code}),(0,Cf.jsx)("span",{style:{color:"#666",marginLeft:"8px",fontSize:"13px"},children:e.city})]}),(0,Cf.jsx)("span",{style:{fontSize:"11px",color:"#999"},children:e.country})]},e.code))})]}),(0,Cf.jsx)("button",{type:"button",onClick:()=>{it(u(u({},rt),{},{origin:rt.destination,destination:rt.origin})),at([]),lt(null)},title:"Swap origin and destination",style:{background:"#f3f4f6",border:"1px solid #e5e7eb",borderRadius:"8px",width:"42px",height:"42px",minWidth:"42px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="#e5e7eb",e.currentTarget.style.borderColor="#d1d5db"},onMouseLeave:e=>{e.currentTarget.style.background="#f3f4f6",e.currentTarget.style.borderColor="#e5e7eb"},children:(0,Cf.jsx)(B,{size:18,color:"#6b7280"})}),(0,Cf.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,Cf.jsx)("input",{placeholder:"To (code or city)",required:!0,value:rt.destination,onChange:e=>{const t=e.target.value.toUpperCase();it(u(u({},rt),{},{destination:t})),at(Df(t)),lt("destination")},onFocus:()=>{at(Df(rt.destination)),lt("destination")},onBlur:()=>setTimeout(()=>{"destination"===st&&at([])},200),style:u(u({},$f),{},{width:"100%",textAlign:"center",fontWeight:"bold"})}),"destination"===st&&ot.length>0&&(0,Cf.jsx)("div",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:100,background:"#fff",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxHeight:"200px",overflowY:"auto"},children:ot.map(e=>(0,Cf.jsxs)("div",{onClick:()=>{it(u(u({},rt),{},{destination:e.code})),at([]),lt(null)},style:{padding:"10px 12px",cursor:"pointer",borderBottom:"1px solid #f0f0f0",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:e=>e.target.style.background="#f5f5f5",onMouseLeave:e=>e.target.style.background="#fff",children:[(0,Cf.jsxs)("div",{children:[(0,Cf.jsx)("span",{style:{fontWeight:"bold",color:"#333"},children:e.code}),(0,Cf.jsx)("span",{style:{color:"#666",marginLeft:"8px",fontSize:"13px"},children:e.city})]}),(0,Cf.jsx)("span",{style:{fontSize:"11px",color:"#999"},children:e.country})]},e.code))})]})]}),(0,Cf.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",fontSize:"14px",color:"#555",padding:"10px 12px",background:rt.hasLayover?"#f0f9ff":"#f9f9f9",borderRadius:"8px",border:rt.hasLayover?"1px solid #3b82f6":"1px solid #eee"},children:[(0,Cf.jsx)("input",{type:"checkbox",checked:rt.hasLayover,onChange:e=>{const t=e.target.checked;it(u(u({},rt),{},{hasLayover:t,viaAirports:[""],legAirlines:["",""],legAircraftTypes:["",""],legServiceClasses:["Economy","Economy"],airline:t?"":rt.airline}))},style:{width:"18px",height:"18px",cursor:"pointer"}}),(0,Cf.jsx)("span",{children:"Has connection/layover"})]}),rt.hasLayover&&(0,Cf.jsxs)("div",{style:{background:"#f8fafc",padding:"15px",borderRadius:"12px",border:"1px dashed #cbd5e1"},children:[(0,Cf.jsx)("div",{style:{fontSize:"12px",color:"#64748b",marginBottom:"12px",fontWeight:"600"},children:"CONNECTION AIRPORTS"}),rt.viaAirports.map((e,t)=>(0,Cf.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"10px",alignItems:"center"},children:[(0,Cf.jsxs)("span",{style:{fontSize:"11px",color:"#94a3b8",minWidth:"50px"},children:["Via ",t+1,":"]}),(0,Cf.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,Cf.jsx)("input",{placeholder:"Connection ".concat(t+1," (code or city)"),value:e,onChange:e=>{const n=e.target.value.toUpperCase(),r=[...rt.viaAirports];r[t]=n;const i=[...rt.legAirlines],o=[...rt.legAircraftTypes],a=[...rt.legServiceClasses];for(;i.length<r.length+1;)i.push(""),o.push(""),a.push("Economy");it(u(u({},rt),{},{viaAirports:r,legAirlines:i,legAircraftTypes:o,legServiceClasses:a})),at(Df(n)),lt("via-".concat(t))},onFocus:()=>{at(Df(e)),lt("via-".concat(t))},onBlur:()=>setTimeout(()=>{st==="via-".concat(t)&&at([])},200),style:u(u({},$f),{},{width:"100%",fontSize:"13px",padding:"10px"})}),st==="via-".concat(t)&&ot.length>0&&(0,Cf.jsx)("div",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:100,background:"#fff",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxHeight:"160px",overflowY:"auto"},children:ot.map(e=>(0,Cf.jsxs)("div",{onClick:()=>{const n=[...rt.viaAirports];n[t]=e.code,it(u(u({},rt),{},{viaAirports:n})),at([]),lt(null)},style:{padding:"8px 12px",cursor:"pointer",borderBottom:"1px solid #f0f0f0",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"13px"},onMouseEnter:e=>e.target.style.background="#f5f5f5",onMouseLeave:e=>e.target.style.background="#fff",children:[(0,Cf.jsxs)("div",{children:[(0,Cf.jsx)("span",{style:{fontWeight:"bold",color:"#333"},children:e.code}),(0,Cf.jsx)("span",{style:{color:"#666",marginLeft:"6px"},children:e.city})]}),(0,Cf.jsx)("span",{style:{fontSize:"10px",color:"#999"},children:e.country})]},e.code))})]}),rt.viaAirports.length>1&&(0,Cf.jsx)("button",{type:"button",onClick:()=>{const e=rt.viaAirports.filter((e,n)=>n!==t),n=rt.legAirlines.filter((e,n)=>n!==t+1),r=rt.legAircraftTypes.filter((e,n)=>n!==t+1),i=rt.legServiceClasses.filter((e,n)=>n!==t+1);it(u(u({},rt),{},{viaAirports:e,legAirlines:n,legAircraftTypes:r,legServiceClasses:i}))},style:{background:"#fee2e2",color:"#dc2626",border:"none",borderRadius:"6px",padding:"8px",cursor:"pointer",display:"flex",alignItems:"center"},children:(0,Cf.jsx)(_,{size:14})})]},t)),(0,Cf.jsxs)("button",{type:"button",onClick:()=>{it(u(u({},rt),{},{viaAirports:[...rt.viaAirports,""],legAirlines:[...rt.legAirlines,""],legAircraftTypes:[...rt.legAircraftTypes,""],legServiceClasses:[...rt.legServiceClasses,"Economy"]}))},style:{background:"#e0f2fe",color:"#0369a1",border:"none",borderRadius:"6px",padding:"8px 12px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"6px",marginTop:"5px"},children:[(0,Cf.jsx)(g,{size:14})," Add another connection"]})]}),rt.hasLayover?(0,Cf.jsxs)("div",{style:{background:"#fefce8",padding:"15px",borderRadius:"12px",border:"1px dashed #fde047"},children:[(0,Cf.jsx)("div",{style:{fontSize:"12px",color:"#a16207",marginBottom:"12px",fontWeight:"600"},children:"FLIGHT DETAILS PER LEG"}),(()=>{const e=rt.viaAirports.filter(e=>e.trim()),t=[rt.origin,...e,rt.destination].filter(e=>e),n=[];for(let r=0;r<t.length-1;r++)t[r]&&t[r+1]&&n.push({from:t[r],to:t[r+1],idx:r});return n.map((e,t)=>(0,Cf.jsxs)("div",{style:{marginBottom:t<n.length-1?"16px":"0",paddingBottom:t<n.length-1?"16px":"0",borderBottom:t<n.length-1?"1px dashed #fde047":"none"},children:[(0,Cf.jsxs)("div",{style:{fontSize:"12px",color:"#92400e",fontWeight:"600",marginBottom:"10px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,Cf.jsxs)("span",{style:{background:"#fbbf24",color:"#78350f",padding:"2px 8px",borderRadius:"10px",fontSize:"10px"},children:["LEG ",t+1]}),e.from," \u2192 ",e.to]}),(0,Cf.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:[(0,Cf.jsx)("input",{placeholder:"Airline",value:rt.legAirlines[t]||"",onChange:e=>{const n=[...rt.legAirlines];n[t]=e.target.value,it(u(u({},rt),{},{legAirlines:n}))},style:u(u({},$f),{},{fontSize:"13px",padding:"10px"})}),(0,Cf.jsx)("input",{placeholder:"Aircraft",value:rt.legAircraftTypes[t]||"",onChange:e=>{const n=[...rt.legAircraftTypes];n[t]=e.target.value,it(u(u({},rt),{},{legAircraftTypes:n}))},style:u(u({},$f),{},{fontSize:"13px",padding:"10px"})})]}),(0,Cf.jsx)("div",{style:{marginTop:"8px"},children:(0,Cf.jsx)("select",{value:rt.legServiceClasses[t]||"Economy",onChange:e=>{const n=[...rt.legServiceClasses];n[t]=e.target.value,it(u(u({},rt),{},{legServiceClasses:n}))},style:u(u({},$f),{},{fontSize:"13px",padding:"10px",width:"100%"}),children:jf.map(e=>(0,Cf.jsx)("option",{value:e,children:"Economy"===e?"\ud83d\udc14 Chicken class":"Premium Economy"===e?"\ud83d\udcba Premium Economy":"Business"===e?"\ud83d\udcbc Business":"\ud83d\udc51 First"},e))})})]},t))})()]}):(0,Cf.jsxs)(Cf.Fragment,{children:[(0,Cf.jsx)("input",{placeholder:"Airline (e.g. United, Delta)",value:rt.airline,onChange:e=>it(u(u({},rt),{},{airline:e.target.value})),style:$f}),(0,Cf.jsx)("input",{placeholder:"Aircraft (e.g. Boeing 737)",value:rt.aircraftType,onChange:e=>it(u(u({},rt),{},{aircraftType:e.target.value})),style:$f}),(0,Cf.jsx)("select",{value:rt.serviceClass,onChange:e=>it(u(u({},rt),{},{serviceClass:e.target.value})),style:$f,children:jf.map(e=>(0,Cf.jsx)("option",{value:e,children:"Economy"===e?"\ud83d\udc14 Chicken class":"Premium Economy"===e?"\ud83d\udcba Premium Economy":"Business"===e?"\ud83d\udcbc Business":"\ud83d\udc51 First"},e))})]}),(0,Cf.jsx)("input",{type:"date",required:!0,value:rt.date,onChange:e=>it(u(u({},rt),{},{date:e.target.value})),style:$f}),(0,Cf.jsxs)("div",{style:{background:"#fafafa",padding:"15px",borderRadius:"12px",border:"1px solid #eee"},children:[(0,Cf.jsx)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"10px",fontWeight:"600"},children:"PAYMENT (optional)"}),(0,Cf.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[(0,Cf.jsxs)("select",{value:rt.paymentType,onChange:e=>it(u(u({},rt),{},{paymentType:e.target.value})),style:u(u({},$f),{},{padding:"10px",fontSize:"13px",minWidth:"100px"}),children:[(0,Cf.jsx)("option",{value:"money",children:"\ud83d\udcb5 Money"}),(0,Cf.jsx)("option",{value:"miles",children:"\u2708\ufe0f Miles"})]}),(0,Cf.jsx)("input",{type:"number",placeholder:"money"===rt.paymentType?"Amount ($)":"Miles used",value:rt.paymentAmount,onChange:e=>it(u(u({},rt),{},{paymentAmount:e.target.value})),style:u(u({},$f),{},{flex:1,padding:"10px",fontSize:"13px"}),min:"0",step:"money"===rt.paymentType?"0.01":"1"})]})]}),(0,Cf.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",fontSize:"14px",color:"#555"},children:[(0,Cf.jsx)("input",{type:"checkbox",checked:rt.checkLandmarks,onChange:e=>it(u(u({},rt),{},{checkLandmarks:e.target.checked})),style:{width:"18px",height:"18px",cursor:"pointer"}}),(0,Cf.jsx)("span",{children:"Detect landmarks along route"})]}),(0,Cf.jsxs)("button",{type:"submit",style:{background:"#000",color:"#fff",padding:"12px",borderRadius:"8px",border:"none",fontWeight:"bold",cursor:"pointer"},children:[Be?"Update Flight":rt.checkLandmarks?"Save & Analyze":"Save Flight",rt.hasLayover&&rt.viaAirports.filter(e=>e.trim()).length>0&&(0,Cf.jsxs)("span",{style:{marginLeft:"8px",opacity:.8},children:["(",rt.viaAirports.filter(e=>e.trim()).length+1," legs)"]})]})]})]})})]}):(0,Cf.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"sans-serif",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 50%, #f0fdf4 100%)",padding:"20px"},children:[(0,Cf.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"40px"},children:[(0,Cf.jsxs)("div",{style:{width:"120px",height:"120px",borderRadius:"30px",background:"linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 20px 60px rgba(16, 185, 129, 0.4)",marginBottom:"24px",position:"relative",overflow:"hidden"},children:[(0,Cf.jsx)("div",{style:{position:"absolute",top:"-20px",left:"-20px",right:"-20px",bottom:"-20px",background:"radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 50%)"}}),(0,Cf.jsx)(p,{size:56,color:"#fff",style:{transform:"rotate(-30deg)"}})]}),(0,Cf.jsx)("h1",{style:{fontSize:"42px",fontWeight:"800",margin:"0 0 8px 0",background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"FlightLog"}),(0,Cf.jsx)("p",{style:{fontSize:"18px",color:"#64748b",margin:"0 0 8px 0",textAlign:"center"},children:"Track your journeys across the sky"}),(0,Cf.jsx)("span",{style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)",color:"#fff",fontSize:"11px",fontWeight:"700",padding:"4px 12px",borderRadius:"20px",textTransform:"uppercase",letterSpacing:"1px"},children:"Beta"})]}),(0,Cf.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"16px",marginBottom:"40px",maxWidth:"600px"},children:[{icon:"\u2708\ufe0f",text:"Log all your flights"},{icon:"\ud83c\udf0d",text:"Track countries & continents"},{icon:"\ud83d\udcca",text:"View travel statistics"},{icon:"\ud83c\udfc6",text:"Compete on leaderboards"},{icon:"\ud83c\udf31",text:"Monitor carbon footprint"},{icon:"\ud83d\udce7",text:"Import from Gmail"}].map((e,t)=>(0,Cf.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"#fff",padding:"10px 16px",borderRadius:"25px",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",fontSize:"14px",color:"#475569"},children:[(0,Cf.jsx)("span",{style:{fontSize:"16px"},children:e.icon}),e.text]},t))}),(0,Cf.jsxs)("button",{onClick:un,style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",border:"none",padding:"18px 48px",borderRadius:"16px",fontSize:"18px",fontWeight:"700",cursor:"pointer",boxShadow:"0 10px 40px rgba(16, 185, 129, 0.4)",transition:"transform 0.2s ease, box-shadow 0.2s ease",display:"flex",alignItems:"center",gap:"12px"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 14px 50px rgba(16, 185, 129, 0.5)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 10px 40px rgba(16, 185, 129, 0.4)"},children:[(0,Cf.jsx)(g,{size:22}),"Start Adding Your Flights"]}),(0,Cf.jsxs)("p",{style:{marginTop:"20px",fontSize:"14px",color:"#64748b",display:"flex",alignItems:"center",gap:"6px"},children:[(0,Cf.jsx)(m,{size:16,color:"#10b981"}),(0,Cf.jsx)("strong",{style:{color:"#10b981"},children:"100% FREE"})," to sign up and track unlimited flights"]}),(0,Cf.jsx)("button",{onClick:()=>{localStorage.setItem("landingDismissed","true"),De(!1),gt("login")},style:{background:"transparent",border:"none",color:"#6366f1",fontSize:"14px",cursor:"pointer",marginTop:"16px",textDecoration:"underline"},children:"Already have an account? Log in"}),(0,Cf.jsx)("button",{onClick:()=>{localStorage.setItem("landingDismissed","true"),De(!1)},style:{background:"transparent",border:"none",color:"#94a3b8",fontSize:"13px",cursor:"pointer",marginTop:"12px"},children:"Continue without account"}),l&&(0,Cf.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,Cf.jsxs)("div",{style:{background:"#fff",borderRadius:"16px",padding:"32px",width:"100%",maxWidth:"400px",margin:"20px",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[(0,Cf.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[(0,Cf.jsx)("h2",{style:{margin:0},children:"login"===d?"Welcome Back":"Create Free Account"}),(0,Cf.jsx)(y,{style:{cursor:"pointer"},onClick:()=>c(!1)})]}),"signup"===d&&(0,Cf.jsxs)("div",{style:{background:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"8px",padding:"12px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px",fontSize:"13px",color:"#166534"},children:[(0,Cf.jsx)(m,{size:16}),"Free forever \u2022 Unlimited flights \u2022 Full features"]}),G&&(0,Cf.jsxs)("div",{style:{background:"#fef2f2",color:"#dc2626",padding:"12px",borderRadius:"8px",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px"},children:[(0,Cf.jsx)(v,{size:18}),G]}),(0,Cf.jsxs)("form",{onSubmit:mt,children:[(0,Cf.jsx)("input",{type:"email",placeholder:"Email address",value:f,onChange:e=>H(e.target.value),required:!0,style:{width:"100%",padding:"14px",borderRadius:"10px",border:"1px solid #e2e8f0",marginBottom:"12px",fontSize:"15px",boxSizing:"border-box"}}),(0,Cf.jsxs)("div",{style:{position:"relative"},children:[(0,Cf.jsx)("input",{type:J?"text":"password",placeholder:"Password",value:q,onChange:e=>K(e.target.value),required:!0,style:{width:"100%",padding:"14px",paddingRight:"50px",borderRadius:"10px",border:"1px solid #e2e8f0",marginBottom:"20px",fontSize:"15px",boxSizing:"border-box"}}),(0,Cf.jsx)("button",{type:"button",onClick:()=>Y(!J),style:{position:"absolute",right:"14px",top:"14px",background:"none",border:"none",cursor:"pointer",color:"#666"},children:J?(0,Cf.jsx)(b,{size:20}):(0,Cf.jsx)(x,{size:20})})]}),(0,Cf.jsx)("button",{type:"submit",style:{width:"100%",padding:"14px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"#fff",border:"none",borderRadius:"10px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:"login"===d?"Log In":"Create Free Account"})]}),(0,Cf.jsxs)("p",{style:{textAlign:"center",marginTop:"20px",fontSize:"14px",color:"#666"},children:["login"===d?"Don't have an account? ":"Already have an account? ",(0,Cf.jsx)("button",{onClick:()=>h("login"===d?"signup":"login"),style:{background:"none",border:"none",color:"#10b981",cursor:"pointer",fontWeight:"600",fontSize:"14px"},children:"login"===d?"Sign up free":"Log in"})]})]})})]})};i.createRoot(document.getElementById("root")).render((0,Cf.jsx)(r.StrictMode,{children:(0,Cf.jsx)(tp,{})}))})();
//# sourceMappingURL=main.e0c30f8a.js.map